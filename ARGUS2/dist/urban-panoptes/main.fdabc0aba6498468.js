(self.webpackChunkurban_panoptes=self.webpackChunkurban_panoptes||[]).push([[179],{508:(Fr,re,Rn)=>{"use strict";function rn(n){return"function"==typeof n}function Un(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Pn=Un(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,c)=>`${c+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Qt(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class nn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const h of e)h.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(rn(r))try{r()}catch(h){t=h instanceof Pn?h.errors:[h]}const{_finalizers:c}=this;if(c){this._finalizers=null;for(const h of c)try{Ue(h)}catch(y){t=t??[],y instanceof Pn?t=[...t,...y.errors]:t.push(y)}}if(t)throw new Pn(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ue(t);else{if(t instanceof nn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Qt(e,t)}remove(t){const{_finalizers:e}=this;e&&Qt(e,t),t instanceof nn&&t._removeParent(this)}}nn.EMPTY=(()=>{const n=new nn;return n.closed=!0,n})();const Je=nn.EMPTY;function Zt(n){return n instanceof nn||n&&"closed"in n&&rn(n.remove)&&rn(n.add)&&rn(n.unsubscribe)}function Ue(n){rn(n)?n():n.unsubscribe()}const Ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},be={setTimeout(n,t,...e){const{delegate:r}=be;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=be;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function He(n){be.setTimeout(()=>{const{onUnhandledError:t}=Ie;if(!t)throw n;t(n)})}function ze(){}const ct=yt("C",void 0,void 0);function yt(n,t,e){return{kind:n,value:t,error:e}}let mn=null;function Kn(n){if(Ie.useDeprecatedSynchronousErrorHandling){const t=!mn;if(t&&(mn={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=mn;if(mn=null,e)throw r}}else n()}class po extends nn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zt(t)&&t.add(this)):this.destination=Gu}static create(t,e,r){return new Bs(t,e,r)}next(t){this.isStopped?au(function At(n){return yt("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?au(function Mt(n){return yt("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?au(ct,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xo=Function.prototype.bind;function Mc(n,t){return xo.call(n,t)}class Jc{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){ou(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){ou(r)}else ou(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ou(e)}}}class Bs extends po{constructor(t,e,r){let c;if(super(),rn(t)||!t)c={next:t??void 0,error:e??void 0,complete:r??void 0};else{let h;this&&Ie.useDeprecatedNextContext?(h=Object.create(t),h.unsubscribe=()=>this.unsubscribe(),c={next:t.next&&Mc(t.next,h),error:t.error&&Mc(t.error,h),complete:t.complete&&Mc(t.complete,h)}):c=t}this.destination=new Jc(c)}}function ou(n){Ie.useDeprecatedSynchronousErrorHandling?function $r(n){Ie.useDeprecatedSynchronousErrorHandling&&mn&&(mn.errorThrown=!0,mn.error=n)}(n):He(n)}function au(n,t){const{onStoppedNotification:e}=Ie;e&&be.setTimeout(()=>e(n,t))}const Gu={closed:!0,next:ze,error:function cm(n){throw n},complete:ze},Lh="function"==typeof Symbol&&Symbol.observable||"@@observable";function Mo(n){return n}function P_(n){return 0===n.length?Mo:1===n.length?n[0]:function(e){return n.reduce((r,c)=>c(r),e)}}let pr=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,c){const h=function k_(n){return n&&n instanceof po||function Fh(n){return n&&rn(n.next)&&rn(n.error)&&rn(n.complete)}(n)&&Zt(n)}(e)?e:new Bs(e,r,c);return Kn(()=>{const{operator:y,source:T}=this;h.add(y?y.call(h,T):T?this._subscribe(h):this._trySubscribe(h))}),h}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Oh(r))((c,h)=>{const y=new Bs({next:T=>{try{e(T)}catch(L){h(L),y.unsubscribe()}},error:h,complete:c});this.subscribe(y)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Lh](){return this}pipe(...e){return P_(e)(this)}toPromise(e){return new(e=Oh(e))((r,c)=>{let h;this.subscribe(y=>h=y,y=>c(y),()=>r(h))})}}return n.create=t=>new n(t),n})();function Oh(n){var t;return null!==(t=n??Ie.Promise)&&void 0!==t?t:Promise}const xv=Un(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ci=(()=>{class n extends pr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new L_(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new xv}next(e){Kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){Kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){Kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:c,observers:h}=this;return r||c?Je:(this.currentObservers=null,h.push(e),new nn(()=>{this.currentObservers=null,Qt(h,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:c,isStopped:h}=this;r?e.error(c):h&&e.complete()}asObservable(){const e=new pr;return e.source=this,e}}return n.create=(t,e)=>new L_(t,e),n})();class L_ extends Ci{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Je}}function Nh(n){return rn(n?.lift)}function qr(n){return t=>{if(Nh(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function mr(n,t,e,r,c){return new lm(n,t,e,r,c)}class lm extends po{constructor(t,e,r,c,h,y){super(t),this.onFinalize=h,this.shouldUnsubscribe=y,this._next=e?function(T){try{e(T)}catch(L){t.error(L)}}:super._next,this._error=c?function(T){try{c(T)}catch(L){t.error(L)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(T){t.error(T)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ri(n,t){return qr((e,r)=>{let c=0;e.subscribe(mr(r,h=>{r.next(n.call(t,h,c++))}))})}function gr(n){return this instanceof gr?(this.v=n,this):new gr(n)}function Ff(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function Tl(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(h){e[h]=n[h]&&function(y){return new Promise(function(T,L){!function c(h,y,T,L){Promise.resolve(L).then(function(z){h({value:z,done:T})},y)}(T,L,(y=n[h](y)).done,y.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const uu=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ta(n){return rn(n?.then)}function Sc(n){return rn(n[Lh])}function Uf(n){return Symbol.asyncIterator&&rn(n?.[Symbol.asyncIterator])}function Tv(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bh=function Bf(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Aa(n){return rn(n?.[Bh])}function Ec(n){return function Xr(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,r=e.apply(n,t||[]),h=[];return c={},y("next"),y("throw"),y("return"),c[Symbol.asyncIterator]=function(){return this},c;function y(pe){r[pe]&&(c[pe]=function(Te){return new Promise(function(Le,st){h.push([pe,Te,Le,st])>1||T(pe,Te)})})}function T(pe,Te){try{!function L(pe){pe.value instanceof gr?Promise.resolve(pe.value.v).then(z,X):ie(h[0][2],pe)}(r[pe](Te))}catch(Le){ie(h[0][3],Le)}}function z(pe){T("next",pe)}function X(pe){T("throw",pe)}function ie(pe,Te){pe(Te),h.shift(),h.length&&T(h[0][0],h[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:c}=yield gr(e.read());if(c)return yield gr(void 0);yield yield gr(r)}}finally{e.releaseLock()}})}function Av(n){return rn(n?.getReader)}function xs(n){if(n instanceof pr)return n;if(null!=n){if(Sc(n))return function So(n){return new pr(t=>{const e=n[Lh]();if(rn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(uu(n))return function Vf(n){return new pr(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Ta(n))return function pb(n){return new pr(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,He)})}(n);if(Uf(n))return Rv(n);if(Aa(n))return function Dv(n){return new pr(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Av(n))return function mb(n){return Rv(Ec(n))}(n)}throw Tv(n)}function Rv(n){return new pr(t=>{(function N_(n,t){var e,r,c,h;return function Cg(n,t,e,r){return new(e||(e=Promise))(function(h,y){function T(X){try{z(r.next(X))}catch(ie){y(ie)}}function L(X){try{z(r.throw(X))}catch(ie){y(ie)}}function z(X){X.done?h(X.value):function c(h){return h instanceof e?h:new e(function(y){y(h)})}(X.value).then(T,L)}z((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Ff(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(y){c={error:y}}finally{try{r&&!r.done&&(h=e.return)&&(yield h.call(e))}finally{if(c)throw c.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function ec(n,t,e,r=0,c=!1){const h=t.schedule(function(){e(),c?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(h),!c)return h}function ns(n,t,e=1/0){return rn(t)?ns((r,c)=>ri((h,y)=>t(r,h,c,y))(xs(n(r,c))),e):("number"==typeof t&&(e=t),qr((r,c)=>function hm(n,t,e,r,c,h,y,T){const L=[];let z=0,X=0,ie=!1;const pe=()=>{ie&&!L.length&&!z&&t.complete()},Te=st=>z<r?Le(st):L.push(st),Le=st=>{h&&t.next(st),z++;let kt=!1;xs(e(st,X++)).subscribe(mr(t,Kt=>{c?.(Kt),h?Te(Kt):t.next(Kt)},()=>{kt=!0},void 0,()=>{if(kt)try{for(z--;L.length&&z<r;){const Kt=L.shift();y?ec(t,y,()=>Le(Kt)):Le(Kt)}pe()}catch(Kt){t.error(Kt)}}))};return n.subscribe(mr(t,Te,()=>{ie=!0,pe()})),()=>{T?.()}}(r,c,n,e)))}function Xu(n=1/0){return ns(Mo,n)}const ua=new pr(n=>n.complete());function B_(n){return n&&rn(n.schedule)}function Tg(n){return n[n.length-1]}function zf(n){return rn(Tg(n))?n.pop():void 0}function Vh(n){return B_(Tg(n))?n.pop():void 0}function fm(n,t=0){return qr((e,r)=>{e.subscribe(mr(r,c=>ec(r,n,()=>r.next(c),t),()=>ec(r,n,()=>r.complete(),t),c=>ec(r,n,()=>r.error(c),t)))})}function Ag(n,t=0){return qr((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Ig(n,t){if(!n)throw new Error("Iterable cannot be null");return new pr(e=>{ec(e,t,()=>{const r=n[Symbol.asyncIterator]();ec(e,t,()=>{r.next().then(c=>{c.done?e.complete():e.next(c.value)})},0,!0)})})}function Ms(n,t){return t?function Hf(n,t){if(null!=n){if(Sc(n))return function z_(n,t){return xs(n).pipe(Ag(t),fm(t))}(n,t);if(uu(n))return function Rg(n,t){return new pr(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(Ta(n))return function Dg(n,t){return xs(n).pipe(Ag(t),fm(t))}(n,t);if(Uf(n))return Ig(n,t);if(Aa(n))return function H_(n,t){return new pr(e=>{let r;return ec(e,t,()=>{r=n[Bh](),ec(e,t,()=>{let c,h;try{({value:c,done:h}=r.next())}catch(y){return void e.error(y)}h?e.complete():e.next(c)},0,!0)}),()=>rn(r?.return)&&r.return()})}(n,t);if(Av(n))return function G_(n,t){return Ig(Ec(n),t)}(n,t)}throw Tv(n)}(n,t):xs(n)}function tc(...n){const t=Vh(n),e=function V_(n,t){return"number"==typeof Tg(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?xs(r[0]):Xu(e)(Ms(r,t)):ua}function Vd(n={}){const{connector:t=(()=>new Ci),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:c=!0}=n;return h=>{let y,T,L,z=0,X=!1,ie=!1;const pe=()=>{T?.unsubscribe(),T=void 0},Te=()=>{pe(),y=L=void 0,X=ie=!1},Le=()=>{const st=y;Te(),st?.unsubscribe()};return qr((st,kt)=>{z++,!ie&&!X&&pe();const Kt=L=L??t();kt.add(()=>{z--,0===z&&!ie&&!X&&(T=zh(Le,c))}),Kt.subscribe(kt),!y&&z>0&&(y=new Bs({next:Dn=>Kt.next(Dn),error:Dn=>{ie=!0,pe(),T=zh(Te,e,Dn),Kt.error(Dn)},complete:()=>{X=!0,pe(),T=zh(Te,r),Kt.complete()}}),xs(st).subscribe(y))})(h)}}function zh(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new Bs({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function Yr(n){for(let t in n)if(n[t]===Yr)return t;throw Error("Could not find renamed property on target object.")}function Pg(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function is(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(is).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function pm(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Pv=Yr({__forward_ref__:Yr});function xr(n){return n.__forward_ref__=xr,n.toString=function(){return is(this())},n}function Ti(n){return Gf(n)?n():n}function Gf(n){return"function"==typeof n&&n.hasOwnProperty(Pv)&&n.__forward_ref__===xr}function Yu(n){return n&&!!n.\u0275providers}const Dl="https://g.co/ng/security#xss";class Jt extends Error{constructor(t,e){super(Da(t,e)),this.code=t}}function Da(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function Di(n){return"string"==typeof n?n:null==n?"":String(n)}function Qc(n,t){throw new Jt(-201,!1)}function hu(n,t){null==n&&function rs(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function Tn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ov(n){return MM(n,Wf)||MM(n,SM)}function MM(n,t){return n.hasOwnProperty(t)?n[t]:null}function _m(n){return n&&(n.hasOwnProperty(bb)||n.hasOwnProperty(F1))?n[bb]:null}const Wf=Yr({\u0275prov:Yr}),bb=Yr({\u0275inj:Yr}),SM=Yr({ngInjectableDef:Yr}),F1=Yr({ngInjectorDef:Yr});var Ii=(()=>((Ii=Ii||{})[Ii.Default=0]="Default",Ii[Ii.Host=1]="Host",Ii[Ii.Self=2]="Self",Ii[Ii.SkipSelf=4]="SkipSelf",Ii[Ii.Optional=8]="Optional",Ii))();let xb;function fu(n){const t=xb;return xb=n,t}function EM(n,t,e){const r=Ov(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Ii.Optional?null:void 0!==t?t:void Qc(is(n))}const ss=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ra={},Cc="__NG_DI_FLAG__",go="ngTempTokenPath",kr="ngTokenPath",Vs=/\n/gm,Fv="\u0275",Mb="__source";let Hd;function Rl(n){const t=Hd;return Hd=n,t}function TM(n,t=Ii.Default){if(void 0===Hd)throw new Jt(-203,!1);return null===Hd?EM(n,void 0,t):Hd.get(n,t&Ii.Optional?null:void 0,t)}function ut(n,t=Ii.Default){return(function N1(){return xb}()||TM)(Ti(n),t)}function ei(n,t=Ii.Default){return ut(n,Ku(t))}function Ku(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Nv(n){const t=[];for(let e=0;e<n.length;e++){const r=Ti(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Jt(900,!1);let c,h=Ii.Default;for(let y=0;y<r.length;y++){const T=r[y],L=AM(T);"number"==typeof L?-1===L?c=T.token:h|=L:c=T}t.push(ut(c,h))}else t.push(ut(r))}return t}function kg(n,t){return n[Cc]=t,n.prototype[Cc]=t,n}function AM(n){return n[Cc]}function Tc(n){return{toString:n}.toString()}var el=(()=>((el=el||{})[el.OnPush=0]="OnPush",el[el.Default=1]="Default",el))(),tl=(()=>{return(n=tl||(tl={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",tl;var n})();const ro={},Bn=[],ji=Yr({\u0275cmp:Yr}),Sn=Yr({\u0275dir:Yr}),Wt=Yr({\u0275pipe:Yr}),er=Yr({\u0275mod:Yr}),Il=Yr({\u0275fac:Yr}),vm=Yr({__NG_ELEMENT_ID__:Yr});let ym=0;function Ri(n){return Tc(()=>{const t=$_(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===el.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||tl.Emulated,id:"c"+ym++,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null};rc(e);const r=n.dependencies;return e.directiveDefs=tr(r,!1),e.pipeDefs=tr(r,!0),e})}function Hh(n){return $i(n)||Mr(n)}function Uv(n){return null!==n}function mi(n){return Tc(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sb(n,t){if(null==n)return ro;const e={};for(const r in n)if(n.hasOwnProperty(r)){let c=n[r],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),e[c]=r,t&&(t[c]=h)}return e}function Xn(n){return Tc(()=>{const t=$_(n);return rc(t),t})}function Ia(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function $i(n){return n[ji]||null}function Mr(n){return n[Sn]||null}function _o(n){return n[Wt]||null}function Eo(n,t){const e=n[er]||null;if(!e&&!0===t)throw new Error(`Type ${is(n)} does not have '\u0275mod' property.`);return e}function $_(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sb(n.inputs,t),outputs:Sb(n.outputs)}}function rc(n){n.features?.forEach(t=>t(n))}function tr(n,t){if(!n)return null;const e=t?_o:Hh;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(Uv)}const Vi=0,Gn=1,qi=2,Zs=3,Pl=4,bm=5,fs=6,Pe=7,Re=8,jf=9,Ac=10,gi=11,Fo=12,Co=13,Ss=14,da=15,Es=16,so=17,Tr=18,Ks=19,No=20,pu=21,wr=22,Dc=1,Gd=2,Ll=7,ha=8,Js=9,Sr=10;function oo(n){return Array.isArray(n)&&"object"==typeof n[Dc]}function Zr(n){return Array.isArray(n)&&!0===n[Dc]}function Ol(n){return 0!=(4&n.flags)}function Qu(n){return n.componentOffset>-1}function Wd(n){return 1==(1&n.flags)}function fa(n){return!!n.template}function zi(n){return 0!=(256&n[qi])}function nd(n,t){return n.hasOwnProperty(Il)?n[Il]:null}class Mm{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Hr(){return q_}function q_(n){return n.type.prototype.ngOnChanges&&(n.setInput=Qs),os}function os(){const n=rl(this),t=n?.current;if(t){const e=n.previous;if(e===ro)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Qs(n,t,e,r){const c=this.declaredInputs[e],h=rl(n)||function Ul(n,t){return n[vo]=t}(n,{previous:ro,current:null}),y=h.current||(h.current={}),T=h.previous,L=T[c];y[c]=new Mm(L&&L.currentValue,t,T===ro),n[r]=t}Hr.ngInherit=!0;const vo="__ngSimpleChanges__";function rl(n){return n[vo]||null}const ta=function(n,t,e){},Gh="svg";function cr(n){for(;Array.isArray(n);)n=n[Vi];return n}function yo(n,t){return cr(t[n])}function Cs(n,t){return cr(t[n.index])}function jd(n,t){return n.data[t]}function na(n,t){return n[t]}function gs(n,t){const e=t[n];return oo(e)?e:e[Vi]}function Yn(n){return 64==(64&n[qi])}function Gr(n,t){return null==t?null:n[t]}function ia(n){n[Tr]=0}function sl(n,t){n[bm]+=t;let e=n,r=n[Zs];for(;null!==r&&(1===t&&1===e[bm]||-1===t&&0===e[bm]);)r[bm]+=t,e=r,r=r[Zs]}const fi={lFrame:Na(null),bindingsEnabled:!0};function Hs(){return fi.bindingsEnabled}function Mn(){return fi.lFrame.lView}function lr(){return fi.lFrame.tView}function Oa(n){return fi.lFrame.contextLView=n,n[Re]}function oc(n){return fi.lFrame.contextLView=null,n}function Gs(){let n=oi();for(;null!==n&&64===n.type;)n=n.parent;return n}function oi(){return fi.lFrame.currentTNode}function rd(n,t){const e=fi.lFrame;e.currentTNode=n,e.isParent=t}function ra(){return fi.lFrame.isParent}function Fa(){fi.lFrame.isParent=!1}function _r(){const n=fi.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function sa(){return fi.lFrame.bindingIndex++}function eo(n){const t=fi.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function zl(n,t){const e=fi.lFrame;e.bindingIndex=e.bindingRootIndex=n,Hl(t)}function Hl(n){fi.lFrame.currentDirectiveIndex=n}function $d(){return fi.lFrame.currentQueryIndex}function gu(n){fi.lFrame.currentQueryIndex=n}function sd(n){const t=n[Gn];return 2===t.type?t.declTNode:1===t.type?n[fs]:null}function qd(n,t,e){if(e&Ii.SkipSelf){let c=t,h=n;for(;!(c=c.parent,null!==c||e&Ii.Host||(c=sd(h),null===c||(h=h[da],10&c.type))););if(null===c)return!1;t=c,n=h}const r=fi.lFrame=al();return r.currentTNode=t,r.lView=n,!0}function Zf(n){const t=al(),e=n[Gn];fi.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function al(){const n=fi.lFrame,t=null===n?null:n.child;return null===t?Na(n):t}function Na(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function jh(){const n=fi.lFrame;return fi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const _s=jh;function ac(){const n=jh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function As(){return fi.lFrame.selectedIndex}function as(n){fi.lFrame.selectedIndex=n}function vr(){const n=fi.lFrame;return jd(n.tView,n.selectedIndex)}function Kf(){fi.lFrame.currentNamespace=Gh}function Ug(){!function Cb(){fi.lFrame.currentNamespace=null}()}function ao(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const h=n.data[e].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:T,ngAfterViewInit:L,ngAfterViewChecked:z,ngOnDestroy:X}=h;y&&(n.contentHooks??(n.contentHooks=[])).push(-e,y),T&&((n.contentHooks??(n.contentHooks=[])).push(e,T),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(e,T)),L&&(n.viewHooks??(n.viewHooks=[])).push(-e,L),z&&((n.viewHooks??(n.viewHooks=[])).push(e,z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(e,z)),null!=X&&(n.destroyHooks??(n.destroyHooks=[])).push(e,X)}}function Ds(n,t,e){Em(n,t,3,e)}function cc(n,t,e,r){(3&n[qi])===e&&Em(n,t,e,r)}function Xd(n,t){let e=n[qi];(3&e)===t&&(e&=2047,e+=1,n[qi]=e)}function Em(n,t,e,r){const h=r??-1,y=t.length-1;let T=0;for(let L=void 0!==r?65535&n[Tr]:0;L<y;L++)if("number"==typeof t[L+1]){if(T=t[L],null!=r&&T>=r)break}else t[L]<0&&(n[Tr]+=65536),(T<h||-1==h)&&(Bg(n,e,t,L),n[Tr]=(4294901760&n[Tr])+L+2),L++}function Bg(n,t,e,r){const c=e[r]<0,h=e[r+1],T=n[c?-e[r]:e[r]];if(c){if(n[qi]>>11<n[Tr]>>16&&(3&n[qi])===t){n[qi]+=2048,ta(4,T,h);try{h.call(T)}finally{ta(5,T,h)}}}else{ta(4,T,h);try{h.call(T)}finally{ta(5,T,h)}}}const $h=-1;class Jf{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Cm(n,t,e){let r=0;for(;r<e.length;){const c=e[r];if("number"==typeof c){if(0!==c)break;r++;const h=e[r++],y=e[r++],T=e[r++];n.setAttribute(t,y,T,h)}else{const h=c,y=e[++r];Ab(h)?n.setProperty(t,h,y):n.setAttribute(t,h,y),r++}}return r}function Tb(n){return 3===n||4===n||6===n}function Ab(n){return 64===n.charCodeAt(0)}function zg(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const c=t[r];"number"==typeof c?e=c:0===e||Db(n,e,c,null,-1===e||2===e?t[++r]:null)}}return n}function Db(n,t,e,r,c){let h=0,y=n.length;if(-1===t)y=-1;else for(;h<n.length;){const T=n[h++];if("number"==typeof T){if(T===t){y=-1;break}if(T>t){y=h-1;break}}}for(;h<n.length;){const T=n[h];if("number"==typeof T)break;if(T===e){if(null===r)return void(null!==c&&(n[h+1]=c));if(r===n[h+1])return void(n[h+2]=c)}h++,null!==r&&h++,null!==c&&h++}-1!==y&&(n.splice(y,0,t),h=y+1),n.splice(h++,0,e),null!==r&&n.splice(h++,0,r),null!==c&&n.splice(h++,0,c)}function Rb(n){return n!==$h}function J_(n){return 32767&n}function Q_(n,t){let e=function LM(n){return n>>16}(n),r=t;for(;e>0;)r=r[da],e--;return r}let Vv=!0;function e0(n){const t=Vv;return Vv=n,t}const Ib=255,Pb=5;let OM=0;const ad={};function t0(n,t){const e=kb(n,t);if(-1!==e)return e;const r=t[Gn];r.firstCreatePass&&(n.injectorIndex=t.length,zv(r.data,n),zv(t,null),zv(r.blueprint,null));const c=Hv(n,t),h=n.injectorIndex;if(Rb(c)){const y=J_(c),T=Q_(c,t),L=T[Gn].data;for(let z=0;z<8;z++)t[h+z]=T[y+z]|L[y+z]}return t[h+8]=c,h}function zv(n,t){n.push(0,0,0,0,0,0,0,0,t)}function kb(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Hv(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,c=t;for(;null!==c;){if(r=vu(c),null===r)return $h;if(e++,c=c[da],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return $h}function n0(n,t,e){!function FM(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(vm)&&(r=e[vm]),null==r&&(r=e[vm]=OM++);const c=r&Ib;t.data[n+(c>>Pb)]|=1<<c}(n,t,e)}function Lb(n,t,e){if(e&Ii.Optional||void 0!==n)return n;Qc()}function Ob(n,t,e,r){if(e&Ii.Optional&&void 0===r&&(r=null),!(e&(Ii.Self|Ii.Host))){const c=n[jf],h=fu(void 0);try{return c?c.get(t,r,e&Ii.Optional):EM(t,r,e&Ii.Optional)}finally{fu(h)}}return Lb(r,0,e)}function Fb(n,t,e,r=Ii.Default,c){if(null!==n){if(1024&t[qi]){const y=function zM(n,t,e,r,c){let h=n,y=t;for(;null!==h&&null!==y&&1024&y[qi]&&!(256&y[qi]);){const T=Nb(h,y,e,r|Ii.Self,ad);if(T!==ad)return T;let L=h.parent;if(!L){const z=y[pu];if(z){const X=z.get(e,ad,r);if(X!==ad)return X}L=vu(y),y=y[da]}h=L}return c}(n,t,e,r,ad);if(y!==ad)return y}const h=Nb(n,t,e,r,ad);if(h!==ad)return h}return Ob(t,e,r,c)}function Nb(n,t,e,r,c){const h=function BM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(vm)?n[vm]:void 0;return"number"==typeof t?t>=0?t&Ib:VM:t}(e);if("function"==typeof h){if(!qd(t,n,r))return r&Ii.Host?Lb(c,0,r):Ob(t,e,r,c);try{const y=h(r);if(null!=y||r&Ii.Optional)return y;Qc()}finally{_s()}}else if("number"==typeof h){let y=null,T=kb(n,t),L=$h,z=r&Ii.Host?t[Es][fs]:null;for((-1===T||r&Ii.SkipSelf)&&(L=-1===T?Hv(n,t):t[T+8],L!==$h&&Bb(r,!1)?(y=t[Gn],T=J_(L),t=Q_(L,t)):T=-1);-1!==T;){const X=t[Gn];if(Ub(h,T,X.data)){const ie=UM(T,t,e,y,r,z);if(ie!==ad)return ie}L=t[T+8],L!==$h&&Bb(r,t[Gn].data[T+8]===z)&&Ub(h,T,t)?(y=X,T=J_(L),t=Q_(L,t)):T=-1}}return c}function UM(n,t,e,r,c,h){const y=t[Gn],T=y.data[n+8],X=r0(T,y,e,null==r?Qu(T)&&Vv:r!=y&&0!=(3&T.type),c&Ii.Host&&h===T);return null!==X?tp(t,y,X,T):ad}function r0(n,t,e,r,c){const h=n.providerIndexes,y=t.data,T=1048575&h,L=n.directiveStart,X=h>>20,pe=c?T+X:n.directiveEnd;for(let Te=r?T:T+X;Te<pe;Te++){const Le=y[Te];if(Te<L&&e===Le||Te>=L&&Le.type===e)return Te}if(c){const Te=y[L];if(Te&&fa(Te)&&Te.type===e)return L}return null}function tp(n,t,e,r){let c=n[e];const h=t.data;if(function PM(n){return n instanceof Jf}(c)){const y=c;y.resolving&&function kv(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Pr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Di(n)}(h[e]));const T=e0(y.canSeeViewProviders);y.resolving=!0;const L=y.injectImpl?fu(y.injectImpl):null;qd(n,r,Ii.Default);try{c=n[e]=y.factory(void 0,h,n,r),t.firstCreatePass&&e>=r.directiveStart&&function _u(n,t,e){const{ngOnChanges:r,ngOnInit:c,ngDoCheck:h}=t.type.prototype;if(r){const y=q_(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(n,y),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,y)}c&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-n,c),h&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n,h),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,h))}(e,h[e],t)}finally{null!==L&&fu(L),e0(T),y.resolving=!1,_s()}}return c}function Ub(n,t,e){return!!(e[t+(n>>Pb)]&1<<n)}function Bb(n,t){return!(n&Ii.Self||n&Ii.Host&&t)}class Tm{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return Fb(this._tNode,this._lView,t,Ku(r),e)}}function VM(){return new Tm(Gs(),Mn())}function co(n){return Tc(()=>{const t=n.prototype.constructor,e=t[Il]||Gv(t),r=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==r;){const h=c[Il]||Gv(c);if(h&&h!==e)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Gv(n){return Gf(n)?()=>{const t=Gv(Ti(n));return t&&t()}:nd(n)}function vu(n){const t=n[Gn],e=t.type;return 2===e?t.declTNode:1===e?n[fs]:null}function Zd(n){return function NM(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let c=0;for(;c<r;){const h=e[c];if(Tb(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<r&&"string"==typeof e[c];)c++;else{if(h===t)return e[c+1];c+=2}}}return null}(Gs(),n)}const Ic="__parameters__";function Dm(n,t,e){return Tc(()=>{const r=function Hg(n){return function(...e){if(n){const r=n(...e);for(const c in r)this[c]=r[c]}}}(t);function c(...h){if(this instanceof c)return r.apply(this,h),this;const y=new c(...h);return T.annotation=y,T;function T(L,z,X){const ie=L.hasOwnProperty(Ic)?L[Ic]:Object.defineProperty(L,Ic,{value:[]})[Ic];for(;ie.length<=X;)ie.push(null);return(ie[X]=ie[X]||[]).push(y),L}}return e&&(c.prototype=Object.create(e.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class jt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Tn({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ld(n,t){n.forEach(e=>Array.isArray(e)?ld(e,t):t(e))}function Wb(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Gl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Im(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function ll(n,t,e){let r=Pm(n,t);return r>=0?n[1|r]=e:(r=~r,function jM(n,t,e,r){let c=n.length;if(c==t)n.push(e,r);else if(1===c)n.push(r,n[0]),n[0]=e;else{for(c--,n.push(n[c-1],n[c]);c>t;)n[c]=n[c-2],c--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function jv(n,t){const e=Pm(n,t);if(e>=0)return n[1|e]}function Pm(n,t){return function qb(n,t,e){let r=0,c=n.length>>e;for(;c!==r;){const h=r+(c-r>>1),y=n[h<<e];if(t===y)return h<<e;y>t?c=h:r=h+1}return~(c<<e)}(n,t,1)}const ip=kg(Dm("Inject",n=>({token:n})),-1),Wl=kg(Dm("Optional"),8),rp=kg(Dm("SkipSelf"),4);var lo=(()=>((lo=lo||{})[lo.Important=1]="Important",lo[lo.DashCase=2]="DashCase",lo))();const Qb=new Map;let NE=0;const u0="__ngContext__";function pa(n,t){oo(t)?(n[u0]=t[No],function un(n){Qb.set(n[No],n)}(t)):n[u0]=t}let h0;function f0(n,t){return h0(n,t)}function Zh(n){const t=n[Zs];return Zr(t)?t[Zs]:t}function Fm(n){return p0(n[Co])}function yu(n){return p0(n[Pl])}function p0(n){for(;null!==n&&!Zr(n);)n=n[Pl];return n}function cp(n,t,e,r,c){if(null!=r){let h,y=!1;Zr(r)?h=r:oo(r)&&(y=!0,r=r[Vi]);const T=cr(r);0===n&&null!==e?null==c?Nm(t,e,T):cs(t,e,T,c||null,!0):1===n&&null!==e?cs(t,e,T,c||null,!0):2===n?function g0(n,t,e){const r=iy(n,t);r&&function cw(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,T,y):3===n&&t.destroyNode(T),null!=h&&function hd(n,t,e,r,c){const h=e[Ll];h!==cr(e)&&cp(t,n,r,h,c);for(let T=Sr;T<e.length;T++){const L=e[T];fp(L[Gn],L,n,t,r,h)}}(t,n,h,e,c)}}function Qv(n,t,e){return n.createElement(t,e)}function ey(n,t){const e=n[Js],r=e.indexOf(t),c=t[Zs];512&t[qi]&&(t[qi]&=-513,sl(c,-1)),e.splice(r,1)}function Yg(n,t){if(n.length<=Sr)return;const e=Sr+t,r=n[e];if(r){const c=r[so];null!==c&&c!==n&&ey(c,r),t>0&&(n[e-1][Pl]=r[Pl]);const h=Gl(n,Sr+t);!function Kr(n,t){fp(n,t,t[gi],2,null,null),t[Vi]=null,t[fs]=null}(r[Gn],r);const y=h[Ks];null!==y&&y.detachView(h[Gn]),r[Zs]=null,r[Pl]=null,r[qi]&=-65}return r}function Cn(n,t){if(!(128&t[qi])){const e=t[gi];e.destroyNode&&fp(n,t,e,3,null,null),function lp(n){let t=n[Co];if(!t)return Zg(n[Gn],n);for(;t;){let e=null;if(oo(t))e=t[Co];else{const r=t[Sr];r&&(e=r)}if(!e){for(;t&&!t[Pl]&&t!==n;)oo(t)&&Zg(t[Gn],t),t=t[Zs];null===t&&(t=n),oo(t)&&Zg(t[Gn],t),e=t&&t[Pl]}t=e}}(t)}}function Zg(n,t){if(!(128&t[qi])){t[qi]&=-65,t[qi]|=128,function up(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const c=t[e[r]];if(!(c instanceof Jf)){const h=e[r+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const T=c[h[y]],L=h[y+1];ta(4,T,L);try{L.call(T)}finally{ta(5,T,L)}}else{ta(4,c,h);try{h.call(c)}finally{ta(5,c,h)}}}}}(n,t),function ty(n,t){const e=n.cleanup,r=t[Pe];let c=-1;if(null!==e)for(let h=0;h<e.length-1;h+=2)if("string"==typeof e[h]){const y=e[h+3];y>=0?r[c=y]():r[c=-y].unsubscribe(),h+=2}else{const y=r[c=e[h+1]];e[h].call(y)}if(null!==r){for(let h=c+1;h<r.length;h++)(0,r[h])();t[Pe]=null}}(n,t),1===t[Gn].type&&t[gi].destroy();const e=t[so];if(null!==e&&Zr(t[Zs])){e!==t[Zs]&&ey(e,t);const r=t[Ks];null!==r&&r.detachView(n)}!function Pc(n){Qb.delete(n[No])}(t)}}function Jr(n,t,e){return function ir(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Vi];{const{componentOffset:c}=r;if(c>-1){const{encapsulation:h}=n.data[r.directiveStart+c];if(h===tl.None||h===tl.Emulated)return null}return Cs(r,e)}}(n,t.parent,e)}function cs(n,t,e,r,c){n.insertBefore(t,e,r,c)}function Nm(n,t,e){n.appendChild(t,e)}function Ba(n,t,e,r,c){null!==r?cs(n,t,e,r,c):Nm(n,t,e)}function iy(n,t){return n.parentNode(t)}function rx(n,t,e){return dp(n,t,e)}let Kh,th,ax,dp=function sx(n,t,e){return 40&n.type?Cs(n,e):null};function Kg(n,t,e,r){const c=Jr(n,r,t),h=t[gi],T=rx(r.parent||t[fs],r,t);if(null!=c)if(Array.isArray(e))for(let L=0;L<e.length;L++)Ba(h,c,e[L],T,!1);else Ba(h,c,e,T,!1);void 0!==Kh&&Kh(h,r,t,e,c)}function Jg(n,t){if(null!==t){const e=t.type;if(3&e)return Cs(t,n);if(4&e)return m0(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return Jg(n,r);{const c=n[t.index];return Zr(c)?m0(-1,c):cr(c)}}if(32&e)return f0(t,n)()||cr(n[t.index]);{const r=ry(n,t);return null!==r?Array.isArray(r)?r[0]:Jg(Zh(n[Es]),r):Jg(n,t.next)}}return null}function ry(n,t){return null!==t?n[Es][fs].projection[t.projection]:null}function m0(n,t){const e=Sr+n+1;if(e<t.length){const r=t[e],c=r[Gn].firstChild;if(null!==c)return Jg(r,c)}return t[Ll]}function _0(n,t,e,r,c,h,y){for(;null!=e;){const T=r[e.index],L=e.type;if(y&&0===t&&(T&&pa(cr(T),r),e.flags|=2),32!=(32&e.flags))if(8&L)_0(n,t,e.child,r,c,h,!1),cp(t,n,c,T,h);else if(32&L){const z=f0(e,r);let X;for(;X=z();)cp(t,n,c,X,h);cp(t,n,c,T,h)}else 16&L?v0(n,t,r,e,c,h):cp(t,n,c,T,h);e=y?e.projectionNext:e.next}}function fp(n,t,e,r,c,h){_0(e,r,n.firstChild,t,c,h,!1)}function v0(n,t,e,r,c,h){const y=e[Es],L=y[fs].projection[r.projection];if(Array.isArray(L))for(let z=0;z<L.length;z++)cp(t,n,c,L[z],h);else _0(n,t,L,y[Zs],c,h,!0)}function dc(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function pp(n,t,e){const{mergedAttrs:r,classes:c,styles:h}=e;null!==r&&Cm(n,t,r),null!==c&&dc(n,t,c),null!==h&&function ox(n,t,e){n.setAttribute(t,"style",e)}(n,t,h)}function Va(n){return function Qg(){if(void 0===th&&(th=null,ss.trustedTypes))try{th=ss.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return th}()?.createHTML(n)||n}class za{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dl})`}}class pd extends za{getTypeName(){return"HTML"}}class hc extends za{getTypeName(){return"Style"}}class ma extends za{getTypeName(){return"Script"}}class Bm extends za{getTypeName(){return"URL"}}class x0 extends za{getTypeName(){return"ResourceURL"}}function ca(n){return n instanceof za?n.changingThisBreaksApplicationSecurity:n}function Ha(n,t){const e=function M0(n){return n instanceof za&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Dl})`)}return e===t}class gp{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Va(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class ii{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Va(t),e}}const Ar=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dr(n){return(n=String(n)).match(Ar)?n:"unsafe:"+n}function Xi(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Lc(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const vs=Xi("area,br,col,hr,img,wbr"),fc=Xi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qh=Xi("rp,rt"),lx=Lc(vs,Lc(fc,Xi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Lc(Qh,Xi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lc(Qh,fc)),ux=Xi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dx=Lc(ux,Xi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ul=Xi("script,style,template");class dl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let c=this.checkClobberedElement(e,e.nextSibling);if(c){e=c;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!lx.hasOwnProperty(e))return this.sanitizedSomething=!0,!ul.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let c=0;c<r.length;c++){const h=r.item(c),y=h.name,T=y.toLowerCase();if(!dx.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let L=h.value;ux[T]&&(L=Dr(L)),this.buf.push(" ",y,'="',ef(L),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();lx.hasOwnProperty(e)&&!vs.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ef(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_p=/([^\#-~ |!])/g;function ef(n){return n.replace(/&/g,"&amp;").replace(hl,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_p,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ga;function pc(n,t){let e=null;try{Ga=Ga||function Jh(n){const t=new ii(n);return function ui(){try{return!!(new window.DOMParser).parseFromString(Va(""),"text/html")}catch{return!1}}()?new gp(t):t}(n);let r=t?String(t):"";e=Ga.getInertBodyElement(r);let c=5,h=r;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,r=h,h=e.innerHTML,e=Ga.getInertBodyElement(r)}while(r!==h);return Va((new dl).sanitizeChildren(xu(e)||e))}finally{if(e){const r=xu(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function xu(n){return"content"in n&&function Oc(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var yr=(()=>((yr=yr||{})[yr.NONE=0]="NONE",yr[yr.HTML=1]="HTML",yr[yr.STYLE=2]="STYLE",yr[yr.SCRIPT=3]="SCRIPT",yr[yr.URL=4]="URL",yr[yr.RESOURCE_URL=5]="RESOURCE_URL",yr))();const md=new jt("ENVIRONMENT_INITIALIZER"),zm=new jt("INJECTOR",-1),D0=new jt("INJECTOR_DEF_TYPES");class rh{get(t,e=Ra){if(e===Ra){const r=new Error(`NullInjectorError: No provider for ${is(t)}!`);throw r.name="NullInjectorError",r}return e}}function R0(...n){return{\u0275providers:Hm(0,n),\u0275fromNgModule:!0}}function Hm(n,...t){const e=[],r=new Set;let c;return ld(t,h=>{const y=h;I0(y,e,[],r)&&(c||(c=[]),c.push(y))}),void 0!==c&&dy(c,e),e}function dy(n,t){for(let e=0;e<n.length;e++){const{providers:c}=n[e];hy(c,h=>{t.push(h)})}}function I0(n,t,e,r){if(!(n=Ti(n)))return!1;let c=null,h=_m(n);const y=!h&&$i(n);if(h||y){if(y&&!y.standalone)return!1;c=n}else{const L=n.ngModule;if(h=_m(L),!h)return!1;c=L}const T=r.has(c);if(y){if(T)return!1;if(r.add(c),y.dependencies){const L="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const z of L)I0(z,t,e,r)}}else{if(!h)return!1;{if(null!=h.imports&&!T){let z;r.add(c);try{ld(h.imports,X=>{I0(X,t,e,r)&&(z||(z=[]),z.push(X))})}finally{}void 0!==z&&dy(z,t)}if(!T){const z=nd(c)||(()=>new c);t.push({provide:c,useFactory:z,deps:Bn},{provide:D0,useValue:c,multi:!0},{provide:md,useValue:()=>ut(c),multi:!0})}const L=h.providers;null==L||T||hy(L,X=>{t.push(X)})}}return c!==n&&void 0!==n.providers}function hy(n,t){for(let e of n)Yu(e)&&(e=e.\u0275providers),Array.isArray(e)?hy(e,t):t(e)}const r_=Yr({provide:String,useValue:Yr});function Mu(n){return null!==n&&"object"==typeof n&&r_ in n}function Wa(n){return"function"==typeof n}const Ho=new jt("Set Injector scope."),ks={},nf={};let Go;function ga(){return void 0===Go&&(Go=new rh),Go}class Wo{}class fl extends Wo{get destroyed(){return this._destroyed}constructor(t,e,r,c){super(),this.parent=e,this.source=r,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oh(t,y=>this.processProvider(y)),this.records.set(zm,pl(void 0,this)),c.has("environment")&&this.records.set(Wo,pl(void 0,this));const h=this.records.get(Ho);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(D0.multi,Bn,Ii.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Rl(this),r=fu(void 0);try{return t()}finally{Rl(e),fu(r)}}get(t,e=Ra,r=Ii.Default){this.assertNotDestroyed(),r=Ku(r);const c=Rl(this),h=fu(void 0);try{if(!(r&Ii.SkipSelf)){let T=this.records.get(t);if(void 0===T){const L=function o_(n){return"function"==typeof n||"object"==typeof n&&n instanceof jt}(t)&&Ov(t);T=L&&this.injectableDefInScope(L)?pl(Fc(t),ks):null,this.records.set(t,T)}if(null!=T)return this.hydrate(t,T)}return(r&Ii.Self?ga():this.parent).get(t,e=r&Ii.Optional&&e===Ra?null:e)}catch(y){if("NullInjectorError"===y.name){if((y[go]=y[go]||[]).unshift(is(t)),c)throw y;return function DM(n,t,e,r){const c=n[go];throw t[Mb]&&c.unshift(t[Mb]),n.message=function j_(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Fv?n.slice(2):n;let c=is(t);if(Array.isArray(t))c=t.map(is).join(" -> ");else if("object"==typeof t){let h=[];for(let y in t)if(t.hasOwnProperty(y)){let T=t[y];h.push(y+":"+("string"==typeof T?JSON.stringify(T):is(T)))}c=`{${h.join(", ")}}`}return`${e}${r?"("+r+")":""}[${c}]: ${n.replace(Vs,"\n  ")}`}("\n"+n.message,c,e,r),n[kr]=c,n[go]=null,n}(y,t,"R3InjectorError",this.source)}throw y}finally{fu(h),Rl(c)}}resolveInjectorInitializers(){const t=Rl(this),e=fu(void 0);try{const r=this.get(md.multi,Bn,Ii.Self);for(const c of r)c()}finally{Rl(t),fu(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(is(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processProvider(t){let e=Wa(t=Ti(t))?t:Ti(t&&t.provide);const r=function bp(n){return Mu(n)?pl(void 0,n.useValue):pl(sh(n),ks)}(t);if(Wa(t)||!0!==t.multi)this.records.get(e);else{let c=this.records.get(e);c||(c=pl(void 0,ks,!0),c.factory=()=>Nv(c.multi),this.records.set(e,c)),e=t,c.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===ks&&(e.value=nf,e.value=e.factory()),"object"==typeof e.value&&e.value&&function P0(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Ti(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Fc(n){const t=Ov(n),e=null!==t?t.factory:nd(n);if(null!==e)return e;if(n instanceof jt)throw new Jt(204,!1);if(n instanceof Function)return function wu(n){const t=n.length;if(t>0)throw Im(t,"?"),new Jt(204,!1);const e=function wM(n){return n&&(n[Wf]||n[SM])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Jt(204,!1)}function sh(n,t,e){let r;if(Wa(n)){const c=Ti(n);return nd(c)||Fc(c)}if(Mu(n))r=()=>Ti(n.useValue);else if(function gd(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Nv(n.deps||[]));else if(function yp(n){return!(!n||!n.useExisting)}(n))r=()=>ut(Ti(n.useExisting));else{const c=Ti(n&&(n.useClass||n.provide));if(!function xp(n){return!!n.deps}(n))return nd(c)||Fc(c);r=()=>new c(...Nv(n.deps))}return r}function pl(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function oh(n,t){for(const e of n)Array.isArray(e)?oh(e,t):e&&Yu(e)?oh(e.\u0275providers,t):t(e)}class Gm{}class a_{}class px{resolveComponentFactory(t){throw function ah(n){const t=Error(`No component factory found for ${is(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Nc=(()=>{class n{}return n.NULL=new px,n})();function Mp(){return wp(Gs(),Mn())}function wp(n,t){return new Li(Cs(n,t))}let Li=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=Mp,n})();function rf(n){return n instanceof Li?n.nativeElement:n}class _a{}let ml=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function sf(){const n=Mn(),e=gs(Gs().index,n);return(oo(e)?e:n)[gi]}(),n})(),jm=(()=>{class n{}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:()=>null}),n})();class gl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const k0=new gl("15.2.10"),_d={},jl="ngOriginalError";function ch(n){return n[jl]}class Uc{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&ch(t);for(;e&&ch(e);)e=ch(e);return e||null}}function _l(n){return n instanceof Function?n():n}function c_(n,t,e){let r=n.length;for(;;){const c=n.indexOf(t,e);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const h=t.length;if(c+h===r||n.charCodeAt(c+h)<=32)return c}e=c+1}}const va="ng-template";function O0(n,t,e){let r=0,c=!0;for(;r<n.length;){let h=n[r++];if("string"==typeof h&&c){const y=n[r++];if(e&&"class"===h&&-1!==c_(y.toLowerCase(),t,0))return!0}else{if(1===h){for(;r<n.length&&"string"==typeof(h=n[r++]);)if(h.toLowerCase()===t)return!0;return!1}"number"==typeof h&&(c=!1)}}return!1}function Ep(n){return 4===n.type&&n.value!==va}function vd(n,t,e){return t===(4!==n.type||e?n.value:va)}function Eu(n,t,e){let r=4;const c=n.attrs||[],h=function pw(n){for(let t=0;t<n.length;t++)if(Tb(n[t]))return t;return n.length}(c);let y=!1;for(let T=0;T<t.length;T++){const L=t[T];if("number"!=typeof L){if(!y)if(4&r){if(r=2|1&r,""!==L&&!vd(n,L,e)||""===L&&1===t.length){if(bl(r))return!1;y=!0}}else{const z=8&r?L:t[++T];if(8&r&&null!==n.attrs){if(!O0(n.attrs,z,e)){if(bl(r))return!1;y=!0}continue}const ie=_x(8&r?"class":L,c,Ep(n),e);if(-1===ie){if(bl(r))return!1;y=!0;continue}if(""!==z){let pe;pe=ie>h?"":c[ie+1].toLowerCase();const Te=8&r?pe:null;if(Te&&-1!==c_(Te,z,0)||2&r&&z!==pe){if(bl(r))return!1;y=!0}}}}else{if(!y&&!bl(r)&&!bl(L))return!1;if(y&&bl(L))continue;y=!1,r=L|1&r}}return bl(r)||y}function bl(n){return 0==(1&n)}function _x(n,t,e,r){if(null===t)return-1;let c=0;if(r||!e){let h=!1;for(;c<t.length;){const y=t[c];if(y===n)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let T=t[++c];for(;"string"==typeof T;)T=t[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function Q1(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function fw(n,t,e=!1){for(let r=0;r<t.length;r++)if(Eu(n,t[r],e))return!0;return!1}function yd(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let c=0;c<n.length;c++)if(n[c]!==r[c])continue e;return!0}}return!1}function Ro(n,t){return n?":not("+t.trim()+")":t}function l_(n){let t=n[0],e=1,r=2,c="",h=!1;for(;e<n.length;){let y=n[e];if("string"==typeof y)if(2&r){const T=n[++e];c+="["+y+(T.length>0?'="'+T+'"':"")+"]"}else 8&r?c+="."+y:4&r&&(c+=" "+y);else""!==c&&!bl(y)&&(t+=Ro(h,c),c=""),r=y,h=h||!bl(r);e++}return""!==c&&(t+=Ro(h,c)),t}const Pi={};function zn(n){Xm(lr(),Mn(),As()+n,!1)}function Xm(n,t,e,r){if(!r)if(3==(3&t[qi])){const h=n.preOrderCheckHooks;null!==h&&Ds(t,h,e)}else{const h=n.preOrderHooks;null!==h&&cc(t,h,0,e)}as(e)}function Mx(n,t=null,e=null,r){const c=Cp(n,t,e,r);return c.resolveInjectorInitializers(),c}function Cp(n,t=null,e=null,r,c=new Set){const h=[e||Bn,R0(n)];return r=r||("object"==typeof n?void 0:is(n)),new fl(h,t||ga(),r||null,c)}let js=(()=>{class n{static create(e,r){if(Array.isArray(e))return Mx({name:""},r,e,"");{const c=e.name??"";return Mx({name:c},e.parent,e.providers,c)}}}return n.THROW_IF_NOT_FOUND=Ra,n.NULL=new rh,n.\u0275prov=Tn({token:n,providedIn:"any",factory:()=>ut(zm)}),n.__NG_ELEMENT_ID__=-1,n})();function Be(n,t=Ii.Default){const e=Mn();return null===e?ut(n,t):Fb(Gs(),e,Ti(n),t)}function Ip(){throw new Error("invalid")}function Ex(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const h=e[r+1];if(-1!==h){const y=n.data[h];gu(e[r]),y.contentQueries(2,t[h],h)}}}function ng(n,t,e,r,c,h,y,T,L,z,X){const ie=t.blueprint.slice();return ie[Vi]=c,ie[qi]=76|r,(null!==X||n&&1024&n[qi])&&(ie[qi]|=1024),ia(ie),ie[Zs]=ie[da]=n,ie[Re]=e,ie[Ac]=y||n&&n[Ac],ie[gi]=T||n&&n[gi],ie[Fo]=L||n&&n[Fo]||null,ie[jf]=z||n&&n[jf]||null,ie[fs]=h,ie[No]=function Ki(){return NE++}(),ie[pu]=X,ie[Es]=2==t.type?n[Es]:ie,ie}function pf(n,t,e,r,c){let h=n.data[t];if(null===h)h=function Du(n,t,e,r,c){const h=oi(),y=ra(),L=n.data[t]=function Op(n,t,e,r,c,h){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,e,t,r,c);return null===n.firstChild&&(n.firstChild=L),null!==h&&(y?null==h.child&&null!==L.parent&&(h.child=L):null===h.next&&(h.next=L,L.prev=h)),L}(n,t,e,r,c),function Fg(){return fi.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=e,h.value=r,h.attrs=c;const y=function Jn(){const n=fi.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return rd(h,!0),h}function Ru(n,t,e,r){if(0===e)return-1;const c=t.length;for(let h=0;h<e;h++)t.push(r),n.blueprint.push(r),n.data.push(null);return c}function Ls(n,t,e){Zf(t);try{const r=n.viewQuery;null!==r&&Sy(1,r,e);const c=n.template;null!==c&&ig(n,t,c,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ex(n,t),n.staticViewQueries&&Sy(2,n.viewQuery,e);const h=n.components;null!==h&&function yw(n,t){for(let e=0;e<t.length;e++)$o(n,t[e])}(t,h)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[qi]&=-5,ac()}}function ls(n,t,e,r){const c=t[qi];if(128!=(128&c)){Zf(t);try{ia(t),function nr(n){return fi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&ig(n,t,e,2,r);const y=3==(3&c);if(y){const z=n.preOrderCheckHooks;null!==z&&Ds(t,z,null)}else{const z=n.preOrderHooks;null!==z&&cc(t,z,0,null),Xd(t,0)}if(function Dx(n){for(let t=Fm(n);null!==t;t=yu(t)){if(!t[Gd])continue;const e=t[Js];for(let r=0;r<e.length;r++){const c=e[r];512&c[qi]||sl(c[Zs],1),c[qi]|=512}}}(t),function wy(n){for(let t=Fm(n);null!==t;t=yu(t))for(let e=Sr;e<t.length;e++){const r=t[e],c=r[Gn];Yn(r)&&ls(c,r,c.template,r[Re])}}(t),null!==n.contentQueries&&Ex(n,t),y){const z=n.contentCheckHooks;null!==z&&Ds(t,z)}else{const z=n.contentHooks;null!==z&&cc(t,z,1),Xd(t,1)}!function _w(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const c=e[r];if(c<0)as(~c);else{const h=c,y=e[++r],T=e[++r];zl(y,h),T(2,t[h])}}}finally{as(-1)}}(n,t);const T=n.components;null!==T&&function vw(n,t){for(let e=0;e<t.length;e++)Rx(n,t[e])}(t,T);const L=n.viewQuery;if(null!==L&&Sy(2,L,r),y){const z=n.viewCheckHooks;null!==z&&Ds(t,z)}else{const z=n.viewHooks;null!==z&&cc(t,z,2),Xd(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[qi]&=-41,512&t[qi]&&(t[qi]&=-513,sl(t[Zs],-1))}finally{ac()}}}function ig(n,t,e,r,c){const h=As(),y=2&r;try{as(-1),y&&t.length>wr&&Xm(n,t,wr,!1),ta(y?2:0,c),e(r,c)}finally{as(h),ta(y?3:1,c)}}function Pp(n,t,e){if(Ol(t)){const c=t.directiveEnd;for(let h=t.directiveStart;h<c;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,e[h],h)}}}function dh(n,t,e){Hs()&&(function sg(n,t,e,r){const c=e.directiveStart,h=e.directiveEnd;Qu(e)&&function Io(n,t,e){const r=Cs(t,n),c=mf(e),h=n[Ac],y=Vp(n,ng(n,c,null,e.onPush?32:16,r,t,h,h.createRenderer(r,e),null,null,null));n[t.index]=y}(t,e,n.data[c+e.componentOffset]),n.firstCreatePass||t0(e,t),pa(r,t);const y=e.initialInputs;for(let T=c;T<h;T++){const L=n.data[T],z=tp(t,n,T,e);pa(z,t),null!==y&&Tx(0,T-c,z,L,0,y),fa(L)&&(gs(e.index,t)[Re]=tp(t,n,T,e))}}(n,t,e,Cs(e,t)),64==(64&e.flags)&&fh(n,t,e))}function rg(n,t,e=Cs){const r=t.localNames;if(null!==r){let c=t.index+1;for(let h=0;h<r.length;h+=2){const y=r[h+1],T=-1===y?e(t,n):n[y];n[c++]=T}}}function mf(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=kp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function kp(n,t,e,r,c,h,y,T,L,z){const X=wr+r,ie=X+c,pe=function Cx(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Pi);return e}(X,ie),Te="function"==typeof z?z():z;return pe[Gn]={type:n,blueprint:pe,template:e,queries:null,viewQuery:T,declTNode:t,data:pe.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:L,consts:Te,incompleteFirstPass:!1}}function Lp(n,t,e,r){const c=f_(t);null===e?c.push(r):(c.push(e),n.firstCreatePass&&og(n).push(r,c.length-1))}function h_(n,t,e,r){for(let c in n)if(n.hasOwnProperty(c)){e=null===e?{}:e;const h=n[c];null===r?Iu(e,t,c,h):r.hasOwnProperty(c)&&Iu(e,t,r[c],h)}return e}function Iu(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function la(n,t,e,r,c,h,y,T){const L=Cs(t,e);let X,z=t.inputs;!T&&null!=z&&(X=z[r])?(ja(n,e,X,r,c),Qu(t)&&function ya(n,t){const e=gs(t,n);16&e[qi]||(e[qi]|=32)}(e,t.index)):3&t.type&&(r=function by(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),c=null!=y?y(c,t.value||"",r):c,h.setProperty(L,r,c))}function wd(n,t,e,r){if(Hs()){const c=null===r?null:{"":-1},h=function Up(n,t){const e=n.directiveRegistry;let r=null,c=null;if(e)for(let h=0;h<e.length;h++){const y=e[h];if(fw(t,y.selectors,!1))if(r||(r=[]),fa(y))if(null!==y.findHostDirectiveDefs){const T=[];c=c||new Map,y.findHostDirectiveDefs(y,T,c),r.unshift(...T,y),ph(n,t,T.length)}else r.unshift(y),ph(n,t,0);else c=c||new Map,y.findHostDirectiveDefs?.(y,r,c),r.push(y)}return null===r?null:[r,c]}(n,e);let y,T;null===h?y=T=null:[y,T]=h,null!==y&&hh(n,t,e,y,c,T),c&&function Bp(n,t,e){if(t){const r=n.localNames=[];for(let c=0;c<t.length;c+=2){const h=e[t[c+1]];if(null==h)throw new Jt(-301,!1);r.push(t[c],h)}}}(e,r,c)}e.mergedAttrs=zg(e.mergedAttrs,e.attrs)}function hh(n,t,e,r,c,h){for(let z=0;z<r.length;z++)n0(t0(e,t),n,r[z].type);!function V0(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let z=0;z<r.length;z++){const X=r[z];X.providersResolver&&X.providersResolver(X)}let y=!1,T=!1,L=Ru(n,t,r.length,null);for(let z=0;z<r.length;z++){const X=r[z];e.mergedAttrs=zg(e.mergedAttrs,X.hostAttrs),ba(n,e,t,L,X),B0(L,X,c),null!==X.contentQueries&&(e.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(e.flags|=64);const ie=X.type.prototype;!y&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e.index),y=!0),!T&&(ie.ngOnChanges||ie.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e.index),T=!0),L++}!function Md(n,t,e){const c=t.directiveEnd,h=n.data,y=t.attrs,T=[];let L=null,z=null;for(let X=t.directiveStart;X<c;X++){const ie=h[X],pe=e?e.get(ie):null,Le=pe?pe.outputs:null;L=h_(ie.inputs,X,L,pe?pe.inputs:null),z=h_(ie.outputs,X,z,Le);const st=null===L||null===y||Ep(t)?null:Ax(L,X,y);T.push(st)}null!==L&&(L.hasOwnProperty("class")&&(t.flags|=8),L.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=T,t.inputs=L,t.outputs=z}(n,e,h)}function fh(n,t,e){const r=e.directiveStart,c=e.directiveEnd,h=e.index,y=function ol(){return fi.lFrame.currentDirectiveIndex}();try{as(h);for(let T=r;T<c;T++){const L=n.data[T],z=t[T];Hl(T),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Np(L,z)}}finally{as(-1),Hl(y)}}function Np(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function ph(n,t,e){t.componentOffset=e,(n.components??(n.components=[])).push(t.index)}function B0(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;fa(t)&&(e[""]=n)}}function ba(n,t,e,r,c){n.data[r]=c;const h=c.factory||(c.factory=nd(c.type)),y=new Jf(h,fa(c),Be);n.blueprint[r]=y,e[r]=y,function Fp(n,t,e,r,c){const h=c.hostBindings;if(h){let y=n.hostBindingOpCodes;null===y&&(y=n.hostBindingOpCodes=[]);const T=~t.index;(function xy(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(y)!=T&&y.push(T),y.push(e,r,h)}}(n,t,r,Ru(n,e,c.hostVars,Pi),c)}function jo(n,t,e,r,c,h){const y=Cs(n,t);!function z0(n,t,e,r,c,h,y){if(null==h)n.removeAttribute(t,c,e);else{const T=null==y?Di(h):y(h,r||"",c);n.setAttribute(t,c,T,e)}}(t[gi],y,h,n.value,e,r,c)}function Tx(n,t,e,r,c,h){const y=h[t];if(null!==y){const T=r.setInput;for(let L=0;L<y.length;){const z=y[L++],X=y[L++],ie=y[L++];null!==T?r.setInput(e,ie,z,X):e[X]=ie}}}function Ax(n,t,e){let r=null,c=0;for(;c<e.length;){const h=e[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(n.hasOwnProperty(h)){null===r&&(r=[]);const y=n[h];for(let T=0;T<y.length;T+=2)if(y[T]===t){r.push(h,y[T+1],e[c+1]);break}}c+=2}else c+=2;else c+=4}return r}function My(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function Rx(n,t){const e=gs(t,n);if(Yn(e)){const r=e[Gn];48&e[qi]?ls(r,e,r.template,e[Re]):e[bm]>0&&Hc(e)}}function Hc(n){for(let r=Fm(n);null!==r;r=yu(r))for(let c=Sr;c<r.length;c++){const h=r[c];if(Yn(h))if(512&h[qi]){const y=h[Gn];ls(y,h,y.template,h[Re])}else h[bm]>0&&Hc(h)}const e=n[Gn].components;if(null!==e)for(let r=0;r<e.length;r++){const c=gs(e[r],n);Yn(c)&&c[bm]>0&&Hc(c)}}function $o(n,t){const e=gs(t,n),r=e[Gn];(function mh(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Ls(r,e,e[Re])}function Vp(n,t){return n[Co]?n[Ss][Pl]=t:n[Co]=t,n[Ss]=t,t}function zp(n){for(;n;){n[qi]|=32;const t=Zh(n);if(zi(n)&&!t)return n;n=t}return null}function gf(n,t,e,r=!0){const c=t[Ac];c.begin&&c.begin();try{ls(n,t,n.template,e)}catch(y){throw r&&G0(t,y),y}finally{c.end&&c.end()}}function Sy(n,t,e){gu(0),t(n,e)}function f_(n){return n[Pe]||(n[Pe]=[])}function og(n){return n.cleanup||(n.cleanup=[])}function G0(n,t){const e=n[jf],r=e?e.get(Uc,null):null;r&&r.handleError(t)}function ja(n,t,e,r,c){for(let h=0;h<e.length;){const y=e[h++],T=e[h++],L=t[y],z=n.data[y];null!==z.setInput?z.setInput(L,c,r,T):L[T]=c}}function Pu(n,t,e){let r=e?n.styles:null,c=e?n.classes:null,h=0;if(null!==t)for(let y=0;y<t.length;y++){const T=t[y];"number"==typeof T?h=T:1==h?c=pm(c,T):2==h&&(r=pm(r,T+": "+t[++y]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=c:n.classesWithoutHost=c}function gh(n,t,e,r,c=!1){for(;null!==e;){const h=t[e.index];if(null!==h&&r.push(cr(h)),Zr(h))for(let T=Sr;T<h.length;T++){const L=h[T],z=L[Gn].firstChild;null!==z&&gh(L[Gn],L,z,r)}const y=e.type;if(8&y)gh(n,t,e.child,r);else if(32&y){const T=f0(e,t);let L;for(;L=T();)r.push(L)}else if(16&y){const T=ry(t,e);if(Array.isArray(T))r.push(...T);else{const L=Zh(t[Es]);gh(L[Gn],L,T,r,!0)}}e=c?e.projectionNext:e.next}return r}class _h{get rootNodes(){const t=this._lView,e=t[Gn];return gh(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Re]}set context(t){this._lView[Re]=t}get destroyed(){return 128==(128&this._lView[qi])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Zs];if(Zr(t)){const e=t[ha],r=e?e.indexOf(this):-1;r>-1&&(Yg(t,r),Gl(e,r))}this._attachedToViewContainer=!1}Cn(this._lView[Gn],this._lView)}onDestroy(t){Lp(this._lView[Gn],this._lView,null,t)}markForCheck(){zp(this._cdRefInjectingView||this._lView)}detach(){this._lView[qi]&=-65}reattach(){this._lView[qi]|=64}detectChanges(){gf(this._lView[Gn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tx(n,t){fp(n,t,t[gi],2,null,null)}(this._lView[Gn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Jt(902,!1);this._appRef=t}}class ku extends _h{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;gf(t[Gn],t,t[Re],!1)}checkNoChanges(){}get context(){return null}}class gc extends Nc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=$i(t);return new ag(e,this.ngModule)}}function Lu(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class W0{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Ku(r);const c=this.injector.get(t,_d,r);return c!==_d||e===_d?c:this.parentInjector.get(t,e,r)}}class ag extends a_{get inputs(){return Lu(this.componentDef.inputs)}get outputs(){return Lu(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function py(n){return n.map(l_).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,c){let h=(c=c||this.ngModule)instanceof Wo?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new W0(t,h):t,T=y.get(_a,null);if(null===T)throw new Jt(407,!1);const L=y.get(jm,null),z=T.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ie=r?function yy(n,t,e){return n.selectRootElement(t,e===tl.ShadowDom)}(z,r,this.componentDef.encapsulation):Qv(z,X,function vh(n){const t=n.toLowerCase();return"svg"===t?Gh:"math"===t?"math":null}(X)),pe=this.componentDef.onPush?288:272,Te=kp(0,null,null,1,0,null,null,null,null,null),Le=ng(null,Te,null,pe,null,null,T,z,L,y,null);let st,kt;Zf(Le);try{const Kt=this.componentDef;let Dn,ln=null;Kt.findHostDirectiveDefs?(Dn=[],ln=new Map,Kt.findHostDirectiveDefs(Kt,Dn,ln),Dn.push(Kt)):Dn=[Kt];const ni=function j0(n,t){const e=n[Gn],r=wr;return n[r]=t,pf(e,r,2,"#host",null)}(Le,ie),zr=function Gc(n,t,e,r,c,h,y,T){const L=c[Gn];!function yh(n,t,e,r){for(const c of n)t.mergedAttrs=zg(t.mergedAttrs,c.hostAttrs);null!==t.mergedAttrs&&(Pu(t,t.mergedAttrs,!0),null!==e&&pp(r,e,t))}(r,n,t,y);const z=h.createRenderer(t,e),X=ng(c,mf(e),null,e.onPush?32:16,c[n.index],n,h,z,T||null,null,null);return L.firstCreatePass&&ph(L,n,r.length-1),Vp(c,X),c[n.index]=X}(ni,ie,Kt,Dn,Le,T,z);kt=jd(Te,wr),ie&&function Xl(n,t,e,r){if(r)Cm(n,e,["ng-version",k0.full]);else{const{attrs:c,classes:h}=function qm(n){const t=[],e=[];let r=1,c=2;for(;r<n.length;){let h=n[r];if("string"==typeof h)2===c?""!==h&&t.push(h,n[++r]):8===c&&e.push(h);else{if(!bl(c))break;c=h}r++}return{attrs:t,classes:e}}(t.selectors[0]);c&&Cm(n,e,c),h&&h.length>0&&dc(n,e,h.join(" "))}}(z,Kt,ie,r),void 0!==e&&function Sd(n,t,e){const r=n.projection=[];for(let c=0;c<t.length;c++){const h=e[c];r.push(null!=h?Array.from(h):null)}}(kt,this.ngContentSelectors,e),st=function ql(n,t,e,r,c,h){const y=Gs(),T=c[Gn],L=Cs(y,c);hh(T,c,y,e,null,r);for(let X=0;X<e.length;X++)pa(tp(c,T,y.directiveStart+X,y),c);fh(T,c,y),L&&pa(L,c);const z=tp(c,T,y.directiveStart+y.componentOffset,y);if(n[Re]=c[Re]=z,null!==h)for(const X of h)X(z,t);return Pp(T,y,n),z}(zr,Kt,Dn,ln,Le,[xw]),Ls(Te,Le,null)}finally{ac()}return new _f(this.componentType,st,wp(kt,Le),Le,kt)}}class _f extends Gm{constructor(t,e,r,c,h){super(),this.location=r,this._rootLView=c,this._tNode=h,this.instance=e,this.hostView=this.changeDetectorRef=new ku(c),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let c;if(null!==r&&(c=r[t])){const h=this._rootLView;ja(h[Gn],h,c,t,e),zp(gs(this._tNode.index,h))}}get injector(){return new Tm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xw(){const n=Gs();ao(Mn()[Gn],n)}function ci(n){let t=function cg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let c;if(fa(n))c=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Jt(903,!1);c=t.\u0275dir}if(c){if(e){r.push(c);const y=n;y.inputs=bi(n.inputs),y.declaredInputs=bi(n.declaredInputs),y.outputs=bi(n.outputs);const T=c.hostBindings;T&&$s(n,T);const L=c.viewQuery,z=c.contentQueries;if(L&&Ou(n,L),z&&ur(n,z),Pg(n.inputs,c.inputs),Pg(n.declaredInputs,c.declaredInputs),Pg(n.outputs,c.outputs),fa(c)&&c.data.animation){const X=n.data;X.animation=(X.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const T=h[y];T&&T.ngInherit&&T(n),T===ci&&(e=!1)}}t=Object.getPrototypeOf(t)}!function Mw(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const c=n[r];c.hostVars=t+=c.hostVars,c.hostAttrs=zg(c.hostAttrs,e=zg(e,c.hostAttrs))}}(r)}function bi(n){return n===ro?{}:n===Bn?[]:n}function Ou(n,t){const e=n.viewQuery;n.viewQuery=e?(r,c)=>{t(r,c),e(r,c)}:t}function ur(n,t){const e=n.contentQueries;n.contentQueries=e?(r,c,h)=>{t(r,c,h),e(r,c,h)}:t}function $s(n,t){const e=n.hostBindings;n.hostBindings=e?(r,c)=>{t(r,c),e(r,c)}:t}function Ey(n){return!!lg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function lg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qs(n,t,e){return n[t]=e}function uo(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function di(n,t,e,r){const c=Mn();return uo(c,sa(),t)&&(lr(),jo(vr(),c,n,t,e,r)),di}function Oi(n,t,e,r,c,h,y,T){const L=Mn(),z=lr(),X=n+wr,ie=z.firstCreatePass?function X0(n,t,e,r,c,h,y,T,L){const z=t.consts,X=pf(t,n,4,y||null,Gr(z,T));wd(t,e,X,Gr(z,L)),ao(t,X);const ie=X.tView=kp(2,X,r,c,h,t.directiveRegistry,t.pipeRegistry,null,t.schemas,z);return null!==t.queries&&(t.queries.template(t,X),ie.queries=t.queries.embeddedTView(X)),X}(X,z,L,t,e,r,c,h,y):z.data[X];rd(ie,!1);const pe=L[gi].createComment("");Kg(z,L,pe,ie),pa(pe,L),Vp(L,L[X]=My(pe,L,pe,ie)),Wd(ie)&&dh(z,L,ie),null!=y&&rg(L,ie,T)}function Ml(n){return na(function Vl(){return fi.lFrame.contextLView}(),wr+n)}function Vn(n,t,e){const r=Mn();return uo(r,sa(),t)&&la(lr(),vr(),r,n,t,r[gi],e,!1),Vn}function Kl(n,t,e,r,c){const y=c?"class":"style";ja(n,e,t.inputs[y],y,r)}function on(n,t,e,r){const c=Mn(),h=lr(),y=wr+n,T=c[gi],L=h.firstCreatePass?function Ty(n,t,e,r,c,h){const y=t.consts,L=pf(t,n,2,r,Gr(y,c));return wd(t,e,L,Gr(y,h)),null!==L.attrs&&Pu(L,L.attrs,!1),null!==L.mergedAttrs&&Pu(L,L.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,L),L}(y,h,c,t,e,r):h.data[y],z=c[y]=Qv(T,t,function od(){return fi.lFrame.currentNamespace}()),X=Wd(L);return rd(L,!0),pp(T,z,L),32!=(32&L.flags)&&Kg(h,c,z,L),0===function Ts(){return fi.lFrame.elementDepthCount}()&&pa(z,c),function zs(){fi.lFrame.elementDepthCount++}(),X&&(dh(h,c,L),Pp(h,L,c)),null!==r&&rg(c,L),on}function gn(){let n=Gs();ra()?Fa():(n=n.parent,rd(n,!1));const t=n;!function Zi(){fi.lFrame.elementDepthCount--}();const e=lr();return e.firstCreatePass&&(ao(e,n),Ol(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function ep(n){return 0!=(8&n.flags)}(t)&&Kl(e,t,Mn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function K_(n){return 0!=(16&n.flags)}(t)&&Kl(e,t,Mn(),t.stylesWithoutHost,!1),gn}function $n(n,t,e,r){return on(n,t,e,r),gn(),$n}function Jl(n,t,e){const r=Mn(),c=lr(),h=n+wr,y=c.firstCreatePass?function _c(n,t,e,r,c){const h=t.consts,y=Gr(h,r),T=pf(t,n,8,"ng-container",y);return null!==y&&Pu(T,y,!0),wd(t,e,T,Gr(h,c)),null!==t.queries&&t.queries.elementStart(t,T),T}(h,c,r,t,e):c.data[h];rd(y,!0);const T=r[h]=r[gi].createComment("");return Kg(c,r,T,y),pa(T,r),Wd(y)&&(dh(c,r,y),Pp(c,y,r)),null!=e&&rg(r,y),Jl}function g_(){let n=Gs();const t=lr();return ra()?Fa():(n=n.parent,rd(n,!1)),t.firstCreatePass&&(ao(t,n),Ol(n)&&t.queries.elementEnd(n)),g_}function ug(n,t,e){return Jl(n,t,e),g_(),ug}function wl(){return Mn()}function Sh(n){return!!n&&"function"==typeof n.then}function Eh(n){return!!n&&"function"==typeof n.subscribe}const Uu=Eh;function Ei(n,t,e,r){const c=Mn(),h=lr(),y=Gs();return function Ay(n,t,e,r,c,h,y){const T=Wd(r),z=n.firstCreatePass&&og(n),X=t[Re],ie=f_(t);let pe=!0;if(3&r.type||y){const st=Cs(r,t),kt=y?y(st):st,Kt=ie.length,Dn=y?ni=>y(cr(ni[r.index])):r.index;let ln=null;if(!y&&T&&(ln=function Rs(n,t,e,r){const c=n.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===e&&c[h+1]===r){const T=t[Pe],L=c[h+2];return T.length>L?T[L]:null}"string"==typeof y&&(h+=2)}return null}(n,t,c,r.index)),null!==ln)(ln.__ngLastListenerFn__||ln).__ngNextListenerFn__=h,ln.__ngLastListenerFn__=h,pe=!1;else{h=Ry(r,t,X,h,!1);const ni=e.listen(kt,c,h);ie.push(h,ni),z&&z.push(c,Dn,Kt,Kt+1)}}else h=Ry(r,t,X,h,!1);const Te=r.outputs;let Le;if(pe&&null!==Te&&(Le=Te[c])){const st=Le.length;if(st)for(let kt=0;kt<st;kt+=2){const zr=t[Le[kt]][Le[kt+1]].subscribe(h),Ps=ie.length;ie.push(h,zr),z&&z.push(c,r.index,Ps,-(Ps+1))}}}(h,c,c[gi],y,n,t,r),Ei}function Dy(n,t,e,r){try{return ta(6,t,e),!1!==e(r)}catch(c){return G0(n,c),!1}finally{ta(7,t,e)}}function Ry(n,t,e,r,c){return function h(y){if(y===Function)return r;zp(n.componentOffset>-1?gs(n.index,t):t);let L=Dy(t,e,r,y),z=h.__ngNextListenerFn__;for(;z;)L=Dy(t,e,z,y)&&L,z=z.__ngNextListenerFn__;return c&&!1===L&&(y.preventDefault(),y.returnValue=!1),L}}function ps(n=1){return function Ng(n){return(fi.lFrame.contextLView=function cl(n,t){for(;n>0;)t=t[da],n--;return t}(n,fi.lFrame.contextLView))[Re]}(n)}function kx(n,t){let e=null;const r=function vx(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let c=0;c<t.length;c++){const h=t[c];if("*"!==h){if(null===r?fw(n,h,!0):yd(r,h))return c}else e=c}return e}function es(n){const t=Mn()[Es][fs];if(!t.projection){const r=t.projection=Im(n?n.length:1,null),c=r.slice();let h=t.child;for(;null!==h;){const y=n?kx(h,n):0;null!==y&&(c[y]?c[y].projectionNext=h:r[y]=h,c[y]=h),h=h.next}}}function Rr(n,t=0,e){const r=Mn(),c=lr(),h=pf(c,wr+n,16,null,e||null);null===h.projection&&(h.projection=t),Fa(),32!=(32&h.flags)&&function sy(n,t,e){v0(t[gi],0,t,e,Jr(n,e,t),rx(e.parent||t[fs],e,t))}(c,r,h)}function Th(n,t){return n<<17|t<<2}function Dd(n){return n>>17&32767}function Wc(n){return 2|n}function Is(n){return(131068&n)>>2}function Xo(n,t){return-131069&n|t<<2}function jc(n){return 1|n}function Sw(n,t,e,r,c){const h=n[e+1],y=null===t;let T=r?Dd(h):Is(h),L=!1;for(;0!==T&&(!1===L||y);){const X=n[T+1];Ew(n[T],t)&&(L=!0,n[T+1]=r?jc(X):Wc(X)),T=r?Dd(X):Is(X)}L&&(n[e+1]=r?Wc(h):jc(h))}function Ew(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Pm(n,t)>=0}const Yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pg(n){return n.substring(Yo.key,Yo.keyEnd)}function K0(n,t){const e=Yo.textEnd;return e===t?-1:(t=Yo.keyEnd=function x_(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Yo.key=t,e),Wr(n,t,e))}function Wr(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Bu(n,t,e){return eu(n,t,e,!1),Bu}function Ir(n,t){return eu(n,t,null,!0),Ir}function Bx(n){!function Vu(n,t,e,r){const c=lr(),h=eo(2);c.firstUpdatePass&&Tw(c,null,h,r);const y=Mn();if(e!==Pi&&uo(y,h,e)){const T=c.data[As()];if(l(T,r)&&!Vx(c,h)){let L=r?T.classesWithoutHost:T.stylesWithoutHost;null!==L&&(e=pm(L,e||"")),Kl(c,T,y,e,r)}else!function Ly(n,t,e,r,c,h,y,T){c===Pi&&(c=Bn);let L=0,z=0,X=0<c.length?c[0]:null,ie=0<h.length?h[0]:null;for(;null!==X||null!==ie;){const pe=L<c.length?c[L+1]:void 0,Te=z<h.length?h[z+1]:void 0;let st,Le=null;X===ie?(L+=2,z+=2,pe!==Te&&(Le=ie,st=Te)):null===ie||null!==X&&X<ie?(L+=2,Le=X):(z+=2,Le=ie,st=Te),null!==Le&&Aw(n,t,e,r,Le,st,y,T),X=L<c.length?c[L]:null,ie=z<h.length?h[z]:null}}(c,T,y,y[gi],y[h+1],y[h+1]=function sS(n,t,e){if(null==e||""===e)return Bn;const r=[],c=ca(e);if(Array.isArray(c))for(let h=0;h<c.length;h++)n(r,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&n(r,h,c[h]);else"string"==typeof c&&t(r,c);return r}(n,t,e),r,h)}}(ky,Rd,n,!0)}function Rd(n,t){for(let e=function Iy(n){return function to(n){Yo.key=0,Yo.keyEnd=0,Yo.value=0,Yo.valueEnd=0,Yo.textEnd=n.length}(n),K0(n,Wr(n,0,Yo.textEnd))}(t);e>=0;e=K0(t,e))ll(n,pg(t),!0)}function eu(n,t,e,r){const c=Mn(),h=lr(),y=eo(2);h.firstUpdatePass&&Tw(h,n,y,r),t!==Pi&&uo(c,y,t)&&Aw(h,h.data[As()],c,c[gi],n,c[y+1]=function s(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=is(ca(n)))),n}(t,e),r,y)}function Vx(n,t){return t>=n.expandoStartIndex}function Tw(n,t,e,r){const c=n.data;if(null===c[e+1]){const h=c[As()],y=Vx(n,e);l(h,r)&&null===t&&!y&&(t=!1),t=function nS(n,t,e,r){const c=function mu(n){const t=fi.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let h=r?t.residualClasses:t.residualStyles;if(null===c)0===(r?t.classBindings:t.styleBindings)&&(e=M_(e=Hx(null,n,t,e,r),t.attrs,r),h=null);else{const y=t.directiveStylingLast;if(-1===y||n[y]!==c)if(e=Hx(c,n,t,e,r),null===h){let L=function zx(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Is(r))return n[Dd(r)]}(n,t,r);void 0!==L&&Array.isArray(L)&&(L=Hx(null,n,t,L[1],r),L=M_(L,t.attrs,r),function iS(n,t,e,r){n[Dd(e?t.classBindings:t.styleBindings)]=r}(n,t,r,L))}else h=function rS(n,t,e){let r;const c=t.directiveEnd;for(let h=1+t.directiveStylingLast;h<c;h++)r=M_(r,n[h].hostAttrs,e);return M_(r,t.attrs,e)}(n,t,r)}return void 0!==h&&(r?t.residualClasses=h:t.residualStyles=h),e}(c,h,t,r),function Z0(n,t,e,r,c,h){let y=h?t.classBindings:t.styleBindings,T=Dd(y),L=Is(y);n[r]=e;let X,z=!1;if(Array.isArray(e)?(X=e[1],(null===X||Pm(e,X)>0)&&(z=!0)):X=e,c)if(0!==L){const pe=Dd(n[T+1]);n[r+1]=Th(pe,T),0!==pe&&(n[pe+1]=Xo(n[pe+1],r)),n[T+1]=function Sf(n,t){return 131071&n|t<<17}(n[T+1],r)}else n[r+1]=Th(T,0),0!==T&&(n[T+1]=Xo(n[T+1],r)),T=r;else n[r+1]=Th(L,0),0===T?T=r:n[L+1]=Xo(n[L+1],r),L=r;z&&(n[r+1]=Wc(n[r+1])),Sw(n,X,r,!0),Sw(n,X,r,!1),function Fx(n,t,e,r,c){const h=c?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof t&&Pm(h,t)>=0&&(e[r+1]=jc(e[r+1]))}(t,X,n,r,h),y=Th(T,L),h?t.classBindings=y:t.styleBindings=y}(c,h,t,e,y,r)}}function Hx(n,t,e,r,c){let h=null;const y=e.directiveEnd;let T=e.directiveStylingLast;for(-1===T?T=e.directiveStart:T++;T<y&&(h=t[T],r=M_(r,h.hostAttrs,c),h!==n);)T++;return null!==n&&(e.directiveStylingLast=T),r}function M_(n,t,e){const r=e?1:2;let c=-1;if(null!==t)for(let h=0;h<t.length;h++){const y=t[h];"number"==typeof y?c=y:c===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ll(n,y,!!e||t[++h]))}return void 0===n?null:n}function ky(n,t,e){const r=String(t);""!==r&&!r.includes(" ")&&ll(n,r,e)}function Aw(n,t,e,r,c,h,y,T){if(!(3&t.type))return;const L=n.data,z=L[T+1],X=function vc(n){return 1==(1&n)}(z)?Oy(L,t,e,c,Is(z),y):void 0;S(X)||(S(h)||function Y0(n){return 2==(2&n)}(z)&&(h=Oy(L,null,e,c,T,y)),function y0(n,t,e,r,c){if(t)c?n.addClass(e,r):n.removeClass(e,r);else{let h=-1===r.indexOf("-")?void 0:lo.DashCase;null==c?n.removeStyle(e,r,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=lo.Important),n.setStyle(e,r,c,h))}}(r,y,yo(As(),e),c,h))}function Oy(n,t,e,r,c,h){const y=null===t;let T;for(;c>0;){const L=n[c],z=Array.isArray(L),X=z?L[1]:L,ie=null===X;let pe=e[c+1];pe===Pi&&(pe=ie?Bn:void 0);let Te=ie?jv(pe,r):X===r?pe:void 0;if(z&&!S(Te)&&(Te=jv(L,r)),S(Te)&&(T=Te,y))return T;const Le=n[c+1];c=y?Dd(Le):Is(Le)}if(null!==t){let L=h?t.residualClasses:t.residualStyles;null!=L&&(T=jv(L,r))}return T}function S(n){return void 0!==n}function l(n,t){return 0!=(n.flags&(t?8:16))}function m(n,t=""){const e=Mn(),r=lr(),c=n+wr,h=r.firstCreatePass?pf(r,c,1,t,null):r.data[c],y=e[c]=function Jv(n,t){return n.createText(t)}(e[gi],t);Kg(r,e,y,h),rd(h,!1)}function b(n){return p("",n,""),b}function p(n,t,e){const r=Mn(),c=function bh(n,t,e,r){return uo(n,sa(),e)?t+Di(e)+r:Pi}(r,n,t,e);return c!==Pi&&function us(n,t,e){const r=yo(t,n);!function ex(n,t,e){n.setValue(t,e)}(n[gi],r,e)}(r,As(),c),p}function bt(n,t,e){const r=Mn();return uo(r,sa(),t)&&la(lr(),vr(),r,n,t,r[gi],e,!0),bt}const cn="en-US";let we=cn;function WE(n,t,e,r,c){if(n=Ti(n),Array.isArray(n))for(let h=0;h<n.length;h++)WE(n[h],t,e,r,c);else{const h=lr(),y=Mn();let T=Wa(n)?n:Ti(n.provide),L=sh(n);const z=Gs(),X=1048575&z.providerIndexes,ie=z.directiveStart,pe=z.providerIndexes>>20;if(Wa(n)||!n.multi){const Te=new Jf(L,c,Be),Le=jE(T,t,c?X:X+pe,ie);-1===Le?(n0(t0(z,y),h,T),kw(h,n,t.length),t.push(T),z.directiveStart++,z.directiveEnd++,c&&(z.providerIndexes+=1048576),e.push(Te),y.push(Te)):(e[Le]=Te,y[Le]=Te)}else{const Te=jE(T,t,X+pe,ie),Le=jE(T,t,X,X+pe),kt=Le>=0&&e[Le];if(c&&!kt||!c&&!(Te>=0&&e[Te])){n0(t0(z,y),h,T);const Kt=function T2(n,t,e,r,c){const h=new Jf(n,e,Be);return h.multi=[],h.index=t,h.componentProviders=0,AA(h,c,r&&!e),h}(c?C2:E2,e.length,c,r,L);!c&&kt&&(e[Le].providerFactory=Kt),kw(h,n,t.length,0),t.push(T),z.directiveStart++,z.directiveEnd++,c&&(z.providerIndexes+=1048576),e.push(Kt),y.push(Kt)}else kw(h,n,Te>-1?Te:Le,AA(e[c?Le:Te],L,!c&&r));!c&&r&&kt&&e[Le].componentProviders++}}}function kw(n,t,e,r){const c=Wa(t),h=function s_(n){return!!n.useClass}(t);if(c||h){const L=(h?Ti(t.useClass):t).prototype.ngOnDestroy;if(L){const z=n.destroyHooks||(n.destroyHooks=[]);if(!c&&t.multi){const X=z.indexOf(e);-1===X?z.push(e,[r,L]):z[X+1].push(r,L)}else z.push(e,L)}}}function AA(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function jE(n,t,e,r){for(let c=e;c<r;c++)if(t[c]===n)return c;return-1}function E2(n,t,e,r){return $E(this.multi,[])}function C2(n,t,e,r){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,T=tp(e,e[Gn],this.providerFactory.index,r);h=T.slice(0,y),$E(c,h);for(let L=y;L<T.length;L++)h.push(T[L])}else h=[],$E(c,h);return h}function $E(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Cr(n,t=[]){return e=>{e.providersResolver=(r,c)=>function GE(n,t,e){const r=lr();if(r.firstCreatePass){const c=fa(n);WE(e,r.data,r.blueprint,c,!0),WE(t,r.data,r.blueprint,c,!1)}}(r,c?c(n):n,t)}}class Wx{}class DA{}class RA extends Wx{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gc(this);const r=Eo(t);this._bootstrapComponents=_l(r.bootstrap),this._r3Injector=Cp(t,e,[{provide:Wx,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver}],is(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qE extends DA{constructor(t){super(),this.moduleType=t}create(t){return new RA(this.moduleType,t)}}class D2 extends Wx{constructor(t,e,r){super(),this.componentFactoryResolver=new gc(this),this.instance=null;const c=new fl([...t,{provide:Wx,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver}],e||ga(),r,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function cS(n,t,e=null){return new D2(n,t,e).injector}let R2=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Hm(0,e.type),c=r.length>0?cS([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,c)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Tn({token:n,providedIn:"environment",factory:()=>new n(ut(Wo))}),n})();function XE(n){n.getStandaloneInjector=t=>t.get(R2).getOrCreateStandaloneInjector(n)}function ev(n,t){const e=n[t];return e===Pi?void 0:e}function lS(n,t,e,r,c,h,y){const T=t+e;return function Ed(n,t,e,r){const c=uo(n,t,e);return uo(n,t+1,r)||c}(n,T,c,h)?qs(n,T+2,y?r.call(y,c,h):r(c,h)):ev(n,T+2)}function Ah(n,t){const e=lr();let r;const c=n+wr;e.firstCreatePass?(r=function GA(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[c]=r,r.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(c,r.onDestroy)):r=e.data[c];const h=r.factory||(r.factory=nd(r.type)),y=fu(Be);try{const T=e0(!1),L=h();return e0(T),function Nu(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,Mn(),c,L),L}finally{fu(y)}}function gg(n,t,e){const r=n+wr,c=Mn(),h=na(c,r);return Lw(c,r)?function QE(n,t,e,r,c,h){const y=t+e;return uo(n,y,c)?qs(n,y+1,h?r.call(h,c):r(c)):ev(n,y+1)}(c,_r(),t,h.transform,e,h):h.transform(e)}function By(n,t,e,r){const c=n+wr,h=Mn(),y=na(h,c);return Lw(h,c)?lS(h,_r(),t,y.transform,e,r,y):y.transform(e,r)}function Lw(n,t){return n[Gn].data[t].pure}function Ow(n){return t=>{setTimeout(n,void 0,t)}}const Ai=class jA extends Ci{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let c=t,h=e||(()=>null),y=r;if(t&&"object"==typeof t){const L=t;c=L.next?.bind(L),h=L.error?.bind(L),y=L.complete?.bind(L)}this.__isAsync&&(h=Ow(h),c&&(c=Ow(c)),y&&(y=Ow(y)));const T=super.subscribe({next:c,error:h,complete:y});return t instanceof nn&&t.add(T),T}};function $A(){return this._results[Symbol.iterator]()}class Yp{get changes(){return this._changes||(this._changes=new Ai)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Yp.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=$A)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const c=function uc(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function Wv(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let c=n[r],h=t[r];if(e&&(c=e(c),h=e(h)),h!==c)return!1}return!0}(r._results,c,e))&&(r._results=c,r.length=c.length,r.last=c[this.length-1],r.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cf=(()=>{class n{}return n.__NG_ELEMENT_ID__=eC,n})();const G2=Cf,qA=class extends G2{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,c=ng(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);c[so]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Ks];return null!==y&&(c[Ks]=y.createEmbeddedView(r)),Ls(r,c,t),new _h(c)}};function eC(){return uS(Gs(),Mn())}function uS(n,t){return 4&n.type?new qA(t,n,wp(n,t)):null}let Pd=(()=>{class n{}return n.__NG_ELEMENT_ID__=W2,n})();function W2(){return hS(Gs(),Mn())}const j2=Pd,tC=class extends j2{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return wp(this._hostTNode,this._hostLView)}get injector(){return new Tm(this._hostTNode,this._hostLView)}get parentInjector(){const t=Hv(this._hostTNode,this._hostLView);if(Rb(t)){const e=Q_(t,this._hostLView),r=J_(t);return new Tm(e[Gn].data[r+8],e)}return new Tm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=dS(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(t,e,r){let c,h;"number"==typeof r?c=r:null!=r&&(c=r.index,h=r.injector);const y=t.createEmbeddedView(e||{},h);return this.insert(y,c),y}createComponent(t,e,r,c,h){const y=t&&!function Rm(n){return"function"==typeof n}(t);let T;if(y)T=e;else{const ie=e||{};T=ie.index,r=ie.injector,c=ie.projectableNodes,h=ie.environmentInjector||ie.ngModuleRef}const L=y?t:new ag($i(t)),z=r||this.parentInjector;if(!h&&null==L.ngModule){const pe=(y?z:this.parentInjector).get(Wo,null);pe&&(h=pe)}const X=L.create(z,c,void 0,h);return this.insert(X.hostView,T),X}insert(t,e){const r=t._lView,c=r[Gn];if(function Ln(n){return Zr(n[Zs])}(r)){const X=this.indexOf(t);if(-1!==X)this.detach(X);else{const ie=r[Zs],pe=new tC(ie,ie[fs],ie[Zs]);pe.detach(pe.indexOf(t))}}const h=this._adjustIndex(e),y=this._lContainer;!function nx(n,t,e,r){const c=Sr+r,h=e.length;r>0&&(e[c-1][Pl]=t),r<h-Sr?(t[Pl]=e[c],Wb(e,Sr+r,t)):(e.push(t),t[Pl]=null),t[Zs]=e;const y=t[so];null!==y&&e!==y&&function ix(n,t){const e=n[Js];t[Es]!==t[Zs][Zs][Es]&&(n[Gd]=!0),null===e?n[Js]=[t]:e.push(t)}(y,t);const T=t[Ks];null!==T&&T.insertView(n),t[qi]|=64}(c,r,y,h);const T=m0(h,y),L=r[gi],z=iy(L,y[Ll]);return null!==z&&function zo(n,t,e,r,c,h){r[Vi]=c,r[fs]=t,fp(n,r,e,1,c,h)}(c,y[fs],L,r,z,T),t.attachToViewContainerRef(),Wb(nC(y),h,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=dS(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Yg(this._lContainer,e);r&&(Gl(nC(this._lContainer),e),Cn(r[Gn],r))}detach(t){const e=this._adjustIndex(t,-1),r=Yg(this._lContainer,e);return r&&null!=Gl(nC(this._lContainer),e)?new _h(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function dS(n){return n[ha]}function nC(n){return n[ha]||(n[ha]=[])}function hS(n,t){let e;const r=t[n.index];if(Zr(r))e=r;else{let c;if(8&n.type)c=cr(r);else{const h=t[gi];c=h.createComment("");const y=Cs(n,t);cs(h,iy(h,y),c,function lw(n,t){return n.nextSibling(t)}(h,y),!1)}t[n.index]=e=My(r,t,c,n),Vp(t,e)}return new tC(e,n,t)}class Fw{constructor(t){this.queryList=t,this.matches=null}clone(){return new Fw(this.queryList)}setDirty(){this.queryList.setDirty()}}class iC{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,c=[];for(let h=0;h<r;h++){const y=e.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new iC(c)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==oC(t,e).matches&&this.queries[e].setDirty()}}class XA{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class rC{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const c=null!==e?e.length:0,h=this.getByIndex(r).embeddedTView(t,c);h&&(h.indexInDeclarationView=r,null!==e?e.push(h):e=[h])}return null!==e?new rC(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class qx{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new qx(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let c=0;c<r.length;c++){const h=r[c];this.matchTNodeWithReadOption(t,e,$2(e,h)),this.matchTNodeWithReadOption(t,e,r0(e,t,h,!1,!1))}else r===Cf?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,r0(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const c=this.metadata.read;if(null!==c)if(c===Li||c===Pd||c===Cf&&4&e.type)this.addMatch(e.index,-2);else{const h=r0(e,t,c,!1,!1);null!==h&&this.addMatch(e.index,h)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function $2(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function fS(n,t,e,r){return-1===e?function q2(n,t){return 11&n.type?wp(n,t):4&n.type?uS(n,t):null}(t,n):-2===e?function YA(n,t,e){return e===Li?wp(t,n):e===Cf?uS(t,n):e===Pd?hS(t,n):void 0}(n,t,r):tp(n,n[Gn],e,t)}function sC(n,t,e,r){const c=t[Ks].queries[r];if(null===c.matches){const h=n.data,y=e.matches,T=[];for(let L=0;L<y.length;L+=2){const z=y[L];T.push(z<0?null:fS(t,h[z],y[L+1],e.metadata.read))}c.matches=T}return c.matches}function pS(n,t,e,r){const c=n.queries.getByIndex(e),h=c.matches;if(null!==h){const y=sC(n,t,c,e);for(let T=0;T<h.length;T+=2){const L=h[T];if(L>0)r.push(y[T/2]);else{const z=h[T+1],X=t[-L];for(let ie=Sr;ie<X.length;ie++){const pe=X[ie];pe[so]===pe[Zs]&&pS(pe[Gn],pe,z,r)}if(null!==X[Js]){const ie=X[Js];for(let pe=0;pe<ie.length;pe++){const Te=ie[pe];pS(Te[Gn],Te,z,r)}}}}}return r}function rr(n){const t=Mn(),e=lr(),r=$d();gu(r+1);const c=oC(e,r);if(n.dirty&&function Yf(n){return 4==(4&n[qi])}(t)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const h=c.crossesNgTemplate?pS(e,t,r,[]):sC(e,t,c,r);n.reset(h,rf),n.notifyOnChanges()}return!0}return!1}function no(n,t,e){const r=lr();r.firstCreatePass&&(Nw(r,new XA(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),ZA(r,Mn(),t)}function El(n,t,e,r){const c=lr();if(c.firstCreatePass){const h=Gs();Nw(c,new XA(t,e,r),h.index),function Y2(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(c,n),2==(2&e)&&(c.staticContentQueries=!0)}ZA(c,Mn(),e)}function sr(){return function X2(n,t){return n[Ks].queries[t].queryList}(Mn(),$d())}function ZA(n,t,e){const r=new Yp(4==(4&e));Lp(n,t,r,r.destroy),null===t[Ks]&&(t[Ks]=new iC),t[Ks].queries.push(new Fw(r))}function Nw(n,t,e){null===n.queries&&(n.queries=new rC),n.queries.track(new qx(t,e))}function oC(n,t){return n.queries.getByIndex(t)}function aC(n,t){return uS(n,t)}function zy(...n){}const Bw=new jt("Application Initializer");let Zp=(()=>{class n{constructor(e){this.appInits=e,this.resolve=zy,this.reject=zy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,c)=>{this.resolve=r,this.reject=c})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Sh(h))e.push(h);else if(Uu(h)){const y=new Promise((T,L)=>{h.subscribe({complete:T,error:L})});e.push(y)}}Promise.all(e).then(()=>{r()}).catch(c=>{this.reject(c)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(ut(Bw,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xx=new jt("AppId",{providedIn:"root",factory:function MC(){return`${bS()}${bS()}${bS()}`}});function bS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wC=new jt("Platform Initializer"),xS=new jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tu=new jt("AnimationModuleType");let lP=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Kp=new jt("LocaleId",{providedIn:"root",factory:()=>ei(Kp,Ii.Optional|Ii.SkipSelf)||function uP(){return typeof $localize<"u"&&$localize.locale||cn}()});class EC{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let CC=(()=>{class n{compileModuleSync(e){return new qE(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),h=_l(Eo(e).declarations).reduce((y,T)=>{const L=$i(T);return L&&y.push(new ag(L)),y},[]);return new EC(r,h)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mP=(()=>Promise.resolve(0))();function SS(n){typeof Zone>"u"?mP.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ai(!1),this.onMicrotaskEmpty=new Ai(!1),this.onStable=new Ai(!1),this.onError=new Ai(!1),typeof Zone>"u")throw new Jt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!r&&e,c.shouldCoalesceRunChangeDetection=r,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function dD(){let n=ss.requestAnimationFrame,t=ss.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function T_(n){const t=()=>{!function C_(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ss,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Vw(n),n.isCheckStableRunning=!0,Ld(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Vw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,c,h,y,T)=>{try{return TC(n),e.invokeTask(c,h,y,T)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&t(),ES(n)}},onInvoke:(e,r,c,h,y,T,L)=>{try{return TC(n),e.invoke(c,h,y,T,L)}finally{n.shouldCoalesceRunChangeDetection&&t(),ES(n)}},onHasTask:(e,r,c,h)=>{e.hasTask(c,h),r===c&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Vw(n),Ld(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(e,r,c,h)=>(e.handleError(c,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xi.isInAngularZone())throw new Jt(909,!1)}static assertNotInAngularZone(){if(xi.isInAngularZone())throw new Jt(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,t,E_,zy,zy);try{return h.runTask(y,e,r)}finally{h.cancelTask(y)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const E_={};function Ld(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function TC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ES(n){n._nesting--,Ld(n)}class AC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ai,this.onMicrotaskEmpty=new Ai,this.onStable=new Ai,this.onError=new Ai}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,c){return t.apply(e,r)}}const CS=new jt(""),Ko=new jt("");let AS,nv=(()=>{class n{constructor(e,r,c){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,AS||(function A_(n){AS=n}(c),c.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xi.assertNotInAngularZone(),SS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())SS(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,c){let h=-1;r&&r>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:h,updateCb:c})}whenStable(e,r,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,c){return[]}}return n.\u0275fac=function(e){return new(e||n)(ut(xi),ut(TS),ut(Ko))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),TS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return AS?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Af=!1;let iv=null;const zw=new jt("AllowMultipleToken"),DC=new jt("PlatformDestroyListeners"),Hw=new jt("appBootstrapListener");class Hy{constructor(t,e){this.name=t,this.token=e}}function pD(n,t,e=[]){const r=`Platform: ${t}`,c=new jt(r);return(h=[])=>{let y=RS();if(!y||y.injector.get(zw,!1)){const T=[...e,...h,{provide:c,useValue:!0}];n?n(T):function yP(n){if(iv&&!iv.get(zw,!1))throw new Jt(400,!1);iv=n;const t=n.get(IC);(function hD(n){const t=n.get(wC,null);t&&t.forEach(e=>e())})(n)}(function Wy(n=[],t){return js.create({name:t,providers:[{provide:Ho,useValue:"platform"},{provide:DC,useValue:new Set([()=>iv=null])},...n]})}(T,r))}return function Gy(n){const t=RS();if(!t)throw new Jt(401,!1);return t}()}}function RS(){return iv?.get(IC)??null}let IC=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const c=function PC(n,t){let e;return e="noop"===n?new AC:("zone.js"===n?void 0:n)||new xi(t),e}(r?.ngZone,function rv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),h=[{provide:xi,useValue:c}];return c.run(()=>{const y=js.create({providers:h,parent:this.injector,name:e.moduleType.name}),T=e.create(y),L=T.injector.get(Uc,null);if(!L)throw new Jt(402,!1);return c.runOutsideAngular(()=>{const z=c.onError.subscribe({next:X=>{L.handleError(X)}});T.onDestroy(()=>{IS(this._modules,T),z.unsubscribe()})}),function kC(n,t,e){try{const r=e();return Sh(r)?r.catch(c=>{throw t.runOutsideAngular(()=>n.handleError(c)),c}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(L,c,()=>{const z=T.injector.get(Zp);return z.runInitializers(),z.donePromise.then(()=>(function ve(n){hu(n,"Expected localeId to be defined"),"string"==typeof n&&(we=n.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Kp,cn)||cn),this._moduleDoBootstrap(T),T))})})}bootstrapModule(e,r=[]){const c=LC({},r);return function _P(n,t,e){const r=new qE(e);return Promise.resolve(r)}(0,0,e).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(e){const r=e.injector.get(Yx);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(c=>r.bootstrap(c));else{if(!e.instance.ngDoBootstrap)throw new Jt(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(DC,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(ut(js))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function LC(n,t){return Array.isArray(t)?t.reduce(LC,n):{...n,...t}}let Yx=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,c){this._zone=e,this._injector=r,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new pr(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),y=new pr(T=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{xi.assertNotInAngularZone(),SS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{L.unsubscribe(),z.unsubscribe()}});this.isStable=tc(h,y.pipe(Vd()))}bootstrap(e,r){const c=e instanceof a_;if(!this._injector.get(Zp).done){!c&&function nl(n){const t=$i(n)||Mr(n)||_o(n);return null!==t&&t.standalone}(e);throw new Jt(405,Af)}let y;y=c?e:this._injector.get(Nc).resolveComponentFactory(e),this.componentTypes.push(y.componentType);const T=function vP(n){return n.isBoundToModule}(y)?void 0:this._injector.get(Wx),z=y.create(js.NULL,[],r||y.selector,T),X=z.location.nativeElement,ie=z.injector.get(CS,null);return ie?.registerApplication(X),z.onDestroy(()=>{this.detachView(z.hostView),IS(this.components,z),ie?.unregisterApplication(X)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new Jt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;IS(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(Hw,[]);r.push(...this._bootstrapListeners),r.forEach(c=>c(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>IS(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Jt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(ut(xi),ut(Wo),ut(Uc))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let Xa=(()=>{class n{}return n.__NG_ELEMENT_ID__=gD,n})();function gD(n){return function jy(n,t,e){if(Qu(n)&&!e){const r=gs(n.index,t);return new _h(r,r)}return 47&n.type?new _h(t[Es],t):null}(Gs(),Mn(),16==(16&n))}class kS{constructor(){}supports(t){return Ey(t)}create(t){return new Xw(t)}}const NC=(n,t)=>t;class Xw{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||NC}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,c=0,h=null;for(;e||r;){const y=!r||e&&e.currentIndex<yD(r,c,h)?e:r,T=yD(y,c,h),L=y.currentIndex;if(y===r)c--,r=r._nextRemoved;else if(e=e._next,null==y.previousIndex)c++;else{h||(h=[]);const z=T-c,X=L-c;if(z!=X){for(let pe=0;pe<z;pe++){const Te=pe<h.length?h[pe]:h[pe]=0,Le=Te+pe;X<=Le&&Le<z&&(h[pe]=Te+1)}h[y.previousIndex]=X-z}}T!==L&&t(y,T,L)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ey(t))throw new Jt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let c,h,y,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let T=0;T<this.length;T++)h=t[T],y=this._trackByFn(T,h),null!==e&&Object.is(e.trackById,y)?(r&&(e=this._verifyReinsertion(e,h,y,T)),Object.is(e.item,h)||this._addIdentityChange(e,h)):(e=this._mismatch(e,h,y,T),r=!0),e=e._next}else c=0,function p_(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,T=>{y=this._trackByFn(c,T),null!==e&&Object.is(e.trackById,y)?(r&&(e=this._verifyReinsertion(e,T,y,c)),Object.is(e.item,T)||this._addIdentityChange(e,T)):(e=this._mismatch(e,T,y,c),r=!0),e=e._next,c++}),this.length=c;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,c){let h;return null===t?h=this._itTail:(h=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,h,c)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,c))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,h,c)):t=this._addAfter(new _D(e,r),h,c),t}_verifyReinsertion(t,e,r,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==h?t=this._reinsertAfter(h,t._prev,c):t.currentIndex!=c&&(t.currentIndex=c,this._addToMoves(t,c)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const c=t._prevRemoved,h=t._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const c=null===e?this._itHead:e._next;return t._next=c,t._prev=e,null===c?this._itTail=t:c._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new bc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class _D{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vD{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class bc{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new vD,this.map.set(e,r)),r.add(t)}get(t,e){const c=this.map.get(t);return c?c.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yD(n,t,e){const r=n.previousIndex;if(null===r)return r;let c=0;return e&&r<e.length&&(c=e[r]),r+t+c}class bD{constructor(){}supports(t){return t instanceof Map||lg(t)}create(){return new ms}}class ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||lg(t)))throw new Jt(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,c)=>{if(e&&e.key===c)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const h=this._getOrCreateRecordForKey(c,r);e=this._insertBeforeOrAppend(e,h)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const c=this._records.get(t);this._maybeAddToChanges(c,e);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const r=new kP(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class kP{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jx(){return new sv([new kS])}let sv=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const c=r.factories.slice();e=e.concat(c)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Jx()),deps:[[n,new rp,new Wl]]}}find(e){const r=this.factories.find(c=>c.supports(e));if(null!=r)return r;throw new Jt(901,!1)}}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:Jx}),n})();function xD(){return new Yw([new bD])}let Yw=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const c=r.factories.slice();e=e.concat(c)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||xD()),deps:[[n,new rp,new Wl]]}}find(e){const r=this.factories.find(c=>c.supports(e));if(r)return r;throw new Jt(901,!1)}}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:xD}),n})();const UP=pD(null,"core",[]);let BP=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(ut(Yx))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();let UC=null;function D_(){return UC}class MD{}const Ji=new jt("DocumentToken");let BC=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return function jP(){return ut(wD)}()},providedIn:"platform"}),n})();const $P=new jt("Location Initialized");let wD=(()=>{class n extends BC{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return D_().getBaseHref(this._doc)}onPopState(e){const r=D_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=D_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,c){SD()?this._history.pushState(e,r,c):this._location.hash=c}replaceState(e,r,c){SD()?this._history.replaceState(e,r,c):this._location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:function(){return function ED(){return new wD(ut(Ji))}()},providedIn:"platform"}),n})();function SD(){return!!window.history.pushState}function VC(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function CD(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function R_(n){return n&&"?"!==n[0]?"?"+n:n}let qy=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return ei(AD)},providedIn:"root"}),n})();const TD=new jt("appBaseHref");let AD=(()=>{class n extends qy{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ei(Ji).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return VC(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+R_(this._platformLocation.search),c=this._platformLocation.hash;return c&&e?`${r}${c}`:r}pushState(e,r,c,h){const y=this.prepareExternalUrl(c+R_(h));this._platformLocation.pushState(e,r,y)}replaceState(e,r,c,h){const y=this.prepareExternalUrl(c+R_(h));this._platformLocation.replaceState(e,r,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(BC),ut(TD,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qP=(()=>{class n extends qy{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=VC(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,c,h){let y=this.prepareExternalUrl(c+R_(h));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.pushState(e,r,y)}replaceState(e,r,c,h){let y=this.prepareExternalUrl(c+R_(h));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(BC),ut(TD,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),Zw=(()=>{class n{constructor(e){this._subject=new Ai,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function YP(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(CD(RD(r))),this._locationStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+R_(r))}normalize(e){return n.stripTrailingSlash(function XP(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,RD(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",c=null){this._locationStrategy.pushState(c,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+R_(r)),c)}replaceState(e,r="",c=null){this._locationStrategy.replaceState(c,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+R_(r)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(c=>c(e,r))}subscribe(e,r,c){return this._subject.subscribe({next:e,error:r,complete:c})}}return n.normalizeQueryParams=R_,n.joinWithSlash=VC,n.stripTrailingSlash=CD,n.\u0275fac=function(e){return new(e||n)(ut(qy))},n.\u0275prov=Tn({token:n,factory:function(){return function DD(){return new Zw(ut(qy))}()},providedIn:"root"}),n})();function RD(n){return n.replace(/\/index.html$/,"")}function $D(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[c,h]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(c.trim()===t)return decodeURIComponent(h)}return null}const HS=/\s+/,qD=[];let JC=(()=>{class n{constructor(e,r,c,h){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=c,this._renderer=h,this.initialClasses=qD,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(HS):qD}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(HS):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const c=this.stateMap.get(e);void 0!==c?(c.enabled!==r&&(c.changed=!0,c.enabled=r),c.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],c=e[1];c.changed?(this._toggleClass(r,c.enabled),c.changed=!1):c.touched||(c.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),c.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(HS).forEach(c=>{r?this._renderer.addClass(this._ngEl.nativeElement,c):this._renderer.removeClass(this._ngEl.nativeElement,c)})}}return n.\u0275fac=function(e){return new(e||n)(Be(sv),Be(Yw),Be(Li),Be(ml))},n.\u0275dir=Xn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class YD{constructor(t,e,r,c){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=c}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let t1=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,c){this._viewContainer=e,this._template=r,this._differs=c,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((c,h,y)=>{if(null==c.previousIndex)r.createEmbeddedView(this._template,new YD(c.item,this._ngForOf,-1,-1),null===y?void 0:y);else if(null==y)r.remove(null===h?void 0:h);else if(null!==h){const T=r.get(h);r.move(T,y),eT(T,c)}});for(let c=0,h=r.length;c<h;c++){const T=r.get(c).context;T.index=c,T.count=h,T.ngForOf=this._ngForOf}e.forEachIdentityChange(c=>{eT(r.get(c.currentIndex),c)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(Be(Pd),Be(Cf),Be(sv))},n.\u0275dir=Xn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function eT(n,t){n.context.$implicit=t.item}let cv=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new wk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){tT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){tT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(Be(Pd),Be(Cf))},n.\u0275dir=Xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class wk{constructor(){this.$implicit=null,this.ngIf=null}}function tT(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${is(t)}'.`)}class nT{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let n1=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),ZD=(()=>{class n{constructor(e,r,c){this.ngSwitch=c,c._addCase(),this._view=new nT(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(Be(Pd),Be(Cf),Be(n1,9))},n.\u0275dir=Xn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),rT=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:c,ngTemplateOutletContext:h,ngTemplateOutletInjector:y}=this;this._viewRef=r.createEmbeddedView(c,h,y?{injector:y}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(Be(Pd))},n.\u0275dir=Xn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Hr]}),n})();class Ek{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class Ck{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const GS=new Ck,Tk=new Ek;let r1=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(Sh(e))return GS;if(Eh(e))return Tk;throw function Qp(n,t){return new Jt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(Be(Xa,16))},n.\u0275pipe=Ia({name:"async",type:n,pure:!1,standalone:!0}),n})(),Or=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const Cl="browser";let zk=(()=>{class n{}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:()=>new Hk(ut(Ji),window)}),n})();class Hk{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Gk(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let c=r.currentNode;for(;c;){const h=c.shadowRoot;if(h){const y=h.getElementById(t)||h.querySelector(`[name="${t}"]`);if(y)return y}c=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,c=e.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(r-h[0],c-h[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=nR(this.window.history)||nR(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function nR(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class iR{}class bR extends MD{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vT extends bR{static makeCurrent(){!function WP(n){UC||(UC=n)}(new vT)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function pL(){return rM=rM||document.querySelector("base"),rM?rM.getAttribute("href"):null}();return null==e?null:function mL(n){l1=l1||document.createElement("a"),l1.setAttribute("href",n);const t=l1.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){rM=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $D(document.cookie,t)}}let l1,rM=null;const yT=new jt("TRANSITION_ID"),xR=[{provide:Bw,useFactory:function gL(n,t,e){return()=>{e.get(Zp).donePromise.then(()=>{const r=D_(),c=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let h=0;h<c.length;h++)r.remove(c[h])})}},deps:[yT,Ji,js],multi:!0}];let wR=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const sM=new jt("EventManagerPlugins");let Zy=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(c=>{c.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,c){return this._findPluginFor(r).addEventListener(e,r,c)}addGlobalEventListener(e,r,c){return this._findPluginFor(r).addGlobalEventListener(e,r,c)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const c=this._plugins;for(let h=0;h<c.length;h++){const y=c[h];if(y.supports(e))return this._eventNameToPlugin.set(e,y),y}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(ut(sM),ut(xi))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();class bT{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const c=D_().getGlobalEventTarget(this._doc,t);if(!c)throw new Error(`Unsupported event target ${c} for event ${e}`);return this.addEventListener(c,e,r)}}let xT=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const c=this.usageCount;let h=c.get(e)??0;return h+=r,h>0?c.set(e,h):c.delete(e),h}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),u1=(()=>{class n extends xT{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(h=>h.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const c=this.doc.createElement("style");c.textContent=r,e.appendChild(c);const h=this.styleRef.get(r);h?h.push(c):this.styleRef.set(r,[c])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const MT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},KS=/%COMP%/g,ER=new jt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function CR(n,t){return t.flat(100).map(e=>e.replace(KS,n))}function TR(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let QS=(()=>{class n{constructor(e,r,c,h){this.eventManager=e,this.sharedStylesHost=r,this.appId=c,this.removeStylesOnCompDestory=h,this.rendererByCompId=new Map,this.defaultRenderer=new ST(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const c=this.getOrCreateRenderer(e,r);return c instanceof CT?c.applyToHost(e):c instanceof ET&&c.applyStyles(),c}getOrCreateRenderer(e,r){const c=this.rendererByCompId;let h=c.get(r.id);if(!h){const y=this.eventManager,T=this.sharedStylesHost,L=this.removeStylesOnCompDestory;switch(r.encapsulation){case tl.Emulated:h=new CT(y,T,r,this.appId,L);break;case tl.ShadowDom:return new RR(y,T,e,r);default:h=new ET(y,T,r,L)}h.onDestroy=()=>c.delete(r.id),c.set(r.id,h)}return h}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(ut(Zy),ut(u1),ut(Xx),ut(ER))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();class ST{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(MT[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(DR(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(DR(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,c){if(c){e=c+":"+e;const h=MT[c];h?t.setAttributeNS(h,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const c=MT[r];c?t.removeAttributeNS(c,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,c){c&(lo.DashCase|lo.Important)?t.style.setProperty(e,r,c&lo.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&lo.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,TR(r)):this.eventManager.addEventListener(t,e,TR(r))}}function DR(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class RR extends ST{constructor(t,e,r,c){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=CR(c.id,c.styles);for(const y of h){const T=document.createElement("style");T.textContent=y,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ET extends ST{constructor(t,e,r,c,h=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=c,this.rendererUsageCount=0,this.styles=CR(h,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class CT extends ET{constructor(t,e,r,c,h){const y=c+"-"+r.id;super(t,e,r,h,y),this.contentAttr=function oM(n){return"_ngcontent-%COMP%".replace(KS,n)}(y),this.hostAttr=function aM(n){return"_nghost-%COMP%".replace(KS,n)}(y)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let IR=(()=>{class n extends bT{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,c){return e.addEventListener(r,c,!1),()=>this.removeEventListener(e,r,c)}removeEventListener(e,r,c){return e.removeEventListener(r,c)}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const PR=["alt","control","meta","shift"],bL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let kR=(()=>{class n extends bT{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,c){const h=n.parseEventName(r),y=n.eventCallback(h.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>D_().onAndCancel(e,h.domEventName,y))}static parseEventName(e){const r=e.toLowerCase().split("."),c=r.shift();if(0===r.length||"keydown"!==c&&"keyup"!==c)return null;const h=n._normalizeKey(r.pop());let y="",T=r.indexOf("code");if(T>-1&&(r.splice(T,1),y="code."),PR.forEach(z=>{const X=r.indexOf(z);X>-1&&(r.splice(X,1),y+=z+".")}),y+=h,0!=r.length||0===h.length)return null;const L={};return L.domEventName=c,L.fullKey=y,L}static matchEventFullKeyCode(e,r){let c=bL[e.key]||e.key,h="";return r.indexOf("code.")>-1&&(c=e.code,h="code."),!(null==c||!c)&&(c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),PR.forEach(y=>{y!==c&&(0,xL[y])(e)&&(h+=y+".")}),h+=c,h===r)}static eventCallback(e,r,c){return h=>{n.matchEventFullKeyCode(h,e)&&c.runGuarded(()=>r(h))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const vg=pD(UP,"browser",[{provide:xS,useValue:Cl},{provide:wC,useValue:function ML(){vT.makeCurrent()},multi:!0},{provide:Ji,useFactory:function eE(){return function uw(n){ax=n}(document),document},deps:[]}]),d1=new jt(""),AT=[{provide:Ko,useClass:class MR{addToWindow(t){ss.getAngularTestability=(r,c=!0)=>{const h=t.findTestabilityInTree(r,c);if(null==h)throw new Error("Could not find testability for element.");return h},ss.getAllAngularTestabilities=()=>t.getAllTestabilities(),ss.getAllAngularRootElements=()=>t.getAllRootElements(),ss.frameworkStabilizers||(ss.frameworkStabilizers=[]),ss.frameworkStabilizers.push(r=>{const c=ss.getAllAngularTestabilities();let h=c.length,y=!1;const T=function(L){y=y||L,h--,0==h&&r(y)};c.forEach(function(L){L.whenStable(T)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?D_().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:CS,useClass:nv,deps:[xi,TS,Ko]},{provide:nv,useClass:nv,deps:[xi,TS,Ko]}],tE=[{provide:Ho,useValue:"root"},{provide:Uc,useFactory:function wL(){return new Uc},deps:[]},{provide:sM,useClass:IR,multi:!0,deps:[Ji,xi,xS]},{provide:sM,useClass:kR,multi:!0,deps:[Ji]},{provide:QS,useClass:QS,deps:[Zy,u1,Xx,ER]},{provide:_a,useExisting:QS},{provide:xT,useExisting:u1},{provide:u1,useClass:u1,deps:[Ji]},{provide:Zy,useClass:Zy,deps:[sM,xi]},{provide:iR,useClass:wR,deps:[]},[]];let cM=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Xx,useValue:e.appId},{provide:yT,useExisting:Xx},xR]}}}return n.\u0275fac=function(e){return new(e||n)(ut(d1,12))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[...tE,...AT],imports:[Or,BP]}),n})(),FR=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:function(e){let r=null;return r=e?new e:function CL(){return new FR(ut(Ji))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let se=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(e){let r=null;return r=e?new(e||n):ut(_e),r},providedIn:"root"}),n})(),_e=(()=>{class n extends se{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case yr.NONE:return r;case yr.HTML:return Ha(r,"HTML")?ca(r):pc(this._doc,String(r)).toString();case yr.STYLE:return Ha(r,"Style")?ca(r):r;case yr.SCRIPT:if(Ha(r,"Script"))return ca(r);throw new Error("unsafe value used in a script context");case yr.URL:return Ha(r,"URL")?ca(r):Dr(String(r));case yr.RESOURCE_URL:if(Ha(r,"ResourceURL"))return ca(r);throw new Error(`unsafe value used in a resource URL context (see ${Dl})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${Dl})`)}}bypassSecurityTrustHtml(e){return function ay(n){return new pd(n)}(e)}bypassSecurityTrustStyle(e){return function w0(n){return new hc(n)}(e)}bypassSecurityTrustScript(e){return function e_(n){return new ma(n)}(e)}bypassSecurityTrustUrl(e){return function t_(n){return new Bm(n)}(e)}bypassSecurityTrustResourceUrl(e){return function mp(n){return new x0(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:function(e){let r=null;return r=e?new e:function ue(n){return new _e(n.get(Ji))}(ut(js)),r},providedIn:"root"}),n})();function ye(...n){return Ms(n,Vh(n))}class Ke extends Ci{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const ke=Un(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Oe}=Array,{getPrototypeOf:ft,prototype:it,keys:le}=Object;function me(n){if(1===n.length){const t=n[0];if(Oe(t))return{args:t,keys:null};if(function Me(n){return n&&"object"==typeof n&&ft(n)===it}(t)){const e=le(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:We}=Array;function Ge(n){return ri(t=>function Se(n,t){return We(t)?n(...t):n(t)}(n,t))}function De(n,t){return n.reduce((e,r,c)=>(e[r]=t[c],e),{})}function rt(...n){const t=Vh(n),e=zf(n),{args:r,keys:c}=me(n);if(0===r.length)return Ms([],t);const h=new pr(function gt(n,t,e=Mo){return r=>{It(t,()=>{const{length:c}=n,h=new Array(c);let y=c,T=c;for(let L=0;L<c;L++)It(t,()=>{const z=Ms(n[L],t);let X=!1;z.subscribe(mr(r,ie=>{h[L]=ie,X||(X=!0,T--),T||r.next(e(h.slice()))},()=>{--y||r.complete()}))},r)},r)}}(r,t,c?y=>De(c,y):Mo));return e?h.pipe(Ge(e)):h}function It(n,t,e){n?ec(e,n,t):t()}function Vt(...n){return function xt(){return Xu(1)}()(Ms(n,Vh(n)))}function bn(n){return new pr(t=>{xs(n()).subscribe(t)})}function $t(n,t){const e=rn(n)?n:()=>n,r=c=>c.error(e());return new pr(t?c=>t.schedule(r,0,c):r)}function kn(){return qr((n,t)=>{let e=null;n._refCount++;const r=mr(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const c=n._connection,h=e;e=null,c&&(!h||c===h)&&c.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Xt extends pr{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Nh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new nn;const e=this.getSubject();t.add(this.source.subscribe(mr(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=nn.EMPTY)}return t}refCount(){return kn()(this)}}function pn(n,t){return qr((e,r)=>{let c=null,h=0,y=!1;const T=()=>y&&!c&&r.complete();e.subscribe(mr(r,L=>{c?.unsubscribe();let z=0;const X=h++;xs(n(L,X)).subscribe(c=mr(r,ie=>r.next(t?t(L,ie,X,z++):ie),()=>{c=null,T()}))},()=>{y=!0,T()}))})}function dn(n){return n<=0?()=>ua:qr((t,e)=>{let r=0;t.subscribe(mr(e,c=>{++r<=n&&(e.next(c),n<=r&&e.complete())}))})}function Rt(...n){const t=Vh(n);return qr((e,r)=>{(t?Vt(n,e,t):Vt(n,e)).subscribe(r)})}function xn(n,t){return qr((e,r)=>{let c=0;e.subscribe(mr(r,h=>n.call(t,h,c++)&&r.next(h)))})}function ti(n){return qr((t,e)=>{let r=!1;t.subscribe(mr(e,c=>{r=!0,e.next(c)},()=>{r||e.next(n),e.complete()}))})}function Ui(n=hi){return qr((t,e)=>{let r=!1;t.subscribe(mr(e,c=>{r=!0,e.next(c)},()=>r?e.complete():e.error(n())))})}function hi(){return new ke}function An(n,t){const e=arguments.length>=2;return r=>r.pipe(n?xn((c,h)=>n(c,h,r)):Mo,dn(1),e?ti(t):Ui(()=>new ke))}function wi(n,t){return rn(t)?ns(n,t,1):ns(n,1)}function ar(n,t,e){const r=rn(n)||t||e?{next:n,error:t,complete:e}:n;return r?qr((c,h)=>{var y;null===(y=r.subscribe)||void 0===y||y.call(r);let T=!0;c.subscribe(mr(h,L=>{var z;null===(z=r.next)||void 0===z||z.call(r,L),h.next(L)},()=>{var L;T=!1,null===(L=r.complete)||void 0===L||L.call(r),h.complete()},L=>{var z;T=!1,null===(z=r.error)||void 0===z||z.call(r,L),h.error(L)},()=>{var L,z;T&&(null===(L=r.unsubscribe)||void 0===L||L.call(r)),null===(z=r.finalize)||void 0===z||z.call(r)}))}):Mo}function Vr(n){return qr((t,e)=>{let h,r=null,c=!1;r=t.subscribe(mr(e,void 0,void 0,y=>{h=xs(n(y,Vr(n)(t))),r?(r.unsubscribe(),r=null,h.subscribe(e)):c=!0})),c&&(r.unsubscribe(),r=null,h.subscribe(e))})}function Ja(n,t){return qr(function Xc(n,t,e,r,c){return(h,y)=>{let T=e,L=t,z=0;h.subscribe(mr(y,X=>{const ie=z++;L=T?n(L,X,ie):(T=!0,X),r&&y.next(L)},c&&(()=>{T&&y.next(L),y.complete()})))}}(n,t,arguments.length>=2,!0))}function lM(n){return n<=0?()=>ua:qr((t,e)=>{let r=[];t.subscribe(mr(e,c=>{r.push(c),n<r.length&&r.shift()},()=>{for(const c of r)e.next(c);e.complete()},void 0,()=>{r=null}))})}function Ph(n,t){const e=arguments.length>=2;return r=>r.pipe(n?xn((c,h)=>n(c,h,r)):Mo,lM(1),e?ti(t):Ui(()=>new ke))}function DT(n){return ri(()=>n)}function h1(n){return qr((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Qi="primary",uM=Symbol("RouteTitle");class UR{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ky(n){return new UR(n)}function N5(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const c={};for(let h=0;h<r.length;h++){const y=r[h],T=n[h];if(y.startsWith(":"))c[y.substring(1)]=T;else if(y!==T.path)return null}return{consumed:n.slice(0,r.length),posParams:c}}function fv(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let c;for(let h=0;h<e.length;h++)if(c=e[h],!oN(n[c],t[c]))return!1;return!0}function oN(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((c,h)=>r[h]===c)}return n===t}function aN(n){return Array.prototype.concat.apply([],n)}function cN(n){return n.length>0?n[n.length-1]:null}function Hu(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function dM(n){return Uu(n)?n:Sh(n)?Ms(Promise.resolve(n)):ye(n)}const BR=!1,B5={exact:function dN(n,t,e){if(!f1(n.segments,t.segments)||!VR(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!dN(n.children[r],t.children[r],e))return!1;return!0},subset:hN},lN={exact:function V5(n,t){return fv(n,t)},subset:function z5(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>oN(n[e],t[e]))},ignored:()=>!0};function uN(n,t,e){return B5[e.paths](n.root,t.root,e.matrixParams)&&lN[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function hN(n,t,e){return fN(n,t,t.segments,e)}function fN(n,t,e,r){if(n.segments.length>e.length){const c=n.segments.slice(0,e.length);return!(!f1(c,e)||t.hasChildren()||!VR(c,e,r))}if(n.segments.length===e.length){if(!f1(n.segments,e)||!VR(n.segments,e,r))return!1;for(const c in t.children)if(!n.children[c]||!hN(n.children[c],t.children[c],r))return!1;return!0}{const c=e.slice(0,n.segments.length),h=e.slice(n.segments.length);return!!(f1(n.segments,c)&&VR(n.segments,c,r)&&n.children[Qi])&&fN(n.children[Qi],t,h,r)}}function VR(n,t,e){return t.every((r,c)=>lN[e](n[c].parameters,r.parameters))}class hM{constructor(t=new Br([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return W5.serialize(this)}}class Br{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hu(e,(r,c)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zR(this)}}class RT{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ky(this.parameters)),this._parameterMap}toString(){return gN(this)}}function f1(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let IT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return new TL},providedIn:"root"}),n})();class TL{parse(t){const e=new Q5(t);return new hM(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${PT(t.root,!0)}`,r=function q5(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(c=>`${HR(e)}=${HR(c)}`).join("&"):`${HR(e)}=${HR(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function j5(n){return encodeURI(n)}(t.fragment)}`:""}`}}const W5=new TL;function zR(n){return n.segments.map(t=>gN(t)).join("/")}function PT(n,t){if(!n.hasChildren())return zR(n);if(t){const e=n.children[Qi]?PT(n.children[Qi],!1):"",r=[];return Hu(n.children,(c,h)=>{h!==Qi&&r.push(`${h}:${PT(c,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function G5(n,t){let e=[];return Hu(n.children,(r,c)=>{c===Qi&&(e=e.concat(t(r,c)))}),Hu(n.children,(r,c)=>{c!==Qi&&(e=e.concat(t(r,c)))}),e}(n,(r,c)=>c===Qi?[PT(n.children[Qi],!1)]:[`${c}:${PT(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qi]?`${zR(n)}/${e[0]}`:`${zR(n)}/(${e.join("//")})`}}function pN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function HR(n){return pN(n).replace(/%3B/gi,";")}function AL(n){return pN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GR(n){return decodeURIComponent(n)}function mN(n){return GR(n.replace(/\+/g,"%20"))}function gN(n){return`${AL(n.path)}${function $5(n){return Object.keys(n).map(t=>`;${AL(t)}=${AL(n[t])}`).join("")}(n.parameters)}`}const X5=/^[^\/()?;=#]+/;function WR(n){const t=n.match(X5);return t?t[0]:""}const Y5=/^[^=?&#]+/,K5=/^[^&#]+/;class Q5{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Br([],{}):new Br([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Qi]=new Br(t,e)),r}parseSegment(){const t=WR(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Jt(4009,BR);return this.capture(t),new RT(GR(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=WR(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=WR(this.remaining);c&&(r=c,this.capture(r))}t[GR(e)]=GR(r)}parseQueryParam(t){const e=function Z5(n){const t=n.match(Y5);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const y=function J5(n){const t=n.match(K5);return t?t[0]:""}(this.remaining);y&&(r=y,this.capture(r))}const c=mN(e),h=mN(r);if(t.hasOwnProperty(c)){let y=t[c];Array.isArray(y)||(y=[y],t[c]=y),y.push(h)}else t[c]=h}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=WR(this.remaining),c=this.remaining[r.length];if("/"!==c&&")"!==c&&";"!==c)throw new Jt(4010,BR);let h;r.indexOf(":")>-1?(h=r.slice(0,r.indexOf(":")),this.capture(h),this.capture(":")):t&&(h=Qi);const y=this.parseChildren();e[h]=1===Object.keys(y).length?y[Qi]:new Br([],y),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Jt(4011,BR)}}function DL(n){return n.segments.length>0?new Br([],{[Qi]:n}):n}function jR(n){const t={};for(const r of Object.keys(n.children)){const h=jR(n.children[r]);(h.segments.length>0||h.hasChildren())&&(t[r]=h)}return function e8(n){if(1===n.numberOfChildren&&n.children[Qi]){const t=n.children[Qi];return new Br(n.segments.concat(t.segments),t.children)}return n}(new Br(n.segments,t))}function p1(n){return n instanceof hM}const RL=!1;function t8(n,t,e,r,c){if(0===e.length)return nE(t.root,t.root,t.root,r,c);const h=function xN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bN(!0,0,n);let t=0,e=!1;const r=n.reduce((c,h,y)=>{if("object"==typeof h&&null!=h){if(h.outlets){const T={};return Hu(h.outlets,(L,z)=>{T[z]="string"==typeof L?L.split("/"):L}),[...c,{outlets:T}]}if(h.segmentPath)return[...c,h.segmentPath]}return"string"!=typeof h?[...c,h]:0===y?(h.split("/").forEach((T,L)=>{0==L&&"."===T||(0==L&&""===T?e=!0:".."===T?t++:""!=T&&c.push(T))}),c):[...c,h]},[]);return new bN(e,t,r)}(e);return h.toRoot()?nE(t.root,t.root,new Br([],{}),r,c):function y(L){const z=function r8(n,t,e,r){if(n.isAbsolute)return new iE(t.root,!0,0);if(-1===r)return new iE(e,e===t.root,0);return function MN(n,t,e){let r=n,c=t,h=e;for(;h>c;){if(h-=c,r=r.parent,!r)throw new Jt(4005,RL&&"Invalid number of '../'");c=r.segments.length}return new iE(r,!1,c-h)}(e,r+(kT(n.commands[0])?0:1),n.numberOfDoubleDots)}(h,t,n.snapshot?._urlSegment,L),X=z.processChildren?rE(z.segmentGroup,z.index,h.commands):IL(z.segmentGroup,z.index,h.commands);return nE(t.root,z.segmentGroup,X,r,c)}(n.snapshot?._lastPathIndex)}function kT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function LT(n){return"object"==typeof n&&null!=n&&n.outlets}function nE(n,t,e,r,c){let y,h={};r&&Hu(r,(L,z)=>{h[z]=Array.isArray(L)?L.map(X=>`${X}`):`${L}`}),y=n===t?e:yN(n,t,e);const T=DL(jR(y));return new hM(T,h,c)}function yN(n,t,e){const r={};return Hu(n.children,(c,h)=>{r[h]=c===t?e:yN(c,t,e)}),new Br(n.segments,r)}class bN{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&kT(r[0]))throw new Jt(4003,RL&&"Root segment cannot have matrix parameters");const c=r.find(LT);if(c&&c!==cN(r))throw new Jt(4004,RL&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class iE{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function IL(n,t,e){if(n||(n=new Br([],{})),0===n.segments.length&&n.hasChildren())return rE(n,t,e);const r=function o8(n,t,e){let r=0,c=t;const h={match:!1,pathIndex:0,commandIndex:0};for(;c<n.segments.length;){if(r>=e.length)return h;const y=n.segments[c],T=e[r];if(LT(T))break;const L=`${T}`,z=r<e.length-1?e[r+1]:null;if(c>0&&void 0===L)break;if(L&&z&&"object"==typeof z&&void 0===z.outlets){if(!SN(L,z,y))return h;r+=2}else{if(!SN(L,{},y))return h;r++}c++}return{match:!0,pathIndex:c,commandIndex:r}}(n,t,e),c=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const h=new Br(n.segments.slice(0,r.pathIndex),{});return h.children[Qi]=new Br(n.segments.slice(r.pathIndex),n.children),rE(h,0,c)}return r.match&&0===c.length?new Br(n.segments,{}):r.match&&!n.hasChildren()?PL(n,t,e):r.match?rE(n,0,c):PL(n,t,e)}function rE(n,t,e){if(0===e.length)return new Br(n.segments,{});{const r=function s8(n){return LT(n[0])?n[0].outlets:{[Qi]:n}}(e),c={};if(!r[Qi]&&n.children[Qi]&&1===n.numberOfChildren&&0===n.children[Qi].segments.length){const h=rE(n.children[Qi],t,e);return new Br(n.segments,h.children)}return Hu(r,(h,y)=>{"string"==typeof h&&(h=[h]),null!==h&&(c[y]=IL(n.children[y],t,h))}),Hu(n.children,(h,y)=>{void 0===r[y]&&(c[y]=h)}),new Br(n.segments,c)}}function PL(n,t,e){const r=n.segments.slice(0,t);let c=0;for(;c<e.length;){const h=e[c];if(LT(h)){const L=a8(h.outlets);return new Br(r,L)}if(0===c&&kT(e[0])){r.push(new RT(n.segments[t].path,wN(e[0]))),c++;continue}const y=LT(h)?h.outlets[Qi]:`${h}`,T=c<e.length-1?e[c+1]:null;y&&T&&kT(T)?(r.push(new RT(y,wN(T))),c+=2):(r.push(new RT(y,{})),c++)}return new Br(r,{})}function a8(n){const t={};return Hu(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=PL(new Br([],{}),0,e))}),t}function wN(n){const t={};return Hu(n,(e,r)=>t[r]=`${e}`),t}function SN(n,t,e){return n==e.path&&fv(t,e.parameters)}const OT="imperative";class pv{constructor(t,e){this.id=t,this.url=e}}class kL extends pv{constructor(t,e,r="imperative",c=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class m1 extends pv{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $R extends pv{constructor(t,e,r,c){super(t,e),this.reason=r,this.code=c,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qR extends pv{constructor(t,e,r,c){super(t,e),this.reason=r,this.code=c,this.type=16}}class LL extends pv{constructor(t,e,r,c){super(t,e),this.error=r,this.target=c,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class c8 extends pv{constructor(t,e,r,c){super(t,e),this.urlAfterRedirects=r,this.state=c,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l8 extends pv{constructor(t,e,r,c){super(t,e),this.urlAfterRedirects=r,this.state=c,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u8 extends pv{constructor(t,e,r,c,h){super(t,e),this.urlAfterRedirects=r,this.state=c,this.shouldActivate=h,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d8 extends pv{constructor(t,e,r,c){super(t,e),this.urlAfterRedirects=r,this.state=c,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h8 extends pv{constructor(t,e,r,c){super(t,e),this.urlAfterRedirects=r,this.state=c,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f8{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p8{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class m8{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g8{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _8{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v8{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EN{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let x8=(()=>{class n{createUrlTree(e,r,c,h,y,T){return t8(e||r.root,c,h,y,T)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),w8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(t){return x8.\u0275fac(t)},providedIn:"root"}),n})();class CN{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=OL(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=OL(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=FL(t,this._root);return e.length<2?[]:e[e.length-2].children.map(c=>c.value).filter(c=>c!==t)}pathFromRoot(t){return FL(t,this._root).map(e=>e.value)}}function OL(n,t){if(n===t.value)return t;for(const e of t.children){const r=OL(n,e);if(r)return r}return null}function FL(n,t){if(n===t.value)return[t];for(const e of t.children){const r=FL(n,e);if(r.length)return r.unshift(t),r}return[]}class Jy{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function sE(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class TN extends CN{constructor(t,e){super(t),this.snapshot=e,NL(this,t)}toString(){return this.snapshot.toString()}}function AN(n,t){const e=function S8(n,t){const y=new XR([],{},{},"",{},Qi,t,null,n.root,-1,{});return new RN("",new Jy(y,[]))}(n,t),r=new Ke([new RT("",{})]),c=new Ke({}),h=new Ke({}),y=new Ke({}),T=new Ke(""),L=new oE(r,c,y,T,h,Qi,t,e.root);return L.snapshot=e.root,new TN(new Jy(L,[]),e)}class oE{constructor(t,e,r,c,h,y,T,L){this.url=t,this.params=e,this.queryParams=r,this.fragment=c,this.data=h,this.outlet=y,this.component=T,this.title=this.data?.pipe(ri(z=>z[uM]))??ye(void 0),this._futureSnapshot=L}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ri(t=>Ky(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ri(t=>Ky(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DN(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const c=e[r],h=e[r-1];if(c.routeConfig&&""===c.routeConfig.path)r--;else{if(h.component)break;r--}}return function E8(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class XR{get title(){return this.data?.[uM]}constructor(t,e,r,c,h,y,T,L,z,X,ie){this.url=t,this.params=e,this.queryParams=r,this.fragment=c,this.data=h,this.outlet=y,this.component=T,this.routeConfig=L,this._urlSegment=z,this._lastPathIndex=X,this._resolve=ie}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ky(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RN extends CN{constructor(t,e){super(e),this.url=t,NL(this,e)}toString(){return IN(this._root)}}function NL(n,t){t.value._routerState=n,t.children.forEach(e=>NL(n,e))}function IN(n){const t=n.children.length>0?` { ${n.children.map(IN).join(", ")} } `:"";return`${n.value}${t}`}function UL(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,fv(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),fv(t.params,e.params)||n.params.next(e.params),function U5(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!fv(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),fv(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function BL(n,t){const e=fv(n.params,t.params)&&function H5(n,t){return f1(n,t)&&n.every((e,r)=>fv(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||BL(n.parent,t.parent))}function FT(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const c=function T8(n,t,e){return t.children.map(r=>{for(const c of e.children)if(n.shouldReuseRoute(r.value,c.value.snapshot))return FT(n,r,c);return FT(n,r)})}(n,t,e);return new Jy(r,c)}{if(n.shouldAttach(t.value)){const h=n.retrieve(t.value);if(null!==h){const y=h.route;return y.value._futureSnapshot=t.value,y.children=t.children.map(T=>FT(n,T)),y}}const r=function A8(n){return new oE(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}(t.value),c=t.children.map(h=>FT(n,h));return new Jy(r,c)}}const VL="ngNavigationCancelingError";function PN(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=p1(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,c=kN(!1,0,t);return c.url=e,c.navigationBehaviorOptions=r,c}function kN(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[VL]=!0,r.cancellationCode=t,e&&(r.url=e),r}function LN(n){return ON(n)&&p1(n.url)}function ON(n){return n&&n[VL]}class D8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new NT,this.attachRef=null}}let NT=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const c=this.getOrCreateContext(e);c.outlet=r,this.contexts.set(e,c)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new D8,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const YR=!1;let FN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qi,this.activateEvents=new Ai,this.deactivateEvents=new Ai,this.attachEvents=new Ai,this.detachEvents=new Ai,this.parentContexts=ei(NT),this.location=ei(Pd),this.changeDetector=ei(Xa),this.environmentInjector=ei(Wo)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:c}=e.name;if(r)return;this.isTrackedInParentContexts(c)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(c)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Jt(4012,YR);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Jt(4012,YR);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Jt(4012,YR);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Jt(4013,YR);this._activatedRoute=e;const c=this.location,y=e.snapshot.component,T=this.parentContexts.getOrCreateContext(this.name).children,L=new R8(e,T,c.injector);if(r&&function I8(n){return!!n.resolveComponentFactory}(r)){const z=r.resolveComponentFactory(y);this.activated=c.createComponent(z,c.length,L)}else this.activated=c.createComponent(y,{index:c.length,injector:L,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hr]}),n})();class R8{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===oE?this.route:t===NT?this.childContexts:this.parent.get(t,e)}}let zL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ri({type:n,selectors:[["ng-component"]],standalone:!0,features:[XE],decls:1,vars:0,template:function(e,r){1&e&&$n(0,"router-outlet")},dependencies:[FN],encapsulation:2}),n})();function NN(n,t){return n.providers&&!n._injector&&(n._injector=cS(n.providers,t,`Route: ${n.path}`)),n._injector??t}function GL(n){const t=n.children&&n.children.map(GL),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Qi&&(e.component=zL),e}function yg(n){return n.outlet||Qi}function UN(n,t){const e=n.filter(r=>yg(r)===t);return e.push(...n.filter(r=>yg(r)!==t)),e}function UT(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class F8{constructor(t,e,r,c){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=c}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),UL(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const c=sE(e);t.children.forEach(h=>{const y=h.value.outlet;this.deactivateRoutes(h,c[y],r),delete c[y]}),Hu(c,(h,y)=>{this.deactivateRouteAndItsChildren(h,r)})}deactivateRoutes(t,e,r){const c=t.value,h=e?e.value:null;if(c===h)if(c.component){const y=r.getContext(c.outlet);y&&this.deactivateChildRoutes(t,e,y.children)}else this.deactivateChildRoutes(t,e,r);else h&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),c=r&&t.value.component?r.children:e,h=sE(t);for(const y of Object.keys(h))this.deactivateRouteAndItsChildren(h[y],c);if(r&&r.outlet){const y=r.outlet.detach(),T=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:y,route:t,contexts:T})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),c=r&&t.value.component?r.children:e,h=sE(t);for(const y of Object.keys(h))this.deactivateRouteAndItsChildren(h[y],c);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const c=sE(e);t.children.forEach(h=>{this.activateRoutes(h,c[h.value.outlet],r),this.forwardEvent(new v8(h.value.snapshot))}),t.children.length&&this.forwardEvent(new g8(t.value.snapshot))}activateRoutes(t,e,r){const c=t.value,h=e?e.value:null;if(UL(c),c===h)if(c.component){const y=r.getOrCreateContext(c.outlet);this.activateChildRoutes(t,e,y.children)}else this.activateChildRoutes(t,e,r);else if(c.component){const y=r.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const T=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),y.children.onOutletReAttached(T.contexts),y.attachRef=T.componentRef,y.route=T.route.value,y.outlet&&y.outlet.attach(T.componentRef,T.route.value),UL(T.route.value),this.activateChildRoutes(t,null,y.children)}else{const T=UT(c.snapshot),L=T?.get(Nc)??null;y.attachRef=null,y.route=c,y.resolver=L,y.injector=T,y.outlet&&y.outlet.activateWith(c,y.injector),this.activateChildRoutes(t,null,y.children)}}else this.activateChildRoutes(t,null,r)}}class BN{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ZR{constructor(t,e){this.component=t,this.route=e}}function N8(n,t,e){const r=n._root;return BT(r,t?t._root:null,e,[r.value])}function aE(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function O1(n){return null!==Ov(n)}(n)?t.get(n):n:r}function BT(n,t,e,r,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=sE(t);return n.children.forEach(y=>{(function B8(n,t,e,r,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=n.value,y=t?t.value:null,T=e?e.getContext(n.value.outlet):null;if(y&&h.routeConfig===y.routeConfig){const L=function V8(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!f1(n.url,t.url);case"pathParamsOrQueryParamsChange":return!f1(n.url,t.url)||!fv(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BL(n,t)||!fv(n.queryParams,t.queryParams);default:return!BL(n,t)}}(y,h,h.routeConfig.runGuardsAndResolvers);L?c.canActivateChecks.push(new BN(r)):(h.data=y.data,h._resolvedData=y._resolvedData),BT(n,t,h.component?T?T.children:null:e,r,c),L&&T&&T.outlet&&T.outlet.isActivated&&c.canDeactivateChecks.push(new ZR(T.outlet.component,y))}else y&&VT(t,T,c),c.canActivateChecks.push(new BN(r)),BT(n,null,h.component?T?T.children:null:e,r,c)})(y,h[y.value.outlet],e,r.concat([y.value]),c),delete h[y.value.outlet]}),Hu(h,(y,T)=>VT(y,e.getContext(T),c)),c}function VT(n,t,e){const r=sE(n),c=n.value;Hu(r,(h,y)=>{VT(h,c.component?t?t.children.getContext(y):null:t,e)}),e.canDeactivateChecks.push(new ZR(c.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,c))}function zT(n){return"function"==typeof n}function WL(n){return n instanceof ke||"EmptyError"===n?.name}const KR=Symbol("INITIAL_VALUE");function cE(){return pn(n=>rt(n.map(t=>t.pipe(dn(1),Rt(KR)))).pipe(ri(t=>{for(const e of t)if(!0!==e){if(e===KR)return KR;if(!1===e||e instanceof hM)return e}return!0}),xn(t=>t!==KR),dn(1)))}function VN(n){return function wo(...n){return P_(n)}(ar(t=>{if(p1(t))throw PN(0,t)}),ri(t=>!0===t))}const jL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zN(n,t,e,r,c){const h=$L(n,t,e);return h.matched?function iH(n,t,e,r){const c=t.canMatch;return c&&0!==c.length?ye(c.map(y=>{const T=aE(y,n);return dM(function $8(n){return n&&zT(n.canMatch)}(T)?T.canMatch(t,e):n.runInContext(()=>T(t,e)))})).pipe(cE(),VN()):ye(!0)}(r=NN(t,r),t,e).pipe(ri(y=>!0===y?h:{...jL})):ye(h)}function $L(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...jL}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const c=(t.matcher||N5)(e,n,t);if(!c)return{...jL};const h={};Hu(c.posParams,(T,L)=>{h[L]=T.path});const y=c.consumed.length>0?{...h,...c.consumed[c.consumed.length-1].parameters}:h;return{matched:!0,consumedSegments:c.consumed,remainingSegments:e.slice(c.consumed.length),parameters:y,positionalParamSegments:c.posParams??{}}}function JR(n,t,e,r){if(e.length>0&&function oH(n,t,e){return e.some(r=>QR(n,t,r)&&yg(r)!==Qi)}(n,e,r)){const h=new Br(t,function sH(n,t,e,r){const c={};c[Qi]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const h of e)if(""===h.path&&yg(h)!==Qi){const y=new Br([],{});y._sourceSegment=n,y._segmentIndexShift=t.length,c[yg(h)]=y}return c}(n,t,r,new Br(e,n.children)));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function aH(n,t,e){return e.some(r=>QR(n,t,r))}(n,e,r)){const h=new Br(n.segments,function rH(n,t,e,r,c){const h={};for(const y of r)if(QR(n,e,y)&&!c[yg(y)]){const T=new Br([],{});T._sourceSegment=n,T._segmentIndexShift=t.length,h[yg(y)]=T}return{...c,...h}}(n,t,e,r,n.children));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:e}}const c=new Br(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}function QR(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function HN(n,t,e,r){return!!(yg(n)===r||r!==Qi&&QR(t,e,n))&&("**"===n.path||$L(t,n,e).matched)}function GN(n,t,e){return 0===t.length&&!n.children[e]}const eI=!1;class tI{constructor(t){this.segmentGroup=t||null}}class WN{constructor(t){this.urlTree=t}}function HT(n){return $t(new tI(n))}function jN(n){return $t(new WN(n))}class dH{constructor(t,e,r,c,h){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=c,this.config=h,this.allowRedirects=!0}apply(){const t=JR(this.urlTree.root,[],[],this.config).segmentGroup,e=new Br(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Qi).pipe(ri(h=>this.createUrlTree(jR(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vr(h=>{if(h instanceof WN)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof tI?this.noMatchError(h):h}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Qi).pipe(ri(c=>this.createUrlTree(jR(c),t.queryParams,t.fragment))).pipe(Vr(c=>{throw c instanceof tI?this.noMatchError(c):c}))}noMatchError(t){return new Jt(4002,eI)}createUrlTree(t,e,r){const c=DL(t);return new hM(c,e,r)}expandSegmentGroup(t,e,r,c){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(ri(h=>new Br([],h))):this.expandSegment(t,r,e,r.segments,c,!0)}expandChildren(t,e,r){const c=[];for(const h of Object.keys(r.children))"primary"===h?c.unshift(h):c.push(h);return Ms(c).pipe(wi(h=>{const y=r.children[h],T=UN(e,h);return this.expandSegmentGroup(t,T,y,h).pipe(ri(L=>({segment:L,outlet:h})))}),Ja((h,y)=>(h[y.outlet]=y.segment,h),{}),Ph())}expandSegment(t,e,r,c,h,y){return Ms(r).pipe(wi(T=>this.expandSegmentAgainstRoute(t,e,r,T,c,h,y).pipe(Vr(z=>{if(z instanceof tI)return ye(null);throw z}))),An(T=>!!T),Vr((T,L)=>{if(WL(T))return GN(e,c,h)?ye(new Br([],{})):HT(e);throw T}))}expandSegmentAgainstRoute(t,e,r,c,h,y,T){return HN(c,e,h,y)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(t,e,c,h,y):T&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,c,h,y):HT(e):HT(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,c,h,y){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,c,y):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,c,h,y)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,c){const h=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jN(h):this.lineralizeSegments(r,h).pipe(ns(y=>{const T=new Br(y,{});return this.expandSegment(t,T,e,y,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,c,h,y){const{matched:T,consumedSegments:L,remainingSegments:z,positionalParamSegments:X}=$L(e,c,h);if(!T)return HT(e);const ie=this.applyRedirectCommands(L,c.redirectTo,X);return c.redirectTo.startsWith("/")?jN(ie):this.lineralizeSegments(c,ie).pipe(ns(pe=>this.expandSegment(t,e,r,pe.concat(z),y,!1)))}matchSegmentAgainstRoute(t,e,r,c,h){return"**"===r.path?(t=NN(r,t),r.loadChildren?(r._loadedRoutes?ye({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(ri(T=>(r._loadedRoutes=T.routes,r._loadedInjector=T.injector,new Br(c,{})))):ye(new Br(c,{}))):zN(e,r,c,t).pipe(pn(({matched:y,consumedSegments:T,remainingSegments:L})=>y?this.getChildConfig(t=r._injector??t,r,c).pipe(ns(X=>{const ie=X.injector??t,pe=X.routes,{segmentGroup:Te,slicedSegments:Le}=JR(e,T,L,pe),st=new Br(Te.segments,Te.children);if(0===Le.length&&st.hasChildren())return this.expandChildren(ie,pe,st).pipe(ri(ln=>new Br(T,ln)));if(0===pe.length&&0===Le.length)return ye(new Br(T,{}));const kt=yg(r)===h;return this.expandSegment(ie,st,pe,Le,kt?Qi:h,!0).pipe(ri(Dn=>new Br(T.concat(Dn.segments),Dn.children)))})):HT(e)))}getChildConfig(t,e,r){return e.children?ye({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ye({routes:e._loadedRoutes,injector:e._loadedInjector}):function nH(n,t,e,r){const c=t.canLoad;return void 0===c||0===c.length?ye(!0):ye(c.map(y=>{const T=aE(y,n);return dM(function H8(n){return n&&zT(n.canLoad)}(T)?T.canLoad(t,e):n.runInContext(()=>T(t,e)))})).pipe(cE(),VN())}(t,e,r).pipe(ns(c=>c?this.configLoader.loadChildren(t,e).pipe(ar(h=>{e._loadedRoutes=h.routes,e._loadedInjector=h.injector})):function lH(n){return $t(kN(eI,3))}())):ye({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],c=e.root;for(;;){if(r=r.concat(c.segments),0===c.numberOfChildren)return ye(r);if(c.numberOfChildren>1||!c.children[Qi])return t.redirectTo,$t(new Jt(4e3,eI));c=c.children[Qi]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,c){const h=this.createSegmentGroup(t,e.root,r,c);return new hM(h,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Hu(t,(c,h)=>{if("string"==typeof c&&c.startsWith(":")){const T=c.substring(1);r[h]=e[T]}else r[h]=c}),r}createSegmentGroup(t,e,r,c){const h=this.createSegments(t,e.segments,r,c);let y={};return Hu(e.children,(T,L)=>{y[L]=this.createSegmentGroup(t,T,r,c)}),new Br(h,y)}createSegments(t,e,r,c){return e.map(h=>h.path.startsWith(":")?this.findPosParam(t,h,c):this.findOrReturn(h,r))}findPosParam(t,e,r){const c=r[e.path.substring(1)];if(!c)throw new Jt(4001,eI);return c}findOrReturn(t,e){let r=0;for(const c of e){if(c.path===t.path)return e.splice(r),c;r++}return t}}class fH{}class gH{constructor(t,e,r,c,h,y,T){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=c,this.url=h,this.paramsInheritanceStrategy=y,this.urlSerializer=T}recognize(){const t=JR(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Qi).pipe(ri(e=>{if(null===e)return null;const r=new XR([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qi,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new Jy(r,e),h=new RN(this.url,c);return this.inheritParamsAndData(h._root),h}))}inheritParamsAndData(t){const e=t.value,r=DN(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(t,e,r,c){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,c)}processChildren(t,e,r){return Ms(Object.keys(r.children)).pipe(wi(c=>{const h=r.children[c],y=UN(e,c);return this.processSegmentGroup(t,y,h,c)}),Ja((c,h)=>c&&h?(c.push(...h),c):null),function hv(n,t=!1){return qr((e,r)=>{let c=0;e.subscribe(mr(r,h=>{const y=n(h,c++);(y||t)&&r.next(h),!y&&r.complete()}))})}(c=>null!==c),ti(null),Ph(),ri(c=>{if(null===c)return null;const h=qN(c);return function _H(n){n.sort((t,e)=>t.value.outlet===Qi?-1:e.value.outlet===Qi?1:t.value.outlet.localeCompare(e.value.outlet))}(h),h}))}processSegment(t,e,r,c,h){return Ms(e).pipe(wi(y=>this.processSegmentAgainstRoute(y._injector??t,y,r,c,h)),An(y=>!!y),Vr(y=>{if(WL(y))return GN(r,c,h)?ye([]):ye(null);throw y}))}processSegmentAgainstRoute(t,e,r,c,h){if(e.redirectTo||!HN(e,r,c,h))return ye(null);let y;if("**"===e.path){const T=c.length>0?cN(c).parameters:{},L=YN(r)+c.length;y=ye({snapshot:new XR(c,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZN(e),yg(e),e.component??e._loadedComponent??null,e,XN(r),L,KN(e)),consumedSegments:[],remainingSegments:[]})}else y=zN(r,e,c,t).pipe(ri(({matched:T,consumedSegments:L,remainingSegments:z,parameters:X})=>{if(!T)return null;const ie=YN(r)+L.length;return{snapshot:new XR(L,X,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZN(e),yg(e),e.component??e._loadedComponent??null,e,XN(r),ie,KN(e)),consumedSegments:L,remainingSegments:z}}));return y.pipe(pn(T=>{if(null===T)return ye(null);const{snapshot:L,consumedSegments:z,remainingSegments:X}=T;t=e._injector??t;const ie=e._loadedInjector??t,pe=function vH(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:Te,slicedSegments:Le}=JR(r,z,X,pe.filter(kt=>void 0===kt.redirectTo));if(0===Le.length&&Te.hasChildren())return this.processChildren(ie,pe,Te).pipe(ri(kt=>null===kt?null:[new Jy(L,kt)]));if(0===pe.length&&0===Le.length)return ye([new Jy(L,[])]);const st=yg(e)===h;return this.processSegment(ie,pe,Te,Le,st?Qi:h).pipe(ri(kt=>null===kt?null:[new Jy(L,kt)]))}))}}function yH(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function qN(n){const t=[],e=new Set;for(const r of n){if(!yH(r)){t.push(r);continue}const c=t.find(h=>r.value.routeConfig===h.value.routeConfig);void 0!==c?(c.children.push(...r.children),e.add(c)):t.push(r)}for(const r of e){const c=qN(r.children);t.push(new Jy(r.value,c))}return t.filter(r=>!e.has(r))}function XN(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function YN(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function ZN(n){return n.data||{}}function KN(n){return n.resolve||{}}function JN(n){return"string"==typeof n.title||null===n.title}function qL(n){return pn(t=>{const e=n(t);return e?Ms(e).pipe(ri(()=>t)):ye(t)})}const lE=new jt("ROUTES");let XL=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ei(CC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ye(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=dM(e.loadComponent()).pipe(ri(eU),ar(h=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=h}),h1(()=>{this.componentLoaders.delete(e)})),c=new Xt(r,()=>new Ci).pipe(kn());return this.componentLoaders.set(e,c),c}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const h=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ri(T=>{this.onLoadEndListener&&this.onLoadEndListener(r);let L,z,X=!1;Array.isArray(T)?z=T:(L=T.create(e).injector,z=aN(L.get(lE,[],Ii.Self|Ii.Optional)));return{routes:z.map(GL),injector:L}}),h1(()=>{this.childrenLoaders.delete(r)})),y=new Xt(h,()=>new Ci).pipe(kn());return this.childrenLoaders.set(r,y),y}loadModuleFactoryOrRoutes(e){return dM(e()).pipe(ri(eU),ns(r=>r instanceof DA||Array.isArray(r)?ye(r):Ms(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eU(n){return function TH(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let iI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ci,this.configLoader=ei(XL),this.environmentInjector=ei(Wo),this.urlSerializer=ei(IT),this.rootContexts=ei(NT),this.navigationId=0,this.afterPreactivation=()=>ye(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=c=>this.events.next(new p8(c)),this.configLoader.onLoadStartListener=c=>this.events.next(new f8(c))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Ke({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:OT,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xn(r=>0!==r.id),ri(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),pn(r=>{let c=!1,h=!1;return ye(r).pipe(ar(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pn(y=>{const T=e.browserUrlTree.toString(),L=!e.navigated||y.extractedUrl.toString()!==T||T!==e.currentUrlTree.toString();if(!L&&"reload"!==(y.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const X="";return this.events.next(new qR(y.id,e.serializeUrl(r.rawUrl),X,0)),e.rawUrlTree=y.rawUrl,y.resolve(null),ua}if(e.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return tU(y.source)&&(e.browserUrlTree=y.extractedUrl),ye(y).pipe(pn(X=>{const ie=this.transitions?.getValue();return this.events.next(new kL(X.id,this.urlSerializer.serialize(X.extractedUrl),X.source,X.restoredState)),ie!==this.transitions?.getValue()?ua:Promise.resolve(X)}),function hH(n,t,e,r){return pn(c=>function uH(n,t,e,r,c){return new dH(n,t,e,r,c).apply()}(n,t,e,c.extractedUrl,r).pipe(ri(h=>({...c,urlAfterRedirects:h}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),ar(X=>{this.currentNavigation={...this.currentNavigation,finalUrl:X.urlAfterRedirects},r.urlAfterRedirects=X.urlAfterRedirects}),function xH(n,t,e,r,c){return ns(h=>function mH(n,t,e,r,c,h,y="emptyOnly"){return new gH(n,t,e,r,c,y,h).recognize().pipe(pn(T=>null===T?function pH(n){return new pr(t=>t.error(n))}(new fH):ye(T)))}(n,t,e,h.urlAfterRedirects,r.serialize(h.urlAfterRedirects),r,c).pipe(ri(y=>({...h,targetSnapshot:y}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),ar(X=>{if(r.targetSnapshot=X.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!X.extras.skipLocationChange){const pe=e.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl);e.setBrowserUrl(pe,X)}e.browserUrlTree=X.urlAfterRedirects}const ie=new c8(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(ie)}));if(L&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:X,extractedUrl:ie,source:pe,restoredState:Te,extras:Le}=y,st=new kL(X,this.urlSerializer.serialize(ie),pe,Te);this.events.next(st);const kt=AN(ie,this.rootComponentType).snapshot;return ye(r={...y,targetSnapshot:kt,urlAfterRedirects:ie,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}{const X="";return this.events.next(new qR(y.id,e.serializeUrl(r.extractedUrl),X,1)),e.rawUrlTree=y.rawUrl,y.resolve(null),ua}}),ar(y=>{const T=new l8(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(T)}),ri(y=>r={...y,guards:N8(y.targetSnapshot,y.currentSnapshot,this.rootContexts)}),function X8(n,t){return ns(e=>{const{targetSnapshot:r,currentSnapshot:c,guards:{canActivateChecks:h,canDeactivateChecks:y}}=e;return 0===y.length&&0===h.length?ye({...e,guardsResult:!0}):function Y8(n,t,e,r){return Ms(n).pipe(ns(c=>function tH(n,t,e,r,c){const h=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return h&&0!==h.length?ye(h.map(T=>{const L=UT(t)??c,z=aE(T,L);return dM(function j8(n){return n&&zT(n.canDeactivate)}(z)?z.canDeactivate(n,t,e,r):L.runInContext(()=>z(n,t,e,r))).pipe(An())})).pipe(cE()):ye(!0)}(c.component,c.route,e,t,r)),An(c=>!0!==c,!0))}(y,r,c,n).pipe(ns(T=>T&&function z8(n){return"boolean"==typeof n}(T)?function Z8(n,t,e,r){return Ms(t).pipe(wi(c=>Vt(function J8(n,t){return null!==n&&t&&t(new m8(n)),ye(!0)}(c.route.parent,r),function K8(n,t){return null!==n&&t&&t(new _8(n)),ye(!0)}(c.route,r),function eH(n,t,e){const r=t[t.length-1],h=t.slice(0,t.length-1).reverse().map(y=>function U8(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(y)).filter(y=>null!==y).map(y=>bn(()=>ye(y.guards.map(L=>{const z=UT(y.node)??e,X=aE(L,z);return dM(function W8(n){return n&&zT(n.canActivateChild)}(X)?X.canActivateChild(r,n):z.runInContext(()=>X(r,n))).pipe(An())})).pipe(cE())));return ye(h).pipe(cE())}(n,c.path,e),function Q8(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ye(!0);const c=r.map(h=>bn(()=>{const y=UT(t)??e,T=aE(h,y);return dM(function G8(n){return n&&zT(n.canActivate)}(T)?T.canActivate(t,n):y.runInContext(()=>T(t,n))).pipe(An())}));return ye(c).pipe(cE())}(n,c.route,e))),An(c=>!0!==c,!0))}(r,h,n,t):ye(T)),ri(T=>({...e,guardsResult:T})))})}(this.environmentInjector,y=>this.events.next(y)),ar(y=>{if(r.guardsResult=y.guardsResult,p1(y.guardsResult))throw PN(0,y.guardsResult);const T=new u8(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.events.next(T)}),xn(y=>!!y.guardsResult||(e.restoreHistory(y),this.cancelNavigationTransition(y,"",3),!1)),qL(y=>{if(y.guards.canActivateChecks.length)return ye(y).pipe(ar(T=>{const L=new d8(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(L)}),pn(T=>{let L=!1;return ye(T).pipe(function MH(n,t){return ns(e=>{const{targetSnapshot:r,guards:{canActivateChecks:c}}=e;if(!c.length)return ye(e);let h=0;return Ms(c).pipe(wi(y=>function wH(n,t,e,r){const c=n.routeConfig,h=n._resolve;return void 0!==c?.title&&!JN(c)&&(h[uM]=c.title),function SH(n,t,e,r){const c=function EH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===c.length)return ye({});const h={};return Ms(c).pipe(ns(y=>function CH(n,t,e,r){const c=UT(t)??r,h=aE(n,c);return dM(h.resolve?h.resolve(t,e):c.runInContext(()=>h(t,e)))}(n[y],t,e,r).pipe(An(),ar(T=>{h[y]=T}))),lM(1),DT(h),Vr(y=>WL(y)?ua:$t(y)))}(h,n,t,r).pipe(ri(y=>(n._resolvedData=y,n.data=DN(n,e).resolve,c&&JN(c)&&(n.data[uM]=c.title),null)))}(y.route,r,n,t)),ar(()=>h++),lM(1),ns(y=>h===c.length?ye(e):ua))})}(e.paramsInheritanceStrategy,this.environmentInjector),ar({next:()=>L=!0,complete:()=>{L||(e.restoreHistory(T),this.cancelNavigationTransition(T,"",2))}}))}),ar(T=>{const L=new h8(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(L)}))}),qL(y=>{const T=L=>{const z=[];L.routeConfig?.loadComponent&&!L.routeConfig._loadedComponent&&z.push(this.configLoader.loadComponent(L.routeConfig).pipe(ar(X=>{L.component=X}),ri(()=>{})));for(const X of L.children)z.push(...T(X));return z};return rt(T(y.targetSnapshot.root)).pipe(ti(),dn(1))}),qL(()=>this.afterPreactivation()),ri(y=>{const T=function C8(n,t,e){const r=FT(n,t._root,e?e._root:void 0);return new TN(r,t)}(e.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return r={...y,targetRouterState:T}}),ar(y=>{e.currentUrlTree=y.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),e.routerState=y.targetRouterState,"deferred"===e.urlUpdateStrategy&&(y.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,y),e.browserUrlTree=y.urlAfterRedirects)}),((n,t,e)=>ri(r=>(new F8(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,y=>this.events.next(y)),dn(1),ar({next:y=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new m1(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(y.targetRouterState.snapshot),y.resolve(!0)},complete:()=>{c=!0}}),h1(()=>{c||h||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Vr(y=>{if(h=!0,ON(y)){LN(y)||(e.navigated=!0,e.restoreHistory(r,!0));const T=new $R(r.id,this.urlSerializer.serialize(r.extractedUrl),y.message,y.cancellationCode);if(this.events.next(T),LN(y)){const L=e.urlHandlingStrategy.merge(y.url,e.rawUrlTree),z={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||tU(r.source)};e.scheduleNavigation(L,OT,null,z,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const T=new LL(r.id,this.urlSerializer.serialize(r.extractedUrl),y,r.targetSnapshot??void 0);this.events.next(T);try{r.resolve(e.errorHandler(y))}catch(L){r.reject(L)}}return ua}))}))}cancelNavigationTransition(e,r,c){const h=new $R(e.id,this.urlSerializer.serialize(e.extractedUrl),r,c);this.events.next(h),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tU(n){return n!==OT}let nU=(()=>{class n{buildTitle(e){let r,c=e.root;for(;void 0!==c;)r=this.getResolvedTitleForRoute(c)??r,c=c.children.find(h=>h.outlet===Qi);return r}getResolvedTitleForRoute(e){return e.data[uM]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return ei(AH)},providedIn:"root"}),n})(),AH=(()=>{class n extends nU{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(ut(FR))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return ei(IH)},providedIn:"root"}),n})();class RH{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let IH=(()=>{class n extends RH{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=co(n)))(r||n)}}(),n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rI=new jt("",{providedIn:"root",factory:()=>({})});let kH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:function(){return ei(LH)},providedIn:"root"}),n})(),LH=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OH(n){throw n}function FH(n,t,e){return t.parse("/")}const NH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nm=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ei(lP),this.isNgZoneEnabled=!1,this.options=ei(rI,{optional:!0})||{},this.errorHandler=this.options.errorHandler||OH,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||FH,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ei(kH),this.routeReuseStrategy=ei(DH),this.urlCreationStrategy=ei(w8),this.titleStrategy=ei(nU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=aN(ei(lE,{optional:!0})??[]),this.navigationTransitions=ei(iI),this.urlSerializer=ei(IT),this.location=ei(Zw),this.isNgZoneEnabled=ei(xi)instanceof xi&&xi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hM,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=AN(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),OT,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,c){const h={replaceUrl:!0},y=c?.navigationId?c:null;if(c){const L={...c};delete L.navigationId,delete L.\u0275routerPageId,0!==Object.keys(L).length&&(h.state=L)}const T=this.parseUrl(e);this.scheduleNavigation(T,r,y,h)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(GL),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:c,queryParams:h,fragment:y,queryParamsHandling:T,preserveFragment:L}=r,z=L?this.currentUrlTree.fragment:y;let X=null;switch(T){case"merge":X={...this.currentUrlTree.queryParams,...h};break;case"preserve":X=this.currentUrlTree.queryParams;break;default:X=h||null}return null!==X&&(X=this.removeEmptyProps(X)),this.urlCreationStrategy.createUrlTree(c,this.routerState,this.currentUrlTree,e,X,z??null)}navigateByUrl(e,r={skipLocationChange:!1}){const c=p1(e)?e:this.parseUrl(e),h=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(h,OT,null,r)}navigate(e,r={skipLocationChange:!1}){return function BH(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Jt(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(c){r=this.malformedUriErrorHandler(c,this.urlSerializer,e)}return r}isActive(e,r){let c;if(c=!0===r?{...NH}:!1===r?{...UH}:r,p1(e))return uN(this.currentUrlTree,e,c);const h=this.parseUrl(e);return uN(this.currentUrlTree,h,c)}removeEmptyProps(e){return Object.keys(e).reduce((r,c)=>{const h=e[c];return null!=h&&(r[c]=h),r},{})}scheduleNavigation(e,r,c,h,y){if(this.disposed)return Promise.resolve(!1);let T,L,z,X;return y?(T=y.resolve,L=y.reject,z=y.promise):z=new Promise((ie,pe)=>{T=ie,L=pe}),X="computed"===this.canceledNavigationResolution?c&&c.\u0275routerPageId?c.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:X,source:r,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:h,resolve:T,reject:L,promise:z,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),z.catch(ie=>Promise.reject(ie))}setBrowserUrl(e,r){const c=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(c)||r.extras.replaceUrl){const y={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(c,"",y)}else{const h={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(c,"",h)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-(this.browserPageId??this.currentPageId);0!==h?this.location.historyGo(h):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===h&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iU{}let HH=(()=>{class n{constructor(e,r,c,h,y){this.router=e,this.injector=c,this.preloadingStrategy=h,this.loader=y}setUpPreloading(){this.subscription=this.router.events.pipe(xn(e=>e instanceof m1),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const c=[];for(const h of r){h.providers&&!h._injector&&(h._injector=cS(h.providers,e,`Route: ${h.path}`));const y=h._injector??e,T=h._loadedInjector??y;(h.loadChildren&&!h._loadedRoutes&&void 0===h.canLoad||h.loadComponent&&!h._loadedComponent)&&c.push(this.preloadConfig(y,h)),(h.children||h._loadedRoutes)&&c.push(this.processRoutes(T,h.children??h._loadedRoutes))}return Ms(c).pipe(Xu())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let c;c=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):ye(null);const h=c.pipe(ns(y=>null===y?ye(void 0):(r._loadedRoutes=y.routes,r._loadedInjector=y.injector,this.processRoutes(y.injector??e,y.routes))));return r.loadComponent&&!r._loadedComponent?Ms([h,this.loader.loadComponent(r)]).pipe(Xu()):h})}}return n.\u0275fac=function(e){return new(e||n)(ut(nm),ut(CC),ut(Wo),ut(iU),ut(XL))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KL=new jt("");let rU=(()=>{class n{constructor(e,r,c,h,y={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=c,this.zone=h,this.options=y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},y.scrollPositionRestoration=y.scrollPositionRestoration||"disabled",y.anchorScrolling=y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof kL?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof m1&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof EN&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new EN(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){Ip()},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();var im=(()=>((im=im||{})[im.COMPLETE=0]="COMPLETE",im[im.FAILED=1]="FAILED",im[im.REDIRECTING=2]="REDIRECTING",im))();const uE=!1;function fM(n,t){return{\u0275kind:n,\u0275providers:t}}const JL=new jt("",{providedIn:"root",factory:()=>!1});function oU(){const n=ei(js);return t=>{const e=n.get(Yx);if(t!==e.components[0])return;const r=n.get(nm),c=n.get(aU);1===n.get(QL)&&r.initialNavigation(),n.get(cU,null,Ii.Optional)?.setUpPreloading(),n.get(KL,null,Ii.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),c.closed||(c.next(),c.complete(),c.unsubscribe())}}const aU=new jt(uE?"bootstrap done indicator":"",{factory:()=>new Ci}),QL=new jt(uE?"initial navigation":"",{providedIn:"root",factory:()=>1});function qH(){let n=[];return n=uE?[{provide:md,multi:!0,useFactory:()=>{const t=ei(nm);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function y8(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],fM(1,n)}const cU=new jt(uE?"router preloader":"");function XH(n){return fM(0,[{provide:cU,useExisting:HH},{provide:iU,useExisting:n}])}const GT=!1,lU=new jt(GT?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),YH=[Zw,{provide:IT,useClass:TL},nm,NT,{provide:oE,useFactory:function sU(n){return n.routerState.root},deps:[nm]},XL,GT?{provide:JL,useValue:!0}:[]];function ZH(){return new Hy("Router",nm)}let uU=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[YH,GT&&r?.enableTracing?qH().\u0275providers:[],{provide:lE,multi:!0,useValue:e},{provide:lU,useFactory:e6,deps:[[nm,new Wl,new rp]]},{provide:rI,useValue:r||{}},r?.useHash?{provide:qy,useClass:qP}:{provide:qy,useClass:AD},{provide:KL,useFactory:()=>{const n=ei(zk),t=ei(xi),e=ei(rI),r=ei(iI),c=ei(IT);return e.scrollOffset&&n.setOffset(e.scrollOffset),new rU(c,r,n,t,e)}},r?.preloadingStrategy?XH(r.preloadingStrategy).\u0275providers:[],{provide:Hy,multi:!0,useFactory:ZH},r?.initialNavigation?t6(r):[],[{provide:dU,useFactory:oU},{provide:Hw,multi:!0,useExisting:dU}]]}}static forChild(e){return{ngModule:n,providers:[{provide:lE,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(ut(lU,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[zL]}),n})();function e6(n){if(GT&&n)throw new Jt(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function t6(n){return["disabled"===n.initialNavigation?fM(3,[{provide:Bw,multi:!0,useFactory:()=>{const t=ei(nm);return()=>{t.setUpLocationChangeListener()}}},{provide:QL,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fM(2,[{provide:QL,useValue:0},{provide:Bw,multi:!0,deps:[js],useFactory:t=>{const e=t.get($P,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const c=t.get(nm),h=t.get(aU);(function GH(n,t){n.events.pipe(xn(e=>e instanceof m1||e instanceof $R||e instanceof LL||e instanceof qR),ri(e=>e instanceof m1||e instanceof qR?im.COMPLETE:e instanceof $R&&(0===e.code||1===e.code)?im.REDIRECTING:im.FAILED),xn(e=>e!==im.REDIRECTING),dn(1)).subscribe(()=>{t()})})(c,()=>{r(!0)}),t.get(iI).afterPreactivation=()=>(r(!0),h.closed?ye(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const dU=new jt(GT?"Router Initializer":""),i6=[];let r6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({imports:[uU.forRoot(i6),uU]})}return n})();class hU{}class s6{}const Qy="*";function eb(n,t){return{type:7,name:n,definitions:t,options:{}}}function bg(n,t=null){return{type:4,styles:t,timings:n}}function pU(n,t=null){return{type:2,steps:n,options:t}}function Qa(n){return{type:6,styles:n,offset:null}}function xg(n,t,e){return{type:0,name:n,styles:t,options:e}}function rm(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function mU(n){Promise.resolve().then(n)}class WT{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){mU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class gU{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,c=0;const h=this.players.length;0==h?mU(()=>this._onFinish()):this.players.forEach(y=>{y.onDone(()=>{++e==h&&this._onFinish()}),y.onDestroy(()=>{++r==h&&this._onDestroy()}),y.onStart(()=>{++c==h&&this._onStart()})}),this.totalTime=this.players.reduce((y,T)=>Math.max(y,T.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const c=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(c)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const nO="!";function _U(n){return new Jt(3e3,!1)}function V6(){return typeof window<"u"&&typeof window.document<"u"}function iO(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function pM(n){switch(n.length){case 0:return new WT;case 1:return n[0];default:return new gU(n)}}function vU(n,t,e,r,c=new Map,h=new Map){const y=[],T=[];let L=-1,z=null;if(r.forEach(X=>{const ie=X.get("offset"),pe=ie==L,Te=pe&&z||new Map;X.forEach((Le,st)=>{let kt=st,Kt=Le;if("offset"!==st)switch(kt=t.normalizePropertyName(kt,y),Kt){case nO:Kt=c.get(st);break;case Qy:Kt=h.get(st);break;default:Kt=t.normalizeStyleValue(st,kt,Kt,y)}Te.set(kt,Kt)}),pe||T.push(Te),z=Te,L=ie}),y.length)throw function A6(n){return new Jt(3502,!1)}();return T}function rO(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&sO(e,"start",n)));break;case"done":n.onDone(()=>r(e&&sO(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&sO(e,"destroy",n)))}}function sO(n,t,e){const h=oO(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),y=n._data;return null!=y&&(h._data=y),h}function oO(n,t,e,r,c="",h=0,y){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:c,totalTime:h,disabled:!!y}}function sm(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function yU(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let aO=(n,t)=>!1,bU=(n,t,e)=>[],xU=null;function cO(n){const t=n.parentNode||n.host;return t===xU?null:t}(iO()||typeof Element<"u")&&(V6()?(xU=(()=>document.documentElement)(),aO=(n,t)=>{for(;t;){if(t===n)return!0;t=cO(t)}return!1}):aO=(n,t)=>n.contains(t),bU=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let g1=null,MU=!1;const wU=aO,SU=bU;let EU=(()=>{class n{validateStyleProperty(e){return function H6(n){g1||(g1=function G6(){return typeof document<"u"?document.body:null}()||{},MU=!!g1.style&&"WebkitAppearance"in g1.style);let t=!0;return g1.style&&!function z6(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in g1.style,!t&&MU&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in g1.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return wU(e,r)}getParentElement(e){return cO(e)}query(e,r,c){return SU(e,r,c)}computeStyle(e,r,c){return c||""}animate(e,r,c,h,y,T=[],L){return new WT(c,h)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),lO=(()=>{class n{}return n.NOOP=new EU,n})();const W6=1e3,uO="ng-enter",sI="ng-leave",oI="ng-trigger",aI=".ng-trigger",TU="ng-animating",dO=".ng-animating";function tb(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:hO(parseFloat(t[1]),t[2])}function hO(n,t){return"s"===t?n*W6:n}function cI(n,t,e){return n.hasOwnProperty("duration")?n:function $6(n,t,e){let c,h=0,y="";if("string"==typeof n){const T=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===T)return t.push(_U()),{duration:0,delay:0,easing:""};c=hO(parseFloat(T[1]),T[2]);const L=T[3];null!=L&&(h=hO(parseFloat(L),T[4]));const z=T[5];z&&(y=z)}else c=n;if(!e){let T=!1,L=t.length;c<0&&(t.push(function o6(){return new Jt(3100,!1)}()),T=!0),h<0&&(t.push(function a6(){return new Jt(3101,!1)}()),T=!0),T&&t.splice(L,0,_U())}return{duration:c,delay:h,easing:y}}(n,t,e)}function jT(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function AU(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function mM(n,t=new Map,e){if(e)for(let[r,c]of e)t.set(r,c);for(let[r,c]of n)t.set(r,c);return t}function RU(n,t,e){return e?t+":"+e+";":""}function IU(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=RU(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=RU(0,Z6(e),n.style[e]));n.setAttribute("style",t)}function mv(n,t,e){n.style&&(t.forEach((r,c)=>{const h=pO(c);e&&!e.has(c)&&e.set(c,n.style[h]),n.style[h]=r}),iO()&&IU(n))}function _1(n,t){n.style&&(t.forEach((e,r)=>{const c=pO(r);n.style[c]=""}),iO()&&IU(n))}function $T(n){return Array.isArray(n)?1==n.length?n[0]:pU(n):n}const fO=new RegExp("{{\\s*(.+?)\\s*}}","g");function PU(n){let t=[];if("string"==typeof n){let e;for(;e=fO.exec(n);)t.push(e[1]);fO.lastIndex=0}return t}function qT(n,t,e){const r=n.toString(),c=r.replace(fO,(h,y)=>{let T=t[y];return null==T&&(e.push(function l6(n){return new Jt(3003,!1)}()),T=""),T.toString()});return c==r?n:c}function lI(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Y6=/-+([a-z0-9])/g;function pO(n){return n.replace(Y6,(...t)=>t[1].toUpperCase())}function Z6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function om(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function u6(n){return new Jt(3004,!1)}()}}function kU(n,t){return window.getComputedStyle(n)[t]}const hI="*";function nG(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function iG(n,t,e){if(":"==n[0]){const L=function rG(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function S6(n){return new Jt(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof L)return void t.push(L);n=L}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function w6(n){return new Jt(3015,!1)}()),t;const c=r[1],h=r[2],y=r[3];t.push(LU(c,y));"<"==h[0]&&!(c==hI&&y==hI)&&t.push(LU(y,c))}(r,e,t)):e.push(n),e}const fI=new Set(["true","1"]),pI=new Set(["false","0"]);function LU(n,t){const e=fI.has(n)||pI.has(n),r=fI.has(t)||pI.has(t);return(c,h)=>{let y=n==hI||n==c,T=t==hI||t==h;return!y&&e&&"boolean"==typeof c&&(y=c?fI.has(n):pI.has(n)),!T&&r&&"boolean"==typeof h&&(T=h?fI.has(t):pI.has(t)),y&&T}}const sG=new RegExp("s*:selfs*,?","g");function mO(n,t,e,r){return new oG(n).build(t,e,r)}class oG{constructor(t){this._driver=t}build(t,e,r){const c=new lG(e);return this._resetContextStyleTimingState(c),om(this,$T(t),c)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,c=e.depCount=0;const h=[],y=[];return"@"==t.name.charAt(0)&&e.errors.push(function h6(){return new Jt(3006,!1)}()),t.definitions.forEach(T=>{if(this._resetContextStyleTimingState(e),0==T.type){const L=T,z=L.name;z.toString().split(/\s*,\s*/).forEach(X=>{L.name=X,h.push(this.visitState(L,e))}),L.name=z}else if(1==T.type){const L=this.visitTransition(T,e);r+=L.queryCount,c+=L.depCount,y.push(L)}else e.errors.push(function f6(){return new Jt(3007,!1)}())}),{type:7,name:t.name,states:h,transitions:y,queryCount:r,depCount:c,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),c=t.options&&t.options.params||null;if(r.containsDynamicStyles){const h=new Set,y=c||{};r.styles.forEach(T=>{T instanceof Map&&T.forEach(L=>{PU(L).forEach(z=>{y.hasOwnProperty(z)||h.add(z)})})}),h.size&&(lI(h.values()),e.errors.push(function p6(n,t){return new Jt(3008,!1)}()))}return{type:0,name:t.name,style:r,options:c?{params:c}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=om(this,$T(t.animation),e);return{type:1,matchers:nG(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:v1(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>om(this,r,e)),options:v1(t.options)}}visitGroup(t,e){const r=e.currentTime;let c=0;const h=t.steps.map(y=>{e.currentTime=r;const T=om(this,y,e);return c=Math.max(c,e.currentTime),T});return e.currentTime=c,{type:3,steps:h,options:v1(t.options)}}visitAnimate(t,e){const r=function dG(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return gO(cI(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=gO(0,0,"");return h.dynamic=!0,h.strValue=e,h}const c=cI(e,t);return gO(c.duration,c.delay,c.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let c,h=t.styles?t.styles:Qa({});if(5==h.type)c=this.visitKeyframes(h,e);else{let y=t.styles,T=!1;if(!y){T=!0;const z={};r.easing&&(z.easing=r.easing),y=Qa(z)}e.currentTime+=r.duration+r.delay;const L=this.visitStyle(y,e);L.isEmptyStep=T,c=L}return e.currentAnimateTimings=null,{type:4,timings:r,style:c,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],c=Array.isArray(t.styles)?t.styles:[t.styles];for(let T of c)"string"==typeof T?T===Qy?r.push(T):e.errors.push(new Jt(3002,!1)):r.push(AU(T));let h=!1,y=null;return r.forEach(T=>{if(T instanceof Map&&(T.has("easing")&&(y=T.get("easing"),T.delete("easing")),!h))for(let L of T.values())if(L.toString().indexOf("{{")>=0){h=!0;break}}),{type:6,styles:r,easing:y,offset:t.offset,containsDynamicStyles:h,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let c=e.currentTime,h=e.currentTime;r&&h>0&&(h-=r.duration+r.delay),t.styles.forEach(y=>{"string"!=typeof y&&y.forEach((T,L)=>{const z=e.collectedStyles.get(e.currentQuerySelector),X=z.get(L);let ie=!0;X&&(h!=c&&h>=X.startTime&&c<=X.endTime&&(e.errors.push(function g6(n,t,e,r,c){return new Jt(3010,!1)}()),ie=!1),h=X.startTime),ie&&z.set(L,{startTime:h,endTime:c}),e.options&&function X6(n,t,e){const r=t.params||{},c=PU(n);c.length&&c.forEach(h=>{r.hasOwnProperty(h)||e.push(function c6(n){return new Jt(3001,!1)}())})}(T,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function _6(){return new Jt(3011,!1)}()),r;let h=0;const y=[];let T=!1,L=!1,z=0;const X=t.steps.map(Kt=>{const Dn=this._makeStyleAst(Kt,e);let ln=null!=Dn.offset?Dn.offset:function uG(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Dn.styles),ni=0;return null!=ln&&(h++,ni=Dn.offset=ln),L=L||ni<0||ni>1,T=T||ni<z,z=ni,y.push(ni),Dn});L&&e.errors.push(function v6(){return new Jt(3012,!1)}()),T&&e.errors.push(function y6(){return new Jt(3200,!1)}());const ie=t.steps.length;let pe=0;h>0&&h<ie?e.errors.push(function b6(){return new Jt(3202,!1)}()):0==h&&(pe=1/(ie-1));const Te=ie-1,Le=e.currentTime,st=e.currentAnimateTimings,kt=st.duration;return X.forEach((Kt,Dn)=>{const ln=pe>0?Dn==Te?1:pe*Dn:y[Dn],ni=ln*kt;e.currentTime=Le+st.delay+ni,st.duration=ni,this._validateStyleAst(Kt,e),Kt.offset=ln,r.styles.push(Kt)}),r}visitReference(t,e){return{type:8,animation:om(this,$T(t.animation),e),options:v1(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:v1(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:v1(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,c=t.options||{};e.queryCount++,e.currentQuery=t;const[h,y]=function aG(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(sG,"")),n=n.replace(/@\*/g,aI).replace(/@\w+/g,e=>aI+"-"+e.slice(1)).replace(/:animating/g,dO),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+h:h,sm(e.collectedStyles,e.currentQuerySelector,new Map);const T=om(this,$T(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:h,limit:c.limit||0,optional:!!c.optional,includeSelf:y,animation:T,originalSelector:t.selector,options:v1(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function x6(){return new Jt(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:cI(t.timings,e.errors,!0);return{type:12,animation:om(this,$T(t.animation),e),timings:r,options:null}}}class lG{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function v1(n){return n?(n=jT(n)).params&&(n.params=function cG(n){return n?jT(n):null}(n.params)):n={},n}function gO(n,t,e){return{duration:n,delay:t,easing:e}}function _O(n,t,e,r,c,h,y=null,T=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:c,delay:h,totalTime:c+h,easing:y,subTimeline:T}}class mI{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const pG=new RegExp(":enter","g"),gG=new RegExp(":leave","g");function vO(n,t,e,r,c,h=new Map,y=new Map,T,L,z=[]){return(new _G).buildKeyframes(n,t,e,r,c,h,y,T,L,z)}class _G{buildKeyframes(t,e,r,c,h,y,T,L,z,X=[]){z=z||new mI;const ie=new yO(t,e,z,c,h,X,[]);ie.options=L;const pe=L.delay?tb(L.delay):0;ie.currentTimeline.delayNextStep(pe),ie.currentTimeline.setStyles([y],null,ie.errors,L),om(this,r,ie);const Te=ie.timelines.filter(Le=>Le.containsAnimation());if(Te.length&&T.size){let Le;for(let st=Te.length-1;st>=0;st--){const kt=Te[st];if(kt.element===e){Le=kt;break}}Le&&!Le.allowOnlyTimelineStyles()&&Le.setStyles([T],null,ie.errors,L)}return Te.length?Te.map(Le=>Le.buildKeyframes()):[_O(e,[],[],[],0,pe,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const c=e.createSubContext(t.options),h=e.currentTimeline.currentTime,y=this._visitSubInstructions(r,c,c.options);h!=y&&e.transformIntoNewTimeline(y)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const c of t){const h=c?.delay;if(h){const y="number"==typeof h?h:tb(qT(h,c?.params??{},e.errors));r.delayNextStep(y)}}}_visitSubInstructions(t,e,r){let h=e.currentTimeline.currentTime;const y=null!=r.duration?tb(r.duration):null,T=null!=r.delay?tb(r.delay):null;return 0!==y&&t.forEach(L=>{const z=e.appendInstructionToTimeline(L,y,T);h=Math.max(h,z.duration+z.delay)}),h}visitReference(t,e){e.updateOptions(t.options,!0),om(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let c=e;const h=t.options;if(h&&(h.params||h.delay)&&(c=e.createSubContext(h),c.transformIntoNewTimeline(),null!=h.delay)){6==c.previousNode.type&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=gI);const y=tb(h.delay);c.delayNextStep(y)}t.steps.length&&(t.steps.forEach(y=>om(this,y,c)),c.currentTimeline.applyStylesToKeyframe(),c.subContextCount>r&&c.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let c=e.currentTimeline.currentTime;const h=t.options&&t.options.delay?tb(t.options.delay):0;t.steps.forEach(y=>{const T=e.createSubContext(t.options);h&&T.delayNextStep(h),om(this,y,T),c=Math.max(c,T.currentTimeline.currentTime),r.push(T.currentTimeline)}),r.forEach(y=>e.currentTimeline.mergeTimelineCollectedStyles(y)),e.transformIntoNewTimeline(c),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return cI(e.params?qT(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),c=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),c.snapshotCurrentStyles());const h=t.style;5==h.type?this.visitKeyframes(h,e):(e.incrementTime(r.duration),this.visitStyle(h,e),c.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,c=e.currentAnimateTimings;!c&&r.hasCurrentStyleProperties()&&r.forwardFrame();const h=c&&c.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(h):r.setStyles(t.styles,h,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,c=e.currentTimeline.duration,h=r.duration,T=e.createSubContext().currentTimeline;T.easing=r.easing,t.styles.forEach(L=>{T.forwardTime((L.offset||0)*h),T.setStyles(L.styles,L.easing,e.errors,e.options),T.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(T),e.transformIntoNewTimeline(c+h),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,c=t.options||{},h=c.delay?tb(c.delay):0;h&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gI);let y=r;const T=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!c.optional,e.errors);e.currentQueryTotal=T.length;let L=null;T.forEach((z,X)=>{e.currentQueryIndex=X;const ie=e.createSubContext(t.options,z);h&&ie.delayNextStep(h),z===e.element&&(L=ie.currentTimeline),om(this,t.animation,ie),ie.currentTimeline.applyStylesToKeyframe(),y=Math.max(y,ie.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(y),L&&(e.currentTimeline.mergeTimelineCollectedStyles(L),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,c=e.currentTimeline,h=t.timings,y=Math.abs(h.duration),T=y*(e.currentQueryTotal-1);let L=y*e.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":L=T-L;break;case"full":L=r.currentStaggerTime}const X=e.currentTimeline;L&&X.delayNextStep(L);const ie=X.currentTime;om(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=c.currentTime-ie+(c.startTime-r.currentTimeline.startTime)}}const gI={};class yO{constructor(t,e,r,c,h,y,T,L){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=c,this._leaveClassName=h,this.errors=y,this.timelines=T,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=L||new _I(this._driver,e,0),T.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let c=this.options;null!=r.duration&&(c.duration=tb(r.duration)),null!=r.delay&&(c.delay=tb(r.delay));const h=r.params;if(h){let y=c.params;y||(y=this.options.params={}),Object.keys(h).forEach(T=>{(!e||!y.hasOwnProperty(T))&&(y[T]=qT(h[T],y,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(c=>{r[c]=e[c]})}}return t}createSubContext(t=null,e,r){const c=e||this.element,h=new yO(this._driver,c,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(c,r||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(t),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(t){return this.previousNode=gI,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const c={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},h=new vG(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,c,t.stretchStartingKeyframe);return this.timelines.push(h),c}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,c,h,y){let T=[];if(c&&T.push(this.element),t.length>0){t=(t=t.replace(pG,"."+this._enterClassName)).replace(gG,"."+this._leaveClassName);let z=this._driver.query(this.element,t,1!=r);0!==r&&(z=r<0?z.slice(z.length+r,z.length):z.slice(0,r)),T.push(...z)}return!h&&0==T.length&&y.push(function M6(n){return new Jt(3014,!1)}()),T}}class _I{constructor(t,e,r,c){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=c,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new _I(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Qy),this._currentKeyframe.set(e,Qy);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,c){e&&this._previousKeyframe.set("easing",e);const h=c&&c.params||{},y=function yG(n,t){const e=new Map;let r;return n.forEach(c=>{if("*"===c){r=r||t.keys();for(let h of r)e.set(h,Qy)}else mM(c,e)}),e}(t,this._globalTimelineStyles);for(let[T,L]of y){const z=qT(L,h,r);this._pendingStyles.set(T,z),this._localTimelineStyles.has(T)||this._backFill.set(T,this._globalTimelineStyles.get(T)??Qy),this._updateStyle(T,z)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const c=this._styleSummary.get(r);(!c||e.time>c.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let c=[];this._keyframes.forEach((T,L)=>{const z=mM(T,new Map,this._backFill);z.forEach((X,ie)=>{X===nO?t.add(ie):X===Qy&&e.add(ie)}),r||z.set("offset",L/this.duration),c.push(z)});const h=t.size?lI(t.values()):[],y=e.size?lI(e.values()):[];if(r){const T=c[0],L=new Map(T);T.set("offset",0),L.set("offset",1),c=[T,L]}return _O(this.element,c,h,y,this.duration,this.startTime,this.easing,!1)}}class vG extends _I{constructor(t,e,r,c,h,y,T=!1){super(t,e,y.delay),this.keyframes=r,this.preStyleProps=c,this.postStyleProps=h,this._stretchStartingKeyframe=T,this.timings={duration:y.duration,delay:y.delay,easing:y.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:c}=this.timings;if(this._stretchStartingKeyframe&&e){const h=[],y=r+e,T=e/y,L=mM(t[0]);L.set("offset",0),h.push(L);const z=mM(t[0]);z.set("offset",NU(T)),h.push(z);const X=t.length-1;for(let ie=1;ie<=X;ie++){let pe=mM(t[ie]);const Te=pe.get("offset");pe.set("offset",NU((e+Te*r)/y)),h.push(pe)}r=y,e=0,c="",t=h}return _O(this.element,t,this.preStyleProps,this.postStyleProps,r,e,c,!0)}}function NU(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class bO{}const bG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xG extends bO{normalizePropertyName(t,e){return pO(t)}normalizeStyleValue(t,e,r,c){let h="";const y=r.toString().trim();if(bG.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)h="px";else{const T=r.match(/^[+-]?[\d\.]+([a-z]*)$/);T&&0==T[1].length&&c.push(function d6(n,t){return new Jt(3005,!1)}())}return y+h}}function UU(n,t,e,r,c,h,y,T,L,z,X,ie,pe){return{type:0,element:n,triggerName:t,isRemovalTransition:c,fromState:e,fromStyles:h,toState:r,toStyles:y,timelines:T,queriedElements:L,preStyleProps:z,postStyleProps:X,totalTime:ie,errors:pe}}const xO={};class BU{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,c){return function MG(n,t,e,r,c){return n.some(h=>h(t,e,r,c))}(this.ast.matchers,t,e,r,c)}buildStyles(t,e,r){let c=this._stateStyles.get("*");return void 0!==t&&(c=this._stateStyles.get(t?.toString())||c),c?c.buildStyles(e,r):new Map}build(t,e,r,c,h,y,T,L,z,X){const ie=[],pe=this.ast.options&&this.ast.options.params||xO,Le=this.buildStyles(r,T&&T.params||xO,ie),st=L&&L.params||xO,kt=this.buildStyles(c,st,ie),Kt=new Set,Dn=new Map,ln=new Map,ni="void"===c,zr={params:wG(st,pe),delay:this.ast.options?.delay},Ps=X?[]:vO(t,e,this.ast.animation,h,y,Le,kt,zr,z,ie);let Fd=0;if(Ps.forEach(ub=>{Fd=Math.max(ub.duration+ub.delay,Fd)}),ie.length)return UU(e,this._triggerName,r,c,ni,Le,kt,[],[],Dn,ln,Fd,ie);Ps.forEach(ub=>{const db=ub.element,k5=sm(Dn,db,new Set);ub.preStyleProps.forEach(R1=>k5.add(R1));const bA=sm(ln,db,new Set);ub.postStyleProps.forEach(R1=>bA.add(R1)),db!==e&&Kt.add(db)});const lb=lI(Kt.values());return UU(e,this._triggerName,r,c,ni,Le,kt,Ps,lb,Dn,ln,Fd)}}function wG(n,t){const e=jT(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class SG{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,c=jT(this.defaultParams);return Object.keys(t).forEach(h=>{const y=t[h];null!==y&&(c[h]=y)}),this.styles.styles.forEach(h=>{"string"!=typeof h&&h.forEach((y,T)=>{y&&(y=qT(y,c,e));const L=this.normalizer.normalizePropertyName(T,e);y=this.normalizer.normalizeStyleValue(T,L,y,e),r.set(T,y)})}),r}}class CG{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(c=>{this.states.set(c.name,new SG(c.style,c.options&&c.options.params||{},r))}),VU(this.states,"true","1"),VU(this.states,"false","0"),e.transitions.forEach(c=>{this.transitionFactories.push(new BU(t,c,this.states))}),this.fallbackTransition=function TG(n,t,e){return new BU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(y,T)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,c){return this.transitionFactories.find(y=>y.match(t,e,r,c))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function VU(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const AG=new mI;class DG{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],c=[],h=mO(this._driver,e,r,c);if(r.length)throw function D6(n){return new Jt(3503,!1)}();this._animations.set(t,h)}_buildPlayer(t,e,r){const c=t.element,h=vU(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(c,h,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const c=[],h=this._animations.get(t);let y;const T=new Map;if(h?(y=vO(this._driver,e,h,uO,sI,new Map,new Map,r,AG,c),y.forEach(X=>{const ie=sm(T,X.element,new Map);X.postStyleProps.forEach(pe=>ie.set(pe,null))})):(c.push(function R6(){return new Jt(3300,!1)}()),y=[]),c.length)throw function I6(n){return new Jt(3504,!1)}();T.forEach((X,ie)=>{X.forEach((pe,Te)=>{X.set(Te,this._driver.computeStyle(ie,Te,Qy))})});const z=pM(y.map(X=>{const ie=T.get(X.element);return this._buildPlayer(X,new Map,ie)}));return this._playersById.set(t,z),z.onDestroy(()=>this.destroy(t)),this.players.push(z),z}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function P6(n){return new Jt(3301,!1)}();return e}listen(t,e,r,c){const h=oO(e,"","","");return rO(this._getPlayer(t),r,h,c),()=>{}}command(t,e,r,c){if("register"==r)return void this.register(t,c[0]);if("create"==r)return void this.create(t,e,c[0]||{});const h=this._getPlayer(t);switch(r){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(c[0]));break;case"destroy":this.destroy(t)}}}const zU="ng-animate-queued",MO="ng-animate-disabled",LG=[],HU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mg="__ng_removed";class wO{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function BG(n){return n??null}(r?t.value:t),r){const h=jT(t);delete h.value,this.options=h}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(c=>{null==r[c]&&(r[c]=e[c])})}}}const XT="void",SO=new wO(XT);class FG{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,wg(e,this._hostClassName)}listen(t,e,r,c){if(!this._triggers.has(e))throw function k6(n,t){return new Jt(3302,!1)}();if(null==r||0==r.length)throw function L6(n){return new Jt(3303,!1)}();if(!function VG(n){return"start"==n||"done"==n}(r))throw function O6(n,t){return new Jt(3400,!1)}();const h=sm(this._elementListeners,t,[]),y={name:e,phase:r,callback:c};h.push(y);const T=sm(this._engine.statesByElement,t,new Map);return T.has(e)||(wg(t,oI),wg(t,oI+"-"+e),T.set(e,SO)),()=>{this._engine.afterFlush(()=>{const L=h.indexOf(y);L>=0&&h.splice(L,1),this._triggers.has(e)||T.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function F6(n){return new Jt(3401,!1)}();return e}trigger(t,e,r,c=!0){const h=this._getTrigger(e),y=new EO(this.id,e,t);let T=this._engine.statesByElement.get(t);T||(wg(t,oI),wg(t,oI+"-"+e),this._engine.statesByElement.set(t,T=new Map));let L=T.get(e);const z=new wO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&L&&z.absorbOptions(L.options),T.set(e,z),L||(L=SO),z.value!==XT&&L.value===z.value){if(!function GG(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let c=0;c<e.length;c++){const h=e[c];if(!t.hasOwnProperty(h)||n[h]!==t[h])return!1}return!0}(L.params,z.params)){const st=[],kt=h.matchStyles(L.value,L.params,st),Kt=h.matchStyles(z.value,z.params,st);st.length?this._engine.reportError(st):this._engine.afterFlush(()=>{_1(t,kt),mv(t,Kt)})}return}const pe=sm(this._engine.playersByElement,t,[]);pe.forEach(st=>{st.namespaceId==this.id&&st.triggerName==e&&st.queued&&st.destroy()});let Te=h.matchTransition(L.value,z.value,t,z.params),Le=!1;if(!Te){if(!c)return;Te=h.fallbackTransition,Le=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Te,fromState:L,toState:z,player:y,isFallbackTransition:Le}),Le||(wg(t,zU),y.onStart(()=>{dE(t,zU)})),y.onDone(()=>{let st=this.players.indexOf(y);st>=0&&this.players.splice(st,1);const kt=this._engine.playersByElement.get(t);if(kt){let Kt=kt.indexOf(y);Kt>=0&&kt.splice(Kt,1)}}),this.players.push(y),pe.push(y),y}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(c=>c.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,aI,!0);r.forEach(c=>{if(c[Mg])return;const h=this._engine.fetchNamespacesByElement(c);h.size?h.forEach(y=>y.triggerLeaveAnimation(c,e,!1,!0)):this.clearElementCache(c)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(c=>this.clearElementCache(c)))}triggerLeaveAnimation(t,e,r,c){const h=this._engine.statesByElement.get(t),y=new Map;if(h){const T=[];if(h.forEach((L,z)=>{if(y.set(z,L.value),this._triggers.has(z)){const X=this.trigger(t,z,XT,c);X&&T.push(X)}}),T.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,y),r&&pM(T).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const c=new Set;e.forEach(h=>{const y=h.name;if(c.has(y))return;c.add(y);const L=this._triggers.get(y).fallbackTransition,z=r.get(y)||SO,X=new wO(XT),ie=new EO(this.id,y,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:y,transition:L,fromState:z,toState:X,player:ie,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let c=!1;if(r.totalAnimations){const h=r.players.length?r.playersByQueriedElement.get(t):[];if(h&&h.length)c=!0;else{let y=t;for(;y=y.parentNode;)if(r.statesByElement.get(y)){c=!0;break}}}if(this.prepareLeaveAnimationListeners(t),c)r.markElementAsRemoved(this.id,t,!1,e);else{const h=t[Mg];(!h||h===HU)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){wg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const c=r.player;if(c.destroyed)return;const h=r.element,y=this._elementListeners.get(h);y&&y.forEach(T=>{if(T.name==r.triggerName){const L=oO(h,r.triggerName,r.fromState.value,r.toState.value);L._data=t,rO(r.player,T.phase,L,T.callback)}}),c.markedForDestroy?this._engine.afterFlush(()=>{c.destroy()}):e.push(r)}),this._queue=[],e.sort((r,c)=>{const h=r.transition.ast.depCount,y=c.transition.ast.depCount;return 0==h||0==y?h-y:this._engine.driver.containsElement(r.element,c.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class NG{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(c,h)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new FG(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,c=this.namespacesByHostElement;if(r.length-1>=0){let y=!1,T=this.driver.getParentElement(e);for(;T;){const L=c.get(T);if(L){const z=r.indexOf(L);r.splice(z+1,0,t),y=!0;break}T=this.driver.getParentElement(T)}y||r.unshift(t)}else r.push(t);return c.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let c=this._namespaceLookup[t];c&&c.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const c=this._namespaceList.indexOf(r);c>=0&&this._namespaceList.splice(c,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let c of r.values())if(c.namespaceId){const h=this._fetchNamespace(c.namespaceId);h&&e.add(h)}return e}trigger(t,e,r,c){if(vI(e)){const h=this._fetchNamespace(t);if(h)return h.trigger(e,r,c),!0}return!1}insertNode(t,e,r,c){if(!vI(e))return;const h=e[Mg];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const y=this.collectedLeaveElements.indexOf(e);y>=0&&this.collectedLeaveElements.splice(y,1)}if(t){const y=this._fetchNamespace(t);y&&y.insertNode(e,r)}c&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),wg(t,MO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),dE(t,MO))}removeNode(t,e,r,c){if(vI(e)){const h=t?this._fetchNamespace(t):null;if(h?h.removeNode(e,c):this.markElementAsRemoved(t,e,!1,c),r){const y=this.namespacesByHostElement.get(e);y&&y.id!==t&&y.removeNode(e,c)}}else this._onRemovalComplete(e,c)}markElementAsRemoved(t,e,r,c,h){this.collectedLeaveElements.push(e),e[Mg]={namespaceId:t,setForRemoval:c,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:h}}listen(t,e,r,c,h){return vI(e)?this._fetchNamespace(t).listen(e,r,c,h):()=>{}}_buildInstruction(t,e,r,c,h){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,c,t.fromState.options,t.toState.options,e,h)}destroyInnerAnimations(t){let e=this.driver.query(t,aI,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,dO,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return pM(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Mg];if(e&&e.setForRemoval){if(t[Mg]=HU,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(MO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,c)=>this._balanceNamespaceList(r,c)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)wg(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let c=0;c<r.length;c++)r[c]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?pM(e).onDone(()=>{r.forEach(c=>c())}):r.forEach(c=>c())}}reportError(t){throw function N6(n){return new Jt(3402,!1)}()}_flushAnimations(t,e){const r=new mI,c=[],h=new Map,y=[],T=new Map,L=new Map,z=new Map,X=new Set;this.disabledNodes.forEach(yi=>{X.add(yi);const Bi=this.driver.query(yi,".ng-animate-queued",!0);for(let Yi=0;Yi<Bi.length;Yi++)X.add(Bi[Yi])});const ie=this.bodyNode,pe=Array.from(this.statesByElement.keys()),Te=jU(pe,this.collectedEnterElements),Le=new Map;let st=0;Te.forEach((yi,Bi)=>{const Yi=uO+st++;Le.set(Bi,Yi),yi.forEach(ys=>wg(ys,Yi))});const kt=[],Kt=new Set,Dn=new Set;for(let yi=0;yi<this.collectedLeaveElements.length;yi++){const Bi=this.collectedLeaveElements[yi],Yi=Bi[Mg];Yi&&Yi.setForRemoval&&(kt.push(Bi),Kt.add(Bi),Yi.hasAnimation?this.driver.query(Bi,".ng-star-inserted",!0).forEach(ys=>Kt.add(ys)):Dn.add(Bi))}const ln=new Map,ni=jU(pe,Array.from(Kt));ni.forEach((yi,Bi)=>{const Yi=sI+st++;ln.set(Bi,Yi),yi.forEach(ys=>wg(ys,Yi))}),t.push(()=>{Te.forEach((yi,Bi)=>{const Yi=Le.get(Bi);yi.forEach(ys=>dE(ys,Yi))}),ni.forEach((yi,Bi)=>{const Yi=ln.get(Bi);yi.forEach(ys=>dE(ys,Yi))}),kt.forEach(yi=>{this.processLeaveNode(yi)})});const zr=[],Ps=[];for(let yi=this._namespaceList.length-1;yi>=0;yi--)this._namespaceList[yi].drainQueuedTransitions(e).forEach(Yi=>{const ys=Yi.player,su=Yi.element;if(zr.push(ys),this.collectedEnterElements.length){const Nd=su[Mg];if(Nd&&Nd.setForMove){if(Nd.previousTriggersValues&&Nd.previousTriggersValues.has(Yi.triggerName)){const I1=Nd.previousTriggersValues.get(Yi.triggerName),Sg=this.statesByElement.get(Yi.element);if(Sg&&Sg.has(Yi.triggerName)){const b2=Sg.get(Yi.triggerName);b2.value=I1,Sg.set(Yi.triggerName,b2)}}return void ys.destroy()}}const bv=!ie||!this.driver.containsElement(ie,su),am=ln.get(su),xM=Le.get(su),Ea=this._buildInstruction(Yi,r,xM,am,bv);if(Ea.errors&&Ea.errors.length)return void Ps.push(Ea);if(bv)return ys.onStart(()=>_1(su,Ea.fromStyles)),ys.onDestroy(()=>mv(su,Ea.toStyles)),void c.push(ys);if(Yi.isFallbackTransition)return ys.onStart(()=>_1(su,Ea.fromStyles)),ys.onDestroy(()=>mv(su,Ea.toStyles)),void c.push(ys);const F5=[];Ea.timelines.forEach(Nd=>{Nd.stretchStartingKeyframe=!0,this.disabledNodes.has(Nd.element)||F5.push(Nd)}),Ea.timelines=F5,r.append(su,Ea.timelines),y.push({instruction:Ea,player:ys,element:su}),Ea.queriedElements.forEach(Nd=>sm(T,Nd,[]).push(ys)),Ea.preStyleProps.forEach((Nd,I1)=>{if(Nd.size){let Sg=L.get(I1);Sg||L.set(I1,Sg=new Set),Nd.forEach((b2,u3)=>Sg.add(u3))}}),Ea.postStyleProps.forEach((Nd,I1)=>{let Sg=z.get(I1);Sg||z.set(I1,Sg=new Set),Nd.forEach((b2,u3)=>Sg.add(u3))})});if(Ps.length){const yi=[];Ps.forEach(Bi=>{yi.push(function U6(n,t){return new Jt(3505,!1)}())}),zr.forEach(Bi=>Bi.destroy()),this.reportError(yi)}const Fd=new Map,lb=new Map;y.forEach(yi=>{const Bi=yi.element;r.has(Bi)&&(lb.set(Bi,Bi),this._beforeAnimationBuild(yi.player.namespaceId,yi.instruction,Fd))}),c.forEach(yi=>{const Bi=yi.element;this._getPreviousPlayers(Bi,!1,yi.namespaceId,yi.triggerName,null).forEach(ys=>{sm(Fd,Bi,[]).push(ys),ys.destroy()})});const ub=kt.filter(yi=>qU(yi,L,z)),db=new Map;WU(db,this.driver,Dn,z,Qy).forEach(yi=>{qU(yi,L,z)&&ub.push(yi)});const bA=new Map;Te.forEach((yi,Bi)=>{WU(bA,this.driver,new Set(yi),L,nO)}),ub.forEach(yi=>{const Bi=db.get(yi),Yi=bA.get(yi);db.set(yi,new Map([...Array.from(Bi?.entries()??[]),...Array.from(Yi?.entries()??[])]))});const R1=[],L5=[],O5={};y.forEach(yi=>{const{element:Bi,player:Yi,instruction:ys}=yi;if(r.has(Bi)){if(X.has(Bi))return Yi.onDestroy(()=>mv(Bi,ys.toStyles)),Yi.disabled=!0,Yi.overrideTotalTime(ys.totalTime),void c.push(Yi);let su=O5;if(lb.size>1){let am=Bi;const xM=[];for(;am=am.parentNode;){const Ea=lb.get(am);if(Ea){su=Ea;break}xM.push(am)}xM.forEach(Ea=>lb.set(Ea,su))}const bv=this._buildAnimation(Yi.namespaceId,ys,Fd,h,bA,db);if(Yi.setRealPlayer(bv),su===O5)R1.push(Yi);else{const am=this.playersByElement.get(su);am&&am.length&&(Yi.parentPlayer=pM(am)),c.push(Yi)}}else _1(Bi,ys.fromStyles),Yi.onDestroy(()=>mv(Bi,ys.toStyles)),L5.push(Yi),X.has(Bi)&&c.push(Yi)}),L5.forEach(yi=>{const Bi=h.get(yi.element);if(Bi&&Bi.length){const Yi=pM(Bi);yi.setRealPlayer(Yi)}}),c.forEach(yi=>{yi.parentPlayer?yi.syncPlayerEvents(yi.parentPlayer):yi.destroy()});for(let yi=0;yi<kt.length;yi++){const Bi=kt[yi],Yi=Bi[Mg];if(dE(Bi,sI),Yi&&Yi.hasAnimation)continue;let ys=[];if(T.size){let bv=T.get(Bi);bv&&bv.length&&ys.push(...bv);let am=this.driver.query(Bi,dO,!0);for(let xM=0;xM<am.length;xM++){let Ea=T.get(am[xM]);Ea&&Ea.length&&ys.push(...Ea)}}const su=ys.filter(bv=>!bv.destroyed);su.length?zG(this,Bi,su):this.processLeaveNode(Bi)}return kt.length=0,R1.forEach(yi=>{this.players.push(yi),yi.onDone(()=>{yi.destroy();const Bi=this.players.indexOf(yi);this.players.splice(Bi,1)}),yi.play()}),R1}elementContainsData(t,e){let r=!1;const c=e[Mg];return c&&c.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,c,h){let y=[];if(e){const T=this.playersByQueriedElement.get(t);T&&(y=T)}else{const T=this.playersByElement.get(t);if(T){const L=!h||h==XT;T.forEach(z=>{z.queued||!L&&z.triggerName!=c||y.push(z)})}}return(r||c)&&(y=y.filter(T=>!(r&&r!=T.namespaceId||c&&c!=T.triggerName))),y}_beforeAnimationBuild(t,e,r){const h=e.element,y=e.isRemovalTransition?void 0:t,T=e.isRemovalTransition?void 0:e.triggerName;for(const L of e.timelines){const z=L.element,X=z!==h,ie=sm(r,z,[]);this._getPreviousPlayers(z,X,y,T,e.toState).forEach(Te=>{const Le=Te.getRealPlayer();Le.beforeDestroy&&Le.beforeDestroy(),Te.destroy(),ie.push(Te)})}_1(h,e.fromStyles)}_buildAnimation(t,e,r,c,h,y){const T=e.triggerName,L=e.element,z=[],X=new Set,ie=new Set,pe=e.timelines.map(Le=>{const st=Le.element;X.add(st);const kt=st[Mg];if(kt&&kt.removedBeforeQueried)return new WT(Le.duration,Le.delay);const Kt=st!==L,Dn=function HG(n){const t=[];return $U(n,t),t}((r.get(st)||LG).map(Fd=>Fd.getRealPlayer())).filter(Fd=>!!Fd.element&&Fd.element===st),ln=h.get(st),ni=y.get(st),zr=vU(0,this._normalizer,0,Le.keyframes,ln,ni),Ps=this._buildPlayer(Le,zr,Dn);if(Le.subTimeline&&c&&ie.add(st),Kt){const Fd=new EO(t,T,st);Fd.setRealPlayer(Ps),z.push(Fd)}return Ps});z.forEach(Le=>{sm(this.playersByQueriedElement,Le.element,[]).push(Le),Le.onDone(()=>function UG(n,t,e){let r=n.get(t);if(r){if(r.length){const c=r.indexOf(e);r.splice(c,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,Le.element,Le))}),X.forEach(Le=>wg(Le,TU));const Te=pM(pe);return Te.onDestroy(()=>{X.forEach(Le=>dE(Le,TU)),mv(L,e.toStyles)}),ie.forEach(Le=>{sm(c,Le,[]).push(Te)}),Te}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new WT(t.duration,t.delay)}}class EO{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new WT,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(c=>rO(t,r,void 0,c))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){sm(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function vI(n){return n&&1===n.nodeType}function GU(n,t){const e=n.style.display;return n.style.display=t??"none",e}function WU(n,t,e,r,c){const h=[];e.forEach(L=>h.push(GU(L)));const y=[];r.forEach((L,z)=>{const X=new Map;L.forEach(ie=>{const pe=t.computeStyle(z,ie,c);X.set(ie,pe),(!pe||0==pe.length)&&(z[Mg]=OG,y.push(z))}),n.set(z,X)});let T=0;return e.forEach(L=>GU(L,h[T++])),y}function jU(n,t){const e=new Map;if(n.forEach(T=>e.set(T,[])),0==t.length)return e;const r=1,c=new Set(t),h=new Map;function y(T){if(!T)return r;let L=h.get(T);if(L)return L;const z=T.parentNode;return L=e.has(z)?z:c.has(z)?r:y(z),h.set(T,L),L}return t.forEach(T=>{const L=y(T);L!==r&&e.get(L).push(T)}),e}function wg(n,t){n.classList?.add(t)}function dE(n,t){n.classList?.remove(t)}function zG(n,t,e){pM(e).onDone(()=>n.processLeaveNode(t))}function $U(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof gU?$U(r.players,t):t.push(r)}}function qU(n,t,e){const r=e.get(n);if(!r)return!1;let c=t.get(n);return c?r.forEach(h=>c.add(h)):t.set(n,r),e.delete(n),!0}class yI{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(c,h)=>{},this._transitionEngine=new NG(t,e,r),this._timelineEngine=new DG(t,e,r),this._transitionEngine.onRemovalComplete=(c,h)=>this.onRemovalComplete(c,h)}registerTrigger(t,e,r,c,h){const y=t+"-"+c;let T=this._triggerCache[y];if(!T){const L=[],z=[],X=mO(this._driver,h,L,z);if(L.length)throw function T6(n,t){return new Jt(3404,!1)}();T=function EG(n,t,e){return new CG(n,t,e)}(c,X,this._normalizer),this._triggerCache[y]=T}this._transitionEngine.registerTrigger(e,c,T)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,c){this._transitionEngine.insertNode(t,e,r,c)}onRemove(t,e,r,c){this._transitionEngine.removeNode(t,e,c||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,c){if("@"==r.charAt(0)){const[h,y]=yU(r);this._timelineEngine.command(h,e,y,c)}else this._transitionEngine.trigger(t,e,r,c)}listen(t,e,r,c,h){if("@"==r.charAt(0)){const[y,T]=yU(r);return this._timelineEngine.listen(y,e,T,h)}return this._transitionEngine.listen(t,e,r,c,h)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let jG=(()=>{class n{constructor(e,r,c){this._element=e,this._startStyles=r,this._endStyles=c,this._state=0;let h=n.initialStylesByElement.get(e);h||n.initialStylesByElement.set(e,h=new Map),this._initialStyles=h}start(){this._state<1&&(this._startStyles&&mv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(mv(this._element,this._initialStyles),this._endStyles&&(mv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_1(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_1(this._element,this._endStyles),this._endStyles=null),mv(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function CO(n){let t=null;return n.forEach((e,r)=>{(function $G(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class XU{constructor(t,e,r,c){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,c)=>{"offset"!==c&&t.set(c,this._finished?r:kU(this.element,c))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class qG{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return wU(t,e)}getParentElement(t){return cO(t)}query(t,e,r){return SU(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,c,h,y=[]){const L={duration:r,delay:c,fill:0==c?"both":"forwards"};h&&(L.easing=h);const z=new Map,X=y.filter(Te=>Te instanceof XU);(function K6(n,t){return 0===n||0===t})(r,c)&&X.forEach(Te=>{Te.currentSnapshot.forEach((Le,st)=>z.set(st,Le))});let ie=function q6(n){return n.length?n[0]instanceof Map?n:n.map(t=>AU(t)):[]}(e).map(Te=>mM(Te));ie=function J6(n,t,e){if(e.size&&t.length){let r=t[0],c=[];if(e.forEach((h,y)=>{r.has(y)||c.push(y),r.set(y,h)}),c.length)for(let h=1;h<t.length;h++){let y=t[h];c.forEach(T=>y.set(T,kU(n,T)))}}return t}(t,ie,z);const pe=function WG(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=CO(t[0]),t.length>1&&(r=CO(t[t.length-1]))):t instanceof Map&&(e=CO(t)),e||r?new jG(n,e,r):null}(t,ie);return new XU(t,ie,L,pe)}}let XG=(()=>{class n extends hU{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:tl.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const c=Array.isArray(e)?pU(e):e;return YU(this._renderer,null,r,"register",[c]),new YG(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(ut(_a),ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();class YG extends s6{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ZG(this._id,t,e||{},this._renderer)}}class ZG{constructor(t,e,r,c){this.id=t,this.element=e,this._renderer=c,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return YU(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function YU(n,t,e,r,c){return n.setProperty(t,`@@${e}:${r}`,c)}const ZU="@.disabled";let KG=(()=>{class n{constructor(e,r,c){this.delegate=e,this.engine=r,this._zone=c,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(h,y)=>{const T=y?.parentNode(h);T&&y.removeChild(T,h)}}createRenderer(e,r){const h=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let X=this._rendererCache.get(h);return X||(X=new KU("",h,this.engine,()=>this._rendererCache.delete(h)),this._rendererCache.set(h,X)),X}const y=r.id,T=r.id+"-"+this._currentId;this._currentId++,this.engine.register(T,e);const L=X=>{Array.isArray(X)?X.forEach(L):this.engine.registerTrigger(y,T,e,X.name,X)};return r.data.animation.forEach(L),new JG(this,T,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,c){e>=0&&e<this._microtaskId?this._zone.run(()=>r(c)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[y,T]=h;y(T)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,c]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(ut(_a),ut(yI),ut(xi))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();class KU{constructor(t,e,r,c){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=c,this.destroyNode=this.delegate.destroyNode?h=>e.destroyNode(h):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,c=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,c)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,c){this.delegate.setAttribute(t,e,r,c)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,c){this.delegate.setStyle(t,e,r,c)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==ZU?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class JG extends KU{constructor(t,e,r,c,h){super(e,r,c,h),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==ZU?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const c=function QG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let h=e.slice(1),y="";return"@"!=h.charAt(0)&&([h,y]=function eW(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(h)),this.engine.listen(this.namespaceId,c,h,y,T=>{this.factory.scheduleListenerCallback(T._data||-1,r,T)})}return this.delegate.listen(t,e,r)}}const JU=[{provide:hU,useClass:XG},{provide:bO,useFactory:function nW(){return new xG}},{provide:yI,useClass:(()=>{class n extends yI{constructor(e,r,c,h){super(e.body,r,c)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji),ut(lO),ut(bO),ut(Yx))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})()},{provide:_a,useFactory:function iW(n,t,e){return new KG(n,t,e)},deps:[QS,yI,xi]}],TO=[{provide:lO,useFactory:()=>new qG},{provide:tu,useValue:"BrowserAnimations"},...JU],QU=[{provide:lO,useClass:EU},{provide:tu,useValue:"NoopAnimations"},...JU];let AO,rW=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?QU:TO}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:TO,imports:[cM]}),n})();try{AO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{AO=!1}let hE,Yc=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Bk(n){return n===Cl}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(ut(xS))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eB=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function tB(){if(hE)return hE;if("object"!=typeof document||!document)return hE=new Set(eB),hE;let n=document.createElement("input");return hE=new Set(eB.filter(t=>(n.setAttribute("type",t),n.type===t))),hE}let YT,xI,y1,DO;function fE(n){return function sW(){if(null==YT&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>YT=!0}))}finally{YT=YT||!1}return YT}()?n:!!n.capture}function nB(){if(null==y1){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return y1=!1,y1;if("scrollBehavior"in document.documentElement.style)y1=!0;else{const n=Element.prototype.scrollTo;y1=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return y1}function ZT(){if("object"!=typeof document||!document)return 0;if(null==xI){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",n.appendChild(e),document.body.appendChild(n),xI=0,0===n.scrollLeft&&(n.scrollLeft=1,xI=0===n.scrollLeft?1:2),n.remove()}return xI}function RO(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function gM(n){return n.composedPath?n.composedPath()[0]:n.target}function IO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function KT(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class MW extends nn{constructor(t,e){super()}schedule(t,e=0){return this}}const MI={setInterval(n,t,...e){const{delegate:r}=MI;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=MI;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class wI extends MW{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const c=this.id,h=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(h,c,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(h,this.id,e),this}requestAsyncId(t,e,r=0){return MI.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&MI.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let c,r=!1;try{this.work(t)}catch(h){r=!0,c=h||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),c}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Qt(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const aB={now:()=>(aB.delegate||Date).now(),delegate:void 0};class JT{constructor(t,e=JT.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}JT.now=aB.now;class SI extends JT{constructor(t,e=JT.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}const EI=new SI(wI),wW=EI;function OO(n,t=EI){return qr((e,r)=>{let c=null,h=null,y=null;const T=()=>{if(c){c.unsubscribe(),c=null;const z=h;h=null,r.next(z)}};function L(){const z=y+n,X=t.now();if(X<z)return c=this.schedule(void 0,z-X),void r.add(c);T()}e.subscribe(mr(r,z=>{h=z,y=t.now(),c||(c=t.schedule(L,n),r.add(c))},()=>{T(),r.complete()},void 0,()=>{h=c=null}))})}function cB(n){return xn((t,e)=>n<=e)}function FO(n,t=Mo){return n=n??SW,qr((e,r)=>{let c,h=!0;e.subscribe(mr(r,y=>{const T=t(y);(h||!n(c,T))&&(h=!1,c=T,r.next(y))}))})}function SW(n,t){return n===t}function I_(n){return qr((t,e)=>{xs(n).subscribe(mr(e,()=>e.complete(),ze)),!e.closed&&t.subscribe(e)})}function Xs(n){return null!=n&&"false"!=`${n}`}function iu(n,t=0){return function EW(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function CI(n){return Array.isArray(n)?n:[n]}function Zc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function nb(n){return n instanceof Li?n.nativeElement:n}let lB=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CW=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=nb(e);return new pr(c=>{const y=this._observeElement(r).subscribe(c);return()=>{y.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new Ci,c=this._mutationObserverFactory.create(h=>r.next(h));c&&c.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:c,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:c}=this._observedElements.get(e);r&&r.disconnect(),c.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(ut(lB))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TW=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=Xs(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=iu(e),this._subscribe()}constructor(e,r,c){this._contentObserver=e,this._elementRef=r,this._ngZone=c,this.event=new Ai,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(OO(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(Be(CW),Be(Li),Be(xi))},n.\u0275dir=Xn({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),uB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[lB]}),n})();const dB=new Set;let pE,AW=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):RW}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function DW(n){if(!dB.has(n))try{pE||(pE=document.createElement("style"),pE.setAttribute("type","text/css"),document.head.appendChild(pE)),pE.sheet&&(pE.sheet.insertRule(`@media ${n} {body{ }}`,0),dB.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RW(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let IW=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new Ci}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return hB(CI(e)).some(c=>this._registerQuery(c).mql.matches)}observe(e){let h=rt(hB(CI(e)).map(y=>this._registerQuery(y).observable));return h=Vt(h.pipe(dn(1)),h.pipe(cB(1),OO(0))),h.pipe(ri(y=>{const T={matches:!1,breakpoints:{}};return y.forEach(({matches:L,query:z})=>{T.matches=T.matches||L,T.breakpoints[z]=L}),T}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),h={observable:new pr(y=>{const T=L=>this._zone.run(()=>y.next(L));return r.addListener(T),()=>{r.removeListener(T)}}).pipe(Rt(r),ri(({matches:y})=>({query:e,matches:y})),I_(this._destroySubject)),mql:r};return this._queries.set(e,h),h}}return n.\u0275fac=function(e){return new(e||n)(ut(AW),ut(xi))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hB(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class LW{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ci,this._typeaheadSubscription=nn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Ci,this.change=new Ci,t instanceof Yp&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const c=e.toArray().indexOf(this._activeItem);c>-1&&c!==this._activeItemIndex&&(this._activeItemIndex=c)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ar(e=>this._pressedLetters.push(e)),OO(t),xn(()=>this._pressedLetters.length>0),ri(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let c=1;c<r.length+1;c++){const h=(this._activeItemIndex+c)%r.length,y=r[h];if(!this._skipPredicateFn(y)&&0===y.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(h);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,c=["altKey","ctrlKey","metaKey","shiftKey"].every(h=>!t[h]||this._allowedModifierKeys.indexOf(h)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&c){this.setNextItemActive();break}return;case 38:if(this._vertical&&c){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&c){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&c){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&c){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&c){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&c){const h=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(h>0?h:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&c){const h=this._activeItemIndex+this._pageUpAndDown.delta,y=this._getItemsArray().length;this._setActiveItemByIndex(h<y?h:y-1,-1);break}return;default:return void((c||KT(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t);this._activeItem=e[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const c=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[c]))return void this.setActiveItem(c)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Yp?this._items.toArray():this._items}}class mB extends LW{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let TI=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function FW(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function OW(n){try{return n.frameElement}catch{return null}}(function WW(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===_B(r)||!this.isVisible(r)))return!1;let c=e.nodeName.toLowerCase(),h=_B(e);return e.hasAttribute("contenteditable")?-1!==h:!("iframe"===c||"object"===c||this._platform.WEBKIT&&this._platform.IOS&&!function HW(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===c?!!e.hasAttribute("controls")&&-1!==h:"video"===c?-1!==h&&(null!==h||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function GW(n){return!function UW(n){return function VW(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function NW(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function BW(n){return function zW(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||gB(n))}(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gB(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function _B(n){if(!gB(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class jW{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,r,c,h=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=c,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,h||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return r?.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=0;r<e.length;r++){const c=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(c)return c}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=e.length-1;r>=0;r--){const c=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(c)return c}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(dn(1)).subscribe(t)}}let NO=(()=>{class n{constructor(e,r,c){this._checker=e,this._ngZone=r,this._document=c}create(e,r=!1){return new jW(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(ut(TI),ut(xi),ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UO(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function BO(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const $W=new jt("cdk-input-modality-detector-options"),qW={ignoreKeys:[18,17,224,91,16]},mE=fE({passive:!0,capture:!0});let XW=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,r,c,h){this._platform=e,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=y=>{this._options?.ignoreKeys?.some(T=>T===y.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=gM(y))},this._onMousedown=y=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UO(y)?"keyboard":"mouse"),this._mostRecentTarget=gM(y))},this._onTouchstart=y=>{BO(y)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gM(y))},this._options={...qW,...h},this.modalityDetected=this._modality.pipe(cB(1)),this.modalityChanged=this.modalityDetected.pipe(FO()),e.isBrowser&&r.runOutsideAngular(()=>{c.addEventListener("keydown",this._onKeydown,mE),c.addEventListener("mousedown",this._onMousedown,mE),c.addEventListener("touchstart",this._onTouchstart,mE)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mE),document.removeEventListener("mousedown",this._onMousedown,mE),document.removeEventListener("touchstart",this._onTouchstart,mE))}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc),ut(xi),ut(Ji),ut($W,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZW=new jt("cdk-focus-monitor-default-options"),AI=fE({passive:!0,capture:!0});let _M=(()=>{class n{constructor(e,r,c,h,y){this._ngZone=e,this._platform=r,this._inputModalityDetector=c,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ci,this._rootNodeFocusAndBlurListener=T=>{for(let z=gM(T);z;z=z.parentElement)"focus"===T.type?this._onFocus(T,z):this._onBlur(T,z)},this._document=h,this._detectionMode=y?.detectionMode||0}monitor(e,r=!1){const c=nb(e);if(!this._platform.isBrowser||1!==c.nodeType)return ye(null);const h=function aW(n){if(function oW(){if(null==DO){const n=typeof document<"u"?document.head:null;DO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return DO}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(c)||this._getDocument(),y=this._elementInfo.get(c);if(y)return r&&(y.checkChildren=!0),y.subject;const T={checkChildren:r,subject:new Ci,rootNode:h};return this._elementInfo.set(c,T),this._registerGlobalListeners(T),T.subject}stopMonitoring(e){const r=nb(e),c=this._elementInfo.get(r);c&&(c.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(c))}focusVia(e,r,c){const h=nb(e);h===this._getDocument().activeElement?this._getClosestElementsInfo(h).forEach(([T,L])=>this._originChanged(T,r,L)):(this._setOrigin(r),"function"==typeof h.focus&&h.focus(c))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const c=this._elementInfo.get(r),h=gM(e);!c||!c.checkChildren&&r!==h||this._originChanged(r,this._getFocusOrigin(h),c)}_onBlur(e,r){const c=this._elementInfo.get(r);!c||c.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(c,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,c=this._rootNodeFocusListenerCount.get(r)||0;c||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,AI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,AI)}),this._rootNodeFocusListenerCount.set(r,c+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(I_(this._stopInputModalityDetector)).subscribe(h=>{this._setOrigin(h,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const c=this._rootNodeFocusListenerCount.get(r);c>1?this._rootNodeFocusListenerCount.set(r,c-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,AI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,AI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,c){this._setClasses(e,r),this._emitOrigin(c,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((c,h)=>{(h===e||c.checkChildren&&h.contains(e))&&r.push([h,c])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:c}=this._inputModalityDetector;if("mouse"!==c||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const h=e.labels;if(h)for(let y=0;y<h.length;y++)if(h[y].contains(r))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(ut(xi),ut(Yc),ut(XW),ut(Ji,8),ut(ZW,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yB="cdk-high-contrast-black-on-white",bB="cdk-high-contrast-white-on-black",VO="cdk-high-contrast-active";let xB=(()=>{class n{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=ei(IW).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,c=r&&r.getComputedStyle?r.getComputedStyle(e):null,h=(c&&c.backgroundColor||"").replace(/ /g,"");switch(e.remove(),h){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(VO,yB,bB),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(VO,yB):2===r&&e.add(VO,bB)}}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc),ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KW=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(ut(xB))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[uB]}),n})();const JW=new jt("cdk-dir-doc",{providedIn:"root",factory:function QW(){return ei(Ji)}}),e7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ib=(()=>{class n{constructor(e){this.value="ltr",this.change=new Ai,e&&(this.value=function t7(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?e7.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(ut(JW,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const r7=new jt("mat-sanity-checks",{providedIn:"root",factory:function n7(){return!0}});let hs=(()=>{class n{constructor(e,r,c){this._sanityChecks=r,this._document=c,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!IO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(ut(xB),ut(r7,8),ut(Ji))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[QT,QT]}),n})();function DI(n){return class extends n{get disabled(){return this._disabled}set disabled(t){this._disabled=Xs(t)}constructor(...t){super(...t),this._disabled=!1}}}function b1(n,t){return class extends n{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function eA(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Xs(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function zO(n,t=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?iu(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}}}function s7(n){return class extends n{updateErrorState(){const t=this.errorState,h=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);h!==t&&(this.errorState=h,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}let a7=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,hs]}),n})();class c7{constructor(t,e,r,c=!1){this._renderer=t,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=c,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const EB=fE({passive:!0,capture:!0});class l7{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=gM(t);e&&this._events.get(t.type)?.forEach((r,c)=>{(c===e||c.contains(e))&&r.forEach(h=>h.handleEvent(t))})}}addHandler(t,e,r,c){const h=this._events.get(e);if(h){const y=h.get(r);y?y.add(c):h.set(r,new Set([c]))}else this._events.set(e,new Map([[r,new Set([c])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,EB)})}removeHandler(t,e,r){const c=this._events.get(t);if(!c)return;const h=c.get(e);h&&(h.delete(r),0===h.size&&c.delete(e),0===c.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,EB)))}}const CB={enterDuration:225,exitDuration:150},TB=fE({passive:!0,capture:!0}),AB=["mousedown","touchstart"],DB=["mouseup","mouseleave","touchend","touchcancel"];class nA{constructor(t,e,r,c){this._target=t,this._ngZone=e,this._platform=c,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=nb(r))}fadeInRipple(t,e,r={}){const c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),h={...CB,...r.animation};r.centered&&(t=c.left+c.width/2,e=c.top+c.height/2);const y=r.radius||function d7(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),c=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+c*c)}(t,e,c),T=t-c.left,L=e-c.top,z=h.enterDuration,X=document.createElement("div");X.classList.add("mat-ripple-element"),X.style.left=T-y+"px",X.style.top=L-y+"px",X.style.height=2*y+"px",X.style.width=2*y+"px",null!=r.color&&(X.style.backgroundColor=r.color),X.style.transitionDuration=`${z}ms`,this._containerElement.appendChild(X);const ie=window.getComputedStyle(X),Te=ie.transitionDuration,Le="none"===ie.transitionProperty||"0s"===Te||"0s, 0s"===Te||0===c.width&&0===c.height,st=new c7(this,X,r,Le);X.style.transform="scale3d(1, 1, 1)",st.state=0,r.persistent||(this._mostRecentTransientRipple=st);let kt=null;return!Le&&(z||h.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Kt=()=>this._finishRippleTransition(st),Dn=()=>this._destroyRipple(st);X.addEventListener("transitionend",Kt),X.addEventListener("transitioncancel",Dn),kt={onTransitionEnd:Kt,onTransitionCancel:Dn}}),this._activeRipples.set(st,kt),(Le||!z)&&this._finishRippleTransition(st),st}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,r={...CB,...t.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=nb(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,AB.forEach(r=>{nA._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{DB.forEach(e=>{this._triggerElement.addEventListener(e,this,TB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=1,!r&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=UO(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!BO(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(AB.forEach(e=>nA._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&DB.forEach(e=>t.removeEventListener(e,this,TB)))}}nA._eventManager=new l7;const RB=new jt("mat-ripple-global-options");let gv=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,c,h,y){this._elementRef=e,this._animationMode=y,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=h||{},this._rippleRenderer=new nA(this,r,e,c)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,c){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...c}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(xi),Be(Yc),Be(RB,8),Be(tu,8))},n.\u0275dir=Xn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&Ir("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),gE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,hs]}),n})(),h7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs]}),n})(),IB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[gE,Or,hs,h7]}),n})();const f7=["*",[["mat-toolbar-row"]]],p7=["*","mat-toolbar-row"],m7=b1(class{constructor(n){this._elementRef=n}});let g7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),_7=(()=>{class n extends m7{constructor(e,r,c){super(e),this._platform=r,this._document=c}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Yc),Be(Ji))},n.\u0275cmp=Ri({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,r,c){if(1&e&&El(c,g7,5),2&e){let h;rr(h=sr())&&(r._toolbarRows=h)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&Ir("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ci],ngContentSelectors:p7,decls:2,vars:0,template:function(e,r){1&e&&(es(f7),Rr(0),Rr(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),PB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,hs]}),n})();function kB(...n){const t=zf(n),{args:e,keys:r}=me(n),c=new pr(h=>{const{length:y}=e;if(!y)return void h.complete();const T=new Array(y);let L=y,z=y;for(let X=0;X<y;X++){let ie=!1;xs(e[X]).subscribe(mr(h,pe=>{ie||(ie=!0,z--),T[X]=pe},()=>L--,void 0,()=>{(!L||!ie)&&(z||h.next(r?De(r,T):T),h.complete())}))}});return t?c.pipe(Ge(t)):c}let LB=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=c=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(Be(ml),Be(Li))},n.\u0275dir=Xn({type:n}),n})(),x1=(()=>{class n extends LB{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=co(n)))(r||n)}}(),n.\u0275dir=Xn({type:n,features:[ci]}),n})();const kf=new jt("NgValueAccessor"),y7={provide:kf,useExisting:xr(()=>RI),multi:!0},x7=new jt("CompositionEventMode");let RI=(()=>{class n extends LB{constructor(e,r,c){super(e,r),this._compositionMode=c,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function b7(){const n=D_()?D_().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(Be(ml),Be(Li),Be(x7,8))},n.\u0275dir=Xn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&Ei("input",function(h){return r._handleInput(h.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(h){return r._compositionEnd(h.target.value)})},features:[Cr([y7]),ci]}),n})();const M7=!1;function vM(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function FB(n){return null!=n&&"number"==typeof n.length}const ru=new jt("NgValidators"),yM=new jt("NgAsyncValidators"),w7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S7{static min(t){return function NB(n){return t=>{if(vM(t.value)||vM(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function UB(n){return t=>{if(vM(t.value)||vM(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function BB(n){return vM(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function VB(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function zB(n){return vM(n.value)||w7.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function HB(n){return t=>vM(t.value)||!FB(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function GB(n){return t=>FB(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function WB(n){if(!n)return II;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(vM(r.value))return null;const c=r.value;return t.test(c)?null:{pattern:{requiredPattern:e,actualValue:c}}}}(t)}static nullValidator(t){return null}static compose(t){return ZB(t)}static composeAsync(t){return KB(t)}}function II(n){return null}function jB(n){return null!=n}function $B(n){const t=Sh(n)?Ms(n):n;if(M7&&!Uu(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new Jt(-1101,e)}return t}function qB(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function XB(n,t){return t.map(e=>e(n))}function YB(n){return n.map(t=>function E7(n){return!n.validate}(t)?t:e=>t.validate(e))}function ZB(n){if(!n)return null;const t=n.filter(jB);return 0==t.length?null:function(e){return qB(XB(e,t))}}function HO(n){return null!=n?ZB(YB(n)):null}function KB(n){if(!n)return null;const t=n.filter(jB);return 0==t.length?null:function(e){return kB(XB(e,t).map($B)).pipe(ri(qB))}}function GO(n){return null!=n?KB(YB(n)):null}function JB(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function QB(n){return n._rawValidators}function e4(n){return n._rawAsyncValidators}function WO(n){return n?Array.isArray(n)?n:[n]:[]}function PI(n,t){return Array.isArray(n)?n.includes(t):n===t}function t4(n,t){const e=WO(t);return WO(n).forEach(c=>{PI(e,c)||e.push(c)}),e}function n4(n,t){return WO(t).filter(e=>!PI(n,e))}class r4{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=HO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=GO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class kh extends r4{get formDirective(){return null}get path(){return null}}class rb extends r4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s4{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let o4=(()=>{class n extends s4{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(Be(rb,2))},n.\u0275dir=Xn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&Ir("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ci]}),n})(),jO=(()=>{class n extends s4{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(Be(kh,10))},n.\u0275dir=Xn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&Ir("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ci]}),n})();function a4(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const XO=!1,iA="VALID",LI="INVALID",_E="PENDING",rA="DISABLED";function YO(n){return(OI(n)?n.validators:n)||null}function ZO(n,t){return(OI(t)?t.asyncValidators:n)||null}function OI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class u4{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===iA}get invalid(){return this.status===LI}get pending(){return this.status==_E}get disabled(){return this.status===rA}get enabled(){return this.status!==rA}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(t4(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(t4(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(n4(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(n4(t,this._rawAsyncValidators))}hasValidator(t){return PI(this._rawValidators,t)}hasAsyncValidator(t){return PI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_E,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rA,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=iA,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iA||this.status===_E)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rA:iA}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_E,this._hasOwnPendingAsyncValidator=!0;const e=$B(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,c)=>r&&r._find(c),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ai,this.statusChanges=new Ai}_calculateStatus(){return this._allControlsDisabled()?rA:this.errors?LI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_E)?_E:this._anyControlsHaveStatus(LI)?LI:iA}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){OI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function P7(n){return Array.isArray(n)?HO(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function k7(n){return Array.isArray(n)?GO(n):n||null}(this._rawAsyncValidators)}}class KO extends u4{constructor(t,e,r){super(YO(e),ZO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function l4(n,t,e){n._forEachChild((r,c)=>{if(void 0===e[c])throw new Jt(1002,XO?function I7(n,t){return`Must supply a value for form control ${a4(n,t)}`}(t,c):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function c4(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new Jt(1e3,XO?function D7(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new Jt(1001,XO?function R7(n,t){return`Cannot find form control ${a4(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const c=this.controls[r];c&&c.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,c)=>{r.reset(t[c],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,c)=>((r.enabled||this.disabled)&&(e[c]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((c,h)=>{r=e(r,c,h)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const vE=new jt("CallSetDisabledState",{providedIn:"root",factory:()=>FI}),FI="always";function sA(n,t,e=FI){JO(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function F7(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&d4(n,t)})}(n,t),function U7(n,t){const e=(r,c)=>{t.valueAccessor.writeValue(r),c&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function N7(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&d4(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function O7(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function UI(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),VI(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function BI(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function JO(n,t){const e=QB(n);null!==t.validator?n.setValidators(JB(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=e4(n);null!==t.asyncValidator?n.setAsyncValidators(JB(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const c=()=>n.updateValueAndValidity();BI(t._rawValidators,c),BI(t._rawAsyncValidators,c)}function VI(n,t){let e=!1;if(null!==n){if(null!==t.validator){const c=QB(n);if(Array.isArray(c)&&c.length>0){const h=c.filter(y=>y!==t.validator);h.length!==c.length&&(e=!0,n.setValidators(h))}}if(null!==t.asyncValidator){const c=e4(n);if(Array.isArray(c)&&c.length>0){const h=c.filter(y=>y!==t.asyncValidator);h.length!==c.length&&(e=!0,n.setAsyncValidators(h))}}}const r=()=>{};return BI(t._rawValidators,r),BI(t._rawAsyncValidators,r),e}function d4(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function h4(n,t){JO(n,t)}function f4(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const G7={provide:kh,useExisting:xr(()=>yE)},oA=(()=>Promise.resolve())();let yE=(()=>{class n extends kh{constructor(e,r,c){super(),this.callSetDisabledState=c,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ai,this.form=new KO({},HO(e),GO(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){oA.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),sA(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){oA.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){oA.then(()=>{const r=this._findContainer(e.path),c=new KO({});h4(c,e),r.registerControl(e.name,c),c.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){oA.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){oA.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,f4(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(Be(ru,10),Be(yM,10),Be(vE,8))},n.\u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&Ei("submit",function(h){return r.onSubmit(h)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Cr([G7]),ci]}),n})();function p4(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function m4(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const g4=class extends u4{constructor(t=null,e,r){super(YO(e),ZO(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),OI(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=m4(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){p4(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){p4(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){m4(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},$7={provide:rb,useExisting:xr(()=>nF)},y4=(()=>Promise.resolve())();let nF=(()=>{class n extends rb{constructor(e,r,c,h,y,T){super(),this._changeDetectorRef=y,this.callSetDisabledState=T,this.control=new g4,this._registered=!1,this.update=new Ai,this._parent=e,this._setValidators(r),this._setAsyncValidators(c),this.valueAccessor=function tF(n,t){if(!t)return null;let e,r,c;return Array.isArray(t),t.forEach(h=>{h.constructor===RI?e=h:function z7(n){return Object.getPrototypeOf(n.constructor)===x1}(h)?r=h:c=h}),c||r||e||null}(0,h)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function eF(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){y4.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,c=0!==r&&function Qx(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);y4.then(()=>{c&&!this.control.disabled?this.control.disable():!c&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function NI(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(Be(kh,9),Be(ru,10),Be(yM,10),Be(kf,10),Be(Xa,8),Be(vE,8))},n.\u0275dir=Xn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Cr([$7]),ci,Hr]}),n})(),iF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),x4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const J7={provide:kh,useExisting:xr(()=>zI)};let zI=(()=>{class n extends kh{constructor(e,r,c){super(),this.callSetDisabledState=c,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ai,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(VI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return sA(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){UI(e.control||null,e,!1),function H7(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,f4(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,c=this.form.get(e.path);r!==c&&(UI(r||null,e),(n=>n instanceof g4)(c)&&(sA(c,e,this.callSetDisabledState),e.control=c))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);h4(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function B7(n,t){return VI(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JO(this.form,this),this._oldForm&&VI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(Be(ru,10),Be(yM,10),Be(vE,8))},n.\u0275dir=Xn({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&Ei("submit",function(h){return r.onSubmit(h)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Cr([J7]),ci,Hr]}),n})(),g9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[x4]}),n})(),v9=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:vE,useValue:e.callSetDisabledState??FI}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[g9]}),n})(),B4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),V4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[B4,hs,gE,Or,B4,hs]}),n})();class GI{}class lF{}class _v{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const c=e.slice(0,r),h=c.toLowerCase(),y=e.slice(r+1).trim();this.maybeSetNormalizedName(c,h),this.headers.has(h)?this.headers.get(h).push(y):this.headers.set(h,[y])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let c;if(c="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(h=>h.toString()),c.length>0){const h=e.toLowerCase();this.headers.set(h,c),this.maybeSetNormalizedName(e,h)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof _v?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new _v;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof _v?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const c=("a"===t.op?this.headers.get(e):void 0)||[];c.push(...r),this.headers.set(e,c);break;case"d":const h=t.value;if(h){let y=this.headers.get(e);if(!y)return;y=y.filter(T=>-1===h.indexOf(T)),0===y.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,y)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class D9{encodeKey(t){return z4(t)}encodeValue(t){return z4(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const I9=/%(\d[a-f0-9])/gi,P9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function z4(n){return encodeURIComponent(n).replace(I9,(t,e)=>P9[e]??t)}function WI(n){return`${n}`}class bM{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new D9,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function R9(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(c=>{const h=c.indexOf("="),[y,T]=-1==h?[t.decodeKey(c),""]:[t.decodeKey(c.slice(0,h)),t.decodeValue(c.slice(h+1))],L=e.get(y)||[];L.push(T),e.set(y,L)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],c=Array.isArray(r)?r.map(WI):[WI(r)];this.map.set(e,c)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const c=t[r];Array.isArray(c)?c.forEach(h=>{e.push({param:r,value:h,op:"a"})}):e.push({param:r,value:c,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new bM({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(WI(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const c=r.indexOf(WI(t.value));-1!==c&&r.splice(c,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class k9{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function H4(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function G4(n){return typeof Blob<"u"&&n instanceof Blob}function W4(n){return typeof FormData<"u"&&n instanceof FormData}class aA{constructor(t,e,r,c){let h;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function L9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||c?(this.body=void 0!==r?r:null,h=c):h=r,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new _v),this.context||(this.context=new k9),this.params){const y=this.params.toString();if(0===y.length)this.urlWithParams=e;else{const T=e.indexOf("?");this.urlWithParams=e+(-1===T?"?":T<e.length-1?"&":"")+y}}else this.params=new bM,this.urlWithParams=e}serializeBody(){return null===this.body?null:H4(this.body)||G4(this.body)||W4(this.body)||function O9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof bM?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||W4(this.body)?null:G4(this.body)?this.body.type||null:H4(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bM?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,c=t.responseType||this.responseType,h=void 0!==t.body?t.body:this.body,y=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,T=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let L=t.headers||this.headers,z=t.params||this.params;const X=t.context??this.context;return void 0!==t.setHeaders&&(L=Object.keys(t.setHeaders).reduce((ie,pe)=>ie.set(pe,t.setHeaders[pe]),L)),t.setParams&&(z=Object.keys(t.setParams).reduce((ie,pe)=>ie.set(pe,t.setParams[pe]),z)),new aA(e,r,h,{params:z,headers:L,context:X,reportProgress:T,responseType:c,withCredentials:y})}}var Kc=(()=>((Kc=Kc||{})[Kc.Sent=0]="Sent",Kc[Kc.UploadProgress=1]="UploadProgress",Kc[Kc.ResponseHeader=2]="ResponseHeader",Kc[Kc.DownloadProgress=3]="DownloadProgress",Kc[Kc.Response=4]="Response",Kc[Kc.User=5]="User",Kc))();class uF{constructor(t,e=200,r="OK"){this.headers=t.headers||new _v,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class dF extends uF{constructor(t={}){super(t),this.type=Kc.ResponseHeader}clone(t={}){return new dF({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jI extends uF{constructor(t={}){super(t),this.type=Kc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jI({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class j4 extends uF{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function hF(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let bE=(()=>{class n{constructor(e){this.handler=e}request(e,r,c={}){let h;if(e instanceof aA)h=e;else{let L,z;L=c.headers instanceof _v?c.headers:new _v(c.headers),c.params&&(z=c.params instanceof bM?c.params:new bM({fromObject:c.params})),h=new aA(e,r,void 0!==c.body?c.body:null,{headers:L,context:c.context,params:z,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials})}const y=ye(h).pipe(wi(L=>this.handler.handle(L)));if(e instanceof aA||"events"===c.observe)return y;const T=y.pipe(xn(L=>L instanceof jI));switch(c.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return T.pipe(ri(L=>{if(null!==L.body&&!(L.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return L.body}));case"blob":return T.pipe(ri(L=>{if(null!==L.body&&!(L.body instanceof Blob))throw new Error("Response is not a Blob.");return L.body}));case"text":return T.pipe(ri(L=>{if(null!==L.body&&"string"!=typeof L.body)throw new Error("Response is not a string.");return L.body}));default:return T.pipe(ri(L=>L.body))}case"response":return T;default:throw new Error(`Unreachable: unhandled observe type ${c.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new bM).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,c={}){return this.request("PATCH",e,hF(c,r))}post(e,r,c={}){return this.request("POST",e,hF(c,r))}put(e,r,c={}){return this.request("PUT",e,hF(c,r))}}return n.\u0275fac=function(e){return new(e||n)(ut(GI))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function $4(n,t){return t(n)}function F9(n,t){return(e,r)=>t.intercept(e,{handle:c=>n(c,r)})}const U9=new jt("HTTP_INTERCEPTORS"),cA=new jt("HTTP_INTERCEPTOR_FNS");function B9(){let n=null;return(t,e)=>(null===n&&(n=(ei(U9,{optional:!0})??[]).reduceRight(F9,$4)),n(t,e))}let q4=(()=>{class n extends GI{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(cA)));this.chain=r.reduceRight((c,h)=>function N9(n,t,e){return(r,c)=>e.runInContext(()=>t(r,h=>n(h,c)))}(c,h,this.injector),$4)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(ut(lF),ut(Wo))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const G9=/^\)\]\}',?\n/;let Y4=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new pr(r=>{const c=this.xhrFactory.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((Te,Le)=>c.setRequestHeader(Te,Le.join(","))),e.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Te=e.detectContentTypeHeader();null!==Te&&c.setRequestHeader("Content-Type",Te)}if(e.responseType){const Te=e.responseType.toLowerCase();c.responseType="json"!==Te?Te:"text"}const h=e.serializeBody();let y=null;const T=()=>{if(null!==y)return y;const Te=c.statusText||"OK",Le=new _v(c.getAllResponseHeaders()),st=function W9(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||e.url;return y=new dF({headers:Le,status:c.status,statusText:Te,url:st}),y},L=()=>{let{headers:Te,status:Le,statusText:st,url:kt}=T(),Kt=null;204!==Le&&(Kt=typeof c.response>"u"?c.responseText:c.response),0===Le&&(Le=Kt?200:0);let Dn=Le>=200&&Le<300;if("json"===e.responseType&&"string"==typeof Kt){const ln=Kt;Kt=Kt.replace(G9,"");try{Kt=""!==Kt?JSON.parse(Kt):null}catch(ni){Kt=ln,Dn&&(Dn=!1,Kt={error:ni,text:Kt})}}Dn?(r.next(new jI({body:Kt,headers:Te,status:Le,statusText:st,url:kt||void 0})),r.complete()):r.error(new j4({error:Kt,headers:Te,status:Le,statusText:st,url:kt||void 0}))},z=Te=>{const{url:Le}=T(),st=new j4({error:Te,status:c.status||0,statusText:c.statusText||"Unknown Error",url:Le||void 0});r.error(st)};let X=!1;const ie=Te=>{X||(r.next(T()),X=!0);let Le={type:Kc.DownloadProgress,loaded:Te.loaded};Te.lengthComputable&&(Le.total=Te.total),"text"===e.responseType&&c.responseText&&(Le.partialText=c.responseText),r.next(Le)},pe=Te=>{let Le={type:Kc.UploadProgress,loaded:Te.loaded};Te.lengthComputable&&(Le.total=Te.total),r.next(Le)};return c.addEventListener("load",L),c.addEventListener("error",z),c.addEventListener("timeout",z),c.addEventListener("abort",z),e.reportProgress&&(c.addEventListener("progress",ie),null!==h&&c.upload&&c.upload.addEventListener("progress",pe)),c.send(h),r.next({type:Kc.Sent}),()=>{c.removeEventListener("error",z),c.removeEventListener("abort",z),c.removeEventListener("load",L),c.removeEventListener("timeout",z),e.reportProgress&&(c.removeEventListener("progress",ie),null!==h&&c.upload&&c.upload.removeEventListener("progress",pe)),c.readyState!==c.DONE&&c.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(ut(iR))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const fF=new jt("XSRF_ENABLED"),Z4=new jt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),K4=new jt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class J4{}let q9=(()=>{class n{constructor(e,r,c){this.doc=e,this.platform=r,this.cookieName=c,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=$D(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji),ut(xS),ut(Z4))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function X9(n,t){const e=n.url.toLowerCase();if(!ei(fF)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=ei(J4).getToken(),c=ei(K4);return null!=r&&!n.headers.has(c)&&(n=n.clone({headers:n.headers.set(c,r)})),t(n)}var xc=(()=>((xc=xc||{})[xc.Interceptors=0]="Interceptors",xc[xc.LegacyInterceptors=1]="LegacyInterceptors",xc[xc.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",xc[xc.NoXsrfProtection=3]="NoXsrfProtection",xc[xc.JsonpSupport=4]="JsonpSupport",xc[xc.RequestsMadeViaParent=5]="RequestsMadeViaParent",xc))();function xE(n,t){return{\u0275kind:n,\u0275providers:t}}function Y9(...n){const t=[bE,Y4,q4,{provide:GI,useExisting:q4},{provide:lF,useExisting:Y4},{provide:cA,useValue:X9,multi:!0},{provide:fF,useValue:!0},{provide:J4,useClass:q9}];for(const e of n)t.push(...e.\u0275providers);return function vp(n){return{\u0275providers:n}}(t)}const Q4=new jt("LEGACY_INTERCEPTOR_FN");let K9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[Y9(xE(xc.LegacyInterceptors,[{provide:Q4,useFactory:B9},{provide:cA,useExisting:Q4,multi:!0}]))]}),n})();const J9=["*"];let $I;function lA(n){return function Q9(){if(void 0===$I&&($I=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&($I=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return $I}()?.createHTML(n)||n}function eV(n){return Error(`Unable to find icon with the name "${n}"`)}function tV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function nV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class w1{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let qI=(()=>{class n{constructor(e,r,c,h){this._httpClient=e,this._sanitizer=r,this._errorHandler=h,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=c}addSvgIcon(e,r,c){return this.addSvgIconInNamespace("",e,r,c)}addSvgIconLiteral(e,r,c){return this.addSvgIconLiteralInNamespace("",e,r,c)}addSvgIconInNamespace(e,r,c,h){return this._addSvgIconConfig(e,r,new w1(c,null,h))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,c,h){const y=this._sanitizer.sanitize(yr.HTML,c);if(!y)throw nV(c);const T=lA(y);return this._addSvgIconConfig(e,r,new w1("",T,h))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,c){return this._addSvgIconSetConfig(e,new w1(r,null,c))}addSvgIconSetLiteralInNamespace(e,r,c){const h=this._sanitizer.sanitize(yr.HTML,r);if(!h)throw nV(r);const y=lA(h);return this._addSvgIconSetConfig(e,new w1("",y,c))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(yr.RESOURCE_URL,e);if(!r)throw tV(e);const c=this._cachedIconsByUrl.get(r);return c?ye(XI(c)):this._loadSvgIconFromConfig(new w1(e,null)).pipe(ar(h=>this._cachedIconsByUrl.set(r,h)),ri(h=>XI(h)))}getNamedSvgIcon(e,r=""){const c=iV(r,e);let h=this._svgIconConfigs.get(c);if(h)return this._getSvgFromConfig(h);if(h=this._getIconConfigFromResolvers(r,e),h)return this._svgIconConfigs.set(c,h),this._getSvgFromConfig(h);const y=this._iconSetConfigs.get(r);return y?this._getSvgFromIconSetConfigs(e,y):$t(eV(c))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ye(XI(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ri(r=>XI(r)))}_getSvgFromIconSetConfigs(e,r){const c=this._extractIconWithNameFromAnySet(e,r);return c?ye(c):kB(r.filter(y=>!y.svgText).map(y=>this._loadSvgIconSetFromConfig(y).pipe(Vr(T=>{const z=`Loading icon set URL: ${this._sanitizer.sanitize(yr.RESOURCE_URL,y.url)} failed: ${T.message}`;return this._errorHandler.handleError(new Error(z)),ye(null)})))).pipe(ri(()=>{const y=this._extractIconWithNameFromAnySet(e,r);if(!y)throw eV(e);return y}))}_extractIconWithNameFromAnySet(e,r){for(let c=r.length-1;c>=0;c--){const h=r[c];if(h.svgText&&h.svgText.toString().indexOf(e)>-1){const y=this._svgElementFromConfig(h),T=this._extractSvgIconFromSet(y,e,h.options);if(T)return T}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ar(r=>e.svgText=r),ri(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ye(null):this._fetchIcon(e).pipe(ar(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,c){const h=e.querySelector(`[id="${r}"]`);if(!h)return null;const y=h.cloneNode(!0);if(y.removeAttribute("id"),"svg"===y.nodeName.toLowerCase())return this._setSvgAttributes(y,c);if("symbol"===y.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(y),c);const T=this._svgElementFromString(lA("<svg></svg>"));return T.appendChild(y),this._setSvgAttributes(T,c)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const c=r.querySelector("svg");if(!c)throw Error("<svg> tag not found");return c}_toSvgElement(e){const r=this._svgElementFromString(lA("<svg></svg>")),c=e.attributes;for(let h=0;h<c.length;h++){const{name:y,value:T}=c[h];"id"!==y&&r.setAttribute(y,T)}for(let h=0;h<e.childNodes.length;h++)e.childNodes[h].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[h].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:c}=e,h=c?.withCredentials??!1;if(!this._httpClient)throw function ej(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const y=this._sanitizer.sanitize(yr.RESOURCE_URL,r);if(!y)throw tV(r);const T=this._inProgressUrlFetches.get(y);if(T)return T;const L=this._httpClient.get(y,{responseType:"text",withCredentials:h}).pipe(ri(z=>lA(z)),h1(()=>this._inProgressUrlFetches.delete(y)),Vd());return this._inProgressUrlFetches.set(y,L),L}_addSvgIconConfig(e,r,c){return this._svgIconConfigs.set(iV(e,r),c),this}_addSvgIconSetConfig(e,r){const c=this._iconSetConfigs.get(e);return c?c.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let c=0;c<this._resolvers.length;c++){const h=this._resolvers[c](r,e);if(h)return nj(h)?new w1(h.url,null,h.options):new w1(h,null)}}}return n.\u0275fac=function(e){return new(e||n)(ut(bE,8),ut(se),ut(Ji,8),ut(Uc))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XI(n){return n.cloneNode(!0)}function iV(n,t){return n+":"+t}function nj(n){return!(!n.url||!n.options)}const ij=b1(class{constructor(n){this._elementRef=n}}),rj=new jt("MAT_ICON_DEFAULT_OPTIONS"),sj=new jt("mat-icon-location",{providedIn:"root",factory:function oj(){const n=ei(Ji),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),rV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],aj=rV.map(n=>`[${n}]`).join(", "),cj=/^url\(['"]?#(.*?)['"]?\)$/;let sV=(()=>{class n extends ij{get inline(){return this._inline}set inline(e){this._inline=Xs(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,c,h,y,T){super(e),this._iconRegistry=r,this._location=h,this._errorHandler=y,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=nn.EMPTY,T&&(T.color&&(this.color=this.defaultColor=T.color),T.fontSet&&(this.fontSet=T.fontSet)),c||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const c=e.childNodes[r];(1!==c.nodeType||"svg"===c.nodeName.toLowerCase())&&c.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(c=>c.length>0);this._previousFontSetClass.forEach(c=>e.classList.remove(c)),r.forEach(c=>e.classList.add(c)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((c,h)=>{c.forEach(y=>{h.setAttribute(y.name,`url('${e}#${y.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(aj),c=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let h=0;h<r.length;h++)rV.forEach(y=>{const T=r[h],L=T.getAttribute(y),z=L?L.match(cj):null;if(z){let X=c.get(T);X||(X=[],c.set(T,X)),X.push({name:y,value:z[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,c]=this._splitIconName(e);r&&(this._svgNamespace=r),c&&(this._svgName=c),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(c,r).pipe(dn(1)).subscribe(h=>this._setSvgElement(h),h=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${c}! ${h.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(qI),Zd("aria-hidden"),Be(sj),Be(Uc),Be(rj,8))},n.\u0275cmp=Ri({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,r){2&e&&(di("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ir("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ci],ngContentSelectors:J9,decls:1,vars:0,template:function(e,r){1&e&&(es(),Rr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,hs]}),n})();const lj=["mat-button",""],aV=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],cV=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],dj=["mat-fab",""],hj=["mat-icon-button",""],fj=["*"],pj=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],mj=b1(DI(eA(class{constructor(n){this._elementRef=n}})));let pF=(()=>{class n extends mj{constructor(e,r,c,h){super(e),this._platform=r,this._ngZone=c,this._animationMode=h,this._focusMonitor=ei(_M),this._isFab=!1;const y=e.nativeElement.classList;for(const T of pj)this._hasHostAttributes(T.selector)&&T.mdcClasses.forEach(L=>{y.add(L)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(e){Ip()},n.\u0275dir=Xn({type:n,viewQuery:function(e,r){if(1&e&&no(gv,5),2&e){let c;rr(c=sr())&&(r.ripple=c.first)}},features:[ci]}),n})(),lV=(()=>{class n extends pF{constructor(e,r,c,h){super(e,r,c,h)}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Yc),Be(xi),Be(tu,8))},n.\u0275cmp=Ri({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,r){2&e&&(di("disabled",r.disabled||null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ci],attrs:lj,ngContentSelectors:cV,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(es(aV),$n(0,"span",0),Rr(1),on(2,"span",1),Rr(3,1),gn(),Rr(4,2),$n(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Ir("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),zn(6),Vn("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[gv],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})();const _j=new jt("mat-mdc-fab-default-options",{providedIn:"root",factory:uV});function uV(){return{color:"accent"}}const dV=uV();let vj=(()=>{class n extends pF{get extended(){return this._extended}set extended(e){this._extended=Xs(e)}constructor(e,r,c,h,y){super(e,r,c,h),this._options=y,this._isFab=!0,this._options=this._options||dV,this.color=this.defaultColor=this._options.color||dV.color}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Yc),Be(xi),Be(tu,8),Be(_j,8))},n.\u0275cmp=Ri({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,r){2&e&&(di("disabled",r.disabled||null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[ci],attrs:dj,ngContentSelectors:cV,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(es(aV),$n(0,"span",0),Rr(1),on(2,"span",1),Rr(3,1),gn(),Rr(4,2),$n(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Ir("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),zn(6),Vn("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[gv],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),yj=(()=>{class n extends pF{constructor(e,r,c,h){super(e,r,c,h)}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Yc),Be(xi),Be(tu,8))},n.\u0275cmp=Ri({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,r){2&e&&(di("disabled",r.disabled||null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ci],attrs:hj,ngContentSelectors:fj,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(es(),$n(0,"span",0),Rr(1),$n(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(zn(3),Vn("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[gv],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),hV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,gE,hs]}),n})();const bj=["addListener","removeListener"],xj=["addEventListener","removeEventListener"],Mj=["on","off"];function YI(n,t,e,r){if(rn(e)&&(r=e,e=void 0),r)return YI(n,t,e).pipe(Ge(r));const[c,h]=function Ej(n){return rn(n.addEventListener)&&rn(n.removeEventListener)}(n)?xj.map(y=>T=>n[y](t,T,e)):function wj(n){return rn(n.addListener)&&rn(n.removeListener)}(n)?bj.map(fV(n,t)):function Sj(n){return rn(n.on)&&rn(n.off)}(n)?Mj.map(fV(n,t)):[];if(!c&&uu(n))return ns(y=>YI(y,t,e))(xs(n));if(!c)throw new TypeError("Invalid event target");return new pr(y=>{const T=(...L)=>y.next(1<L.length?L:L[0]);return c(T),()=>h(T)})}function fV(n,t){return e=>r=>n[e](t,r)}const uA={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=uA;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const c=t(h=>{e=void 0,n(h)});return new nn(()=>e?.(c))},requestAnimationFrame(...n){const{delegate:t}=uA;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=uA;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Aj=new class Tj extends SI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let c;t=t||r.shift();do{if(c=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,c){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw c}}}(class Cj extends wI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=uA.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){var c;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:h}=t;null!=e&&(null===(c=h[h.length-1])||void 0===c?void 0:c.id)!==e&&(uA.cancelAnimationFrame(e),t._scheduled=void 0)}});let mF,Dj=1;const ZI={};function pV(n){return n in ZI&&(delete ZI[n],!0)}const Rj={setImmediate(n){const t=Dj++;return ZI[t]=!0,mF||(mF=Promise.resolve()),mF.then(()=>pV(t)&&n()),t},clearImmediate(n){pV(n)}},{setImmediate:Ij,clearImmediate:Pj}=Rj,KI={setImmediate(...n){const{delegate:t}=KI;return(t?.setImmediate||Ij)(...n)},clearImmediate(n){const{delegate:t}=KI;return(t?.clearImmediate||Pj)(n)},delegate:void 0},gF=new class Lj extends SI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let c;t=t||r.shift();do{if(c=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,c){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw c}}}(class kj extends wI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=KI.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var c;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:h}=t;null!=e&&(null===(c=h[h.length-1])||void 0===c?void 0:c.id)!==e&&(KI.clearImmediate(e),t._scheduled=void 0)}});function mV(n=0,t,e=wW){let r=-1;return null!=t&&(B_(t)?e=t:r=t),new pr(c=>{let h=function Fj(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;h<0&&(h=0);let y=0;return e.schedule(function(){c.closed||(c.next(y++),0<=r?this.schedule(void 0,r):c.complete())},h)})}function _F(n,t=EI){return function Oj(n){return qr((t,e)=>{let r=!1,c=null,h=null,y=!1;const T=()=>{if(h?.unsubscribe(),h=null,r){r=!1;const z=c;c=null,e.next(z)}y&&e.complete()},L=()=>{h=null,y&&e.complete()};t.subscribe(mr(e,z=>{r=!0,c=z,h||xs(n(z)).subscribe(h=mr(e,T,L))},()=>{y=!0,(!r||!h||h.closed)&&e.complete()}))})}(()=>mV(n,t))}const Nj=["contentWrapper"],Uj=["*"],Bj=new jt("VIRTUAL_SCROLL_STRATEGY");let JI=(()=>{class n{constructor(e,r,c){this._ngZone=e,this._platform=r,this._scrolled=new Ci,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=c}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new pr(r=>{this._globalSubscription||this._addGlobalListener();const c=e>0?this._scrolled.pipe(_F(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{c.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const c=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(xn(h=>!h||c.indexOf(h)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((c,h)=>{this._scrollableContainsElement(h,e)&&r.push(h)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let c=nb(r),h=e.getElementRef().nativeElement;do{if(c==h)return!0}while(c=c.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>YI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(ut(xi),ut(Yc),ut(Ji,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gV=(()=>{class n{constructor(e,r,c,h){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=c,this.dir=h,this._destroyed=new Ci,this._elementScrolled=new pr(y=>this.ngZone.runOutsideAngular(()=>YI(this.elementRef.nativeElement,"scroll").pipe(I_(this._destroyed)).subscribe(y)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,c=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=c?e.end:e.start),null==e.right&&(e.right=c?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),c&&0!=ZT()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==ZT()?e.left=e.right:1==ZT()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;nB()?r.scrollTo(e):(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left))}measureScrollOffset(e){const r="left",c="right",h=this.elementRef.nativeElement;if("top"==e)return h.scrollTop;if("bottom"==e)return h.scrollHeight-h.clientHeight-h.scrollTop;const y=this.dir&&"rtl"==this.dir.value;return"start"==e?e=y?c:r:"end"==e&&(e=y?r:c),y&&2==ZT()?e==r?h.scrollWidth-h.clientWidth-h.scrollLeft:h.scrollLeft:y&&1==ZT()?e==r?h.scrollLeft+h.scrollWidth-h.clientWidth:-h.scrollLeft:e==r?h.scrollLeft:h.scrollWidth-h.clientWidth-h.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(JI),Be(xi),Be(ib,8))},n.\u0275dir=Xn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),vF=(()=>{class n{constructor(e,r,c){this._platform=e,this._change=new Ci,this._changeListener=h=>{this._change.next(h)},this._document=c,r.runOutsideAngular(()=>{if(e.isBrowser){const h=this._getWindow();h.addEventListener("resize",this._changeListener),h.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:c}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+c,right:e.left+r,height:c,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),c=e.documentElement,h=c.getBoundingClientRect();return{top:-h.top||e.body.scrollTop||r.scrollY||c.scrollTop||0,left:-h.left||e.body.scrollLeft||r.scrollX||c.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(_F(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc),ut(xi),ut(Ji,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _V=new jt("VIRTUAL_SCROLLABLE");let Hj=(()=>{class n extends gV{constructor(e,r,c,h){super(e,r,c,h)}measureViewportSize(e){const r=this.elementRef.nativeElement;return"horizontal"===e?r.clientWidth:r.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(JI),Be(xi),Be(ib,8))},n.\u0275dir=Xn({type:n,features:[ci]}),n})();const Wj=typeof requestAnimationFrame<"u"?Aj:gF;let jj=(()=>{class n extends Hj{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Xs(e)}constructor(e,r,c,h,y,T,L,z){super(e,T,c,y),this.elementRef=e,this._changeDetectorRef=r,this._scrollStrategy=h,this.scrollable=z,this._platform=ei(Yc),this._detachedSubject=new Ci,this._renderedRangeSubject=new Ci,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new pr(X=>this._scrollStrategy.scrolledIndexChange.subscribe(ie=>Promise.resolve().then(()=>this.ngZone.run(()=>X.next(ie))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=nn.EMPTY,this._viewportChanges=L.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Rt(null),_F(0,Wj)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(I_(this._detachedSubject)).subscribe(r=>{const c=r.length;c!==this._dataLength&&(this._dataLength=c,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function Gj(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,r="to-start"){e=this.appendOnly&&"to-start"===r?0:e;const h="horizontal"==this.orientation,y=h?"X":"Y";let L=`translate${y}(${Number((h&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===r&&(L+=` translate${y}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=L&&(this._renderedContentTransform=L,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,r="auto"){const c={behavior:r};"horizontal"===this.orientation?c.start=e:c.top=e,this.scrollable.scrollTo(c)}scrollToIndex(e,r="auto"){this._scrollStrategy.scrollToIndex(e,r)}measureScrollOffset(e){let r;return r=this.scrollable==this?c=>super.measureScrollOffset(c):c=>this.scrollable.measureScrollOffset(c),Math.max(0,r(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let r;const c="left",h="right",y="rtl"==this.dir?.value;r="start"==e?y?h:c:"end"==e?y?c:h:e||("horizontal"===this.orientation?"left":"top");const T=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-T}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const r of e)r()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Xa),Be(xi),Be(Bj,8),Be(ib,8),Be(JI),Be(vF),Be(_V,8))},n.\u0275cmp=Ri({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,r){if(1&e&&no(Nj,7),2&e){let c;rr(c=sr())&&(r._contentWrapper=c.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,r){2&e&&Ir("cdk-virtual-scroll-orientation-horizontal","horizontal"===r.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==r.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Cr([{provide:gV,useFactory:(t,e)=>t||e,deps:[[new Wl,new ip(_V)],n]}]),ci,XE],ngContentSelectors:Uj,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,r){1&e&&(es(),on(0,"div",0,1),Rr(2),gn(),$n(3,"div",2)),2&e&&(zn(3),Bu("width",r._totalContentWidth)("height",r._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),ME=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),vV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[QT,ME,jj,QT,ME]}),n})(),yV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[Or,hs,ME,ME,hs]}),n})();const qj=["knob"],Xj=["valueIndicatorContainer"];function Yj(n,t){if(1&n&&(on(0,"div",4,5)(2,"div",6)(3,"span",7),m(4),gn()()()),2&n){const e=ps();zn(4),b(e.valueIndicatorText)}}const Zj=["trackActive"];function Kj(n,t){if(1&n&&$n(0,"div"),2&n){const e=t.$implicit,r=t.index,c=ps(3);Bx(0===e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Bu("transform",c._calcTickMarkTransform(r))}}function Jj(n,t){if(1&n&&(Jl(0),Oi(1,Kj,1,4,"div",11),g_()),2&n){const e=ps(2);zn(1),Vn("ngForOf",e._tickMarks)}}function Qj(n,t){if(1&n&&(on(0,"div",8,9),Oi(2,Jj,2,1,"ng-container",10),gn()),2&n){const e=ps();zn(2),Vn("ngIf",e._cachedWidth)}}function e$(n,t){if(1&n&&$n(0,"mat-slider-visual-thumb",7),2&n){const e=ps();Vn("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}const t$=["*"],QI=new jt("_MatSlider"),bV=new jt("_MatSliderThumb"),xV=new jt("_MatSliderRangeThumb"),MV=new jt("_MatSliderVisualThumb");let n$=(()=>{class n{constructor(e,r,c,h){this._cdr=e,this._ngZone=r,this._slider=h,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._onPointerMove=y=>{if(this._sliderInput._isFocused)return;const T=this._hostElement.getBoundingClientRect(),L=this._isSliderThumbHovered(y,T);this._isHovered=L,L?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=()=>{this._isActive=!0,this._showActiveRipple()},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef)},this._hostElement=c.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const e=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{e.addEventListener("pointermove",this._onPointerMove),e.addEventListener("pointerdown",this._onDragStart),e.addEventListener("pointerup",this._onDragEnd),e.addEventListener("pointerleave",this._onMouseLeave),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const e=this._sliderInputEl;e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return 0===e?.state||1===e?.state}_showRipple(e,r){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(1===this.thumbPosition?2:1)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||r))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const r=this._getSibling();r._isShowingAnyRipple()||(this._hideValueIndicator(),r._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(1===this.thumbPosition?2:1)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}_isSliderThumbHovered(e,r){const c=r.width/2,L=e.clientY-(r.y+c);return Math.pow(e.clientX-(r.x+c),2)+Math.pow(L,2)<Math.pow(c,2)}}return n.\u0275fac=function(e){return new(e||n)(Be(Xa),Be(xi),Be(Li),Be(QI))},n.\u0275cmp=Ri({type:n,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(e,r){if(1&e&&(no(gv,5),no(qj,5),no(Xj,5)),2&e){let c;rr(c=sr())&&(r._ripple=c.first),rr(c=sr())&&(r._knob=c.first),rr(c=sr())&&(r._valueIndicatorContainer=c.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Cr([{provide:MV,useExisting:n}])],decls:4,vars:2,consts:[["class","mdc-slider__value-indicator-container",4,"ngIf"],[1,"mdc-slider__thumb-knob"],["knob",""],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator-container"],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(e,r){1&e&&(Oi(0,Yj,5,1,"div",0),$n(1,"div",1,2)(3,"div",3)),2&e&&(Vn("ngIf",r.discrete),zn(3),Vn("matRippleDisabled",!0))},dependencies:[cv,gv],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),n})();const i$=b1(eA(class{constructor(n){this._elementRef=n}}),"primary");let r$=(()=>{class n extends i${get disabled(){return this._disabled}set disabled(e){this._disabled=Xs(e);const r=this._getInput(2),c=this._getInput(1);r&&(r.disabled=this._disabled),c&&(c.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=Xs(e),this._updateValueIndicatorUIs()}get showTickMarks(){return this._showTickMarks}set showTickMarks(e){this._showTickMarks=Xs(e)}get min(){return this._min}set min(e){const r=iu(e,this._min);this._min!==r&&this._updateMin(r)}_updateMin(e){const r=this._min;this._min=e,this._isRange?this._updateMinRange({old:r,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){const r=this._getInput(2),c=this._getInput(1),h=r.value,y=c.value;c.min=e.new,r.min=Math.max(e.new,c.value),c.max=Math.min(r.max,r.value),c._updateWidthInactive(),r._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(r,c):this._onTranslateXChangeBySideEffect(c,r),h!==r.value&&this._onValueChange(r),y!==c.value&&this._onValueChange(c)}_updateMinNonRange(e){const r=this._getInput(2);if(r){const c=r.value;r.min=e,r._updateThumbUIByValue(),this._updateTrackUI(r),c!==r.value&&this._onValueChange(r)}}get max(){return this._max}set max(e){const r=iu(e,this._max);this._max!==r&&this._updateMax(r)}_updateMax(e){const r=this._max;this._max=e,this._isRange?this._updateMaxRange({old:r,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){const r=this._getInput(2),c=this._getInput(1),h=r.value,y=c.value;r.max=e.new,c.max=Math.min(e.new,r.value),r.min=c.value,r._updateWidthInactive(),c._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(c,r):this._onTranslateXChangeBySideEffect(r,c),h!==r.value&&this._onValueChange(r),y!==c.value&&this._onValueChange(c)}_updateMaxNonRange(e){const r=this._getInput(2);if(r){const c=r.value;r.max=e,r._updateThumbUIByValue(),this._updateTrackUI(r),c!==r.value&&this._onValueChange(r)}}get step(){return this._step}set step(e){const r=iu(e,this._step);this._step!==r&&this._updateStep(r)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const e=this._getInput(2),r=this._getInput(1),c=e.value,h=r.value,y=r.value;e.min=this._min,r.max=this._max,e.step=this._step,r.step=this._step,this._platform.SAFARI&&(e.value=e.value,r.value=r.value),e.min=Math.max(this._min,r.value),r.max=Math.min(this._max,e.value),r._updateWidthInactive(),e._updateWidthInactive(),e.value<y?this._onTranslateXChangeBySideEffect(r,e):this._onTranslateXChangeBySideEffect(e,r),c!==e.value&&this._onValueChange(e),h!==r.value&&this._onValueChange(r)}_updateStepNonRange(){const e=this._getInput(2);if(e){const r=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),r!==e.value&&this._onValueChange(e)}}constructor(e,r,c,h,y,T,L){super(h),this._ngZone=e,this._cdr=r,this._platform=c,this._dir=y,this._globalRippleOptions=T,this._disabled=!1,this._discrete=!1,this._showTickMarks=!1,this._min=0,this._max=100,this._step=0,this.displayWith=z=>`${z}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===L,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const e=this._getInput(2),r=this._getInput(1);this._isRange=!!e&&!!r,this._cdr.detectChanges();const c=this._getThumb(2);this._rippleRadius=c._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._inputOffset=this._knobRadius,this._isRange?this._initUIRange(e,r):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,r){e.initProps(),e.initUI(),r.initProps(),r.initUI(),e._updateMinMax(),r._updateMinMax(),e._updateStaticStyles(),r._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),r._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const e=this._getInput(2),r=this._getInput(1);e._setIsLeftThumb(),r._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),r.translateX=r._calcTranslateXByValue(),e._updateStaticStyles(),r._updateStaticStyles(),e._updateWidthInactive(),r._updateWidthInactive(),e._updateThumbUIByValue(),r._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(2)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(1)._isActive||this._getThumb(2)._isActive}_getValue(e=2){const r=this._getInput(e);return r?r.value:this.min}_skipUpdate(){return!(!this._getInput(1)?._skipUIUpdate&&!this._getInput(2)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){const r=this._trackActive.nativeElement.style,c=e.left!==r.left&&e.right!==r.right;r.left=e.left,r.right=e.right,r.transformOrigin=e.transformOrigin,c?(this._elementRef.nativeElement.classList.add("mat-mdc-slider-disable-track-animation"),this._ngZone.onStable.pipe(dn(1)).subscribe(()=>{this._elementRef.nativeElement.classList.remove("mat-mdc-slider-disable-track-animation"),r.transform=e.transform})):r.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,r){this._hasViewInitialized&&(e._updateThumbUIByValue(),r._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const e=this._getInput(2),r=this._getInput(1);e._updateThumbUIByValue(),r._updateThumbUIByValue(),e._updateStaticStyles(),r._updateStaticStyles(),e._updateMinMax(),r._updateMinMax(),e._updateWidthInactive(),r._updateWidthInactive()}else{const e=this._getInput(2);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const e=this._getInput(1),r=this._getInput(2);return!(!e||!r)&&r.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){const r=e.getSibling(),c=this._getThumb(e.thumbPosition);this._getThumb(r.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),c._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){this._skipUpdate()||(this._getThumb(2===e.thumbPosition?2:1)._hostElement.style.transform=`translateX(${e.translateX}px)`)}_updateValueIndicatorUI(e){if(this._skipUpdate())return;const r=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext=r:e._hostElement.setAttribute("aria-valuetext",r),this.discrete){1===e.thumbPosition?this.startValueIndicatorText=r:this.endValueIndicatorText=r;const c=this._getThumb(e.thumbPosition);r.length<3?c._hostElement.classList.add("mdc-slider__thumb--short-value"):c._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const e=this._getInput(2),r=this._getInput(1);e&&this._updateValueIndicatorUI(e),r&&this._updateValueIndicatorUI(r)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const e=this._step&&this._step>0?this._step:1,c=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*c-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){const r=e.getSibling();if(!r||!this._cachedWidth)return;const c=Math.abs(r.translateX-e.translateX)/this._cachedWidth;this._setTrackActiveStyles(e._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-r.translateX+"px",transformOrigin:"right",transform:`scaleX(${c})`}:{left:`${r.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${c})`})}_updateTrackUINonRange(e){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){const r=this._getValue();let c=Math.max(Math.round((r-this.min)/e),0),h=Math.max(Math.round((this.max-r)/e),0);this._isRtl?c++:h++,this._tickMarks=Array(c).fill(0).concat(Array(h).fill(1))}_updateTickMarkUIRange(e){const r=this._getValue(),c=this._getValue(1),h=Math.max(Math.floor((c-this.min)/e),0),y=Math.max(Math.floor((r-c)/e)+1,0),T=Math.max(Math.floor((this.max-r)/e),0);this._tickMarks=Array(h).fill(1).concat(Array(y).fill(0),Array(T).fill(1))}_getInput(e){return 2===e&&this._input?this._input:this._inputs?.length?1===e?this._inputs.first:this._inputs.last:void 0}_getThumb(e){return 2===e?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}}return n.\u0275fac=function(e){return new(e||n)(Be(xi),Be(Xa),Be(Yc),Be(Li),Be(ib,8),Be(RB,8),Be(tu,8))},n.\u0275cmp=Ri({type:n,selectors:[["mat-slider"]],contentQueries:function(e,r,c){if(1&e&&(El(c,bV,5),El(c,xV,4)),2&e){let h;rr(h=sr())&&(r._input=h.first),rr(h=sr())&&(r._inputs=h)}},viewQuery:function(e,r){if(1&e&&(no(Zj,5),no(MV,5)),2&e){let c;rr(c=sr())&&(r._trackActive=c.first),rr(c=sr())&&(r._thumbs=c)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:10,hostBindings:function(e,r){2&e&&Ir("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations)},inputs:{color:"color",disableRipple:"disableRipple",disabled:"disabled",discrete:"discrete",showTickMarks:"showTickMarks",min:"min",max:"max",step:"step",displayWith:"displayWith"},exportAs:["matSlider"],features:[Cr([{provide:QI,useExisting:n}]),ci],ngContentSelectors:t$,decls:9,vars:5,consts:[[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],["trackActive",""],["class","mdc-slider__tick-marks",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText"],[1,"mdc-slider__tick-marks"],["tickMarkContainer",""],[4,"ngIf"],[3,"class","transform",4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(es(),Rr(0),on(1,"div",0),$n(2,"div",1),on(3,"div",2),$n(4,"div",3,4),gn(),Oi(6,Qj,3,1,"div",5),gn(),Oi(7,e$,1,3,"mat-slider-visual-thumb",6),$n(8,"mat-slider-visual-thumb",7)),2&e&&(zn(6),Vn("ngIf",r.showTickMarks),zn(1),Vn("ngIf",r._isRange),zn(1),Vn("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[t1,cv,n$],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000));border-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color, var(--mdc-theme-primary, #6200ee));opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mdc-theme-on-surface, #000));opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mdc-theme-primary, #6200ee));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mdc-theme-on-surface, #000));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color, #666666);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color, #666666)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height, 6px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 6px)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height, 6px)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size, 2px);width:var(--mdc-slider-with-tick-marks-container-size, 2px)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking, 0.0071428571em);font-size:var(--mdc-slider-label-label-text-size, 0.875rem);font-family:var(--mdc-slider-label-label-text-font, Roboto, sans-serif);font-weight:var(--mdc-slider-label-label-text-weight, 500);line-height:var(--mdc-slider-label-label-text-line-height, 1.375rem)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape, 50%);width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-style:solid;border-width:calc(var(--mdc-slider-handle-height, 20px) / 2) calc(var(--mdc-slider-handle-width, 20px) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape, 50%)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color, #fff);border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator{opacity:var(--mat-mdc-slider-value-indicator-opacity, 1)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-mdc-slider-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-mdc-slider-hover-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-mdc-slider-focus-ripple-color, transparent)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();const o$={provide:kf,useExisting:xr(()=>yF),multi:!0};let yF=(()=>{class n{get value(){return iu(this._hostElement.value)}set value(e){const r=iu(e).toString();this._hasSetInitialValue?this._isActive||(this._hostElement.value=r,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges()):this._initialValue=r}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=0,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return iu(this._hostElement.min)}set min(e){this._hostElement.min=iu(e).toString(),this._cdr.detectChanges()}get max(){return iu(this._hostElement.max)}set max(e){this._hostElement.max=iu(e).toString(),this._cdr.detectChanges()}get step(){return iu(this._hostElement.step)}set step(e){this._hostElement.step=iu(e).toString(),this._cdr.detectChanges()}get disabled(){return Xs(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=Xs(e),this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}constructor(e,r,c,h){this._ngZone=e,this._elementRef=r,this._cdr=c,this._slider=h,this.valueChange=new Ai,this.dragStart=new Ai,this.dragEnd=new Ai,this.thumbPosition=2,this._knobRadius=8,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Ci,this._skipUIUpdate=!1,this._onChangeFn=()=>{},this._onTouchedFn=()=>{},this._hostElement=r.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){this.disabled||0!==e.button||(this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value})))}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){const r=e.clientX-this._slider._cachedLeft,c=this._slider._cachedWidth,h=0===this._slider.step?1:this._slider.step,y=Math.floor((this._slider.max-this._slider.min)/h),z=Math.round((this._slider._isRtl?1-r/c:r/c)*y)/y*(this._slider.max-this._slider.min)+this._slider.min,X=Math.round(z/h)*h;if(X===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation}));this.value=X,this.valueChange.emit(this.value),this._onChangeFn(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive()))}_clamp(e){return Math.max(Math.min(e,this._slider._cachedWidth),0)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*this._slider._cachedWidth:this.percentage*this._slider._cachedWidth}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding}px)`}_updateWidthInactive(){this._hostElement.style.padding="0px",this._hostElement.style.width="calc(100% + 48px)",this._hostElement.style.left="-24px"}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,r){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(r)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){this.value=e}registerOnChange(e){this._onChangeFn=e}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return n.\u0275fac=function(e){return new(e||n)(Be(xi),Be(Li),Be(Xa),Be(QI))},n.\u0275dir=Xn({type:n,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(e,r){1&e&&Ei("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),2&e&&di("aria-valuetext",r._valuetext)},inputs:{value:"value"},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Cr([o$,{provide:bV,useExisting:n}])]}),n})(),wV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,Or,gE]}),n})();class bF{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class xF extends bF{constructor(t,e,r,c,h){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=c,this.projectableNodes=h}}class e2 extends bF{constructor(t,e,r,c){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r,this.injector=c}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class l$ extends bF{constructor(t){super(),this.element=t instanceof Li?t.nativeElement:t}}class MF{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof xF?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof e2?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof l$?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class u$ extends MF{constructor(t,e,r,c,h){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=c,this.attachDomPortal=y=>{const T=y.element,L=this._document.createComment("dom-portal");T.parentNode.insertBefore(L,T),this.outletElement.appendChild(T),this._attachedPortal=y,super.setDisposeFn(()=>{L.parentNode&&L.parentNode.replaceChild(T,L)})},this._document=h}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let c;return t.viewContainerRef?(c=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>c.destroy())):(c=r.create(t.injector||this._defaultInjector||js.NULL),this._appRef.attachView(c.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(c.hostView),c.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(c)),this._attachedPortal=t,c}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(c=>this.outletElement.appendChild(c)),r.detectChanges(),this.setDisposeFn(()=>{let c=e.indexOf(r);-1!==c&&e.remove(c)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let t2=(()=>{class n extends MF{constructor(e,r,c){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ai,this.attachDomPortal=h=>{const y=h.element,T=this._document.createComment("dom-portal");h.setAttachedHost(this),y.parentNode.insertBefore(T,y),this._getRootNode().appendChild(y),this._attachedPortal=h,super.setDisposeFn(()=>{T.parentNode&&T.parentNode.replaceChild(y,T)})},this._document=c}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,h=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),y=r.createComponent(h,r.length,e.injector||r.injector,e.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(y.hostView.rootNodes[0]),super.setDisposeFn(()=>y.destroy()),this._attachedPortal=e,this._attachedRef=y,this.attached.emit(y),y}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(Be(Nc),Be(Pd),Be(Ji))},n.\u0275dir=Xn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ci]}),n})(),dA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const SV=nB();class d${constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Zc(-this._previousScrollPosition.left),t.style.top=Zc(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,c=this._document.body.style,h=r.scrollBehavior||"",y=c.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),SV&&(r.scrollBehavior=c.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SV&&(r.scrollBehavior=h,c.scrollBehavior=y)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class h${constructor(t,e,r,c){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=c,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(xn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class EV{enable(){}disable(){}attach(){}}function wF(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function CV(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class f${constructor(t,e,r,c){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=c,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:c}=this._viewportRuler.getViewportSize();wF(e,[{width:r,height:c,bottom:c,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let p$=(()=>{class n{constructor(e,r,c,h){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=c,this.noop=()=>new EV,this.close=y=>new h$(this._scrollDispatcher,this._ngZone,this._viewportRuler,y),this.block=()=>new d$(this._viewportRuler,this._document),this.reposition=y=>new f$(this._scrollDispatcher,this._viewportRuler,this._ngZone,y),this._document=h}}return n.\u0275fac=function(e){return new(e||n)(ut(JI),ut(vF),ut(xi),ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class SF{constructor(t){if(this.scrollStrategy=new EV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class m${constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let TV=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g$=(()=>{class n extends TV{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=c=>{const h=this._attachedOverlays;for(let y=h.length-1;y>-1;y--)if(h[y]._keydownEvents.observers.length>0){const T=h[y]._keydownEvents;this._ngZone?this._ngZone.run(()=>T.next(c)):T.next(c);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji),ut(xi,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_$=(()=>{class n extends TV{constructor(e,r,c){super(e),this._platform=r,this._ngZone=c,this._cursorStyleIsSet=!1,this._pointerDownListener=h=>{this._pointerDownEventTarget=gM(h)},this._clickListener=h=>{const y=gM(h),T="click"===h.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:y;this._pointerDownEventTarget=null;const L=this._attachedOverlays.slice();for(let z=L.length-1;z>-1;z--){const X=L[z];if(X._outsidePointerEvents.observers.length<1||!X.hasAttached())continue;if(X.overlayElement.contains(y)||X.overlayElement.contains(T))break;const ie=X._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ie.next(h)):ie.next(h)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji),ut(Yc),ut(xi,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n2=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||IO()){const c=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let h=0;h<c.length;h++)c[h].remove()}const r=this._document.createElement("div");r.classList.add(e),IO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(ut(Ji),ut(Yc))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hA{constructor(t,e,r,c,h,y,T,L,z,X=!1){this._portalOutlet=t,this._host=e,this._pane=r,this._config=c,this._ngZone=h,this._keyboardDispatcher=y,this._document=T,this._location=L,this._outsideClickDispatcher=z,this._animationsDisabled=X,this._backdropElement=null,this._backdropClick=new Ci,this._attachments=new Ci,this._detachments=new Ci,this._locationChanges=nn.EMPTY,this._backdropClickHandler=ie=>this._backdropClick.next(ie),this._backdropTransitionendHandler=ie=>{this._disposeBackdrop(ie.target)},this._keydownEvents=new Ci,this._outsidePointerEvents=new Ci,c.scrollStrategy&&(this._scrollStrategy=c.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=c.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(dn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Zc(this._config.width),t.height=Zc(this._config.height),t.minWidth=Zc(this._config.minWidth),t.minHeight=Zc(this._config.minHeight),t.maxWidth=Zc(this._config.maxWidth),t.maxHeight=Zc(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,r){const c=CI(e||[]).filter(h=>!!h);c.length&&(r?t.classList.add(...c):t.classList.remove(...c))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(I_(tc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const AV="cdk-overlay-connected-position-bounding-box",v$=/([A-Za-z%]+)$/;class y${get positions(){return this._preferredPositions}constructor(t,e,r,c,h){this._viewportRuler=e,this._document=r,this._platform=c,this._overlayContainer=h,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ci,this._resizeSubscription=nn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(AV),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,c=this._containerRect,h=[];let y;for(let T of this._preferredPositions){let L=this._getOriginPoint(t,c,T),z=this._getOverlayPoint(L,e,T),X=this._getOverlayFit(z,e,r,T);if(X.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(T,L);this._canFitWithFlexibleDimensions(X,z,r)?h.push({position:T,origin:L,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(L,T)}):(!y||y.overlayFit.visibleArea<X.visibleArea)&&(y={overlayFit:X,overlayPoint:z,originPoint:L,position:T,overlayRect:e})}if(h.length){let T=null,L=-1;for(const z of h){const X=z.boundingBoxRect.width*z.boundingBoxRect.height*(z.position.weight||1);X>L&&(L=X,T=z)}return this._isPushed=!1,void this._applyPosition(T.position,T.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(y.position,y.originPoint);this._applyPosition(y.position,y.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&S1(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(AV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let c,h;if("center"==r.originX)c=t.left+t.width/2;else{const y=this._isRtl()?t.right:t.left,T=this._isRtl()?t.left:t.right;c="start"==r.originX?y:T}return e.left<0&&(c-=e.left),h="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(h-=e.top),{x:c,y:h}}_getOverlayPoint(t,e,r){let c,h;return c="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,h="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+c,y:t.y+h}}_getOverlayFit(t,e,r,c){const h=RV(e);let{x:y,y:T}=t,L=this._getOffset(c,"x"),z=this._getOffset(c,"y");L&&(y+=L),z&&(T+=z);let pe=0-T,Te=T+h.height-r.height,Le=this._subtractOverflows(h.width,0-y,y+h.width-r.width),st=this._subtractOverflows(h.height,pe,Te),kt=Le*st;return{visibleArea:kt,isCompletelyWithinViewport:h.width*h.height===kt,fitsInViewportVertically:st===h.height,fitsInViewportHorizontally:Le==h.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const c=r.bottom-e.y,h=r.right-e.x,y=DV(this._overlayRef.getConfig().minHeight),T=DV(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=y&&y<=c)&&(t.fitsInViewportHorizontally||null!=T&&T<=h)}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const c=RV(e),h=this._viewportRect,y=Math.max(t.x+c.width-h.width,0),T=Math.max(t.y+c.height-h.height,0),L=Math.max(h.top-r.top-t.y,0),z=Math.max(h.left-r.left-t.x,0);let X=0,ie=0;return X=c.width<=h.width?z||-y:t.x<this._viewportMargin?h.left-r.left-t.x:0,ie=c.height<=h.height?L||-T:t.y<this._viewportMargin?h.top-r.top-t.y:0,this._previousPushAmount={x:X,y:ie},{x:t.x+X,y:t.y+ie}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),c=new m$(t,r);this._positionChanges.next(c)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,c=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let h=0;h<e.length;h++)e[h].style.transformOrigin=`${r} ${c}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,c=this._isRtl();let h,y,T,X,ie,pe;if("top"===e.overlayY)y=t.y,h=r.height-y+this._viewportMargin;else if("bottom"===e.overlayY)T=r.height-t.y+2*this._viewportMargin,h=r.height-T+this._viewportMargin;else{const Te=Math.min(r.bottom-t.y+r.top,t.y),Le=this._lastBoundingBoxSize.height;h=2*Te,y=t.y-Te,h>Le&&!this._isInitialRender&&!this._growAfterOpen&&(y=t.y-Le/2)}if("end"===e.overlayX&&!c||"start"===e.overlayX&&c)pe=r.width-t.x+this._viewportMargin,X=t.x-this._viewportMargin;else if("start"===e.overlayX&&!c||"end"===e.overlayX&&c)ie=t.x,X=r.right-t.x;else{const Te=Math.min(r.right-t.x+r.left,t.x),Le=this._lastBoundingBoxSize.width;X=2*Te,ie=t.x-Te,X>Le&&!this._isInitialRender&&!this._growAfterOpen&&(ie=t.x-Le/2)}return{top:y,left:ie,bottom:T,right:pe,width:X,height:h}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const c={};if(this._hasExactPosition())c.top=c.left="0",c.bottom=c.right=c.maxHeight=c.maxWidth="",c.width=c.height="100%";else{const h=this._overlayRef.getConfig().maxHeight,y=this._overlayRef.getConfig().maxWidth;c.height=Zc(r.height),c.top=Zc(r.top),c.bottom=Zc(r.bottom),c.width=Zc(r.width),c.left=Zc(r.left),c.right=Zc(r.right),c.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",c.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",h&&(c.maxHeight=Zc(h)),y&&(c.maxWidth=Zc(y))}this._lastBoundingBoxSize=r,S1(this._boundingBox.style,c)}_resetBoundingBoxStyles(){S1(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){S1(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},c=this._hasExactPosition(),h=this._hasFlexibleDimensions,y=this._overlayRef.getConfig();if(c){const X=this._viewportRuler.getViewportScrollPosition();S1(r,this._getExactOverlayY(e,t,X)),S1(r,this._getExactOverlayX(e,t,X))}else r.position="static";let T="",L=this._getOffset(e,"x"),z=this._getOffset(e,"y");L&&(T+=`translateX(${L}px) `),z&&(T+=`translateY(${z}px)`),r.transform=T.trim(),y.maxHeight&&(c?r.maxHeight=Zc(y.maxHeight):h&&(r.maxHeight="")),y.maxWidth&&(c?r.maxWidth=Zc(y.maxWidth):h&&(r.maxWidth="")),S1(this._pane.style,r)}_getExactOverlayY(t,e,r){let c={top:"",bottom:""},h=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(h=this._pushOverlayOnScreen(h,this._overlayRect,r)),"bottom"===t.overlayY?c.bottom=this._document.documentElement.clientHeight-(h.y+this._overlayRect.height)+"px":c.top=Zc(h.y),c}_getExactOverlayX(t,e,r){let y,c={left:"",right:""},h=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(h=this._pushOverlayOnScreen(h,this._overlayRect,r)),y=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===y?c.right=this._document.documentElement.clientWidth-(h.x+this._overlayRect.width)+"px":c.left=Zc(h.x),c}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(c=>c.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CV(t,r),isOriginOutsideView:wF(t,r),isOverlayClipped:CV(e,r),isOverlayOutsideView:wF(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,c)=>r-Math.max(c,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&CI(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Li)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function S1(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function DV(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(v$);return e&&"px"!==e?null:parseFloat(t)}return n||null}function RV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const IV="cdk-global-overlay-wrapper";class b${constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(IV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:c,height:h,maxWidth:y,maxHeight:T}=r,L=!("100%"!==c&&"100vw"!==c||y&&"100%"!==y&&"100vw"!==y),z=!("100%"!==h&&"100vh"!==h||T&&"100%"!==T&&"100vh"!==T),X=this._xPosition,ie=this._xOffset,pe="rtl"===this._overlayRef.getConfig().direction;let Te="",Le="",st="";L?st="flex-start":"center"===X?(st="center",pe?Le=ie:Te=ie):pe?"left"===X||"end"===X?(st="flex-end",Te=ie):("right"===X||"start"===X)&&(st="flex-start",Le=ie):"left"===X||"start"===X?(st="flex-start",Te=ie):("right"===X||"end"===X)&&(st="flex-end",Le=ie),t.position=this._cssPosition,t.marginLeft=L?"0":Te,t.marginTop=z?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=L?"0":Le,e.justifyContent=st,e.alignItems=z?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(IV),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let x$=(()=>{class n{constructor(e,r,c,h){this._viewportRuler=e,this._document=r,this._platform=c,this._overlayContainer=h}global(){return new b$}flexibleConnectedTo(e){return new y$(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(ut(vF),ut(Ji),ut(Yc),ut(n2))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M$=0,sb=(()=>{class n{constructor(e,r,c,h,y,T,L,z,X,ie,pe,Te){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=c,this._positionBuilder=h,this._keyboardDispatcher=y,this._injector=T,this._ngZone=L,this._document=z,this._directionality=X,this._location=ie,this._outsideClickDispatcher=pe,this._animationsModuleType=Te}create(e){const r=this._createHostElement(),c=this._createPaneElement(r),h=this._createPortalOutlet(c),y=new SF(e);return y.direction=y.direction||this._directionality.value,new hA(h,r,c,y,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+M$++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Yx)),new u$(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(ut(p$),ut(n2),ut(Nc),ut(x$),ut(g$),ut(js),ut(xi),ut(Ji),ut(ib),ut(Zw),ut(_$),ut(tu,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E$={provide:new jt("cdk-connected-overlay-scroll-strategy"),deps:[sb],useFactory:function S$(n){return()=>n.scrollStrategies.reposition()}};let r2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[sb,E$],imports:[QT,dA,vV,vV]}),n})();function C$(n,t){}class s2{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let PV=(()=>{class n extends MF{constructor(e,r,c,h,y,T,L,z){super(),this._elementRef=e,this._focusTrapFactory=r,this._config=h,this._interactivityChecker=y,this._ngZone=T,this._overlayRef=L,this._focusMonitor=z,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=X=>{this._portalOutlet.hasAttached();const ie=this._portalOutlet.attachDomPortal(X);return this._contentAttached(),ie},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=c}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),r}attachTemplatePortal(e){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const c=()=>{e.removeEventListener("blur",c),e.removeEventListener("mousedown",c),e.removeAttribute("tabindex")};e.addEventListener("blur",c),e.addEventListener("mousedown",c)})),e.focus(r)}_focusByCssSelector(e,r){let c=this._elementRef.nativeElement.querySelector(e);c&&this._forceFocus(c,r)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let r=null;if("string"==typeof e?r=this._document.querySelector(e):"boolean"==typeof e?r=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(r=e),this._config.restoreFocus&&r&&"function"==typeof r.focus){const c=RO(),h=this._elementRef.nativeElement;(!c||c===this._document.body||c===h||h.contains(c))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,r=RO();return e===r||e.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=RO())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(NO),Be(Ji,8),Be(s2),Be(TI),Be(xi),Be(hA),Be(_M))},n.\u0275cmp=Ri({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,r){if(1&e&&no(t2,7),2&e){let c;rr(c=sr())&&(r._portalOutlet=c.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,r){2&e&&di("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[ci],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,r){1&e&&Oi(0,C$,0,0,"ng-template",0)},dependencies:[t2],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class EF{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Ci,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!KT(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const kV=new jt("DialogScrollStrategy"),T$=new jt("DialogData"),A$=new jt("DefaultDialogConfig"),R$={provide:kV,deps:[sb],useFactory:function D$(n){return()=>n.scrollStrategies.block()}};let I$=0,LV=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,r,c,h,y,T){this._overlay=e,this._injector=r,this._defaultOptions=c,this._parentDialog=h,this._overlayContainer=y,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ci,this._afterOpenedAtThisLevel=new Ci,this._ariaHiddenElements=new Map,this.afterAllClosed=bn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Rt(void 0))),this._scrollStrategy=T}open(e,r){(r={...this._defaultOptions||new s2,...r}).id=r.id||"cdk-dialog-"+I$++,r.id&&this.getDialogById(r.id);const h=this._getOverlayConfig(r),y=this._overlay.create(h),T=new EF(y,r),L=this._attachContainer(y,T,r);return T.containerInstance=L,this._attachDialogContent(e,T,L,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(T),T.closed.subscribe(()=>this._removeOpenDialog(T,!0)),this.afterOpened.next(T),T}closeAll(){CF(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){CF(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),CF(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const r=new SF({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachContainer(e,r,c){const h=c.injector||c.viewContainerRef?.injector,y=[{provide:s2,useValue:c},{provide:EF,useValue:r},{provide:hA,useValue:e}];let T;c.container?"function"==typeof c.container?T=c.container:(T=c.container.type,y.push(...c.container.providers(c))):T=PV;const L=new xF(T,c.viewContainerRef,js.create({parent:h||this._injector,providers:y}),c.componentFactoryResolver);return e.attach(L).instance}_attachDialogContent(e,r,c,h){if(e instanceof Cf){const y=this._createInjector(h,r,c,void 0);let T={$implicit:h.data,dialogRef:r};h.templateContext&&(T={...T,..."function"==typeof h.templateContext?h.templateContext():h.templateContext}),c.attachTemplatePortal(new e2(e,null,T,y))}else{const y=this._createInjector(h,r,c,this._injector),T=c.attachComponentPortal(new xF(e,h.viewContainerRef,y,h.componentFactoryResolver));r.componentInstance=T.instance}}_createInjector(e,r,c,h){const y=e.injector||e.viewContainerRef?.injector,T=[{provide:T$,useValue:e.data},{provide:EF,useValue:r}];return e.providers&&("function"==typeof e.providers?T.push(...e.providers(r,e,c)):T.push(...e.providers)),e.direction&&(!y||!y.get(ib,null,{optional:!0}))&&T.push({provide:ib,useValue:{value:e.direction,change:ye()}}),js.create({parent:y||h,providers:T})}_removeOpenDialog(e,r){const c=this.openDialogs.indexOf(e);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((h,y)=>{h?y.setAttribute("aria-hidden",h):y.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const r=e.parentElement.children;for(let c=r.length-1;c>-1;c--){const h=r[c];h!==e&&"SCRIPT"!==h.nodeName&&"STYLE"!==h.nodeName&&!h.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(h,h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(ut(sb),ut(js),ut(A$,8),ut(n,12),ut(n2),ut(kV))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function CF(n,t){let e=n.length;for(;e--;)t(n[e])}let P$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[LV,R$],imports:[r2,dA,KW,dA]}),n})();function k$(n,t){}class o2{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const TF="mdc-dialog--open",OV="mdc-dialog--opening",FV="mdc-dialog--closing";let F$=(()=>{class n extends PV{constructor(e,r,c,h,y,T,L,z){super(e,r,c,h,y,T,L,z),this._animationStateChanged=new Ai}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(NO),Be(Ji,8),Be(o2),Be(TI),Be(xi),Be(hA),Be(_M))},n.\u0275cmp=Ri({type:n,selectors:[["ng-component"]],features:[ci],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();const NV="--mat-dialog-transition-duration";function UV(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?iu(n.substring(0,n.length-2)):n.endsWith("s")?1e3*iu(n.substring(0,n.length-1)):"0"===n?0:null}let N$=(()=>{class n extends F${constructor(e,r,c,h,y,T,L,z,X){super(e,r,c,h,y,T,L,X),this._animationMode=z,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?UV(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?UV(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(NV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(OV,TF)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(TF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(TF),this._animationsEnabled?(this._hostElement.style.setProperty(NV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(FV)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(OV,FV)}_waitForAnimationToComplete(e,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(NO),Be(Ji,8),Be(o2),Be(TI),Be(xi),Be(hA),Be(tu,8),Be(_M))},n.\u0275cmp=Ri({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,r){2&e&&(bt("id",r._config.id),di("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Ir("_mat-animation-noopable",!r._animationsEnabled))},features:[ci],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,r){1&e&&(on(0,"div",0)(1,"div",1),Oi(2,k$,0,0,"ng-template",2),gn()())},dependencies:[t2],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class U${constructor(t,e,r){this._ref=t,this._containerInstance=r,this._afterOpened=new Ci,this._beforeClosed=new Ci,this._state=0,this.disableClose=e.disableClose,this.id=t.id,r._animationStateChanged.pipe(xn(c=>"opened"===c.state),dn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(xn(c=>"closed"===c.state),dn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),tc(this.backdropClick(),this.keydownEvents().pipe(xn(c=>27===c.keyCode&&!this.disableClose&&!KT(c)))).subscribe(c=>{this.disableClose||(c.preventDefault(),function B$(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===c.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(xn(e=>"closing"===e.state),dn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const BV=new jt("MatMdcDialogData"),V$=new jt("mat-mdc-dialog-default-options"),VV=new jt("mat-mdc-dialog-scroll-strategy"),H$={provide:VV,deps:[sb],useFactory:function z$(n){return()=>n.scrollStrategies.block()}};let G$=0,W$=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,r,c,h,y,T,L,z,X,ie){this._overlay=e,this._defaultOptions=c,this._parentDialog=h,this._dialogRefConstructor=L,this._dialogContainerType=z,this._dialogDataToken=X,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ci,this._afterOpenedAtThisLevel=new Ci,this._idPrefix="mat-dialog-",this.dialogConfigClass=o2,this.afterAllClosed=bn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Rt(void 0))),this._scrollStrategy=T,this._dialog=r.get(LV)}open(e,r){let c;(r={...this._defaultOptions||new o2,...r}).id=r.id||`${this._idPrefix}${G$++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const h=this._dialog.open(e,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:s2,useValue:r}]},templateContext:()=>({dialogRef:c}),providers:(y,T,L)=>(c=new this._dialogRefConstructor(y,r,L),c.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:L},{provide:this._dialogDataToken,useValue:T.data},{provide:this._dialogRefConstructor,useValue:c}])});return c.componentInstance=h.componentInstance,this.openDialogs.push(c),this.afterOpened.next(c),c.afterClosed().subscribe(()=>{const y=this.openDialogs.indexOf(c);y>-1&&(this.openDialogs.splice(y,1),this.openDialogs.length||this._getAfterAllClosed().next())}),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let r=e.length;for(;r--;)e[r].close()}}return n.\u0275fac=function(e){Ip()},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),AF=(()=>{class n extends W${constructor(e,r,c,h,y,T,L,z){super(e,r,h,T,L,y,U$,N$,BV,z),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(e){return new(e||n)(ut(sb),ut(js),ut(Zw,8),ut(V$,8),ut(VV),ut(n,12),ut(n2),ut(tu,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),zV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[AF,H$],imports:[P$,r2,dA,hs,hs]}),n})();function GV(){return qr((n,t)=>{n.subscribe(mr(t,ze))})}function WV(n,t){return t?e=>Vt(t.pipe(dn(1),GV()),e.pipe(WV(n))):ns((e,r)=>n(e,r).pipe(dn(1),DT(e)))}function jV(n,t=EI){const e=mV(n,t);return WV(()=>e)}const j$=["mat-menu-item",""];function $$(n,t){1&n&&(Kf(),on(0,"svg",3),$n(1,"polygon",4),gn())}const q$=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],X$=["mat-icon, [matMenuItemIcon]","*"];function Y$(n,t){if(1&n){const e=wl();on(0,"div",0),Ei("keydown",function(c){return Oa(e),oc(ps()._handleKeydown(c))})("click",function(){return Oa(e),oc(ps().closed.emit("click"))})("@transformMenu.start",function(c){return Oa(e),oc(ps()._onAnimationStart(c))})("@transformMenu.done",function(c){return Oa(e),oc(ps()._onAnimationDone(c))}),on(1,"div",1),Rr(2),gn()()}if(2&n){const e=ps();Vn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),di("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Z$=["*"],DF=new jt("MAT_MENU_PANEL"),K$=eA(DI(class{}));let a2=(()=>{class n extends K${constructor(e,r,c,h,y){super(),this._elementRef=e,this._document=r,this._focusMonitor=c,this._parentMenu=h,this._changeDetectorRef=y,this.role="menuitem",this._hovered=new Ci,this._focused=new Ci,this._highlighted=!1,this._triggersSubmenu=!1,h?.addItem?.(this)}focus(e,r){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),r=e.querySelectorAll("mat-icon, .material-icons");for(let c=0;c<r.length;c++)r[c].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Ji),Be(_M),Be(DF,8),Be(Xa))},n.\u0275cmp=Ri({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,r){1&e&&Ei("click",function(h){return r._checkDisabled(h)})("mouseenter",function(){return r._handleMouseEnter()}),2&e&&(di("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),Ir("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ci],attrs:j$,ngContentSelectors:X$,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,r){1&e&&(es(q$),Rr(0),on(1,"span",0),Rr(2,1),gn(),$n(3,"div",1),Oi(4,$$,2,0,"svg",2)),2&e&&(zn(3),Vn("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),zn(1),Vn("ngIf",r._triggersSubmenu))},dependencies:[cv,gv],encapsulation:2,changeDetection:0}),n})();const J$=new jt("MatMenuContent"),c2={transformMenu:eb("transformMenu",[xg("void",Qa({opacity:0,transform:"scale(0.8)"})),rm("void => enter",bg("120ms cubic-bezier(0, 0, 0.2, 1)",Qa({opacity:1,transform:"scale(1)"}))),rm("* => void",bg("100ms 25ms linear",Qa({opacity:0})))]),fadeInItems:eb("fadeInItems",[xg("showing",Qa({opacity:1})),rm("void => *",[Qa({opacity:0}),bg("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Q$=0;const $V=new jt("mat-menu-default-options",{providedIn:"root",factory:function eq(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let fA=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Xs(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Xs(e)}set panelClass(e){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(c=>{this._classList[c]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(c=>{this._classList[c]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,r,c,h){this._elementRef=e,this._ngZone=r,this._defaultOptions=c,this._changeDetectorRef=h,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Yp,this._classList={},this._panelAnimationState="void",this._animationDone=new Ci,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Ai,this.close=this.closed,this.panelId="mat-menu-panel-"+Q$++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new mB(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Rt(this._directDescendantItems),pn(e=>tc(...e.map(r=>r._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const c=e.toArray(),h=Math.max(0,Math.min(c.length-1,r.activeItemIndex||0));c[h]&&!c[h].disabled?r.setActiveItem(h):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Rt(this._directDescendantItems),pn(r=>tc(...r.map(c=>c._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const r=e.keyCode,c=this._keyManager;switch(r){case 27:KT(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&c.setFocusOrigin("keyboard"),void c.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(dn(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const c=this._keyManager;c.setFocusOrigin(e).setFirstItemActive(),!c.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const r=Math.min(this._baseElevation+e,24),c=`${this._elevationPrefix}${r}`,h=Object.keys(this._classList).find(y=>y.startsWith(this._elevationPrefix));(!h||h===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[c]=!0,this._previousElevation=c)}setPositionClasses(e=this.xPosition,r=this.yPosition){const c=this._classList;c["mat-menu-before"]="before"===e,c["mat-menu-after"]="after"===e,c["mat-menu-above"]="above"===r,c["mat-menu-below"]="below"===r,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Rt(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(xi),Be($V),Be(Xa))},n.\u0275dir=Xn({type:n,contentQueries:function(e,r,c){if(1&e&&(El(c,J$,5),El(c,a2,5),El(c,a2,4)),2&e){let h;rr(h=sr())&&(r.lazyContent=h.first),rr(h=sr())&&(r._allItems=h),rr(h=sr())&&(r.items=h)}},viewQuery:function(e,r){if(1&e&&no(Cf,5),2&e){let c;rr(c=sr())&&(r.templateRef=c.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),tq=(()=>{class n extends fA{constructor(e,r,c,h){super(e,r,c,h),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(xi),Be($V),Be(Xa))},n.\u0275cmp=Ri({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,r){2&e&&di("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Cr([{provide:DF,useExisting:n}]),ci],ngContentSelectors:Z$,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,r){1&e&&(es(),Oi(0,Y$,3,6,"ng-template"))},dependencies:[JC],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[c2.transformMenu,c2.fadeInItems]},changeDetection:0}),n})();const qV=new jt("mat-menu-scroll-strategy"),iq={provide:qV,deps:[sb],useFactory:function nq(n){return()=>n.scrollStrategies.reposition()}},XV=fE({passive:!0});let rq=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,r,c,h,y,T,L,z,X){this._overlay=e,this._element=r,this._viewContainerRef=c,this._menuItemInstance=T,this._dir=L,this._focusMonitor=z,this._ngZone=X,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=nn.EMPTY,this._hoverSubscription=nn.EMPTY,this._menuCloseSubscription=nn.EMPTY,this._changeDetectorRef=ei(Xa),this._handleTouchStart=ie=>{BO(ie)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ai,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ai,this.onMenuClose=this.menuClosed,this._scrollStrategy=h,this._parentMaterialMenu=y instanceof fA?y:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,XV)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,XV),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const r=this._createOverlay(e),c=r.getConfig(),h=c.positionStrategy;this._setPosition(e,h),c.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,r.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof fA&&(e._startAnimation(),e._directDescendantItems.changes.pipe(I_(e.close)).subscribe(()=>{h.withLockedPosition(!1).reapplyLastPosition(),h.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,r){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof fA?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(xn(c=>"void"===c.toState),dn(1),I_(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let r=0,c=e.parentMenu;for(;c;)r++,c=c.parentMenu;e.setElevation(r)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const r=this._getOverlayConfig(e);this._subscribeToPositions(e,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new SF({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,r){e.setPositionClasses&&r.positionChanges.subscribe(c=>{const h="start"===c.connectionPair.overlayX?"after":"before",y="top"===c.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(h,y)):e.setPositionClasses(h,y)})}_setPosition(e,r){let[c,h]="before"===e.xPosition?["end","start"]:["start","end"],[y,T]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[L,z]=[y,T],[X,ie]=[c,h],pe=0;if(this.triggersSubmenu()){if(ie=c="before"===e.xPosition?"start":"end",h=X="end"===c?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Te=this._parentMaterialMenu.items.first;this._parentInnerPadding=Te?Te._getHostElement().offsetTop:0}pe="bottom"===y?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(L="top"===y?"bottom":"top",z="top"===T?"bottom":"top");r.withPositions([{originX:c,originY:L,overlayX:X,overlayY:y,offsetY:pe},{originX:h,originY:L,overlayX:ie,overlayY:y,offsetY:pe},{originX:c,originY:z,overlayX:X,overlayY:T,offsetY:-pe},{originX:h,originY:z,overlayX:ie,overlayY:T,offsetY:-pe}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return tc(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:ye(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(xn(y=>y!==this._menuItemInstance),xn(()=>this._menuOpen)):ye(),r)}_handleMousedown(e){UO(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const r=e.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(xn(e=>e===this._menuItemInstance&&!e.disabled),jV(0,gF)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof fA&&this.menu._isAnimating?this.menu._animationDone.pipe(dn(1),jV(0,gF),I_(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new e2(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(Be(sb),Be(Li),Be(Pd),Be(qV),Be(DF,8),Be(a2,10),Be(ib,8),Be(_M),Be(xi))},n.\u0275dir=Xn({type:n,hostVars:3,hostBindings:function(e,r){1&e&&Ei("click",function(h){return r._handleClick(h)})("mousedown",function(h){return r._handleMousedown(h)})("keydown",function(h){return r._handleKeydown(h)}),2&e&&di("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),sq=(()=>{class n extends rq{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=co(n)))(r||n)}}(),n.\u0275dir=Xn({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[ci]}),n})(),YV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[iq],imports:[Or,gE,hs,r2,ME,hs]}),n})();const oq=["matFormFieldNotchedOutline",""],aq=["*"],cq=["textField"],lq=["iconPrefixContainer"],uq=["textPrefixContainer"];function dq(n,t){1&n&&$n(0,"span",19)}function hq(n,t){if(1&n){const e=wl();on(0,"label",17),Ei("cdkObserveContent",function(){return Oa(e),oc(ps(2)._refreshOutlineNotchWidth())}),Rr(1,1),Oi(2,dq,1,0,"span",18),gn()}if(2&n){const e=ps(2);Vn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),di("for",e._control.id)("aria-owns",e._control.id),zn(2),Vn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function fq(n,t){1&n&&Oi(0,hq,3,6,"label",16),2&n&&Vn("ngIf",ps()._hasFloatingLabel())}function pq(n,t){1&n&&$n(0,"div",20)}function mq(n,t){}function gq(n,t){1&n&&Oi(0,mq,0,0,"ng-template",22),2&n&&(ps(2),Vn("ngTemplateOutlet",Ml(1)))}function _q(n,t){if(1&n&&(on(0,"div",21),Oi(1,gq,1,1,"ng-template",9),gn()),2&n){const e=ps();Vn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),zn(1),Vn("ngIf",!e._forceDisplayInfixLabel())}}function vq(n,t){1&n&&(on(0,"div",23,24),Rr(2,2),gn())}function yq(n,t){1&n&&(on(0,"div",25,26),Rr(2,3),gn())}function bq(n,t){}function xq(n,t){1&n&&Oi(0,bq,0,0,"ng-template",22),2&n&&(ps(),Vn("ngTemplateOutlet",Ml(1)))}function Mq(n,t){1&n&&(on(0,"div",27),Rr(1,4),gn())}function wq(n,t){1&n&&(on(0,"div",28),Rr(1,5),gn())}function Sq(n,t){1&n&&$n(0,"div",29)}function Eq(n,t){1&n&&(on(0,"div",30),Rr(1,6),gn()),2&n&&Vn("@transitionMessages",ps()._subscriptAnimationState)}function Cq(n,t){if(1&n&&(on(0,"mat-hint",34),m(1),gn()),2&n){const e=ps(2);Vn("id",e._hintLabelId),zn(1),b(e.hintLabel)}}function Tq(n,t){if(1&n&&(on(0,"div",31),Oi(1,Cq,2,2,"mat-hint",32),Rr(2,7),$n(3,"div",33),Rr(4,8),gn()),2&n){const e=ps();Vn("@transitionMessages",e._subscriptAnimationState),zn(1),Vn("ngIf",e.hintLabel)}}const Aq=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Dq=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let l2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["mat-label"]]}),n})();const Rq=new jt("MatError");let Iq=0,ZV=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Iq++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,r){2&e&&(bt("id",r.id),di("align",null),Ir("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),n})();const Pq=new jt("MatPrefix"),kq=new jt("MatSuffix");let KV=(()=>{class n{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function Lq(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(Be(Li))},n.\u0275dir=Xn({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,r){2&e&&Ir("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating"}}),n})();const JV="mdc-line-ripple--active",u2="mdc-line-ripple--deactivating";let QV=(()=>{class n{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=c=>{const h=this._elementRef.nativeElement.classList,y=h.contains(u2);"opacity"===c.propertyName&&y&&h.remove(JV,u2)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(u2),e.add(JV)}deactivate(){this._elementRef.nativeElement.classList.add(u2)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(xi))},n.\u0275dir=Xn({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),ez=(()=>{class n{constructor(e,r){this._elementRef=e,this._ngZone=r,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(xi))},n.\u0275cmp=Ri({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,r){2&e&&Ir("mdc-notched-outline--notched",r.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:oq,ngContentSelectors:aq,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,r){1&e&&(es(),$n(0,"div",0),on(1,"div",1),Rr(2),gn(),$n(3,"div",2)),2&e&&(zn(1),Bu("width",r._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const Oq={transitionMessages:eb("transitionMessages",[xg("enter",Qa({opacity:1,transform:"translateY(0%)"})),rm("void => enter",[Qa({opacity:0,transform:"translateY(-5px)"}),bg("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let tz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n}),n})();const nz=new jt("MatFormField"),Fq=new jt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let iz=0,oz=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Xs(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,c,h,y,T,L,z){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=c,this._dir=h,this._platform=y,this._defaults=T,this._animationMode=L,this._document=z,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+iz++,this._hintLabelId="mat-mdc-hint-"+iz++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Ci,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,T&&(T.appearance&&(this.appearance=T.appearance),this._hideRequiredMarker=Boolean(T?.hideRequiredMarker),T.color&&(this.color=T.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(I_(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),tc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(I_(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(I_(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(h=>"start"===h.align):null,c=this._hintChildren?this._hintChildren.find(h=>"end"===h.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),c&&e.push(c.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,c=this._textPrefixContainer?.nativeElement,h=r?.getBoundingClientRect().width??0,y=c?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${h+y}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Xa),Be(xi),Be(ib),Be(Yc),Be(Fq,8),Be(tu,8),Be(Ji))},n.\u0275cmp=Ri({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,c){if(1&e&&(El(c,l2,5),El(c,l2,7),El(c,tz,5),El(c,Pq,5),El(c,kq,5),El(c,Rq,5),El(c,ZV,5)),2&e){let h;rr(h=sr())&&(r._labelChildNonStatic=h.first),rr(h=sr())&&(r._labelChildStatic=h.first),rr(h=sr())&&(r._formFieldControl=h.first),rr(h=sr())&&(r._prefixChildren=h),rr(h=sr())&&(r._suffixChildren=h),rr(h=sr())&&(r._errorChildren=h),rr(h=sr())&&(r._hintChildren=h)}},viewQuery:function(e,r){if(1&e&&(no(cq,5),no(lq,5),no(uq,5),no(KV,5),no(ez,5),no(QV,5)),2&e){let c;rr(c=sr())&&(r._textField=c.first),rr(c=sr())&&(r._iconPrefixContainer=c.first),rr(c=sr())&&(r._textPrefixContainer=c.first),rr(c=sr())&&(r._floatingLabel=c.first),rr(c=sr())&&(r._notchedOutline=c.first),rr(c=sr())&&(r._lineRipple=c.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,r){2&e&&Ir("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Cr([{provide:nz,useExisting:n}])],ngContentSelectors:Dq,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,r){1&e&&(es(Aq),Oi(0,fq,1,1,"ng-template",null,0,aC),on(2,"div",1,2),Ei("click",function(h){return r._control.onContainerClick&&r._control.onContainerClick(h)}),Oi(4,pq,1,0,"div",3),on(5,"div",4),Oi(6,_q,2,3,"div",5),Oi(7,vq,3,0,"div",6),Oi(8,yq,3,0,"div",7),on(9,"div",8),Oi(10,xq,1,1,"ng-template",9),Rr(11),gn(),Oi(12,Mq,2,0,"div",10),Oi(13,wq,2,0,"div",11),gn(),Oi(14,Sq,1,0,"div",12),gn(),on(15,"div",13),Oi(16,Eq,2,1,"div",14),Oi(17,Tq,5,2,"div",15),gn()),2&e&&(zn(2),Ir("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),zn(2),Vn("ngIf",!r._hasOutline()&&!r._control.disabled),zn(2),Vn("ngIf",r._hasOutline()),zn(1),Vn("ngIf",r._hasIconPrefix),zn(1),Vn("ngIf",r._hasTextPrefix),zn(2),Vn("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),zn(2),Vn("ngIf",r._hasTextSuffix),zn(1),Vn("ngIf",r._hasIconSuffix),zn(1),Vn("ngIf",!r._hasOutline()),zn(1),Ir("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),Vn("ngSwitch",r._getDisplayedMessages()),zn(1),Vn("ngSwitchCase","error"),zn(1),Vn("ngSwitchCase","hint"))},dependencies:[cv,rT,n1,ZD,TW,ZV,KV,ez,QV],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[Oq.transitionMessages]},changeDetection:0}),n})(),pA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,Or,uB,hs]}),n})();const Gq={provide:new jt("mat-select-scroll-strategy"),deps:[sb],useFactory:function Hq(n){return()=>n.scrollStrategies.reposition()}};let az=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({providers:[Gq],imports:[Or,r2,IB,hs,ME,pA,IB,hs]}),n})(),RF=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Xs(e)}get inset(){return this._inset}set inset(e){this._inset=Xs(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ri({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,r){2&e&&(di("aria-orientation",r.vertical?"vertical":"horizontal"),Ir("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),cz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,hs]}),n})(),uz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[SB,hs,SB,hs]}),n})();const $q=["determinateSpinner"];function qq(n,t){if(1&n&&(Kf(),on(0,"svg",11),$n(1,"circle",12),gn()),2&n){const e=ps();di("viewBox",e._viewBox()),zn(1),Bu("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),di("r",e._circleRadius())}}const Xq=b1(class{constructor(n){this._elementRef=n}},"primary"),Yq=new jt("mat-progress-spinner-default-options",{providedIn:"root",factory:function Zq(){return{diameter:dz}}}),dz=100;let Jq=(()=>{class n extends Xq{constructor(e,r,c){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=dz,this._noopAnimations="NoopAnimations"===r&&!!c&&!c._forceAnimations,c&&(c.color&&(this.color=this.defaultColor=c.color),c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,iu(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=iu(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=iu(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(tu,8),Be(Yq))},n.\u0275cmp=Ri({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,r){if(1&e&&no($q,5),2&e){let c;rr(c=sr())&&(r._determinateCircle=c.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,r){2&e&&(di("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),Bu("width",r.diameter,"px")("height",r.diameter,"px"),Ir("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[ci],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,r){if(1&e&&(Oi(0,qq,2,8,"ng-template",null,0,aC),on(2,"div",1,2),Kf(),on(4,"svg",3),$n(5,"circle",4),gn()(),Ug(),on(6,"div",5)(7,"div",6)(8,"div",7),ug(9,8),gn(),on(10,"div",9),ug(11,8),gn(),on(12,"div",10),ug(13,8),gn()()()),2&e){const c=Ml(1);zn(4),di("viewBox",r._viewBox()),zn(1),Bu("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),di("r",r._circleRadius()),zn(4),Vn("ngTemplateOutlet",c),zn(2),Vn("ngTemplateOutlet",c),zn(2),Vn("ngTemplateOutlet",c)}},dependencies:[rT],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),hz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[Or,hs]}),n})();const fz=fE({passive:!0});let Qq=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ua;const r=nb(e),c=this._monitoredElements.get(r);if(c)return c.subject;const h=new Ci,y="cdk-text-field-autofilled",T=L=>{"cdk-text-field-autofill-start"!==L.animationName||r.classList.contains(y)?"cdk-text-field-autofill-end"===L.animationName&&r.classList.contains(y)&&(r.classList.remove(y),this._ngZone.run(()=>h.next({target:L.target,isAutofilled:!1}))):(r.classList.add(y),this._ngZone.run(()=>h.next({target:L.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",T,fz),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:h,unlisten:()=>{r.removeEventListener("animationstart",T,fz)}}),h}stopMonitoring(e){const r=nb(e),c=this._monitoredElements.get(r);c&&(c.unlisten(),c.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(ut(Yc),ut(xi))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const tX=new jt("MAT_INPUT_VALUE_ACCESSOR"),nX=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let iX=0;const rX=s7(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new Ci}});let pz=(()=>{class n extends rX{get disabled(){return this._disabled}set disabled(e){this._disabled=Xs(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(S7.required)??!1}set required(e){this._required=Xs(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&tB().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Xs(e)}constructor(e,r,c,h,y,T,L,z,X,ie){super(T,h,y,c),this._elementRef=e,this._platform=r,this._autofillMonitor=z,this._formField=ie,this._uid="mat-input-"+iX++,this.focused=!1,this.stateChanges=new Ci,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Le=>tB().has(Le)),this._iOSKeyupListener=Le=>{const st=Le.target;!st.value&&0===st.selectionStart&&0===st.selectionEnd&&(st.setSelectionRange(1,1),st.setSelectionRange(0,0))};const pe=this._elementRef.nativeElement,Te=pe.nodeName.toLowerCase();this._inputValueAccessor=L||pe,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&X.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Te,this._isTextarea="textarea"===Te,this._isInFormField=!!ie,this._isNativeSelect&&(this.controlType=pe.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){nX.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Yc),Be(rb,10),Be(yE,8),Be(zI,8),Be(a7),Be(tX,10),Be(Qq),Be(xi),Be(nz,8))},n.\u0275dir=Xn({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,r){1&e&&Ei("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(bt("id",r.id)("disabled",r.disabled)("required",r.required),di("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ir("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Cr([{provide:tz,useExisting:n}]),ci,Hr]}),n})(),mz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,pA,pA,eX,hs]}),n})(),gz=(()=>{class n{constructor(){this._listeners=[]}notify(e,r){for(let c of this._listeners)c(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sX=0;const IF=new jt("CdkAccordion");let oX=(()=>{class n{constructor(){this._stateChanges=new Ci,this._openCloseAllActions=new Ci,this.id="cdk-accordion-"+sX++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Xs(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Cr([{provide:IF,useExisting:n}]),Hr]}),n})(),aX=0,cX=(()=>{class n{get expanded(){return this._expanded}set expanded(e){e=Xs(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Xs(e)}constructor(e,r,c){this.accordion=e,this._changeDetectorRef=r,this._expansionDispatcher=c,this._openCloseAllSubscription=nn.EMPTY,this.closed=new Ai,this.opened=new Ai,this.destroyed=new Ai,this.expandedChange=new Ai,this.id="cdk-accordion-child-"+aX++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=c.listen((h,y)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===y&&this.id!==h&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(Be(IF,12),Be(Xa),Be(gz))},n.\u0275dir=Xn({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Cr([{provide:IF,useValue:void 0}])]}),n})(),lX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();const uX=["body"];function dX(n,t){}const hX=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],fX=["mat-expansion-panel-header","*","mat-action-row"];function pX(n,t){1&n&&$n(0,"span",2),2&n&&Vn("@indicatorRotate",ps()._getExpandedState())}const mX=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],gX=["mat-panel-title","mat-panel-description","*"],PF=new jt("MAT_ACCORDION"),_z="225ms cubic-bezier(0.4,0.0,0.2,1)",vz={indicatorRotate:eb("indicatorRotate",[xg("collapsed, void",Qa({transform:"rotate(0deg)"})),xg("expanded",Qa({transform:"rotate(180deg)"})),rm("expanded <=> collapsed, void => collapsed",bg(_z))]),bodyExpansion:eb("bodyExpansion",[xg("collapsed, void",Qa({height:"0px",visibility:"hidden"})),xg("expanded",Qa({height:"*",visibility:"visible"})),rm("expanded <=> collapsed, void => collapsed",bg(_z))])},yz=new jt("MAT_EXPANSION_PANEL");let _X=(()=>{class n{constructor(e,r){this._template=e,this._expansionPanel=r}}return n.\u0275fac=function(e){return new(e||n)(Be(Cf),Be(yz,8))},n.\u0275dir=Xn({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),vX=0;const bz=new jt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let xz=(()=>{class n extends cX{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Xs(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,r,c,h,y,T,L){super(e,r,c),this._viewContainerRef=h,this._animationMode=T,this._hideToggle=!1,this.afterExpand=new Ai,this.afterCollapse=new Ai,this._inputChanges=new Ci,this._headerId="mat-expansion-panel-header-"+vX++,this._bodyAnimationDone=new Ci,this.accordion=e,this._document=y,this._bodyAnimationDone.pipe(FO((z,X)=>z.fromState===X.fromState&&z.toState===X.toState)).subscribe(z=>{"void"!==z.fromState&&("expanded"===z.toState?this.afterExpand.emit():"collapsed"===z.toState&&this.afterCollapse.emit())}),L&&(this.hideToggle=L.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Rt(null),xn(()=>this.expanded&&!this._portal),dn(1)).subscribe(()=>{this._portal=new e2(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(Be(PF,12),Be(Xa),Be(gz),Be(Pd),Be(Ji),Be(tu,8),Be(bz,8))},n.\u0275cmp=Ri({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,r,c){if(1&e&&El(c,_X,5),2&e){let h;rr(h=sr())&&(r._lazyContent=h.first)}},viewQuery:function(e,r){if(1&e&&no(uX,5),2&e){let c;rr(c=sr())&&(r._body=c.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,r){2&e&&Ir("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Cr([{provide:PF,useValue:void 0},{provide:yz,useExisting:n}]),ci,Hr],ngContentSelectors:fX,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,r){1&e&&(es(hX),Rr(0),on(1,"div",0,1),Ei("@bodyExpansion.done",function(h){return r._bodyAnimationDone.next(h)}),on(3,"div",2),Rr(4,1),Oi(5,dX,0,0,"ng-template",3),gn(),Rr(6,2),gn()),2&e&&(zn(1),Vn("@bodyExpansion",r._getExpandedState())("id",r.id),di("aria-labelledby",r._headerId),zn(4),Vn("cdkPortalOutlet",r._portal))},dependencies:[t2],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[vz.bodyExpansion]},changeDetection:0}),n})();class yX{}const bX=zO(yX);let Mz=(()=>{class n extends bX{constructor(e,r,c,h,y,T,L){super(),this.panel=e,this._element=r,this._focusMonitor=c,this._changeDetectorRef=h,this._animationMode=T,this._parentChangeSubscription=nn.EMPTY;const z=e.accordion?e.accordion._stateChanges.pipe(xn(X=>!(!X.hideToggle&&!X.togglePosition))):ua;this.tabIndex=parseInt(L||"")||0,this._parentChangeSubscription=tc(e.opened,e.closed,z,e._inputChanges.pipe(xn(X=>!!(X.hideToggle||X.disabled||X.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(xn(()=>e._containsFocus())).subscribe(()=>c.focusVia(r,"program")),y&&(this.expandedHeight=y.expandedHeight,this.collapsedHeight=y.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:KT(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(Be(xz,1),Be(Li),Be(_M),Be(Xa),Be(bz,8),Be(tu,8),Zd("tabindex"))},n.\u0275cmp=Ri({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,r){1&e&&Ei("click",function(){return r._toggle()})("keydown",function(h){return r._keydown(h)}),2&e&&(di("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Bu("height",r._getHeaderHeight()),Ir("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ci],ngContentSelectors:gX,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,r){1&e&&(es(mX),on(0,"span",0),Rr(1),Rr(2,1),Rr(3,2),gn(),Oi(4,pX,1,1,"span",1)),2&e&&(Ir("mat-content-hide-toggle",!r._showToggle()),zn(4),Vn("ngIf",r._showToggle()))},dependencies:[cv],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[vz.indicatorRotate]},changeDetection:0}),n})(),xX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Xn({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),MX=(()=>{class n extends oX{constructor(){super(...arguments),this._ownHeaders=new Yp,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Xs(e)}ngAfterContentInit(){this._headers.changes.pipe(Rt(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new mB(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=co(n)))(r||n)}}(),n.\u0275dir=Xn({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,r,c){if(1&e&&El(c,Mz,5),2&e){let h;rr(h=sr())&&(r._headers=h)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,r){2&e&&Ir("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[Cr([{provide:PF,useExisting:n}]),ci]}),n})(),wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[Or,hs,lX,dA]}),n})();const wX=["input"],SX=["label"],EX=["*"],CX=new jt("mat-checkbox-default-options",{providedIn:"root",factory:Sz});function Sz(){return{color:"accent",clickAction:"check-indeterminate"}}const TX={provide:kf,useExisting:xr(()=>Cz),multi:!0};class AX{}let DX=0;const Ez=Sz(),RX=zO(b1(eA(DI(class{constructor(n){this._elementRef=n}}))));let IX=(()=>{class n extends RX{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=Xs(e)}constructor(e,r,c,h,y,T,L){super(r),this._changeDetectorRef=c,this._ngZone=h,this._animationMode=T,this._options=L,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Ai,this.indeterminateChange=new Ai,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Ez,this.color=this.defaultColor=this._options.color||Ez.color,this.tabIndex=parseInt(y)||0,this.id=this._uniqueId=`${e}${++DX}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){const r=Xs(e);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const r=Xs(e);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const r=e!=this._indeterminate;this._indeterminate=Xs(e),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_transitionCheckState(e){let r=this._currentCheckState,c=this._getAnimationTargetElement();if(r!==e&&c&&(this._currentAnimationClass&&c.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){c.classList.add(this._currentAnimationClass);const h=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{c.classList.remove(h)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?!this.disabled&&"noop"===e&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,r){if("NoopAnimations"===this._animationMode)return"";switch(e){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const r=this._inputElement;r&&(r.nativeElement.indeterminate=e)}}return n.\u0275fac=function(e){Ip()},n.\u0275dir=Xn({type:n,viewQuery:function(e,r){if(1&e&&(no(wX,5),no(SX,5),no(gv,5)),2&e){let c;rr(c=sr())&&(r._inputElement=c.first),rr(c=sr())&&(r._labelElement=c.first),rr(c=sr())&&(r.ripple=c.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[ci]}),n})(),Cz=(()=>{class n extends IX{constructor(e,r,c,h,y,T){super("mat-mdc-checkbox-",e,r,c,h,y,T),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){const r=new AX;return r.source=this,r.checked=e,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(Be(Li),Be(Xa),Be(xi),Zd("tabindex"),Be(tu,8),Be(CX,8))},n.\u0275cmp=Ri({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(e,r){2&e&&(bt("id",r.id),di("tabindex",null)("aria-label",null)("aria-labelledby",null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Cr([TX]),ci],ngContentSelectors:EX,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[3,"for"],["label",""]],template:function(e,r){if(1&e&&(es(),on(0,"div",0),Ei("click",function(h){return r._preventBubblingFromLabel(h)}),on(1,"div",1,2)(3,"div",3),Ei("click",function(){return r._onTouchTargetClick()}),gn(),on(4,"input",4,5),Ei("blur",function(){return r._onBlur()})("click",function(){return r._onInputClick()})("change",function(h){return r._onInteractionEvent(h)}),gn(),$n(6,"div",6),on(7,"div",7),Kf(),on(8,"svg",8),$n(9,"path",9),gn(),Ug(),$n(10,"div",10),gn(),$n(11,"div",11),gn(),on(12,"label",12,13),Rr(14),gn()()),2&e){const c=Ml(2);Ir("mdc-form-field--align-end","before"==r.labelPosition),zn(4),Ir("mdc-checkbox--selected",r.checked),Vn("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex),di("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("name",r.name)("value",r.value),zn(7),Vn("matRippleTrigger",c)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),zn(1),Vn("for",r.inputId)}},dependencies:[gv],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:not([disabled])~.mdc-checkbox__ripple{opacity:.04;transform:scale(1);transition:opacity 80ms 0 cubic-bezier(0, 0, 0.2, 1),transform 80ms 0 cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:not([disabled]):focus~.mdc-checkbox__ripple{opacity:.16}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__native-control:focus:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, black)}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),Tz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),Az=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({imports:[hs,gE,Tz,hs,Tz]}),n})();const LX=[PB,V4,hV,oV,yV,wV,zV,YV,az,cz,uz,hz,pA,mz,wz,Az];let kF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({imports:[LX,PB,V4,hV,oV,yV,wV,zV,YV,az,cz,uz,hz,pA,mz,wz,Az]})}return n})(),Dz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({})}return n})(),OX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({imports:[kF,K9,Or,Dz]})}return n})(),FX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({imports:[OX,kF,Or]})}return n})(),Rz=(()=>{class n{constructor(){this.addedFlags=0,this.loadingFlag=!1}add_loading_flag(){this.addedFlags++,this.addedFlags>0&&(this.loadingFlag=!0)}remove_loading_flag(){this.addedFlags--,0===this.addedFlags&&(this.loadingFlag=!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const BX=new class UX extends SI{}(class NX extends wI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,e,r):(t.flush(this),0)}});function Iz(...n){const t=zf(n);return qr((e,r)=>{const c=n.length,h=new Array(c);let y=n.map(()=>!1),T=!1;for(let L=0;L<c;L++)xs(n[L]).subscribe(mr(r,z=>{h[L]=z,!T&&!y[L]&&(y[L]=!0,(T=y.every(Mo))&&(y=null))},ze));e.subscribe(mr(r,L=>{if(T){const z=[L,...h];r.next(t?t(...z):z)}}))})}const mA={};function vv(n,t){if(mA[n]=(mA[n]||0)+1,"function"==typeof t)return LF(n,(...r)=>({...t(...r),type:n}));switch(t?t._as:"empty"){case"empty":return LF(n,()=>({type:n}));case"props":return LF(n,r=>({...r,type:n}));default:throw new Error("Unexpected config.")}}function LF(n,t){return Object.defineProperty(t,"type",{value:n,writable:!1})}const Pz="@ngrx/store/init";let T1=(()=>{class n extends Ke{constructor(){super({type:Pz})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const GX=[T1],FF=new jt("@ngrx/store Internal Root Guard"),kz=new jt("@ngrx/store Internal Initial State"),NF=new jt("@ngrx/store Initial State"),Lz=new jt("@ngrx/store Reducer Factory"),Oz=new jt("@ngrx/store Internal Reducer Factory Provider"),Fz=new jt("@ngrx/store Initial Reducers"),UF=new jt("@ngrx/store Internal Initial Reducers"),Nz=new jt("@ngrx/store Store Features"),Uz=new jt("@ngrx/store Internal Store Reducers"),BF=new jt("@ngrx/store Internal Feature Reducers"),Bz=new jt("@ngrx/store Internal Feature Configs"),VF=new jt("@ngrx/store Internal Store Features"),Vz=new jt("@ngrx/store Internal Feature Reducers Token"),zF=new jt("@ngrx/store Feature Reducers"),zz=new jt("@ngrx/store User Provided Meta Reducers"),d2=new jt("@ngrx/store Meta Reducers"),Hz=new jt("@ngrx/store Internal Resolved Meta Reducers"),Gz=new jt("@ngrx/store User Runtime Checks Config"),Wz=new jt("@ngrx/store Internal User Runtime Checks Config"),gA=new jt("@ngrx/store Internal Runtime Checks"),_A=new jt("@ngrx/store Check if Action types are unique");function GF(n,t={}){const e=Object.keys(n),r={};for(let h=0;h<e.length;h++){const y=e[h];"function"==typeof n[y]&&(r[y]=n[y])}const c=Object.keys(r);return function(y,T){y=void 0===y?t:y;let L=!1;const z={};for(let X=0;X<c.length;X++){const ie=c[X],Te=y[ie],Le=(0,r[ie])(Te,T);z[ie]=Le,L=L||Le!==Te}return L?z:y}}function $z(...n){return function(t){if(0===n.length)return t;const e=n[n.length-1];return n.slice(0,-1).reduceRight((c,h)=>h(c),e(t))}}function qz(n,t){return Array.isArray(t)&&t.length>0&&(n=$z.apply(null,[...t,n])),(e,r)=>{const c=n(e);return(h,y)=>c(h=void 0===h?r:h,y)}}new jt("@ngrx/store Root Store Provider"),new jt("@ngrx/store Feature State Provider");class h2 extends pr{}class Xz extends T1{}let vA=(()=>{class n extends Ke{constructor(e,r,c,h){super(h(c,r)),this.dispatcher=e,this.initialState=r,this.reducers=c,this.reducerFactory=h}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const r=e.reduce((c,{reducers:h,reducerFactory:y,metaReducers:T,initialState:L,key:z})=>{const X="function"==typeof h?function jX(n){const t=Array.isArray(n)&&n.length>0?$z(...n):e=>e;return(e,r)=>(e=t(e),(c,h)=>e(c=void 0===c?r:c,h))}(T)(h,L):qz(y,T)(h,L);return c[z]=X,c},{});this.addReducers(r)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(r=>r.key))}addReducer(e,r){this.addReducers({[e]:r})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(r=>{this.reducers=function WX(n,t){return Object.keys(n).filter(e=>e!==t).reduce((e,r)=>Object.assign(e,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(e){return new(e||n)(ut(Xz),ut(NF),ut(Fz),ut(Lz))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const qX=[vA,{provide:h2,useExisting:vA},{provide:Xz,useExisting:T1}];let yA=(()=>{class n extends Ci{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=co(n)))(r||n)}}(),n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const XX=[yA];class Yz extends pr{}let Zz=(()=>{class n extends Ke{constructor(e,r,c,h){super(h);const z=e.pipe(fm(BX)).pipe(Iz(r)).pipe(Ja(YX,{state:h}));this.stateSubscription=z.subscribe(({state:X,action:ie})=>{this.next(X),c.next(ie)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=Pz,n.\u0275fac=function(e){return new(e||n)(ut(T1),ut(h2),ut(yA),ut(NF))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function YX(n={state:void 0},[t,e]){const{state:r}=n;return{state:e(r,t),action:t}}const ZX=[Zz,{provide:Yz,useExisting:Zz}];let ob=(()=>{class n extends pr{constructor(e,r,c){super(),this.actionsObserver=r,this.reducerManager=c,this.source=e}select(e,...r){return JX.call(null,e,...r)(this)}lift(e){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=e,r}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,r){this.reducerManager.addReducer(e,r)}removeReducer(e){this.reducerManager.removeReducer(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(Yz),ut(T1),ut(vA))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const KX=[ob];function JX(n,t,...e){return function(c){let h;if("string"==typeof n){const y=[t,...e].filter(Boolean);h=c.pipe(function VX(...n){const t=n.length;if(0===t)throw new Error("list of properties cannot be empty.");return ri(e=>{let r=e;for(let c=0;c<t;c++){const h=r?.[n[c]];if(!(typeof h<"u"))return;r=h}return r})}(n,...y))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);h=c.pipe(ri(y=>n(y,t)))}return h.pipe(FO())}}const WF="https://ngrx.io/guide/store/configuration/runtime-checks";function Kz(n){return void 0===n}function Jz(n){return null===n}function Qz(n){return Array.isArray(n)}function e5(n){return"object"==typeof n&&null!==n}function jF(n){return"function"==typeof n}function pY(n){return n instanceof jt?ei(n):n}function mY(n,t){return t.map((e,r)=>{if(n[r]instanceof jt){const c=ei(n[r]);return{key:e.key,reducerFactory:c.reducerFactory?c.reducerFactory:GF,metaReducers:c.metaReducers?c.metaReducers:[],initialState:c.initialState}}return e})}function gY(n){return n.map(t=>t instanceof jt?ei(t):t)}function XF(n){return"function"==typeof n?n():n}function _Y(n,t){return n.concat(t)}function vY(){if(ei(ob,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function YF(n){Object.freeze(n);const t=jF(n);return Object.getOwnPropertyNames(n).forEach(e=>{if(!e.startsWith("\u0275")&&function rY(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(n,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const r=n[e];(e5(r)||jF(r))&&!Object.isFrozen(r)&&YF(r)}}),n}function ZF(n,t=[]){return(Kz(n)||Jz(n))&&0===t.length?{path:["root"],value:n}:Object.keys(n).reduce((r,c)=>{if(r)return r;const h=n[c];return function iY(n){return jF(n)&&n.hasOwnProperty("\u0275cmp")}(h)?r:!(Kz(h)||Jz(h)||function tY(n){return"number"==typeof n}(h)||function eY(n){return"boolean"==typeof n}(h)||function QX(n){return"string"==typeof n}(h)||Qz(h))&&(function t5(n){if(!function nY(n){return e5(n)&&!Qz(n)}(n))return!1;const t=Object.getPrototypeOf(n);return t===Object.prototype||null===t}(h)?ZF(h,[...t,c]):{path:[...t,c],value:h})},!1)}function s5(n,t){if(!1===n)return;const e=n.path.join("."),r=new Error(`Detected unserializable ${t} at "${e}". ${WF}#strict${t}serializability`);throw r.value=n.value,r.unserializablePath=e,r}function MY(n){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function wY({strictActionSerializability:n,strictStateSerializability:t}){return e=>n||t?function bY(n,t){return function(e,r){t.action(r)&&s5(ZF(r),"action");const c=n(e,r);return t.state()&&s5(ZF(c),"state"),c}}(e,{action:r=>n&&!KF(r),state:()=>t}):e}function SY({strictActionImmutability:n,strictStateImmutability:t}){return e=>n||t?function yY(n,t){return function(e,r){const c=t.action(r)?YF(r):r,h=n(e,c);return t.state()?YF(h):h}}(e,{action:r=>n&&!KF(r),state:()=>t}):e}function KF(n){return n.type.startsWith("@ngrx")}function EY({strictActionWithinNgZone:n}){return t=>n?function xY(n,t){return function(e,r){if(t.action(r)&&!xi.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${WF}#strictactionwithinngzone`);return n(e,r)}}(t,{action:e=>n&&!KF(e)}):t}function CY(n){return[{provide:Wz,useValue:n},{provide:Gz,useFactory:TY,deps:[Wz]},{provide:gA,deps:[Gz],useFactory:MY},{provide:d2,multi:!0,deps:[gA],useFactory:SY},{provide:d2,multi:!0,deps:[gA],useFactory:wY},{provide:d2,multi:!0,deps:[gA],useFactory:EY}]}function o5(){return[{provide:_A,multi:!0,deps:[gA],useFactory:AY}]}function TY(n){return n}function AY(n){if(!n.strictActionTypeUniqueness)return;const t=Object.entries(mA).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${WF}#strictactiontypeuniqueness`)}function a5(n={},t={}){return[{provide:FF,useFactory:vY},{provide:kz,useValue:t.initialState},{provide:NF,useFactory:XF,deps:[kz]},{provide:UF,useValue:n},{provide:Uz,useExisting:n instanceof jt?n:UF},{provide:Fz,deps:[UF,[new ip(Uz)]],useFactory:pY},{provide:zz,useValue:t.metaReducers?t.metaReducers:[]},{provide:Hz,deps:[d2,zz],useFactory:_Y},{provide:Oz,useValue:t.reducerFactory?t.reducerFactory:GF},{provide:Lz,deps:[Oz,Hz],useFactory:qz},GX,qX,XX,ZX,KX,CY(t.runtimeChecks),o5()]}function c5(n,t,e={}){return[{provide:Bz,multi:!0,useValue:n instanceof Object?{}:e},{provide:Nz,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:e instanceof jt||!e.reducerFactory?GF:e.reducerFactory,metaReducers:e instanceof jt||!e.metaReducers?[]:e.metaReducers,initialState:e instanceof jt||!e.initialState?void 0:e.initialState}},{provide:VF,deps:[Bz,Nz],useFactory:mY},{provide:BF,multi:!0,useValue:n instanceof Object?n.reducer:t},{provide:Vz,multi:!0,useExisting:t instanceof jt?t:BF},{provide:zF,multi:!0,deps:[BF,[new ip(Vz)]],useFactory:gY},o5()]}let f2=(()=>{class n{constructor(e,r,c,h,y,T){}}return n.\u0275fac=function(e){return new(e||n)(ut(T1),ut(h2),ut(yA),ut(ob),ut(FF,8),ut(_A,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),JF=(()=>{class n{constructor(e,r,c,h,y){this.features=e,this.featureReducers=r,this.reducerManager=c;const T=e.map((L,z)=>{const ie=r.shift()[z];return{...L,reducers:ie,initialState:XF(L.initialState)}});c.addFeatures(T)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(e){return new(e||n)(ut(VF),ut(zF),ut(vA),ut(f2),ut(_A,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),kY=(()=>{class n{static forRoot(e,r){return{ngModule:f2,providers:[...a5(e,r)]}}static forFeature(e,r,c={}){return{ngModule:JF,providers:[...c5(e,r,c)]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();function p2(...n){return{reducer:n.pop(),types:n.map(r=>r.type)}}const l5=vv("[Offline View] query-button-clicked"),u5=vv("[Offline View] annotation-button-clicked"),m2=vv("[Offline View] session-selected",{_as:"props",_p:void 0}),d5=vv("[Offline View] session-streams-loaded",{_as:"props",_p:void 0}),h5=vv("[Offline View] session-videos-loaded",{_as:"props",_p:void 0}),f5=vv("[Offline View] session-streams-normalized",{_as:"props",_p:void 0}),p5=vv("[Offline View] timestamp-selected",{_as:"props",_p:void 0}),m5=vv("[Offline View] closest-timestamps-selected",{_as:"props",_p:void 0}),OY=n=>n.offlineViewState.streams,FY=n=>n.offlineViewState.videos,NY=n=>n.offlineViewState.selectedTimestamp;class UY{constructor(t){this.store=t,this.loadedStreams$=ye({}),this.loadedVideos$=ye({}),this.selectedTimestamp$=ye({}),this.subscribe_to_selectors()}on_query_button_click(){this.store.dispatch(l5())}on_annotation_button_click(){this.store.dispatch(u5())}on_timestamp_selected(t){this.store.dispatch(p5({source:t.source,timestamp:t.timestamp}))}subscribe_to_selectors(){this.loadedStreams$=this.store.select(OY),this.loadedVideos$=this.store.select(FY),this.selectedTimestamp$=this.store.select(NY)}}var g5=Rn(971);const g2=["voxelized-pointcloud","eye","detic:memory","detic:image:misc:for3d","reasoning:check_status"],BY=["main","depthlt","glf","gll","grf","grr"];class A1{static parse_stream_into_pointcloud(t,e){switch(t){case"voxelized-pointcloud":return A1.parse_world_point_cloud(e);case"eye":return A1.parse_eye_point_cloud(e);case"hand":return A1.parse_hand_point_cloud(e);case"detic:memory":return A1.parse_memory_point_cloud(e)}}static parse_eye_point_cloud(t){let e=[],r=[];return t.forEach(c=>{const y={timestamp:c.timestamp};e.push([c.GazeOrigin.x,c.GazeOrigin.y,-1*c.GazeOrigin.z]),r.push(y)}),{positions:e,colors:[],normals:[],meta:r}}static parse_hand_point_cloud(t){return{positions:[],colors:[],normals:[],meta:[]}}static parse_memory_point_cloud(t){const e={},r={};t.forEach(h=>{const y=h.timestamp;h.values.forEach(T=>{T.label in r||(e[T.label]=[],r[T.label]=[]),e[T.label].push(y),r[T.label].push(T.pos)})});const c={};return Object.keys(r).forEach(h=>{c[h]={positions:r[h],colors:[],normals:[],meta:e[h]}}),c}static parse_world_point_cloud(t){const e=[],r=[];return t.xyz_world.forEach((c,h)=>{e.push(c),r.push(t.colors[h])}),{positions:e,colors:r,normals:[],meta:[]}}}class yv{static index_stream_timestamps(t,e){switch(t){case"eye":return yv.static_index_eye_point_cloud(e);case"hand":return yv.static_index_hand_point_cloud(e)}}static static_index_eye_point_cloud(t){const e={};return t.forEach((r,c)=>{e[r.timestamp]=c}),e}static static_index_hand_point_cloud(t){return{}}static parse_stream_timestamp(t,e,r){switch(t){case"voxelized-pointcloud":return yv.parse_world_point_cloud(e,r);case"eye":return yv.parse_eye_point_cloud(e,r);case"detic:memory":return yv.parse_memory_point_cloud(e,r);case"detic:image:misc:for3d":return yv.parse_detic_image_misc_output(e,r);case"reasoning:check_status":return yv.parse_reasoning_output(e,r)}}static parse_detic_image_misc_output(t,e){const r=[];return t.forEach(c=>{if(c.objects){const h=c.timestamp.split("-")[0]-e;r.push({...c,timestamp:h})}}),r}static parse_reasoning_output(t,e){const r=[];return t.forEach(c=>{const h=c.timestamp.split("-")[0]-e;r.push({...c,timestamp:h})}),r}static parse_memory_point_cloud(t,e){const r=[];return t.forEach(c=>{const y=parseInt(c.timestamp.split("-")[0])-e;r.push({...c,timestamp:y})}),r}static parse_world_point_cloud(t,e){return t}static parse_eye_point_cloud(t,e){const r=[];return t.forEach(c=>{const y=parseInt(c.timestamp.split("-")[0])-e;r.push({...c,timestamp:y})}),r}}class VY{constructor(t){this.events=t,this.streams={},this.indexedTimestamps={},this.directions=[]}update_highlight(t){this.egoCloud.clear_highlights();for(const e in t)if(e in this.indexedTimestamps&&t[e]){const r=this.indexedTimestamps[e][t[e]],c=this.streams[e].positions[r];this.egoCloud.highlight("point",c),this.egoCloud.highlight("line",{origin:c,destination:this.directions[r]})}}update_style(t,e,r){this.egoCloud.set_style(t,e,r)}update_visibility(t,e){this.egoCloud.hide(t,e)}update_dataset(t){const e=new g5.qz,r={};g2.forEach(c=>{if(c in t)if("voxelized-pointcloud"===c)r[c]=A1.parse_stream_into_pointcloud(c,t[c]),e.add_point_cloud(c,r[c].positions,[],r[c].colors,[],!1,!0);else if("detic:memory"!==c&&"reasoning:check_status"!==c&&"detic:image:misc:for3d"!==c&&(r[c]=A1.parse_stream_into_pointcloud(c,t[c]),e.add_point_cloud(c,r[c].positions,[],r[c].colors,r[c].meta,!0,!1),this.indexedTimestamps[c]=yv.index_stream_timestamps(c,r[c].meta),"eye"===c)){const h=t[c].map(y=>[y.GazeDirection.x+y.GazeOrigin.x,y.GazeDirection.y+y.GazeOrigin.y,-1*y.GazeDirection.z+-1*y.GazeOrigin.z]);this.directions=h}}),this.streams=r,this.egoCloud.render(e),Object.keys(this.streams).forEach(c=>{this.egoCloud.hide(c,!1)})}initialize_component(t){this.egoCloud=new g5.Sd(t,{onHover:(e,r,c,h)=>{-1!==e&&this.events.timestampselected.emit({timestamp:h.timestamp})}})}}class zY{constructor(t){this.events=t,this.pointClouds=[]}on_style_change(t,e,r){this.events.onstylechange.emit({objectName:t,styleName:e,value:r})}on_visibility_change(t,e){this.events.onvisibilitychange.emit({objectName:t,visible:e.checked})}}function HY(n,t){if(1&n){const e=wl();on(0,"div",4)(1,"div",5)(2,"h4"),m(3),gn()(),on(4,"div",6)(5,"mat-slider",7)(6,"input",8),Ei("valueChange",function(c){const y=Oa(e).$implicit;return oc(ps().pointCloudControlsController.on_style_change(y,"opacity",c))}),gn()()(),$n(7,"mat-divider"),gn()}if(2&n){const e=t.$implicit;zn(3),b(e),zn(2),Vn("min",0)("max",1)("step",.05)}}function GY(n,t){if(1&n){const e=wl();on(0,"div",4)(1,"div",5)(2,"h4"),m(3),gn()(),on(4,"div",6)(5,"mat-slider",7)(6,"input",8),Ei("valueChange",function(c){const y=Oa(e).$implicit;return oc(ps().pointCloudControlsController.on_style_change(y,"size",c))}),gn()()(),$n(7,"mat-divider"),gn()}if(2&n){const e=t.$implicit;zn(3),b(e),zn(2),Vn("min",0)("max",.5)("step",.005)}}function WY(n,t){if(1&n){const e=wl();on(0,"div",9)(1,"div",6)(2,"mat-checkbox",10),Ei("change",function(c){const y=Oa(e).$implicit;return oc(ps().pointCloudControlsController.on_visibility_change(y,c))}),m(3),gn()(),$n(4,"mat-divider"),gn()}if(2&n){const e=t.$implicit;zn(3),b(e)}}let jY=(()=>{class n{constructor(){this.pointClouds=[],this.onStyleChange=new Ai,this.onVisibilityChange=new Ai,this.pointCloudControlsController=new zY({onstylechange:this.onStyleChange,onvisibilitychange:this.onVisibilityChange})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-point-cloud-controls"]],inputs:{pointClouds:["loadedpointclouds","pointClouds"]},outputs:{onStyleChange:"onstylechange",onVisibilityChange:"onvisibilitychange"},decls:20,vars:3,consts:[[1,"component-container-vertical"],[2,"display","flex","flex-direction","column"],["class","component-container-vertical-height-param","style","--height: 100px;",4,"ngFor","ngForOf"],["class","component-container-vertical-height-param","style","--height: 60px;",4,"ngFor","ngForOf"],[1,"component-container-vertical-height-param",2,"--height","100px"],[1,"component-container-horizontal-height-param",2,"--height","50px","align-items","flex-end"],[1,"component-container-horizontal-height-param",2,"--height","50px"],[3,"min","max","step"],["matSliderThumb","",3,"valueChange"],[1,"component-container-vertical-height-param",2,"--height","60px"],[3,"change"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),m(5," Opacity "),gn()(),on(6,"div",1),Oi(7,HY,8,4,"div",2),gn()(),on(8,"mat-expansion-panel")(9,"mat-expansion-panel-header")(10,"mat-panel-title"),m(11," Point Size "),gn()(),on(12,"div",1),Oi(13,GY,8,4,"div",2),gn()(),on(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),m(17," Visibility "),gn()(),on(18,"div",1),Oi(19,WY,5,1,"div",3),gn()()()()),2&r&&(zn(7),Vn("ngForOf",c.pointClouds),zn(6),Vn("ngForOf",c.pointClouds),zn(6),Vn("ngForOf",c.pointClouds))},dependencies:[r$,yF,RF,MX,xz,Mz,xX,Cz,t1],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})(),$Y=(()=>{class n{transform(e){return Object.keys(e)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Ia({name:"objectToKeys",type:n,pure:!0})}return n})();const qY=["containerref"];let XY=(()=>{class n{constructor(e){this.httpClient=e,this.streams={},this.selectedTimestamp={},this.timestampSelected=new Ai,this.spatialViewerController=new VY({timestampselected:this.timestampSelected})}ngAfterViewInit(){this.spatialViewerController.initialize_component(this.containerRef.nativeElement)}ngOnChanges(e){"selectedTimestamp"in e&&(e.selectedTimestamp.firstChange||this.spatialViewerController.update_highlight(e.selectedTimestamp.currentValue)),"streams"in e&&Object.keys(e.streams.currentValue).length&&!e.streams.firstChange&&this.spatialViewerController.update_dataset(e.streams.currentValue)}static#e=this.\u0275fac=function(r){return new(r||n)(Be(bE))};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-spatial-viewer"]],viewQuery:function(r,c){if(1&r&&no(qY,5),2&r){let h;rr(h=sr())&&(c.containerRef=h.first)}},inputs:{streams:"streams",selectedTimestamp:["selectedtimestamp","selectedTimestamp"]},outputs:{timestampSelected:"timestampselected"},features:[Hr],decls:6,vars:3,consts:[[1,"component-container-horizontal",2,"position","relative"],[2,"top","50px","left","calc(100% - 350px)","width","300px","height","300px","position","absolute","display","flex","z-index","2"],[3,"loadedpointclouds","onvisibilitychange","onstylechange"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute","z-index","1"],["containerref",""]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"app-point-cloud-controls",2),Ei("onvisibilitychange",function(y){return c.spatialViewerController.update_visibility(y.objectName,y.visible)})("onstylechange",function(y){return c.spatialViewerController.update_style(y.objectName,y.styleName,y.value)}),Ah(3,"objectToKeys"),gn()(),$n(4,"div",3,4),gn()),2&r&&(zn(2),Vn("loadedpointclouds",gg(3,1,c.spatialViewerController.streams)))},dependencies:[jY,$Y],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();const YY=["*"];let ZY=(()=>{class n{constructor(){this.title=""}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-component-container-template"]],inputs:{title:"title"},ngContentSelectors:YY,decls:7,vars:1,consts:[[1,"component-container-vertical","center-element"],[1,"component-container-vertical-width-height-param",2,"--width","97%","--height","97%"],[1,"component-container-horizontal-height-param","header","center-secondary-axis",2,"--height","40px"],[2,"padding-left","20px"],[1,"component-container-horizontal","body"]],template:function(r,c){1&r&&(es(),on(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),m(4),gn()(),on(5,"div",4),Rr(6),gn()()()),2&r&&(zn(4),b(c.title))},styles:["[_nghost-%COMP%]{display:flex;flex:1}.header[_ngcontent-%COMP%]{background-color:#673ab7;border-radius:10px 10px 0 0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}.body[_ngcontent-%COMP%]{border:solid;border-width:5px;border-color:#673ab7;border-radius:0 0 10px 10px}"]})}return n})();var QF=Rn(833);class D1{static parse_stream_stream(t,e){switch(t){case"detic:memory":return D1.parse_memory_stream(e);case"reasoning:check_status":return D1.parse_reasoning_stream(e);case"detic:image:misc:for3d":return D1.parse_perception_stream(e)}}static parse_memory_stream(t){const e={};return t.forEach(r=>{const c=r.timestamp;r.values.forEach(h=>{h.label in e||(e[h.label]={}),h.id in e[h.label]||(e[h.label][h.id]=[]),e[h.label][h.id].push({value:h.status,timestamp:c})})}),e}static parse_reasoning_stream(t){const e={};return t.forEach(r=>{const c=r.timestamp;r.active_tasks.forEach(h=>{h.task_id in e||(e[h.task_id]=[]),e[h.task_id].push({timestamp:c,step:h.step_id,error:h.error_status})})}),e}static parse_perception_stream(t){const e={};t.forEach((c,h)=>{c.objects.forEach(y=>{e[y.label]=[]})}),t.forEach((c,h)=>{for(let y=0;y<c.objects.length;y++)e[c.objects[y].label].length<=h&&e[c.objects[y].label].push(c.objects[y].confidence);Object.keys(e).forEach(y=>{e[y].length<=h&&e[y].push(0)})});const r=[];return Object.keys(e).forEach(c=>{r.push({name:c,values:e[c],confidence:.5,coverage:.5})}),r}}class KY{constructor(t){this.events=t,this.labels=[],this.indexedLabels={},this.selectedLabel=""}initialize_component(t){this.memoryViewer=new QF.Jt(t,{mouseover:r=>{this.cell_hovered(r)},mouseout:r=>{this.cell_hovered(r)}})}update_dataset(t,e){const r=D1.parse_stream_stream(t,e);this.labels=Object.keys(r),this.indexedLabels=r}update_render(t,e){this.memoryViewer.update(t,e)}change_label(t){this.selectedLabel=t,this.update_render(this.indexedLabels[this.selectedLabel],null)}highlight_timestamp(t){this.update_render(this.indexedLabels[this.selectedLabel],t)}cell_hovered(t){this.events.timestampselected.emit({timestamp:t})}}const JY=["containerref"];function QY(n,t){if(1&n){const e=wl();on(0,"button",12),Ei("click",function(){const h=Oa(e).$implicit;return oc(ps().memoryViewerController.change_label(h))}),on(1,"span"),m(2),gn()()}if(2&n){const e=t.$implicit;zn(2),b(e)}}let eZ=(()=>{class n{constructor(){this.streamName="",this.streamData=[],this.selectedTimestamp={},this.timestampSelected=new Ai}ngOnInit(){this.memoryViewerController=new KY({timestampselected:this.timestampSelected})}ngAfterViewInit(){this.memoryViewerController.initialize_component(this.containerRef.nativeElement)}ngOnChanges(e){"streamData"in e&&!e.streamData.firstChange&&e.streamData.currentValue&&this.memoryViewerController.update_dataset(this.streamName,e.streamData.currentValue),"selectedTimestamp"in e&&!e.selectedTimestamp.firstChange&&e.selectedTimestamp.currentValue&&this.memoryViewerController.highlight_timestamp(e.selectedTimestamp.currentValue[this.streamName])}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-memory-viewer"]],viewQuery:function(r,c){if(1&r&&no(JY,5),2&r){let h;rr(h=sr())&&(c.containerRef=h.first)}},inputs:{streamName:["streamname","streamName"],streamData:["streamdata","streamData"],selectedTimestamp:["selectedtimestamp","selectedTimestamp"]},outputs:{timestampSelected:"timestampselected"},features:[Hr],decls:17,vars:4,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal-height-param",2,"--height","30px"],[1,"component-container-horizontal",2,"flex-direction","row-reverse"],[1,"component-container-horizontal-width-param","center-element",2,"--width","20px"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["labelMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"component-container-horizontal-width-param","text-overflow",2,"--width","150px","flex-direction","row-reverse"],[1,"component-container-horizontal"],[1,"component-container-horizontal","center-element",2,"position","relative"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute"],["containerref",""],["mat-menu-item","",3,"click"]],template:function(r,c){if(1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4)(5,"mat-icon"),m(6,"more_vert"),gn()(),on(7,"mat-menu",null,5),Oi(9,QY,3,1,"button",6),gn()(),on(10,"div",7)(11,"h1"),m(12),gn()()()(),on(13,"div",8)(14,"div",9),$n(15,"div",10,11),gn()()()),2&r){const h=Ml(8);zn(4),Vn("matMenuTriggerFor",h)("disabled",0===c.memoryViewerController.labels.length),zn(5),Vn("ngForOf",c.memoryViewerController.labels),zn(3),b(c.memoryViewerController.selectedLabel)}},dependencies:[yj,sV,tq,a2,sq,t1],styles:["[_nghost-%COMP%]{display:flex;flex:1}  .mat-form-field-wrapper{margin-bottom:-1.25em}  .mat-mdc-form-field-subscript-wrapper{margin-bottom:-1.25em}.mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}"]})}return n})();class tZ{constructor(t){this.events=t,this.streamName="reasoning:check_status",this.indexedTasks={}}initialize_component(t){this.reasoningViewer=new QF.cO(t,{mouseover:r=>{this.cell_hovered(r)},mouseout:r=>{this.cell_hovered(r)}})}update_dataset(t){const e=D1.parse_stream_stream(this.streamName,t);this.indexedTasks=e,this.update_render(this.indexedTasks,null)}update_render(t,e){this.reasoningViewer.update(this.indexedTasks,e)}cell_hovered(t){this.events.timestampselected.emit({timestamp:t})}highlight_timestamp(t){this.update_render(this.indexedTasks,t)}}const nZ=["containerref"];let iZ=(()=>{class n{constructor(){this.streamName="reasoning:check_status",this.streamData=[],this.selectedTimestamp={},this.timestampSelected=new Ai}ngOnInit(){this.reasoningViewerController=new tZ({timestampselected:this.timestampSelected})}ngAfterViewInit(){this.reasoningViewerController.initialize_component(this.containerRef.nativeElement)}ngOnChanges(e){"streamData"in e&&!e.streamData.firstChange&&e.streamData.currentValue&&this.reasoningViewerController.update_dataset(e.streamData.currentValue),"selectedTimestamp"in e&&!e.selectedTimestamp.firstChange&&e.selectedTimestamp.currentValue&&this.reasoningViewerController.highlight_timestamp(e.selectedTimestamp.currentValue[this.streamName])}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-reasoning-viewer"]],viewQuery:function(r,c){if(1&r&&no(nZ,5),2&r){let h;rr(h=sr())&&(c.containerRef=h.first)}},inputs:{streamData:["streamdata","streamData"],selectedTimestamp:["selectedtimestamp","selectedTimestamp"]},outputs:{timestampSelected:"timestampselected"},features:[Hr],decls:4,vars:0,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal","center-element",2,"position","relative"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute"],["containerref",""]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1),$n(2,"div",2,3),gn()())},styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();class rZ{constructor(t){this.events=t,this.streamName="detic:image:misc:for3d",this.indexedTasks={}}initialize_component(t){this.perceptionViewer=new QF.OM(t)}update_dataset(t,e){const r=D1.parse_stream_stream(t,e);this.perceptionViewer.update({name:"test",labels:r},null,[1,1e4])}}const sZ=["containerref"];let oZ=(()=>{class n{constructor(){this.streamName="detic:image:misc:for3d",this.streamData=[],this.selectedTimestamp={},this.timestampSelected=new Ai}ngOnInit(){this.perceptionViewerController=new rZ({timestampselected:this.timestampSelected})}ngAfterViewInit(){this.perceptionViewerController.initialize_component(this.containerRef.nativeElement)}ngOnChanges(e){"streamData"in e&&!e.streamData.firstChange&&e.streamData.currentValue&&this.perceptionViewerController.update_dataset(this.streamName,e.streamData.currentValue)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-perception-viewer"]],viewQuery:function(r,c){if(1&r&&no(sZ,5),2&r){let h;rr(h=sr())&&(c.containerRef=h.first)}},inputs:{streamData:["streamdata","streamData"],selectedTimestamp:["selectedtimestamp","selectedTimestamp"]},outputs:{timestampSelected:"timestampselected"},features:[Hr],decls:4,vars:0,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal","center-element",2,"position","relative"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute"],["containerref",""]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1),$n(2,"div",2,3),gn()())},styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})(),aZ=(()=>{class n{transform(e,r){return r in e?e[r]:null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Ia({name:"streamSetToStream",type:n,pure:!0})}return n})(),cZ=(()=>{class n{constructor(){this.streams={},this.selectedTimestamp={},this.timestampSelected=new Ai}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-temporal-viewer"]],inputs:{streams:"streams",selectedTimestamp:["selectedtimestamp","selectedTimestamp"]},outputs:{timestampSelected:"timestampselected"},decls:13,vars:19,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal"],[3,"title"],[3,"selectedtimestamp","streamname","streamdata","timestampselected"],[3,"selectedtimestamp","streamdata","timestampselected"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"app-component-container-template",2)(3,"app-memory-viewer",3),Ei("timestampselected",function(y){return c.timestampSelected.emit(y)}),Ah(4,"streamSetToStream"),gn()()(),on(5,"div",1)(6,"app-component-container-template",2)(7,"app-reasoning-viewer",4),Ei("timestampselected",function(y){return c.timestampSelected.emit(y)}),Ah(8,"streamSetToStream"),gn()()(),on(9,"div",1)(10,"app-component-container-template",2)(11,"app-perception-viewer",4),Ei("timestampselected",function(y){return c.timestampSelected.emit(y)}),Ah(12,"streamSetToStream"),gn()()()()),2&r&&(zn(2),Vn("title","Memory"),zn(1),Vn("selectedtimestamp",c.selectedTimestamp)("streamname","detic:memory")("streamdata",By(4,10,c.streams,"detic:memory")),zn(3),Vn("title","Reasoning"),zn(1),Vn("selectedtimestamp",c.selectedTimestamp)("streamdata",By(8,13,c.streams,"reasoning:check_status")),zn(3),Vn("title","Perception"),zn(1),Vn("selectedtimestamp",c.selectedTimestamp)("streamdata",By(12,16,c.streams,"detic:image:misc:for3d")))},dependencies:[ZY,eZ,iZ,oZ,aZ],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();class e3{static parse_stream(t,e){if("detic:image:misc:for3d"===t)return e3.parse_detic_stream(e)}static parse_detic_stream(t){const e={};return t.forEach(r=>{const c=r.timestamp,h=[];r.objects.forEach(y=>{h.push({left:y.xyxyn[0],top:y.xyxyn[1],right:y.xyxyn[2],bottom:y.xyxyn[3],label:y.label})}),e[c]=h}),e}}var lZ=Rn(898);class uZ{constructor(){this.videos={},this.selectedVideo="",this.maxWidth=0,this.maxHeight=0,this.ratioFactor=0,this.boundingBoxes={}}initialize_component(t){this.videoContainer=t,this.maxWidth=t.parentElement.offsetWidth,this.maxHeight=t.parentElement.offsetHeight}update_video_timestamp(t){this.currentVideo&&(this.currentVideo.currentTime=t)}update_videos(t){this.videos=t,this.select_video(t.main)}update_metadata_timestamp(t){const e=t?this.boundingBoxes[t]:[];this.svg.selectAll(".boundingbox").data(e).join(r=>r.append("rect").attr("x",c=>c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("y",c=>c.top*this.currentVideo.videoHeight*this.ratioFactor).attr("class","boundingbox").attr("width",c=>c.right*this.currentVideo.videoWidth*this.ratioFactor-c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("height",c=>c.bottom*this.currentVideo.videoHeight*this.ratioFactor-c.top*this.currentVideo.videoHeight*this.ratioFactor).attr("fill","transparent").attr("stroke","red").attr("stroke-width",5),r=>r.attr("x",c=>c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("y",c=>c.top*this.currentVideo.videoHeight*this.ratioFactor).attr("width",c=>c.right*this.currentVideo.videoWidth*this.ratioFactor-c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("height",c=>c.bottom*this.currentVideo.videoHeight*this.ratioFactor-c.top*this.currentVideo.videoHeight*this.ratioFactor),r=>r.remove()),this.svg.selectAll(".label").data(e).join(r=>r.append("text").attr("class","label").text(c=>c.label).attr("x",c=>c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("y",c=>c.top*this.currentVideo.videoHeight*this.ratioFactor).style("font-size","25px").style("fill","white"),r=>r.attr("class","label").text(c=>c.label).attr("x",c=>c.left*this.currentVideo.videoWidth*this.ratioFactor).attr("y",c=>c.top*this.currentVideo.videoHeight*this.ratioFactor),r=>r.remove())}update_metadata(t){this.boundingBoxes=t}select_video(t){this.selectedVideo=t,this.create_video_tag(t)}clear_video_container(){for(;this.videoContainer.firstChild;)this.videoContainer.removeChild(this.videoContainer.firstChild)}create_video_tag(t){this.clear_video_container();const e=document.createElement("video");e.style.width="100%",e.style.height="100%",e.controls=!1,this.currentVideo=e,e.onloadedmetadata=r=>{let c=e.videoWidth,h=e.videoHeight,y=1;if(c>this.maxWidth||h>this.maxHeight)do{y-=.01,c=e.videoWidth*y,h=e.videoHeight*y}while(c>this.maxWidth||h>this.maxHeight);else{do{y+=.01,c=e.videoWidth*y,h=e.videoHeight*y}while(c<=this.maxWidth&&h<=this.maxHeight);c=e.videoWidth*(y-.01),h=e.videoHeight*(y-.01)}this.ratioFactor=y,this.videoContainer.style.position="relative",this.videoContainer.style.width=`${c}px`,this.videoContainer.style.height=`${h}px`,this.videoContainer.style.backgroundColor="red",this.svg=lZ.select(this.videoContainer).append("svg").attr("top",0).attr("left",0).attr("width",c).attr("height",h).style("position","absolute"),this.videoContainer.append(e)},e.src=t}}const dZ=["videocontainerref"];let hZ=(()=>{class n{constructor(){this.videos={},this.selectedTimestamp={},this.streams={},this.boundingBoxStream="detic:image:misc:for3d",this.mediaViewerController=new uZ}ngAfterViewInit(){this.mediaViewerController.initialize_component(this.videoContainerRef.nativeElement)}ngOnChanges(e){if("selectedTimestamp"in e&&!e.selectedTimestamp.firstChange&&Object.keys(e.selectedTimestamp.currentValue).length&&(e.selectedTimestamp.currentValue.video&&this.mediaViewerController.update_video_timestamp(e.selectedTimestamp.currentValue.video/1e3),this.mediaViewerController.update_metadata_timestamp(e.selectedTimestamp.currentValue[this.boundingBoxStream])),"videos"in e&&Object.keys(e.videos.currentValue).length&&!e.videos.firstChange&&this.mediaViewerController.update_videos(e.videos.currentValue),"streams"in e&&Object.keys(e.streams.currentValue).length&&!e.streams.firstChange){const r=e3.parse_stream(this.boundingBoxStream,e.streams.currentValue[this.boundingBoxStream]);this.mediaViewerController.update_metadata(r)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-media-viewer"]],viewQuery:function(r,c){if(1&r&&no(dZ,5),2&r){let h;rr(h=sr())&&(c.videoContainerRef=h.first)}},inputs:{videos:"videos",selectedTimestamp:["selectedtimestamp","selectedTimestamp"],streams:"streams",boundingBoxStream:["boundingboxstream","boundingBoxStream"]},features:[Hr],decls:5,vars:0,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal"],[1,"center-element",2,"width","100%","height","100%","position","relative","display","flex"],[2,"position","absolute"],["videocontainerref",""]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2),$n(3,"div",3,4),gn()()())},styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();class fZ{constructor(t){this.events=t}on_query_button_click(){this.events.querybuttonclicked.emit()}on_annotation_button_click(){console.log("Emitting"),this.events.annotationbuttonclicked.emit()}}let pZ=(()=>{class n{constructor(){this.queryButtonClicked=new Ai,this.annotationButtonClicked=new Ai,this.queryBarController=new fZ({querybuttonclicked:this.queryButtonClicked,annotationbuttonclicked:this.annotationButtonClicked})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-query-bar"]],outputs:{queryButtonClicked:"querybuttonclicked",annotationButtonClicked:"annotationbuttonclicked"},decls:16,vars:0,consts:[[1,"component-container-vertical",2,"z-index","1"],[1,"component-container-vertical-height-param",2,"--height","100px"],[1,"component-container-horizontal","center-element"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary","disabled",""]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ei("click",function(){return c.queryBarController.on_query_button_click()}),on(4,"mat-icon"),m(5,"search"),gn()()()(),on(6,"div",1)(7,"div",2)(8,"button",3),Ei("click",function(){return c.queryBarController.on_annotation_button_click()}),on(9,"mat-icon"),m(10,"edit"),gn()()()(),on(11,"div",1)(12,"div",2)(13,"button",4)(14,"mat-icon"),m(15,"settings"),gn()()()()())},dependencies:[vj,sV],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})(),mZ=(()=>{class n{constructor(e){this.store=e,this.offlineViewController=new UY(this.store)}static#e=this.\u0275fac=function(r){return new(r||n)(Be(ob))};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-offline-view"]],decls:21,vars:21,consts:[[1,"component-container-horizontal"],[1,"component-container-horizontal-width-param",2,"--width","70%"],[2,"width","100%","height","100%","position","relative"],[2,"width","100%","height","100%","top","0px","left","0px","position","absolute"],[2,"width","100%","height","100%","display","flex"],[3,"selectedtimestamp","streams","timestampselected"],[2,"width","100px","height","400px","top","0px","left","0px","position","absolute"],[3,"annotationbuttonclicked","querybuttonclicked"],[1,"component-container-vertical"],[1,"component-container-horizontal-height-param",2,"--height","30%"],[3,"streams","selectedtimestamp","videos"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-spatial-viewer",5),Ei("timestampselected",function(y){return c.offlineViewController.on_timestamp_selected({source:"spatialviewer",timestamp:y.timestamp})}),Ah(6,"async"),Ah(7,"async"),gn()()(),on(8,"div",6)(9,"div",4)(10,"app-query-bar",7),Ei("annotationbuttonclicked",function(){return c.offlineViewController.on_annotation_button_click()})("querybuttonclicked",function(){return c.offlineViewController.on_query_button_click()}),gn()()()()(),on(11,"div",8)(12,"div",9),$n(13,"app-media-viewer",10),Ah(14,"async"),Ah(15,"async"),Ah(16,"async"),gn(),on(17,"div",0)(18,"app-temporal-viewer",5),Ei("timestampselected",function(y){return c.offlineViewController.on_timestamp_selected({source:"temporalviewer",timestamp:y.timestamp})}),Ah(19,"async"),Ah(20,"async"),gn()()()()),2&r&&(zn(5),Vn("selectedtimestamp",gg(6,7,c.offlineViewController.selectedTimestamp$))("streams",gg(7,9,c.offlineViewController.loadedStreams$)),zn(8),Vn("streams",gg(14,11,c.offlineViewController.loadedStreams$))("selectedtimestamp",gg(15,13,c.offlineViewController.selectedTimestamp$))("videos",gg(16,15,c.offlineViewController.loadedVideos$)),zn(5),Vn("selectedtimestamp",gg(19,17,c.offlineViewController.selectedTimestamp$))("streams",gg(20,19,c.offlineViewController.loadedStreams$)))},dependencies:[XY,cZ,hZ,pZ,r1],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();function gZ(n,t){1&n&&(on(0,"div",6)(1,"div",7),$n(2,"mat-spinner"),gn()())}let _Z=(()=>{class n{constructor(e){this.globalFlags=e}static#e=this.\u0275fac=function(r){return new(r||n)(Be(Rz))};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-main-view"]],decls:9,vars:1,consts:[[1,"component-container-vertical"],[1,"component-container-vertical-height-param",2,"--height","80px"],["color","primary"],[2,"width","100%","height","100%","position","relative"],["style","\n                    top: 0px; \n                    left: 0px; \n                    width: 100%; \n                    height: 100%; \n                    position: absolute; \n                    display: flex; \n                    z-index: 2; \n                    background-color: grey;\n                    opacity: 0.9;",4,"ngIf"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute","display","flex","z-index","1"],[2,"top","0px","left","0px","width","100%","height","100%","position","absolute","display","flex","z-index","2","background-color","grey","opacity","0.9"],[1,"component-container-vertical","center-element",2,"z-index","3"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1),$n(2,"mat-toolbar",2),gn(),on(3,"div",0)(4,"div",3),Oi(5,gZ,3,0,"div",4),on(6,"div",5)(7,"div",0),$n(8,"app-offline-view"),gn()()()()()),2&r&&(zn(5),Vn("ngIf",c.globalFlags.loadingFlag))},dependencies:[mZ,_7,Jq,cv],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})(),vZ=(()=>{class n{constructor(){this.title="ARGUS2"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"main-wrapper"]],template:function(r,c){1&r&&(on(0,"div",0),$n(1,"app-main-view"),gn())},dependencies:[_Z],styles:[".main-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}"]})}return n})();class ab{constructor(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}observe(t){return _5(this,t)}do(t,e,r){const{kind:c,value:h,error:y}=this;return"N"===c?t?.(h):"E"===c?e?.(y):r?.()}accept(t,e,r){var c;return rn(null===(c=t)||void 0===c?void 0:c.next)?this.observe(t):this.do(t,e,r)}toObservable(){const{kind:t,value:e,error:r}=this,c="N"===t?ye(e):"E"===t?$t(()=>r):"C"===t?ua:0;if(!c)throw new TypeError(`Unexpected notification kind ${t}`);return c}static createNext(t){return new ab("N",t)}static createError(t){return new ab("E",void 0,t)}static createComplete(){return ab.completeNotification}}function _5(n,t){var e,r,c;const{kind:h,value:y,error:T}=n;if("string"!=typeof h)throw new TypeError('Invalid notification, missing "kind"');"N"===h?null===(e=t.next)||void 0===e||e.call(t,y):"E"===h?null===(r=t.error)||void 0===r||r.call(t,T):null===(c=t.complete)||void 0===c||c.call(t)}function v5(n,t,e,r){return qr((c,h)=>{let y;t&&"function"!=typeof t?({duration:e,element:y,connector:r}=t):y=t;const T=new Map,L=Le=>{T.forEach(Le),Le(h)},z=Le=>L(st=>st.error(Le));let X=0,ie=!1;const pe=new lm(h,Le=>{try{const st=n(Le);let kt=T.get(st);if(!kt){T.set(st,kt=r?r():new Ci);const Kt=function Te(Le,st){const kt=new pr(Kt=>{X++;const Dn=st.subscribe(Kt);return()=>{Dn.unsubscribe(),0==--X&&ie&&pe.unsubscribe()}});return kt.key=Le,kt}(st,kt);if(h.next(Kt),e){const Dn=mr(kt,()=>{kt.complete(),Dn?.unsubscribe()},void 0,void 0,()=>T.delete(st));pe.add(xs(e(Kt)).subscribe(Dn))}}kt.next(y?y(Le):Le)}catch(st){z(st)}},()=>L(Le=>Le.complete()),z,()=>T.clear(),()=>(ie=!0,0===X));c.subscribe(pe)})}function y5(n,t){return t?e=>e.pipe(y5((r,c)=>xs(n(r,c)).pipe(ri((h,y)=>t(r,h,c,y))))):qr((e,r)=>{let c=0,h=null,y=!1;e.subscribe(mr(r,T=>{h||(h=mr(r,void 0,()=>{h=null,y&&r.complete()}),xs(n(T,c++)).subscribe(h))},()=>{y=!0,!h&&r.complete()}))})}ab.completeNotification=new ab("C");const xZ={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},_2="__@ngrx/effects_create__";function wE(n,t={}){const e=t.functional?n:n(),r={...xZ,...t};return Object.defineProperty(e,_2,{value:r}),e}function x5(n){return Object.getPrototypeOf(n)}function t3(n){return"function"==typeof n}function n3(n){return n.filter(t3)}function SZ(n,t,e){const r=x5(n).constructor.name,c=function b5(n){return function MZ(n){return Object.getOwnPropertyNames(n).filter(r=>!(!n[r]||!n[r].hasOwnProperty(_2))&&n[r][_2].hasOwnProperty("dispatch")).map(r=>({propertyName:r,...n[r][_2]}))}(n)}(n).map(({propertyName:h,dispatch:y,useEffectsErrorHandler:T})=>{const L="function"==typeof n[h]?n[h]():n[h],z=T?e(L,t):L;return!1===y?z.pipe(GV()):z.pipe(function yZ(){return qr((n,t)=>{n.subscribe(mr(t,e=>{t.next(ab.createNext(e))},()=>{t.next(ab.createComplete()),t.complete()},e=>{t.next(ab.createError(e)),t.complete()}))})}()).pipe(ri(ie=>({effect:n[h],notification:ie,propertyName:h,sourceName:r,sourceInstance:n})))});return tc(...c)}const EZ=10;function M5(n,t,e=EZ){return n.pipe(Vr(r=>(t&&t.handleError(r),e<=1?n:M5(n,t,e-1))))}let CZ=(()=>{class n extends pr{constructor(e){super(),e&&(this.source=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}}return n.\u0275fac=function(e){return new(e||n)(ut(yA))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SE(...n){return xn(t=>n.some(e=>"string"==typeof e?e===t.type:e.type===t.type))}const w5=new jt("@ngrx/effects Internal Root Guard"),v2=new jt("@ngrx/effects User Provided Effects"),r3=new jt("@ngrx/effects Internal Root Effects"),S5=new jt("@ngrx/effects Internal Root Effects Instances"),E5=new jt("@ngrx/effects Internal Feature Effects"),C5=new jt("@ngrx/effects Internal Feature Effects Instance Groups"),TZ=new jt("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>M5}),T5="@ngrx/effects/init";vv(T5);const kZ="ngrxOnIdentifyEffects",NZ="ngrxOnInitEffects";function UZ(n){return s3(n,NZ)}function s3(n,t){return n&&t in n&&"function"==typeof n[t]}let o3=(()=>{class n extends Ci{constructor(e,r){super(),this.errorHandler=e,this.effectsErrorHandler=r}addEffects(e){this.next(e)}toActions(){return this.pipe(v5(e=>function wZ(n){return"Object"!==n.constructor.name&&"Function"!==n.constructor.name}(e)?x5(e):e),ns(e=>e.pipe(v5(BZ))),ns(e=>{const r=e.pipe(y5(h=>function VZ(n,t){return e=>{const r=SZ(e,n,t);return function FZ(n){return s3(n,"ngrxOnRunEffects")}(e)?e.ngrxOnRunEffects(r):r}}(this.errorHandler,this.effectsErrorHandler)(h)),ri(h=>(function DZ(n,t){if("N"===n.notification.kind){const e=n.notification.value;!function RZ(n){return"function"!=typeof n&&n&&n.type&&"string"==typeof n.type}(e)&&t.handleError(new Error(`Effect ${function IZ({propertyName:n,sourceInstance:t,sourceName:e}){const r="function"==typeof t[n];return`"${e}.${String(n)}${r?"()":""}"`}(n)} dispatched an invalid action: ${function PZ(n){try{return JSON.stringify(n)}catch{return n}}(e)}`))}}(h,this.errorHandler),h.notification)),xn(h=>"N"===h.kind&&null!=h.value),function bZ(){return qr((n,t)=>{n.subscribe(mr(t,e=>_5(e,t)))})}());return tc(r,e.pipe(dn(1),xn(UZ),ri(h=>h.ngrxOnInitEffects())))}))}}return n.\u0275fac=function(e){return new(e||n)(ut(Uc),ut(TZ))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BZ(n){return function LZ(n){return s3(n,kZ)}(n)?n.ngrxOnIdentifyEffects():""}let a3=(()=>{class n{constructor(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(ut(o3),ut(ob))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A5=(()=>{class n{constructor(e,r,c,h,y,T,L){this.sources=e,r.start();for(const z of h)e.addEffects(z);c.dispatch({type:T5})}addEffects(e){this.sources.addEffects(e)}}return n.\u0275fac=function(e){return new(e||n)(ut(o3),ut(a3),ut(ob),ut(S5),ut(f2,8),ut(JF,8),ut(w5,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),zZ=(()=>{class n{constructor(e,r,c,h){const y=r.flat();for(const T of y)e.addEffects(T)}}return n.\u0275fac=function(e){return new(e||n)(ut(A5),ut(C5),ut(f2,8),ut(JF,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})(),HZ=(()=>{class n{static forFeature(...e){const r=e.flat(),c=n3(r);return{ngModule:zZ,providers:[c,{provide:E5,multi:!0,useValue:r},{provide:v2,multi:!0,useValue:[]},{provide:C5,multi:!0,useFactory:D5,deps:[E5,v2]}]}}static forRoot(...e){const r=e.flat(),c=n3(r);return{ngModule:A5,providers:[c,{provide:r3,useValue:[r]},{provide:w5,useFactory:GZ},{provide:v2,multi:!0,useValue:[]},{provide:S5,useFactory:D5,deps:[r3,v2]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=pi({}),n})();function D5(n,t){const e=[];for(const r of n)e.push(...r);for(const r of t)e.push(...r);return e.map(r=>t3(r)?ei(r):r)}function GZ(){const n=ei(a3,{optional:!0,skipSelf:!0}),t=ei(r3,{self:!0});if((1!==t.length||0!==t[0].length)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const WZ=function LY(n,...t){const e=new Map;for(const r of t)for(const c of r.types){const h=e.get(c);e.set(c,h?(T,L)=>r.reducer(h(T,L),L):r.reducer)}return function(r=n,c){const h=e.get(c.type);return h?h(r,c):r}}({loadedSession:null,streams:{},videos:{},selectedTimestamp:{}},p2(m2,(n,t)=>({...n,loadedSession:t.session})),p2(f5,(n,t)=>({...n,streams:t.streams})),p2(h5,(n,t)=>({...n,videos:t.videos})),p2(m5,(n,t)=>({...n,selectedTimestamp:t.timestamps}))),{isArray:jZ}=Array;class XZ{constructor(t=[],e,r){this.sessions=t,this.store=e,this.dialog=r,this.filteredSessions=[],this.filteredSessions=this.sessions}filter_sessions_by_keyword(t){this.filteredSessions=this.sessions.filter(e=>e.name.includes(t))}on_session_selected(t){this.store.dispatch(m2({session:t})),this.dialog.closeAll()}}class YZ{constructor(){this.currentKeyWord=""}}let ZZ=(()=>{class n{constructor(){this.textChanged=new Ai,this.keyworkdSearchBarController=new YZ}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-keyword-search-bar"]],outputs:{textChanged:"textchanged"},decls:7,vars:1,consts:[[1,"component-container-horizontal"],[2,"display","flex","align-items","center","justify-content","center"],["matInput","","placeholder","Session Name","value","","name","sessionkeyword",3,"ngModel","ngModelChange","input"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",0)(2,"form",1)(3,"mat-form-field")(4,"mat-label"),m(5,"Session Name"),gn(),on(6,"input",2),Ei("ngModelChange",function(y){return c.keyworkdSearchBarController.currentKeyWord=y})("input",function(){return c.textChanged.emit(c.keyworkdSearchBarController.currentKeyWord)}),gn()()()()()),2&r&&(zn(6),Vn("ngModel",c.keyworkdSearchBarController.currentKeyWord))},dependencies:[oz,l2,pz,iF,RI,o4,jO,nF,yE],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();const KZ=["*"];let JZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-scrollable-container-vertical"]],ngContentSelectors:KZ,decls:5,vars:0,consts:[[1,"component-container-vertical"],[1,"scrollable-component-container"],[1,"scrollable-component"],[2,"width","100%","height","100%"]],template:function(r,c){1&r&&(es(),on(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Rr(4),gn()()()())},styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}.scrollable-component-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.scrollable-component[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow-y:auto}"]})}return n})(),QZ=(()=>{class n{constructor(){this.session={},this.onSessionLoadClick=new Ai}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-result-card"]],inputs:{session:"session"},outputs:{onSessionLoadClick:"onsessionloadclick"},decls:24,vars:2,consts:[[1,"component-container-horizontal","center-element"],[1,"component-container-vertical-width-height-param","card",2,"--width","92%","--height","92%"],[1,"component-container-horizontal-height-param",2,"--height","60px","justify-content","space-between"],[1,"component-container-horizontal",2,"margin","0px 20px 0px 20px"],[1,"component-container-horizontal-width-param",2,"--width","100px","align-items","center"],[1,"component-container-horizontal","text-overflow",2,"align-items","center"],[1,"component-container-horizontal-width-param",2,"--width","80px","align-items","center"],[1,"component-container-horizontal"],[1,"component-container-horizontal-height-param",2,"--height","60px","justify-content","flex-end"],[1,"component-container-horizontal-width-param","center-element",2,"--width","200px"],["mat-raised-button","","color","primary",2,"width","150px",3,"click"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1")(6,"b"),m(7,"Name:"),gn()()(),on(8,"div",5)(9,"h1"),m(10),gn()()(),on(11,"div",3)(12,"div",6)(13,"h1")(14,"b"),m(15,"Date:"),gn()()(),on(16,"div",5)(17,"h1"),m(18),gn()()()(),$n(19,"div",7),on(20,"div",8)(21,"div",9)(22,"button",10),Ei("click",function(){return c.onSessionLoadClick.emit(c.session)}),m(23,"Load"),gn()()()()()),2&r&&(zn(10),b(c.session.name),zn(8),b(c.session["first-entry-time"]))},dependencies:[lV],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})();function eK(n,t){if(1&n){const e=wl();on(0,"div",3)(1,"app-result-card",4),Ei("onsessionloadclick",function(c){return Oa(e),oc(ps().sessionSelected.emit(c))}),gn()()}if(2&n){const e=t.$implicit;zn(1),Vn("session",e)}}let tK=(()=>{class n{constructor(){this.sessions=[],this.sessionSelected=new Ai}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-results-list"]],inputs:{sessions:"sessions"},outputs:{sessionSelected:"sessionselected"},decls:4,vars:1,consts:[[1,"component-container-vertical"],[2,"display","flex","flex-direction","column"],["class","component-container-horizontal-height-param","style","--height: 300px",4,"ngFor","ngForOf"],[1,"component-container-horizontal-height-param",2,"--height","300px"],[3,"session","onsessionloadclick"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"app-scrollable-container-vertical")(2,"div",1),Oi(3,eK,2,1,"div",2),gn()()()),2&r&&(zn(3),Vn("ngForOf",c.sessions))},dependencies:[JZ,t1,QZ],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})}return n})(),nK=(()=>{class n{constructor(e,r,c){this.dialog=e,this.data=r,this.store=c,this.sessionPickerDialogController=new XZ(this.data.sessions,this.store,this.dialog)}static#e=this.\u0275fac=function(r){return new(r||n)(Be(AF),Be(BV),Be(ob))};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-session-picker-dialog"]],decls:8,vars:1,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal-height-param",2,"--height","100px"],[3,"textchanged"],[1,"component-container-horizontal-height-param",2,"--height","300px"],[3,"sessions","sessionselected"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"app-keyword-search-bar",2),Ei("textchanged",function(y){return c.sessionPickerDialogController.filter_sessions_by_keyword(y)}),gn()(),$n(3,"mat-divider")(4,"div",3)(5,"mat-divider"),on(6,"div",0)(7,"app-results-list",4),Ei("sessionselected",function(y){return c.sessionPickerDialogController.on_session_selected(y)}),gn()()()),2&r&&(zn(7),Vn("sessions",c.sessionPickerDialogController.filteredSessions))},dependencies:[RF,ZZ,tK],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]})}return n})();class iK{}let rK=(()=>{class n{constructor(){this.sessionAnnotationController=new iK}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ri({type:n,selectors:[["app-session-annotation-dialog"]],decls:20,vars:0,consts:[[1,"component-container-vertical"],[1,"component-container-horizontal-height-param",2,"--height","80px"],[1,"component-container-horizontal-width-param","center-secondary-axis",2,"--width","300px","margin","0px 15px 0px 15px"],[1,"component-container-horizontal"],[2,"display","flex"],[1,"component-container-horizontal","center-element"],["matInput","","placeholder","The user in this session was cooking..."],[1,"component-container-horizontal-height-param",2,"--height","100px","justify-content","flex-end"],[1,"component-container-horizontal-width-param","center-element",2,"--width","120px","margin","0px 15px 0px 15px"],["mat-raised-button","","color","primary"]],template:function(r,c){1&r&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m(4,"Session Name:"),gn()()(),$n(5,"mat-divider"),on(6,"div",3)(7,"form",4)(8,"div",5)(9,"mat-form-field")(10,"mat-label"),m(11,"Annotation"),gn(),$n(12,"textarea",6),gn()()()(),on(13,"div",7)(14,"div",8)(15,"button",9),m(16,"Cancel"),gn()(),on(17,"div",8)(18,"button",9),m(19,"Save"),gn()()()())},dependencies:[lV,oz,l2,RF,pz,iF,jO,yE],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]})}return n})(),sK=(()=>{class n{constructor(e){this.dialog=e}openDialog(e,r){switch(e){case"session-picker-dialog":this.openSessionPickerDialog(r);break;case"session-annotation-dialog":this.openSessionAnnotationDialog(r)}}openSessionPickerDialog(e){this.dialog.open(nK,{panelClass:"custom-dialog-container",width:"1000px",height:"800px",data:e})}openSessionAnnotationDialog(e){this.dialog.open(rK,{panelClass:"custom-dialog-container",width:"1000px",height:"800px",data:e})}static#e=this.\u0275fac=function(r){return new(r||n)(ut(AF))};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function R5(n,t,e){if(isNaN(t))return n;var r,L,z,X,ie,pe,c=n._root,h={data:e},y=n._x0,T=n._x1;if(!c)return n._root=h,n;for(;c.length;)if((X=t>=(L=(y+T)/2))?y=L:T=L,r=c,!(c=c[ie=+X]))return r[ie]=h,n;if(t===(z=+n._x.call(null,c.data)))return h.next=c,r?r[ie]=h:n._root=h,n;do{r=r?r[ie]=new Array(2):n._root=new Array(2),(X=t>=(L=(y+T)/2))?y=L:T=L}while((ie=+X)==(pe=+(z>=L)));return r[pe]=c,r[ie]=h,n}function cb(n,t,e){this.node=n,this.x0=t,this.x1=e}function vK(n){return n[0]}function I5(n,t){var e=new c3(t??vK,NaN,NaN);return null==n?e:e.addAll(n)}function c3(n,t,e){this._x=n,this._x0=t,this._x1=e,this._root=void 0}function P5(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var Lf=I5.prototype=c3.prototype;Lf.copy=function(){var e,r,n=new c3(this._x,this._x0,this._x1),t=this._root;if(!t)return n;if(!t.length)return n._root=P5(t),n;for(e=[{source:t,target:n._root=new Array(2)}];t=e.pop();)for(var c=0;c<2;++c)(r=t.source[c])&&(r.length?e.push({source:r,target:t.target[c]=new Array(2)}):t.target[c]=P5(r));return n},Lf.add=function oK(n){const t=+this._x.call(null,n);return R5(this.cover(t),t,n)},Lf.addAll=function aK(n){Array.isArray(n)||(n=Array.from(n));const t=n.length,e=new Float64Array(t);let r=1/0,c=-1/0;for(let y,h=0;h<t;++h)isNaN(y=+this._x.call(null,n[h]))||(e[h]=y,y<r&&(r=y),y>c&&(c=y));if(r>c)return this;this.cover(r).cover(c);for(let h=0;h<t;++h)R5(this,e[h],n[h]);return this},Lf.cover=function cK(n){if(isNaN(n=+n))return this;var t=this._x0,e=this._x1;if(isNaN(t))e=(t=Math.floor(n))+1;else{for(var h,y,r=e-t||1,c=this._root;t>n||n>=e;)switch(y=+(n<t),h=new Array(2),h[y]=c,c=h,r*=2,y){case 0:e=t+r;break;case 1:t=e-r}this._root&&this._root.length&&(this._root=c)}return this._x0=t,this._x1=e,this},Lf.data=function lK(){var n=[];return this.visit(function(t){if(!t.length)do{n.push(t.data)}while(t=t.next)}),n},Lf.extent=function uK(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},Lf.find=function dK(n,t){var e,c,h,z,X,r=this._x0,y=this._x1,T=[],L=this._root;for(L&&T.push(new cb(L,r,y)),null==t?t=1/0:(r=n-t,y=n+t);z=T.pop();)if(!(!(L=z.node)||(c=z.x0)>y||(h=z.x1)<r))if(L.length){var ie=(c+h)/2;T.push(new cb(L[1],ie,h),new cb(L[0],c,ie)),(X=+(n>=ie))&&(z=T[T.length-1],T[T.length-1]=T[T.length-1-X],T[T.length-1-X]=z)}else{var pe=Math.abs(n-+this._x.call(null,L.data));pe<t&&(t=pe,r=n-pe,y=n+pe,e=L.data)}return e},Lf.remove=function hK(n){if(isNaN(L=+this._x.call(null,n)))return this;var t,r,c,h,L,z,X,ie,pe,e=this._root,y=this._x0,T=this._x1;if(!e)return this;if(e.length)for(;;){if((X=L>=(z=(y+T)/2))?y=z:T=z,t=e,!(e=e[ie=+X]))return this;if(!e.length)break;t[ie+1&1]&&(r=t,pe=ie)}for(;e.data!==n;)if(c=e,!(e=e.next))return this;return(h=e.next)&&delete e.next,c?(h?c.next=h:delete c.next,this):t?(h?t[ie]=h:delete t[ie],(e=t[0]||t[1])&&e===(t[1]||t[0])&&!e.length&&(r?r[pe]=e:this._root=e),this):(this._root=h,this)},Lf.removeAll=function fK(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this},Lf.root=function pK(){return this._root},Lf.size=function mK(){var n=0;return this.visit(function(t){if(!t.length)do{++n}while(t=t.next)}),n},Lf.visit=function gK(n){var e,c,h,y,t=[],r=this._root;for(r&&t.push(new cb(r,this._x0,this._x1));e=t.pop();)if(!n(r=e.node,h=e.x0,y=e.x1)&&r.length){var T=(h+y)/2;(c=r[1])&&t.push(new cb(c,T,y)),(c=r[0])&&t.push(new cb(c,h,T))}return this},Lf.visitAfter=function _K(n){var r,t=[],e=[];for(this._root&&t.push(new cb(this._root,this._x0,this._x1));r=t.pop();){var c=r.node;if(c.length){var h,y=r.x0,T=r.x1,L=(y+T)/2;(h=c[0])&&t.push(new cb(h,y,L)),(h=c[1])&&t.push(new cb(h,L,T))}e.push(r)}for(;r=e.pop();)n(r.node,r.x0,r.x1);return this},Lf.x=function yK(n){return arguments.length?(this._x=n,this):this._x};let bK=(()=>{class n{constructor(){this.timestampsIndex={}}create_stream_timestamp_index(e,r=[]){const c=I5().x(h=>h);c.addAll(r),this.timestampsIndex[e]=c}get_closest_stream_timestamp(e,r){return null===r?null:this.timestampsIndex[e].find(r)}get_closest_timestamps(e){const r={};for(const c in this.timestampsIndex)r[c]=this.get_closest_stream_timestamp(c,e);return r.video=e,r}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const l3="http://dashboardptg.vida-nyu.org:7890",y2_staticPath=`${l3}/recordings/static`,y2_recordingsPath=`${l3}/recordings`,y2_rootPath=`${l3}`;let xK=(()=>{class n{constructor(e){this.httpClient=e}get_available_sessions(e){const r=`${y2_recordingsPath}?info=true`,c=new _v({Authorization:`Bearer ${e} `});return this.httpClient.get(r,{headers:c}).pipe(ri(h=>h))}get_static_recording_file(e,r){return this.httpClient.get(`${y2_staticPath}/${e}/${r}.json`).pipe(ri(h=>h))}get_static_video_path(e,r){return`${y2_staticPath}/${e}/${r}.mp4`}static#e=this.\u0275fac=function(r){return new(r||n)(ut(bE))};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MK=(()=>{class n{constructor(e){this.httpClient=e}get_auth_token(){const e=`${y2_rootPath}/token`,r=new FormData;return r.append("username","ptg"),r.append("password","ptg"),this.httpClient.post(e,r).pipe(ri(c=>c))}static#e=this.\u0275fac=function(r){return new(r||n)(ut(bE))};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wK=(()=>{class n{constructor(e,r,c,h,y,T,L){this.actions$=e,this.store=r,this.dialogManagerService=c,this.timestampManagerService=h,this.globalFlagsService=y,this.offlineAPI=T,this.authAPI=L,this.openQueryDialog=wE(()=>this.actions$.pipe(SE(l5),ns(z=>(this.globalFlagsService.add_loading_flag(),this.authAPI.get_auth_token())),ns(z=>this.offlineAPI.get_available_sessions(z.access_token)),ri(z=>{this.globalFlagsService.remove_loading_flag(),this.dialogManagerService.openDialog("session-picker-dialog",{sessions:z})})),{dispatch:!1}),this.openSessionAnnotationDialog=wE(()=>this.actions$.pipe(SE(u5),ri(()=>{this.dialogManagerService.openDialog("session-annotation-dialog")})),{dispatch:!1}),this.loadSessionVideos=wE(()=>this.actions$.pipe(SE(m2),ri(z=>{this.globalFlagsService.add_loading_flag();const X={};return BY.forEach(ie=>{X[ie]=this.offlineAPI.get_static_video_path(z.session.name,ie)}),this.globalFlagsService.remove_loading_flag(),h5({videos:X})})),{dispatch:!0}),this.loadSessionFiles=wE(()=>this.actions$.pipe(SE(m2),pn(z=>{this.globalFlagsService.add_loading_flag();const X=[];return g2.forEach(pe=>{X.push(this.offlineAPI.get_static_recording_file(z.session.name,pe))}),function qZ(...n){const t=zf(n),e=function $Z(n){return 1===n.length&&jZ(n[0])?n[0]:n}(n);return e.length?new pr(r=>{let c=e.map(()=>[]),h=e.map(()=>!1);r.add(()=>{c=h=null});for(let y=0;!r.closed&&y<e.length;y++)xs(e[y]).subscribe(mr(r,T=>{if(c[y].push(T),c.every(L=>L.length)){const L=c.map(z=>z.shift());r.next(t?t(...L):L),c.some((z,X)=>!z.length&&h[X])&&r.complete()}},()=>{h[y]=!0,!c[y].length&&r.complete()}));return()=>{c=h=null}}):ua}(X)}),ri(z=>{const X={};return g2.forEach((ie,pe)=>{X[ie]=z[pe]}),this.globalFlagsService.remove_loading_flag(),d5({streams:X})})),{dispatch:!0}),this.parseSessionStreamsTimestamp=wE(()=>this.actions$.pipe(SE(d5),Iz(this.store.select("offlineViewState")),ri(z=>{const X={},ie=parseInt(z[1].loadedSession["first-entry"].split("-")[0]);return g2.forEach((pe,Te)=>{const Le=yv.parse_stream_timestamp(pe,z[0].streams[pe],ie);X[pe]=Le}),X}),ri(z=>{for(const X in z){if("voxelized-pointcloud"===X)continue;const ie=z[X].map(pe=>pe.timestamp);this.timestampManagerService.create_stream_timestamp_index(X,ie)}return f5({streams:z})})),{dispatch:!0}),this.selectClosestTimestamps=wE(()=>this.actions$.pipe(SE(p5),ri(z=>{const X=this.timestampManagerService.get_closest_timestamps(z.timestamp);return m5({source:z.source,timestamps:X})})),{dispatch:!0})}static#e=this.\u0275fac=function(r){return new(r||n)(ut(CZ),ut(ob),ut(sK),ut(bK),ut(Rz),ut(xK),ut(MK))};static#t=this.\u0275prov=Tn({token:n,factory:n.\u0275fac})}return n})(),SK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n});static#n=this.\u0275inj=pi({imports:[kF,Dz,Or,v9]})}return n})();const EK={offlineViewState:WZ};let CK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=mi({type:n,bootstrap:[vZ]});static#n=this.\u0275inj=pi({imports:[Or,SK,cM,r6,rW,FX,kY.forRoot(EK),HZ.forRoot([wK])]})}return n})();vg().bootstrapModule(CK).catch(n=>console.error(n))},908:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(be,He,ze,ct){void 0===ct&&(ct=ze);var Mt=Object.getOwnPropertyDescriptor(He,ze);(!Mt||("get"in Mt?!He.__esModule:Mt.writable||Mt.configurable))&&(Mt={enumerable:!0,get:function(){return He[ze]}}),Object.defineProperty(be,ct,Mt)}:function(be,He,ze,ct){void 0===ct&&(ct=ze),be[ct]=He[ze]}),Un=this&&this.__setModuleDefault||(Object.create?function(be,He){Object.defineProperty(be,"default",{enumerable:!0,value:He})}:function(be,He){be.default=He}),Pn=this&&this.__importStar||function(be){if(be&&be.__esModule)return be;var He={};if(null!=be)for(var ze in be)"default"!==ze&&Object.prototype.hasOwnProperty.call(be,ze)&&rn(He,be,ze);return Un(He,be),He},Qt=this&&this.__values||function(be){var He="function"==typeof Symbol&&Symbol.iterator,ze=He&&be[He],ct=0;if(ze)return ze.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&ct>=be.length&&(be=void 0),{value:be&&be[ct++],done:!be}}};throw new TypeError(He?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=this&&this.__read||function(be,He){var ze="function"==typeof Symbol&&be[Symbol.iterator];if(!ze)return be;var Mt,yt,ct=ze.call(be),At=[];try{for(;(void 0===He||He-- >0)&&!(Mt=ct.next()).done;)At.push(Mt.value)}catch(mn){yt={error:mn}}finally{try{Mt&&!Mt.done&&(ze=ct.return)&&ze.call(ct)}finally{if(yt)throw yt.error}}return At};Object.defineProperty(re,"__esModule",{value:!0}),re.SceneManager=void 0;var Je=Pn(Rn(712)),Zt=Rn(106),Ue=Rn(352),Ie=function(){function be(He,ze){this.scene=He,this.callbacks=ze,this.latestCallbackIndex=0,this.sceneHighlights=new Zt.SceneHighlights,this.sceneStyleManager=new Ue.SceneStyleManager}return be.prototype.highlight_object=function(He,ze){this.sceneHighlights.highlight_object(He,ze,this.scene)},be.prototype.clear_highlights=function(){this.sceneHighlights.clear_current_highlight(this.scene)},be.prototype.fire_callback=function(He,ze,ct,Mt,At){if(He in this.callbacks&&this.latestCallbackIndex!==Mt){this.latestCallbackIndex=Mt;var yt=this.dataset.get_object_meta(ze,ct,Mt);this.callbacks[He](Mt,ct,At,yt)}},be.prototype.get_interactive_layers=function(){var He,ze;if(this.dataset){var ct=[];try{for(var Mt=Qt(Object.entries(this.dataset.pointClouds)),At=Mt.next();!At.done;At=Mt.next()){var Kn=nn(At.value,2)[1];Kn.interactive&&ct.push(Kn.name)}}catch($r){He={error:$r}}finally{try{At&&!At.done&&(ze=Mt.return)&&ze.call(Mt)}finally{if(He)throw He.error}}return ct}return[]},be.prototype.hide_object=function(He,ze){var ct=this.scene.getObjectByName(He);ct&&(ct.visible=ze)},be.prototype.set_style=function(He,ze,ct){this.sceneStyleManager.change_style(He,ze,ct,this.scene)},be.prototype.set_dataset=function(He){this.dataset=He},be.prototype.update=function(){var He,ze,ct,Mt,At,yt;if(this.dataset){try{for(var mn=Qt(Object.entries(this.dataset.pointClouds)),Kn=mn.next();!Kn.done;Kn=mn.next()){var $r=nn(Kn.value,2),po=$r[0],Mc=$r[1].get_renderables();this.scene.add(Mc);var Jc=new Je.BoxHelper(Mc,"#000000");Jc.name="".concat(po,"-boundingbox"),this.dataset.boundingBoxes["".concat(po,"-boundingbox")]=Jc,this.scene.add(Jc)}}catch(Mo){He={error:Mo}}finally{try{Kn&&!Kn.done&&(ze=mn.return)&&ze.call(mn)}finally{if(He)throw He.error}}try{for(var Bs=Qt(Object.entries(this.dataset.lineSets)),ou=Bs.next();!ou.done;ou=Bs.next()){var cm=nn(ou.value,2);po=cm[0],Mc=cm[1].get_renderables(),this.scene.add(Mc)}}catch(Mo){ct={error:Mo}}finally{try{ou&&!ou.done&&(Mt=Bs.return)&&Mt.call(Bs)}finally{if(ct)throw ct.error}}try{for(var au=Qt(Object.entries(this.dataset.heatmaps)),Gu=au.next();!Gu.done;Gu=au.next()){var Lh=nn(Gu.value,2);po=Lh[0],Mc=Lh[1].get_renderables(),this.scene.add(Mc)}}catch(Mo){At={error:Mo}}finally{try{Gu&&!Gu.done&&(yt=au.return)&&yt.call(au)}finally{if(At)throw At.error}}}},be}();re.SceneManager=Ie},352:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.SceneStyleManager=void 0;var Rn=function(){function rn(){}return rn.prototype.change_style=function(Un,Pn,Qt,nn){var Je=nn.getObjectByName(Un);"opacity"!==Pn?"size"!==Pn||"Points"===Je?.type&&this.change_pointcloud_size(Je,Qt):"Points"===Je?.type&&this.change_pointcloud_opacity(Je,Qt)},rn.prototype.change_pointcloud_size=function(Un,Pn){Un.material.size=Pn},rn.prototype.change_pointcloud_opacity=function(Un,Pn){Un.material.opacity=Pn},rn}();re.SceneStyleManager=Rn},8:(Fr,re,Rn)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.SceneViewer=void 0;var rn=Rn(337),Un=Rn(401),Pn=function(){function Qt(nn,Je){void 0===Je&&(Je={}),this.containerElement=nn,this.panelManager=new Un.PanelManager(this.containerElement),this.panelManager.create_panels(),this.scene=new rn.Scene(this.panelManager.sceneContainer,Je)}return Qt.prototype.highlight=function(nn,Je){this.scene.sceneManager.highlight_object(nn,Je)},Qt.prototype.clear_highlights=function(){this.scene.sceneManager.clear_highlights()},Qt.prototype.hide=function(nn,Je){this.scene.sceneManager.hide_object(nn,Je)},Qt.prototype.set_style=function(nn,Je,Zt){this.scene.sceneManager.set_style(nn,Je,Zt)},Qt.prototype.get_scene_object_names=function(){return this.scene.sceneManager.dataset.get_available_objects()},Qt.prototype.render=function(nn){this.scene.clear_scene(),this.scene.show(nn)},Qt}();re.SceneViewer=Pn},971:(Fr,re,Rn)=>{"use strict";re.qz=re.Sd=void 0;var Un=Rn(8);Object.defineProperty(re,"Sd",{enumerable:!0,get:function(){return Un.SceneViewer}});var Pn=Rn(109);Object.defineProperty(re,"qz",{enumerable:!0,get:function(){return Pn.Dataset}});Rn(656)},109:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(ze,ct,Mt,At){void 0===At&&(At=Mt);var yt=Object.getOwnPropertyDescriptor(ct,Mt);(!yt||("get"in yt?!ct.__esModule:yt.writable||yt.configurable))&&(yt={enumerable:!0,get:function(){return ct[Mt]}}),Object.defineProperty(ze,At,yt)}:function(ze,ct,Mt,At){void 0===At&&(At=Mt),ze[At]=ct[Mt]}),Un=this&&this.__setModuleDefault||(Object.create?function(ze,ct){Object.defineProperty(ze,"default",{enumerable:!0,value:ct})}:function(ze,ct){ze.default=ct}),Pn=this&&this.__importStar||function(ze){if(ze&&ze.__esModule)return ze;var ct={};if(null!=ze)for(var Mt in ze)"default"!==Mt&&Object.prototype.hasOwnProperty.call(ze,Mt)&&rn(ct,ze,Mt);return Un(ct,ze),ct},Qt=this&&this.__read||function(ze,ct){var Mt="function"==typeof Symbol&&ze[Symbol.iterator];if(!Mt)return ze;var yt,Kn,At=Mt.call(ze),mn=[];try{for(;(void 0===ct||ct-- >0)&&!(yt=At.next()).done;)mn.push(yt.value)}catch($r){Kn={error:$r}}finally{try{yt&&!yt.done&&(Mt=At.return)&&Mt.call(At)}finally{if(Kn)throw Kn.error}}return mn};Object.defineProperty(re,"__esModule",{value:!0}),re.Dataset=void 0;var nn=Rn(707),Je=Rn(903),Zt=Rn(515),Ue=Rn(485),Ie=Pn(Rn(898)),be=Rn(987),He=function(){function ze(){this.pointClouds={},this.heatmaps={},this.lineSets={},this.boundingBoxes={}}return ze.prototype.get_object_meta=function(ct,Mt,At){try{return this.pointClouds[Mt].meta[At]}catch{return{}}},ze.prototype.get_available_objects=function(){return{pointClouds:Object.values(this.pointClouds).map(function(Mt){return Mt.id}),heatmaps:Object.values(this.heatmaps).map(function(Mt){return Mt.id}),lineSets:Object.values(this.lineSets).map(function(Mt){return Mt.id}),boundingBoxes:Object.values(this.boundingBoxes).map(function(Mt){return Mt.name})}},ze.prototype.add_point_cloud=function(ct,Mt,At,yt,mn,Kn,$r){if(void 0===mn&&(mn=[]),void 0===Kn&&(Kn=!1),void 0===$r&&($r=!1),$r){var po=Zt.DataUtils.calculate_extents(Mt);this.voxelGrid=new nn.VoxelGrid(po[0],po[1],po[2])}var xo=new Je.PointCloud(ct,Mt,yt,At,mn);xo.set_interactivity(Kn),this.pointClouds[ct]=xo,this.voxelGrid.update_voxel_grid(ct,Mt)},ze.prototype.add_line_set=function(ct,Mt,At,yt){var mn=new be.LineSet(ct,Mt,At,yt);this.lineSets[ct]=mn},ze.prototype.add_heatmap=function(ct,Mt){var At=this.voxelGrid.get_point_cloud_voxel_cells(ct);if(0!==At.length){var yt=[],mn=[],Kn=[],$r=Qt([-1/0,1/0],2),po=$r[0],xo=$r[1];At.forEach(function(Bs){Bs.get_point_cloud_size(ct)>po&&(po=Bs.get_point_cloud_size(ct)),Bs.get_point_cloud_size(ct)<xo&&(xo=Bs.get_point_cloud_size(ct))});var Mc=Ie.scaleLinear().domain([xo,po]).range([.2,.7]);At.forEach(function(Bs){yt.push(Bs.get_voxel_cube()),mn.push(Mt),Kn.push(Mc(Bs.get_point_cloud_size(ct)))});var Jc=new Ue.VoxelCloud("".concat(ct,"-heatmap"),yt,mn,Kn);this.heatmaps["".concat(ct,"-heatmap")]=Jc}},ze}();re.Dataset=He},337:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(be,He,ze,ct){void 0===ct&&(ct=ze);var Mt=Object.getOwnPropertyDescriptor(He,ze);(!Mt||("get"in Mt?!He.__esModule:Mt.writable||Mt.configurable))&&(Mt={enumerable:!0,get:function(){return He[ze]}}),Object.defineProperty(be,ct,Mt)}:function(be,He,ze,ct){void 0===ct&&(ct=ze),be[ct]=He[ze]}),Un=this&&this.__setModuleDefault||(Object.create?function(be,He){Object.defineProperty(be,"default",{enumerable:!0,value:He})}:function(be,He){be.default=He}),Pn=this&&this.__importStar||function(be){if(be&&be.__esModule)return be;var He={};if(null!=be)for(var ze in be)"default"!==ze&&Object.prototype.hasOwnProperty.call(be,ze)&&rn(He,be,ze);return Un(He,be),He},Qt=this&&this.__read||function(be,He){var ze="function"==typeof Symbol&&be[Symbol.iterator];if(!ze)return be;var Mt,yt,ct=ze.call(be),At=[];try{for(;(void 0===He||He-- >0)&&!(Mt=ct.next()).done;)At.push(Mt.value)}catch(mn){yt={error:mn}}finally{try{Mt&&!Mt.done&&(ze=ct.return)&&ze.call(ct)}finally{if(yt)throw yt.error}}return At};Object.defineProperty(re,"__esModule",{value:!0}),re.Scene=void 0;var nn=Pn(Rn(712)),Je=Rn(379),Zt=Rn(908),Ue=Rn(997),Ie=function(){function be(He,ze){this.callbacks=ze,this.container=He;var ct=Qt([this.container.offsetWidth,this.container.offsetHeight],2),Mt=ct[0],At=ct[1];this.initialize_camera(Mt,At,[0,0,10]),this.initialize_scene(),this.initialize_renderer(Mt,At),this.initialize_orbit_controls(),this.initialize_raycaster(),this.sceneManager=new Zt.SceneManager(this.scene,this.callbacks)}return be.prototype.clear_scene=function(){for(;this.scene.children.length;)this.scene.remove(this.scene.children[0])},be.prototype.show=function(He){this.sceneManager.set_dataset(He),this.sceneManager.update(),this.render()},be.prototype.initialize_camera=function(He,ze,ct,Mt,At){void 0===Mt&&(Mt=.1),void 0===At&&(At=100);var mn=new nn.PerspectiveCamera(75,He/ze,Mt,At);mn.position.set(ct[0],ct[1],ct[2]),this.camera=mn},be.prototype.initialize_renderer=function(He,ze){var ct=new nn.WebGLRenderer;ct.setPixelRatio(window.devicePixelRatio),ct.setSize(He,ze),this.container.appendChild(ct.domElement),this.renderer=ct},be.prototype.initialize_scene=function(){var He=new nn.Scene;He.background=new nn.Color("white"),He.fog=new nn.Fog(328965,2e3,3500),this.scene=He},be.prototype.initialize_orbit_controls=function(){var He=new Je.OrbitControls(this.camera,this.renderer.domElement);this.orbitControls=He},be.prototype.initialize_raycaster=function(){this.rayCaster=new Ue.Raycaster(this.scene),this.rayCaster.set_scene_events(this.container)},be.prototype.render=function(){var He=this;requestAnimationFrame(function(){return He.render()}),this.orbitControls.update();var ze=this.rayCaster.get_mouse_intersected_point(this.camera,this.sceneManager.get_interactive_layers());ze.layerName?this.sceneManager.fire_callback("onHover",ze.intersect[0].object.type,ze.intersect[0].object.name,ze.intersect[0].index,ze.intersect[0].point.toArray()):this.sceneManager.fire_callback("onHover","","",-1,[]),this.renderer.render(this.scene,this.camera)},be}();re.Scene=Ie},106:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue);var be=Object.getOwnPropertyDescriptor(Zt,Ue);(!be||("get"in be?!Zt.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return Zt[Ue]}}),Object.defineProperty(Je,Ie,be)}:function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue),Je[Ie]=Zt[Ue]}),Un=this&&this.__setModuleDefault||(Object.create?function(Je,Zt){Object.defineProperty(Je,"default",{enumerable:!0,value:Zt})}:function(Je,Zt){Je.default=Zt}),Pn=this&&this.__importStar||function(Je){if(Je&&Je.__esModule)return Je;var Zt={};if(null!=Je)for(var Ue in Je)"default"!==Ue&&Object.prototype.hasOwnProperty.call(Je,Ue)&&rn(Zt,Je,Ue);return Un(Zt,Je),Zt};Object.defineProperty(re,"__esModule",{value:!0}),re.SceneHighlights=void 0;var Qt=Pn(Rn(712)),nn=function(){function Je(){this.points=[],this.lines=[],this.currentHighlights=[]}return Je.prototype.highlight_object=function(Zt,Ue,Ie){"point"!==Zt?"line"===Zt&&this.highlight_line(Ue,Ie):this.highlight_sphere(Zt,Ue,Ie)},Je.prototype.clear_current_highlight=function(Zt){this.currentHighlights.forEach(function(Ue){Zt.remove(Ue)})},Je.prototype.highlight_sphere=function(Zt,Ue,Ie){var be=new Qt.Color(.5,.5,.5),He=new Qt.SphereGeometry(.025,15,15),ze=new Qt.MeshBasicMaterial({color:be}),ct=new Qt.Vector3(Ue[0],Ue[1],Ue[2]),Mt=new Qt.Mesh(He,ze);Mt.position.copy(ct),this.currentHighlights.push(Mt),Ie.add(Mt)},Je.prototype.highlight_line=function(Zt,Ue){var Ie=new Qt.Vector3(Zt.origin[0],Zt.origin[1],Zt.origin[2]),be=new Qt.Vector3(Zt.destination[0],Zt.destination[1],Zt.destination[2]),He=new Qt.Color(.5,.5,.5),ze=new Qt.LineBasicMaterial({color:He,linewidth:2,transparent:!0,opacity:.5}),ct=(new Qt.BufferGeometry).setFromPoints([Ie,be]),Mt=new Qt.Line(ct,ze);this.currentHighlights.push(Mt),Ue.add(Mt)},Je}();re.SceneHighlights=nn},401:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.PanelManager=void 0;var Rn=function(){function rn(Un){this.container=Un}return rn.prototype.create_panels=function(){this.mainContainer=this.create_main_container(this.container),this.sceneContainer=this.create_scene_container(this.mainContainer)},rn.prototype.create_scene_container=function(Un){var Pn=document.createElement("div");return Pn.setAttribute("class","scene-container"),Pn.style.position="absolute",Pn.style.top="0px",Pn.style.left="0px",Pn.style.width="100%",Pn.style.height="100%",Un.append(Pn),Pn},rn.prototype.create_main_container=function(Un){var Pn=document.createElement("div");return Pn.setAttribute("class","main-container"),Pn.style.display="flex",Pn.style.position="relative",Pn.style.width="100%",Pn.style.height="100%",Un.append(Pn),Pn},rn}();re.PanelManager=Rn},997:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue);var be=Object.getOwnPropertyDescriptor(Zt,Ue);(!be||("get"in be?!Zt.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return Zt[Ue]}}),Object.defineProperty(Je,Ie,be)}:function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue),Je[Ie]=Zt[Ue]}),Un=this&&this.__setModuleDefault||(Object.create?function(Je,Zt){Object.defineProperty(Je,"default",{enumerable:!0,value:Zt})}:function(Je,Zt){Je.default=Zt}),Pn=this&&this.__importStar||function(Je){if(Je&&Je.__esModule)return Je;var Zt={};if(null!=Je)for(var Ue in Je)"default"!==Ue&&Object.prototype.hasOwnProperty.call(Je,Ue)&&rn(Zt,Je,Ue);return Un(Zt,Je),Zt};Object.defineProperty(re,"__esModule",{value:!0}),re.Raycaster=void 0;var Qt=Pn(Rn(712)),nn=function(){function Je(Zt){this.scene=Zt,this.pointer=new Qt.Vector2,this.rayCaster=new Qt.Raycaster,this.rayCaster.params.Points.threshold=.015}return Je.prototype.get_mouse_intersected_point=function(Zt,Ue){this.rayCaster.setFromCamera(this.pointer,Zt);for(var Ie=0;Ie<Ue.length;Ie++){var be=Ue[Ie],He=this.scene.getObjectByName(be);if(He&&He.visible){var ze=He?this.rayCaster.intersectObjects([He],!1):[];if(ze.length>0&&this.pointerEvent)return{mousePosition:{top:this.pointerEvent.offsetY,left:this.pointerEvent.offsetX},layerName:be,intersect:ze}}}return{mousePosition:{top:0,left:0},layerName:null,intersect:[]}},Je.prototype.on_pointer_move=function(Zt,Ue){this.pointerEvent=Zt;var Ie=Ue.getBoundingClientRect();this.pointer.x=(Zt.clientX-Ie.left)/(Ie.right-Ie.left)*2-1,this.pointer.y=-(Zt.clientY-Ie.top)/(Ie.bottom-Ie.top)*2+1},Je.prototype.set_scene_events=function(Zt){var Ue=this;Zt.addEventListener("pointermove",function(Ie){Ue.on_pointer_move(Ie,Zt)})},Je}();re.Raycaster=nn},987:function(Fr,re,Rn){"use strict";var Ue,rn=this&&this.__extends||(Ue=function(Ie,be){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(He,ze){He.__proto__=ze}||function(He,ze){for(var ct in ze)Object.prototype.hasOwnProperty.call(ze,ct)&&(He[ct]=ze[ct])})(Ie,be)},function(Ie,be){if("function"!=typeof be&&null!==be)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function He(){this.constructor=Ie}Ue(Ie,be),Ie.prototype=null===be?Object.create(be):(He.prototype=be.prototype,new He)}),Un=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Pn=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Qt=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&Un(Ie,Ue,be);return Pn(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.LineSet=void 0;var nn=Rn(194),Je=Qt(Rn(712)),Zt=function(Ue){function Ie(be,He,ze,ct){var Mt=Ue.call(this,be)||this;return Mt.name=be,Mt.lines=He,Mt.colors=ze,Mt.meta=ct,Mt}return rn(Ie,Ue),Ie.prototype.get_renderables=function(){var be=new Je.Group;be.name=this.name;for(var He=0;He<this.lines.length;He++){var ze=new Je.Vector3(this.lines[He].origin[0],this.lines[He].origin[1],this.lines[He].origin[2]),ct=new Je.Vector3(this.lines[He].destination[0],this.lines[He].destination[1],this.lines[He].destination[2]),Mt=new Je.Color(this.colors[He][0],this.colors[He][1],this.colors[He][2]),At=new Je.LineBasicMaterial({color:Mt,linewidth:2,transparent:!0,opacity:.5}),yt=(new Je.BufferGeometry).setFromPoints([ze,ct]),mn=new Je.Line(yt,At);be.add(mn)}return be},Ie}(nn.Renderable);re.LineSet=Zt},903:function(Fr,re,Rn){"use strict";var be,rn=this&&this.__extends||(be=function(He,ze){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,Mt){ct.__proto__=Mt}||function(ct,Mt){for(var At in Mt)Object.prototype.hasOwnProperty.call(Mt,At)&&(ct[At]=Mt[At])})(He,ze)},function(He,ze){if("function"!=typeof ze&&null!==ze)throw new TypeError("Class extends value "+String(ze)+" is not a constructor or null");function ct(){this.constructor=He}be(He,ze),He.prototype=null===ze?Object.create(ze):(ct.prototype=ze.prototype,new ct)}),Un=this&&this.__createBinding||(Object.create?function(be,He,ze,ct){void 0===ct&&(ct=ze);var Mt=Object.getOwnPropertyDescriptor(He,ze);(!Mt||("get"in Mt?!He.__esModule:Mt.writable||Mt.configurable))&&(Mt={enumerable:!0,get:function(){return He[ze]}}),Object.defineProperty(be,ct,Mt)}:function(be,He,ze,ct){void 0===ct&&(ct=ze),be[ct]=He[ze]}),Pn=this&&this.__setModuleDefault||(Object.create?function(be,He){Object.defineProperty(be,"default",{enumerable:!0,value:He})}:function(be,He){be.default=He}),Qt=this&&this.__importStar||function(be){if(be&&be.__esModule)return be;var He={};if(null!=be)for(var ze in be)"default"!==ze&&Object.prototype.hasOwnProperty.call(be,ze)&&Un(He,be,ze);return Pn(He,be),He},nn=this&&this.__read||function(be,He){var ze="function"==typeof Symbol&&be[Symbol.iterator];if(!ze)return be;var Mt,yt,ct=ze.call(be),At=[];try{for(;(void 0===He||He-- >0)&&!(Mt=ct.next()).done;)At.push(Mt.value)}catch(mn){yt={error:mn}}finally{try{Mt&&!Mt.done&&(ze=ct.return)&&ze.call(ct)}finally{if(yt)throw yt.error}}return At};Object.defineProperty(re,"__esModule",{value:!0}),re.PointCloud=void 0;var Je=Qt(Rn(712)),Zt=Rn(515),Ie=function(be){function He(ze,ct,Mt,At,yt){var mn=be.call(this,ze)||this;return mn.name=ze,mn.points=ct,mn.normals=Mt,mn.colors=At,mn.meta=yt,mn.interactive=!1,mn.extent=Zt.DataUtils.calculate_extents(ct),mn}return rn(He,be),He.prototype.set_interactivity=function(ze){this.interactive=ze},He.prototype.get_renderables=function(){var ze=nn(this.get_buffer_positions(),3),ct=ze[0],Mt=ze[1],At=ze[2],yt=new Je.BufferGeometry;ct.length>0&&yt.setAttribute("position",new Je.Float32BufferAttribute(ct,3)),Mt.length>0&&yt.setAttribute("color",new Je.Float32BufferAttribute(Mt,3)),At.length>0&&yt.setAttribute("normal",new Je.Float32BufferAttribute(At,3)),yt.computeBoundingBox();var mn=new Je.PointsMaterial({size:.015,vertexColors:!0,sizeAttenuation:!0,transparent:!0}),Kn=new Je.Points(yt,mn);return Kn.name=this.name,Kn},He.prototype.get_buffer_positions=function(){return[this.points.flat(),this.normals.flat(),this.colors.flat()]},He}(Rn(194).Renderable);re.PointCloud=Ie},194:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.Renderable=void 0,re.Renderable=function rn(Un){this.id=Un}},485:function(Fr,re,Rn){"use strict";var Ue,rn=this&&this.__extends||(Ue=function(Ie,be){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(He,ze){He.__proto__=ze}||function(He,ze){for(var ct in ze)Object.prototype.hasOwnProperty.call(ze,ct)&&(He[ct]=ze[ct])})(Ie,be)},function(Ie,be){if("function"!=typeof be&&null!==be)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function He(){this.constructor=Ie}Ue(Ie,be),Ie.prototype=null===be?Object.create(be):(He.prototype=be.prototype,new He)}),Un=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Pn=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Qt=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&Un(Ie,Ue,be);return Pn(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.VoxelCloud=void 0;var nn=Rn(194),Je=Qt(Rn(712)),Zt=function(Ue){function Ie(be,He,ze,ct){var Mt=Ue.call(this,be)||this;return Mt.name=be,Mt.cubes=He,Mt.colors=ze,Mt.opacities=ct,Mt}return rn(Ie,Ue),Ie.prototype.get_renderables=function(){var be=this,He=new Je.Group;He.name=this.name;var ze=new Je.BoxGeometry(this.cubes[0].width,this.cubes[0].height,this.cubes[0].depth);return this.cubes.forEach(function(ct,Mt){var At=new Je.Color(be.colors[Mt][0],be.colors[Mt][1],be.colors[Mt][2]),yt=new Je.MeshBasicMaterial({color:At,opacity:be.opacities[Mt],transparent:!0}),mn=new Je.Mesh(ze,yt);mn.position.x=ct.center[0],mn.position.y=ct.center[1],mn.position.z=ct.center[2],He.add(mn)}),He},Ie}(nn.Renderable);re.VoxelCloud=Zt},200:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.VoxelCell=void 0;var Rn=function(){function rn(Un,Pn,Qt){this.xExtent=Un,this.yExtent=Pn,this.zExtent=Qt,this.pointCloudIndices={}}return rn.prototype.get_voxel_cube=function(){return{width:Math.abs(this.xExtent[1]-this.xExtent[0]),height:Math.abs(this.yExtent[1]-this.yExtent[0]),depth:Math.abs(this.zExtent[1]-this.zExtent[0]),center:[(this.xExtent[1]+this.xExtent[0])/2,(this.yExtent[1]+this.yExtent[0])/2,(this.zExtent[1]+this.zExtent[0])/2]}},rn.prototype.is_point_cloud_indexed=function(Un){return Un in this.pointCloudIndices},rn.prototype.index_new_point=function(Un,Pn){Un in this.pointCloudIndices||(this.pointCloudIndices[Un]=new Set),this.pointCloudIndices[Un].add(Pn)},rn.prototype.get_point_cloud_size=function(Un){return this.pointCloudIndices[Un].size},rn}();re.VoxelCell=Rn},707:(Fr,re,Rn)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.VoxelGrid=void 0;var rn=Rn(200),Un=function(){function Pn(Qt,nn,Je){this.xExtent=Qt,this.yExtent=nn,this.zExtent=Je,this.cellSize=.015,this.voxelMap={},this.indexedPointClouds={}}return Pn.prototype.update_voxel_grid=function(Qt,nn){var Je=this;if(0==this.xExtent.length||0==this.yExtent.length||0==this.zExtent.length)throw new Error("Extents not initalized");nn.forEach(function(Zt,Ue){var Ie=Math.floor((Zt[0]-Je.xExtent[0])/Je.cellSize),be=Math.floor((Zt[1]-Je.yExtent[0])/Je.cellSize),He=Math.floor((Zt[2]-Je.zExtent[0])/Je.cellSize),ze="".concat(Ie,"-").concat(be,"-").concat(He);ze in Je.voxelMap||(Je.voxelMap[ze]=new rn.VoxelCell([Je.xExtent[0]+Ie*Je.cellSize,Je.xExtent[0]+(Ie+1)*Je.cellSize],[Je.yExtent[0]+be*Je.cellSize,Je.yExtent[0]+(be+1)*Je.cellSize],[Je.zExtent[0]+He*Je.cellSize,Je.zExtent[0]+(He+1)*Je.cellSize]),Qt in Je.indexedPointClouds||(Je.indexedPointClouds[Qt]=[]),Je.indexedPointClouds[Qt].push(Je.voxelMap[ze])),Je.voxelMap[ze].index_new_point(Qt,Ue)})},Pn.prototype.get_point_cloud_voxel_cells=function(Qt,nn){return void 0===nn&&(nn=[]),Qt in this.indexedPointClouds?this.indexedPointClouds[Qt]:[]},Pn}();re.VoxelGrid=Un},515:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.DataUtils=void 0;var Rn=function(){function rn(){}return rn.calculate_extents=function(Un){var Pn=[1/0,-1/0],Qt=[1/0,-1/0],nn=[1/0,-1/0];return Un.forEach(function(Je){Pn[0]=Math.min(Je[0],Pn[0]),Pn[1]=Math.max(Je[0],Pn[1]),Qt[0]=Math.min(Je[1],Qt[0]),Qt[1]=Math.max(Je[1],Qt[1]),nn[0]=Math.min(Je[2],nn[0]),nn[1]=Math.max(Je[2],nn[1])}),[Pn,Qt,nn]},rn}();re.DataUtils=Rn},656:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue);var be=Object.getOwnPropertyDescriptor(Zt,Ue);(!be||("get"in be?!Zt.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return Zt[Ue]}}),Object.defineProperty(Je,Ie,be)}:function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue),Je[Ie]=Zt[Ue]}),Un=this&&this.__setModuleDefault||(Object.create?function(Je,Zt){Object.defineProperty(Je,"default",{enumerable:!0,value:Zt})}:function(Je,Zt){Je.default=Zt}),Pn=this&&this.__importStar||function(Je){if(Je&&Je.__esModule)return Je;var Zt={};if(null!=Je)for(var Ue in Je)"default"!==Ue&&Object.prototype.hasOwnProperty.call(Je,Ue)&&rn(Zt,Je,Ue);return Un(Zt,Je),Zt};Object.defineProperty(re,"__esModule",{value:!0}),re.Projector=void 0;var Qt=Pn(Rn(712)),nn=function(){function Je(){}return Je.project_stream_onto_pointcloud=function(Zt,Ue){var Ie=new Qt.BufferGeometry;Ue.length>0&&Ie.setAttribute("position",new Qt.Float32BufferAttribute(Ue.flat(),3));var be=new Qt.PointsMaterial({size:.015,vertexColors:!0,sizeAttenuation:!0,transparent:!0}),He=new Qt.Points(Ie,be),ze=new Qt.Raycaster;ze.params.Points.threshold=.02;var ct=[];return Zt.forEach(function(Mt){ze.set(new Qt.Vector3(Mt.origin[0],Mt.origin[1],Mt.origin[2]),new Qt.Vector3(Mt.destination[0],Mt.destination[1],Mt.destination[2]).normalize());var At=[];do{ze.params.Points.threshold+=.01,At=ze.intersectObject(He)}while(0===At.length);ct.push(At[0].point.toArray()),ze.params.Points.threshold=.02}),ct},Je}();re.Projector=nn},533:(Fr,re,Rn)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.ContinuousModelViewer=void 0;var rn=Rn(56),Un=Rn(551),Pn=function(){function Qt(nn,Je){void 0===Je&&(Je={}),this.container=nn,this.callbacks=Je,this.svg||this.initialize_chart()}return Qt.prototype.initialize_chart=function(){this.svg=Un.ChartUtils.create_svg(this.container),this.mainSection=new rn.MainSection,this.mainSection.initialize_section(this.svg)},Qt.prototype.update=function(nn,Je){this.mainSection.update(nn,Je,this.callbacks)},Qt}();re.ContinuousModelViewer=Pn},119:(Fr,re,Rn)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.ModelViewer=void 0;var rn=Rn(805),Un=Rn(214),Pn=Rn(99),Qt=Rn(551),nn=function(){function Je(Zt,Ue){void 0===Ue&&(Ue={}),this.container=Zt,this.callbacks=Ue,this.svg||this.initialize_chart()}return Je.prototype.initialize_chart=function(){this.svg=Qt.ChartUtils.create_svg(this.container),this.labelSection=new Un.LabelSection,this.labelSection.initialize_section(this.svg),this.matrixSection=new rn.MatrixSection,this.matrixSection.initialize_section(this.svg),this.summarySection=new Pn.SummarySection,this.summarySection.initialize_section(this.svg)},Je.prototype.update=function(Zt,Ue,Ie){void 0===Ie&&(Ie=[]),this.labelSection.update(Zt,Ue),this.matrixSection.update(Zt,Ue,Ie,this.callbacks)},Je}();re.ModelViewer=nn},945:(Fr,re,Rn)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.TemporalModelViewer=void 0;var rn=Rn(317),Un=Rn(551),Pn=function(){function Qt(nn,Je){void 0===Je&&(Je={}),this.container=nn,this.callbacks=Je,this.svg||this.initialize_chart()}return Qt.prototype.initialize_chart=function(){this.svg=Un.ChartUtils.create_svg(this.container),this.matrixSection=new rn.MatrixSection,this.matrixSection.initialize_section(this.svg)},Qt.prototype.update=function(nn,Je){this.matrixSection.update(nn,Je,this.callbacks)},Qt}();re.TemporalModelViewer=Pn},203:(Fr,re)=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.CONTINUOUSMAINSECTIONMARGINS=re.TEMPORALMATRIXSECTIONMARGINS=re.SUMMARYSECTIONMARGINS=re.SUMMARYSECTIONWIDTHRATIO=re.MATRIXSECTIONMARGINS=re.MATRIXSECTIONWIDTHRATIO=re.LABELSECTIONMARGINS=re.LABELSECTIONWIDTHRATIO=void 0,re.LABELSECTIONWIDTHRATIO=.2,re.LABELSECTIONMARGINS={top:5,left:5,right:5,bottom:30},re.MATRIXSECTIONWIDTHRATIO=.6,re.MATRIXSECTIONMARGINS={top:5,left:5,right:5,bottom:30},re.SUMMARYSECTIONWIDTHRATIO=.2,re.SUMMARYSECTIONMARGINS={top:5,left:5,right:5,bottom:30},re.TEMPORALMATRIXSECTIONMARGINS={top:10,left:50,right:10,bottom:30},re.CONTINUOUSMAINSECTIONMARGINS={top:10,left:80,right:10,bottom:30}},833:(Fr,re,Rn)=>{"use strict";re.cO=re.Jt=re.OM=void 0;var Un=Rn(119);Object.defineProperty(re,"OM",{enumerable:!0,get:function(){return Un.ModelViewer}});var Pn=Rn(945);Object.defineProperty(re,"Jt",{enumerable:!0,get:function(){return Pn.TemporalModelViewer}});var Qt=Rn(533);Object.defineProperty(re,"cO",{enumerable:!0,get:function(){return Qt.ContinuousModelViewer}})},56:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Un=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Pn=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&rn(Ie,Ue,be);return Un(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.MainSection=void 0;var Qt=Rn(551),nn=Rn(203),Je=Pn(Rn(898)),Zt=function(){function Ue(){}return Ue.prototype.initialize_section=function(Ie){this.width=parseInt(Ie.attr("width"))-nn.CONTINUOUSMAINSECTIONMARGINS.left-nn.CONTINUOUSMAINSECTIONMARGINS.right,this.height=parseInt(Ie.attr("height"))-nn.CONTINUOUSMAINSECTIONMARGINS.top-nn.CONTINUOUSMAINSECTIONMARGINS.bottom,this.group=Qt.ChartUtils.create_group(Ie,{top:nn.CONTINUOUSMAINSECTIONMARGINS.top,left:nn.CONTINUOUSMAINSECTIONMARGINS.left,bottom:0,right:0}),this.leftAxis=Qt.ChartUtils.create_group(Ie,{top:nn.CONTINUOUSMAINSECTIONMARGINS.top,left:nn.CONTINUOUSMAINSECTIONMARGINS.left-5,bottom:0,right:0}),this.bottomAxis=Qt.ChartUtils.create_group(Ie,{top:this.height+nn.CONTINUOUSMAINSECTIONMARGINS.top+10,left:nn.CONTINUOUSMAINSECTIONMARGINS.left,bottom:0,right:0})},Ue.prototype.update_scales=function(Ie){var be=Object.values(Ie).flat(),He=Je.extent(be,function(ct){return ct.step}),ze=Je.extent(be,function(ct){return ct.timestamp});this.verticalScale=Je.scaleLinear().domain(He).range([this.height,0]),this.horizontalScale=Je.scaleLinear().domain(ze).range([0,this.width]),this.lineColorScale=Je.scaleOrdinal(Je.schemeCategory10).domain(Object.keys(Ie))},Ue.prototype.update_axes=function(Ie){var be=Object.values(Ie).flat(),He=Je.extent(be,function(ct){return ct.timestamp}),ze=Array.from(new Set(be.map(function(ct){return ct.step})));this.leftAxis.call(Je.axisLeft(this.verticalScale).tickValues(ze).tickFormat(function(ct){return"Step "+"".concat(ct).split(".")[0]})).attr("stroke-width",0).attr("font-family","Open Sans regular","Open Sans").attr("font-size","16px").attr("color","#636363"),this.bottomAxis.call(Je.axisBottom(this.horizontalScale).tickFormat(function(ct){var Mt=(ct-He[0])/1e3,At=Math.floor(Mt/60),yt=Mt%60;return"".concat(At,"m").concat(yt.toFixed(0),"s")}).ticks(4)).attr("stroke-width",.5).attr("font-family","Open Sans regular","Open Sans").attr("font-size","12px").attr("color","#636363")},Ue.prototype.update=function(Ie,be,He){var ze=this;this.update_scales(Ie),this.update_axes(Ie);var ct=Je.line().x(function(yt){return ze.horizontalScale(yt.timestamp)}).y(function(yt){return ze.verticalScale(yt.step)}).curve(Je.curveBumpX),Mt=this.group.selectAll(".line-group").data(Object.keys(Ie)).join(function(yt){return yt.append("g").attr("class","line-group").attr("transform",function(mn,Kn){return"translate(0,0)"}).attr("fill",function(mn,Kn){return ze.lineColorScale(mn)}).attr("stroke",function(mn,Kn){return ze.lineColorScale(mn)})},function(yt){return yt.attr("fill",function(mn,Kn){return ze.lineColorScale(mn)}).attr("stroke",function(mn,Kn){return ze.lineColorScale(mn)})},function(yt){return yt.remove()});Mt.selectAll(".line").data(function(yt){return[Ie[yt]]}).join(function(yt){return yt.append("path").attr("class","line").attr("d",function(mn){return ct(mn)}).attr("fill","none").attr("stroke-width",1.5).attr("opacity",function(mn,Kn){return be?.3:.7})},function(yt){return yt.attr("d",function(mn){return ct(mn)}).attr("opacity",function(mn,Kn){return be?.3:.7})},function(yt){return yt.remove()}),this.update_steps(Mt,Ie,be,He)},Ue.prototype.update_steps=function(Ie,be,He,ze){var ct=this;Ie.selectAll(".step-point").data(function(At){return be[At]}).join(function(At){return At.append("circle").attr("class","step-point").attr("cx",function(yt){return ct.horizontalScale(yt.timestamp)}).attr("cy",function(yt){return ct.verticalScale(yt.step)}).attr("r",2).attr("opacity",function(yt){return ct.pick_opacity(yt.timestamp,He)}).style("cursor","pointer").on("mouseover",function(yt,mn,Kn,$r){ct.fire_callback("mouseover",ze,mn.timestamp)}).on("mouseout",function(yt,mn,Kn,$r){ct.fire_callback("mouseout",ze,null)})},function(At){return At.attr("opacity",function(yt){return ct.pick_opacity(yt.timestamp,He)}).attr("cx",function(yt){return ct.horizontalScale(yt.timestamp)}).attr("cy",function(yt){return ct.verticalScale(yt.step)})},function(At){return At.remove()})},Ue.prototype.pick_opacity=function(Ie,be){return null==be?.1:be===Ie?1:0},Ue.prototype.fire_callback=function(Ie,be,He){Ie in be&&be[Ie](He)},Ue}();re.MainSection=Zt},214:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Un=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Pn=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&rn(Ie,Ue,be);return Un(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.LabelSection=void 0;var Qt=Rn(203),nn=Rn(551),Je=Pn(Rn(898)),Zt=function(){function Ue(){}return Ue.prototype.initialize_section=function(Ie){this.group=nn.ChartUtils.create_group(Ie,Qt.LABELSECTIONMARGINS),this.width=parseInt(Ie.attr("width"))*Qt.LABELSECTIONWIDTHRATIO-Qt.LABELSECTIONMARGINS.left-Qt.LABELSECTIONMARGINS.right,this.height=parseInt(Ie.attr("height"))-Qt.LABELSECTIONMARGINS.top-Qt.LABELSECTIONMARGINS.bottom},Ue.prototype.update_scales=function(Ie){var be=Ie.labels.map(function(He){return He.name});this.verticalScale=Je.scaleBand().domain(be).range([0,this.height]).paddingInner(.1),this.horizontalScale=Je.scaleLinear().domain([0,1]).range([0,this.width])},Ue.prototype.update=function(Ie,be){var He=this;this.update_scales(Ie);var ze=this.group.selectAll(".name-group").data(Ie.labels).join(function(At){return At.append("g").attr("class","name-group").attr("transform",function(yt,mn){return"translate(0,"+He.verticalScale(yt.name)+")"})},function(At){return At.attr("transform",function(yt,mn){return"translate(0,"+He.verticalScale(yt.name)+")"})},function(At){return At.remove()});ze.selectAll(".confidence-bar").data(function(At){return null!==be?[At.values[be]]:[0]}).join(function(At){return At.append("rect").attr("class","confidence-bar").attr("x",0).attr("y",0).attr("width",function(yt){return He.horizontalScale(yt)}).attr("height",He.verticalScale.bandwidth()).attr("fill","#fdbf6f").style("opacity",.8)},function(At){return At.transition(100).attr("width",function(yt){return He.horizontalScale(yt)})},function(At){return At.remove()}),ze.selectAll(".label-name").data(function(At){return[At.name]}).join(function(At){return At.append("text").attr("class","label-name").attr("y",He.verticalScale.bandwidth()/2).attr("alignment-baseline","middle").text(function(yt){return yt})},function(At){return At.text(function(yt){return yt})},function(At){return At.remove()})},Ue}();re.LabelSection=Zt},805:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Un=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Pn=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&rn(Ie,Ue,be);return Un(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.MatrixSection=void 0;var Qt=Rn(203),nn=Rn(551),Je=Pn(Rn(898)),Zt=function(){function Ue(){this.localMargin=5}return Ue.prototype.initialize_section=function(Ie){this.width=parseInt(Ie.attr("width"))*Qt.MATRIXSECTIONWIDTHRATIO-Qt.MATRIXSECTIONMARGINS.left-Qt.MATRIXSECTIONMARGINS.right,this.height=parseInt(Ie.attr("height"))-Qt.MATRIXSECTIONMARGINS.top-Qt.MATRIXSECTIONMARGINS.bottom;var be=parseInt(Ie.attr("width"))*Qt.LABELSECTIONWIDTHRATIO;this.group=nn.ChartUtils.create_group(Ie,{top:Qt.MATRIXSECTIONMARGINS.top,left:be,bottom:0,right:0}),this.axisGroup=nn.ChartUtils.create_group(Ie,{top:this.height+Qt.MATRIXSECTIONMARGINS.top+this.localMargin,left:be,bottom:0,right:0})},Ue.prototype.update_scales=function(Ie){var be=Ie.labels.map(function(He){return He.name});this.verticalScale=Je.scaleBand().domain(be).range([0,this.height]).paddingInner(.1),this.horizontalScale=Je.scaleLinear().domain([0,Ie.labels[0].values.length]).range([0,this.width]),this.colorScale=Je.scaleSequential(Je.interpolateBlues).domain([0,1])},Ue.prototype.update_axis=function(Ie,be){void 0===be&&(be=[]),0!==be.length&&(this.timeScale=Je.scaleLinear().domain(be).range([0,this.width]),this.axisGroup.call(Je.axisBottom(this.timeScale).tickFormat(function(He){var ze=He/1e3,ct=Math.floor(ze/60),Mt=ze%60;return"".concat(ct,"m").concat(Mt,"s")})))},Ue.prototype.update=function(Ie,be,He,ze){var ct=this;void 0===He&&(He=[]),this.update_scales(Ie),this.update_axis(Ie,He),this.group.selectAll(".row-group").data(Ie.labels).join(function(yt){return yt.append("g").attr("class","row-group").attr("transform",function(mn,Kn){return"translate(0,"+ct.verticalScale(mn.name)+")"})},function(yt){return yt.attr("transform",function(mn,Kn){return"translate(0,"+ct.verticalScale(mn.name)+")"})},function(yt){return yt.remove()}).selectAll(".cell").data(function(yt){return yt.values.map(function(mn,Kn){return yt.colors?{value:mn,index:Kn,color:yt.colors[Kn]}:{value:mn,index:Kn}})}).join(function(yt){return yt.append("rect").attr("class","cell").attr("x",function(mn,Kn){return ct.horizontalScale(Kn)}).attr("y",0).attr("fill",function(mn,Kn){return mn.color?mn.color:ct.colorScale(mn.value)}).attr("width",ct.horizontalScale(1)-ct.horizontalScale(0)).attr("height",ct.verticalScale.bandwidth()).attr("opacity",function(mn,Kn){return ct.pick_opacity(Kn,be)}).style("cursor","pointer").on("mouseover",function(mn,Kn,$r,po){ct.fire_callback("mouseover",ze,Kn.index)}).on("mouseout",function(mn,Kn,$r,po){ct.fire_callback("mouseout",ze,null)})},function(yt){return yt.attr("fill",function(mn,Kn){return mn.color?mn.color:ct.colorScale(mn.value)}).attr("x",function(mn,Kn){return ct.horizontalScale(Kn)}).attr("width",ct.horizontalScale(1)-ct.horizontalScale(0)).transition(100).attr("opacity",function(mn,Kn){return ct.pick_opacity(Kn,be)})},function(yt){return yt.remove()})},Ue.prototype.fire_callback=function(Ie,be,He){Ie in be&&be[Ie](He)},Ue.prototype.pick_opacity=function(Ie,be){return null==be||be===Ie?1:.2},Ue}();re.MatrixSection=Zt},99:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Un=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Pn=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&rn(Ie,Ue,be);return Un(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.SummarySection=void 0;var Qt=Rn(551),nn=Rn(203),Je=Pn(Rn(898)),Zt=function(){function Ue(){this.localMargin=5}return Ue.prototype.initialize_section=function(Ie){this.width=parseInt(Ie.attr("width"))*nn.SUMMARYSECTIONWIDTHRATIO-nn.SUMMARYSECTIONMARGINS.left-nn.SUMMARYSECTIONMARGINS.right,this.height=parseInt(Ie.attr("height"))-nn.SUMMARYSECTIONMARGINS.top-nn.SUMMARYSECTIONMARGINS.bottom;var be=parseInt(Ie.attr("width"))*(nn.LABELSECTIONWIDTHRATIO+nn.MATRIXSECTIONWIDTHRATIO);this.confidenceGroup=Qt.ChartUtils.create_group(Ie,{top:nn.SUMMARYSECTIONMARGINS.top,left:be,bottom:0,right:0}),this.coverageGroup=Qt.ChartUtils.create_group(Ie,{top:nn.SUMMARYSECTIONMARGINS.top,left:be+this.width/2,bottom:0,right:0}),this.update_labels()},Ue.prototype.update_labels=function(){console.log("TODO: Add confidence and coverage labels")},Ue.prototype.update_scales=function(Ie){var be=Ie.labels.map(function(He){return He.name});this.verticalScale=Je.scaleBand().domain(be).range([0,this.height]).paddingInner(.1),this.horizontalScale=Je.scaleLinear().domain([0,1]).range([0,this.width/2-this.localMargin]),this.colorScale=Je.scaleSequential(Je.interpolateBlues).domain([0,1])},Ue.prototype.update=function(Ie){var be=this;this.update_scales(Ie);var He=this.confidenceGroup.selectAll(".meta-group").data(Ie.labels).join(function(At){return At.append("g").attr("class","meta-group").attr("transform",function(yt,mn){return"translate(0,"+be.verticalScale(yt.name)+")"})},function(At){return At.attr("transform",function(yt,mn){return"translate(0,"+be.verticalScale(yt.name)+")"})},function(At){return At.remove()}),ze=this.coverageGroup.selectAll(".meta-group").data(Ie.labels).join(function(At){return At.append("g").attr("class","meta-group").attr("transform",function(yt,mn){return"translate(0,"+be.verticalScale(yt.name)+")"})},function(At){return At.attr("transform",function(yt,mn){return"translate(0,"+be.verticalScale(yt.name)+")"})},function(At){return At.remove()});He.selectAll(".confidence-bar").data(function(At){return[At.confidence]}).join(function(At){return At.append("rect").attr("class","confidence-bar").attr("x",0).attr("y",0).attr("width",function(yt){return be.horizontalScale(yt)}).attr("height",be.verticalScale.bandwidth()).attr("fill",function(yt){return be.colorScale(yt)})},function(At){return At.attr("width",function(yt){return be.horizontalScale(yt)}).attr("fill",function(yt){return be.colorScale(yt)})},function(At){return At.remove()}),ze.selectAll(".coverage-bar").data(function(At){return[At.coverage]}).join(function(At){return At.append("rect").attr("class","coverage-bar").attr("x",0).attr("y",0).attr("width",function(yt){return be.horizontalScale(yt)}).attr("height",be.verticalScale.bandwidth()).attr("fill",function(yt){return be.colorScale(yt)})},function(At){return At.attr("width",function(yt){return be.horizontalScale(yt)}).attr("fill",function(yt){return be.colorScale(yt)})},function(At){return At.remove()})},Ue}();re.SummarySection=Zt},317:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Ue,Ie,be,He){void 0===He&&(He=be);var ze=Object.getOwnPropertyDescriptor(Ie,be);(!ze||("get"in ze?!Ie.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Ie[be]}}),Object.defineProperty(Ue,He,ze)}:function(Ue,Ie,be,He){void 0===He&&(He=be),Ue[He]=Ie[be]}),Un=this&&this.__setModuleDefault||(Object.create?function(Ue,Ie){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ie})}:function(Ue,Ie){Ue.default=Ie}),Pn=this&&this.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ie={};if(null!=Ue)for(var be in Ue)"default"!==be&&Object.prototype.hasOwnProperty.call(Ue,be)&&rn(Ie,Ue,be);return Un(Ie,Ue),Ie};Object.defineProperty(re,"__esModule",{value:!0}),re.MatrixSection=void 0;var Qt=Rn(203),nn=Rn(551),Je=Pn(Rn(898)),Zt=function(){function Ue(){}return Ue.prototype.initialize_section=function(Ie){this.width=parseInt(Ie.attr("width"))-Qt.TEMPORALMATRIXSECTIONMARGINS.left-Qt.TEMPORALMATRIXSECTIONMARGINS.right,this.height=parseInt(Ie.attr("height"))-Qt.TEMPORALMATRIXSECTIONMARGINS.bottom-Qt.TEMPORALMATRIXSECTIONMARGINS.top,this.group=nn.ChartUtils.create_group(Ie,{top:Qt.TEMPORALMATRIXSECTIONMARGINS.top,left:Qt.TEMPORALMATRIXSECTIONMARGINS.left,bottom:0,right:0}),this.timeAxisGroup=nn.ChartUtils.create_group(Ie,{top:this.height+Qt.TEMPORALMATRIXSECTIONMARGINS.top,left:Qt.TEMPORALMATRIXSECTIONMARGINS.left,bottom:0,right:0}),this.idAxisGroup=nn.ChartUtils.create_group(Ie,{top:Qt.TEMPORALMATRIXSECTIONMARGINS.top,left:Qt.TEMPORALMATRIXSECTIONMARGINS.left,bottom:0,right:0})},Ue.prototype.update_scales=function(Ie){var be=Je.extent(Object.values(Ie).flat(),function(ze){return ze.timestamp});this.verticalScale=Je.scaleBand().domain(Object.keys(Ie)).range([0,this.height]).paddingInner(.1),this.horizontalScale=Je.scaleLinear().domain(be).range([0,this.width]);var He=Array.from(new Set(Object.values(Ie).flat().map(function(ze){return ze.value})));this.colorScale=Je.scaleOrdinal(Je.schemeCategory10).domain(He)},Ue.prototype.update_axes=function(Ie){var be=Je.extent(Object.values(Ie).flat(),function(He){return He.timestamp});this.timeAxisGroup.call(Je.axisBottom(this.horizontalScale).tickFormat(function(He){var ze=(He-be[0])/1e3,ct=Math.floor(ze/60),Mt=ze%60;return"".concat(ct,"m").concat(Mt.toFixed(2),"s")}).ticks(4)),this.idAxisGroup.call(Je.axisLeft(this.verticalScale))},Ue.prototype.update=function(Ie,be,He){var ze=this;this.update_scales(Ie),this.update_axes(Ie),this.group.selectAll(".row-group").data(Object.keys(Ie)).join(function(At){return At.append("g").attr("class","row-group").attr("transform",function(yt,mn){return"translate(0,"+ze.verticalScale(yt)+")"})},function(At){return At.attr("transform",function(yt,mn){return"translate(0,"+ze.verticalScale(yt)+")"})},function(At){return At.remove()}).selectAll(".cell").data(function(At){return Ie[At]}).join(function(At){return At.append("rect").attr("class","cell").attr("x",function(yt,mn){return ze.horizontalScale(yt.timestamp)}).attr("y",0).attr("fill",function(yt,mn){return ze.colorScale(yt.value)}).attr("width",2).attr("height",ze.verticalScale.bandwidth()).attr("opacity",function(yt,mn){return ze.pick_opacity(yt.timestamp,be)}).style("cursor","pointer").on("mouseover",function(yt,mn,Kn,$r){ze.fire_callback("mouseover",He,mn.timestamp)}).on("mouseout",function(yt,mn,Kn,$r){ze.fire_callback("mouseout",He,null)})},function(At){return At.attr("fill",function(yt,mn){return ze.colorScale(yt.value)}).attr("x",function(yt,mn){return ze.horizontalScale(yt.timestamp)}).attr("height",ze.verticalScale.bandwidth()).transition(100).attr("opacity",function(yt,mn){return ze.pick_opacity(yt.timestamp,be)})},function(At){return At.remove()})},Ue.prototype.fire_callback=function(Ie,be,He){Ie in be&&be[Ie](He)},Ue.prototype.pick_opacity=function(Ie,be){return null===be||void 0===Ie?.5:be===Ie?1:.1},Ue}();re.MatrixSection=Zt},551:function(Fr,re,Rn){"use strict";var rn=this&&this.__createBinding||(Object.create?function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue);var be=Object.getOwnPropertyDescriptor(Zt,Ue);(!be||("get"in be?!Zt.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return Zt[Ue]}}),Object.defineProperty(Je,Ie,be)}:function(Je,Zt,Ue,Ie){void 0===Ie&&(Ie=Ue),Je[Ie]=Zt[Ue]}),Un=this&&this.__setModuleDefault||(Object.create?function(Je,Zt){Object.defineProperty(Je,"default",{enumerable:!0,value:Zt})}:function(Je,Zt){Je.default=Zt}),Pn=this&&this.__importStar||function(Je){if(Je&&Je.__esModule)return Je;var Zt={};if(null!=Je)for(var Ue in Je)"default"!==Ue&&Object.prototype.hasOwnProperty.call(Je,Ue)&&rn(Zt,Je,Ue);return Un(Zt,Je),Zt};Object.defineProperty(re,"__esModule",{value:!0}),re.ChartUtils=void 0;var Qt=Pn(Rn(898)),nn=function(){function Je(){}return Je.create_div=function(Zt,Ue){void 0===Ue&&(Ue=1);var Ie=Zt.clientWidth,be=Zt.clientHeight;return Qt.select(Zt).append("div").attr("width",Ie).attr("height",be).style("z-index",Ue)},Je.create_svg=function(Zt,Ue){void 0===Ue&&(Ue=1);var Ie=Zt.clientWidth,be=Zt.clientHeight;return Qt.select(Zt).append("svg").attr("width",Ie).attr("height",be).style("z-index",Ue)},Je.create_group=function(Zt,Ue){return Zt.append("g").attr("transform","translate("+Ue.left+","+Ue.top+")")},Je.create_linear_scale=function(Zt,Ue){return Qt.scaleLinear().domain(Zt).range(Ue)},Je}();re.ChartUtils=nn},712:(Fr,re,Rn)=>{"use strict";var rn=Rn(156).default;const Un="151",nn=0,Je=1,Zt=2,be=1,He=2,ze=3,ct=0,Mt=1,At=2,mn=0,Kn=1,$r=2,po=3,xo=4,Mc=5,Jc=100,Bs=101,ou=102,cm=103,au=104,Gu=200,Lh=201,Mo=202,wo=203,P_=204,pr=205,Oh=206,Fh=207,k_=208,xv=209,Ci=210,L_=0,Nh=1,qr=2,mr=3,lm=4,ri=5,O_=6,Mv=7,Uh=0,Eg=1,hb=2,cu=0,wc=1,fb=2,wv=3,Sv=4,Of=5,lu=301,Ca=302,Wu=303,Tl=304,ju=306,Ud=1e3,Oo=1001,io=1002,gr=1003,Xr=1004,Ff=1005,mo=1006,bs=1007,$u=1008,qu=1009,Al=1010,Ev=1011,Nf=1012,Cv=1013,uu=1014,Ta=1015,Sc=1016,Uf=1017,Tv=1018,Bf=1020,Bh=1021,Aa=1023,Ec=1024,Av=1025,xs=1026,So=1027,Vf=1028,pb=1029,Dv=1030,Rv=1031,mb=1033,N_=33776,ec=33777,hm=33778,ns=33779,Xu=35840,ua=35841,Iv=35842,U_=35843,B_=36196,Tg=37492,zf=37496,Vh=37808,V_=37809,fm=37810,Ag=37811,z_=37812,Dg=37813,Rg=37814,H_=37815,Ig=37816,G_=37817,Hf=37818,Ms=37819,tc=37820,Vd=37821,zh=36492,Yr=36283,Pg=36284,is=36285,pm=36286,Gf=2300,Yu=2301,Dl=2400,Jt=2401,Da=2402,Qc=3e3,Wi=3001,gb=3201,zd=0,nc=1,du="srgb",ic="srgb-linear",gm="display-p3",_m=35044,CM="300 es",ss=1035;class Zu{addEventListener(s,l){void 0===this._listeners&&(this._listeners={});const m=this._listeners;void 0===m[s]&&(m[s]=[]),-1===m[s].indexOf(l)&&m[s].push(l)}hasEventListener(s,l){if(void 0===this._listeners)return!1;const m=this._listeners;return void 0!==m[s]&&-1!==m[s].indexOf(l)}removeEventListener(s,l){if(void 0===this._listeners)return;const b=this._listeners[s];if(void 0!==b){const p=b.indexOf(l);-1!==p&&b.splice(p,1)}}dispatchEvent(s){if(void 0===this._listeners)return;const m=this._listeners[s.type];if(void 0!==m){s.target=this;const b=m.slice(0);for(let p=0,i=b.length;p<i;p++)b[p].call(this,s);s.target=null}}}const Ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Qo=1234567;const Ra=Math.PI/180,Cc=180/Math.PI;function go(){const S=4294967295*Math.random()|0,s=4294967295*Math.random()|0,l=4294967295*Math.random()|0,m=4294967295*Math.random()|0;return(Ys[255&S]+Ys[S>>8&255]+Ys[S>>16&255]+Ys[S>>24&255]+"-"+Ys[255&s]+Ys[s>>8&255]+"-"+Ys[s>>16&15|64]+Ys[s>>24&255]+"-"+Ys[63&l|128]+Ys[l>>8&255]+"-"+Ys[l>>16&255]+Ys[l>>24&255]+Ys[255&m]+Ys[m>>8&255]+Ys[m>>16&255]+Ys[m>>24&255]).toLowerCase()}function kr(S,s,l){return Math.max(s,Math.min(l,S))}function Vs(S,s){return(S%s+s)%s}function Hd(S,s,l){return(1-l)*S+l*s}function j_(S){return 0==(S&S-1)&&0!==S}function Tc(S){return Math.pow(2,Math.ceil(Math.log(S)/Math.LN2))}function el(S){return Math.pow(2,Math.floor(Math.log(S)/Math.LN2))}function ro(S,s){switch(s.constructor){case Float32Array:return S;case Uint16Array:return S/65535;case Uint8Array:return S/255;case Int16Array:return Math.max(S/32767,-1);case Int8Array:return Math.max(S/127,-1);default:throw new Error("Invalid component type.")}}function Bn(S,s){switch(s.constructor){case Float32Array:return S;case Uint16Array:return Math.round(65535*S);case Uint8Array:return Math.round(255*S);case Int16Array:return Math.round(32767*S);case Int8Array:return Math.round(127*S);default:throw new Error("Invalid component type.")}}const ji={DEG2RAD:Ra,RAD2DEG:Cc,generateUUID:go,clamp:kr,euclideanModulo:Vs,mapLinear:function Fv(S,s,l,m,b){return m+(S-s)*(b-m)/(l-s)},inverseLerp:function Mb(S,s,l){return S!==s?(l-S)/(s-S):0},lerp:Hd,damp:function Rl(S,s,l,m){return Hd(S,s,1-Math.exp(-l*m))},pingpong:function TM(S,s=1){return s-Math.abs(Vs(S,2*s)-s)},smoothstep:function ut(S,s,l){return S<=s?0:S>=l?1:(S=(S-s)/(l-s))*S*(3-2*S)},smootherstep:function wb(S,s,l){return S<=s?0:S>=l?1:(S=(S-s)/(l-s))*S*S*(S*(6*S-15)+10)},randInt:function ei(S,s){return S+Math.floor(Math.random()*(s-S+1))},randFloat:function Ku(S,s){return S+Math.random()*(s-S)},randFloatSpread:function Nv(S){return S*(.5-Math.random())},seededRandom:function kg(S){void 0!==S&&(Qo=S);let s=Qo+=1831565813;return s=Math.imul(s^s>>>15,1|s),s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296},degToRad:function AM(S){return S*Ra},radToDeg:function DM(S){return S*Cc},isPowerOfTwo:j_,ceilPowerOfTwo:Tc,floorPowerOfTwo:el,setQuaternionFromProperEuler:function tl(S,s,l,m,b){const p=Math.cos,i=Math.sin,o=p(l/2),u=i(l/2),f=p((s+m)/2),_=i((s+m)/2),x=p((s-m)/2),M=i((s-m)/2),E=p((m-s)/2),D=i((m-s)/2);switch(b){case"XYX":S.set(o*_,u*x,u*M,o*f);break;case"YZY":S.set(u*M,o*_,u*x,o*f);break;case"ZXZ":S.set(u*x,u*M,o*_,o*f);break;case"XZX":S.set(o*_,u*D,u*E,o*f);break;case"YXY":S.set(u*E,o*_,u*D,o*f);break;case"ZYZ":S.set(u*D,u*E,o*_,o*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+b)}},normalize:Bn,denormalize:ro};class Sn{constructor(s=0,l=0){Sn.prototype.isVector2=!0,this.x=s,this.y=l}get width(){return this.x}set width(s){this.x=s}get height(){return this.y}set height(s){this.y=s}set(s,l){return this.x=s,this.y=l,this}setScalar(s){return this.x=s,this.y=s,this}setX(s){return this.x=s,this}setY(s){return this.y=s,this}setComponent(s,l){switch(s){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+s)}return this}getComponent(s){switch(s){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+s)}}clone(){return new this.constructor(this.x,this.y)}copy(s){return this.x=s.x,this.y=s.y,this}add(s){return this.x+=s.x,this.y+=s.y,this}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(s,l){return this.x=s.x+l.x,this.y=s.y+l.y,this}addScaledVector(s,l){return this.x+=s.x*l,this.y+=s.y*l,this}sub(s){return this.x-=s.x,this.y-=s.y,this}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(s,l){return this.x=s.x-l.x,this.y=s.y-l.y,this}multiply(s){return this.x*=s.x,this.y*=s.y,this}multiplyScalar(s){return this.x*=s,this.y*=s,this}divide(s){return this.x/=s.x,this.y/=s.y,this}divideScalar(s){return this.multiplyScalar(1/s)}applyMatrix3(s){const l=this.x,m=this.y,b=s.elements;return this.x=b[0]*l+b[3]*m+b[6],this.y=b[1]*l+b[4]*m+b[7],this}min(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this}max(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this}clamp(s,l){return this.x=Math.max(s.x,Math.min(l.x,this.x)),this.y=Math.max(s.y,Math.min(l.y,this.y)),this}clampScalar(s,l){return this.x=Math.max(s,Math.min(l,this.x)),this.y=Math.max(s,Math.min(l,this.y)),this}clampLength(s,l){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(s,Math.min(l,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(s){return this.x*s.x+this.y*s.y}cross(s){return this.x*s.y-this.y*s.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(s){const l=Math.sqrt(this.lengthSq()*s.lengthSq());if(0===l)return Math.PI/2;const m=this.dot(s)/l;return Math.acos(kr(m,-1,1))}distanceTo(s){return Math.sqrt(this.distanceToSquared(s))}distanceToSquared(s){const l=this.x-s.x,m=this.y-s.y;return l*l+m*m}manhattanDistanceTo(s){return Math.abs(this.x-s.x)+Math.abs(this.y-s.y)}setLength(s){return this.normalize().multiplyScalar(s)}lerp(s,l){return this.x+=(s.x-this.x)*l,this.y+=(s.y-this.y)*l,this}lerpVectors(s,l,m){return this.x=s.x+(l.x-s.x)*m,this.y=s.y+(l.y-s.y)*m,this}equals(s){return s.x===this.x&&s.y===this.y}fromArray(s,l=0){return this.x=s[l],this.y=s[l+1],this}toArray(s=[],l=0){return s[l]=this.x,s[l+1]=this.y,s}fromBufferAttribute(s,l){return this.x=s.getX(l),this.y=s.getY(l),this}rotateAround(s,l){const m=Math.cos(l),b=Math.sin(l),p=this.x-s.x,i=this.y-s.y;return this.x=p*m-i*b+s.x,this.y=p*b+i*m+s.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(s,l,m,b,p,i,o,u,f){const _=this.elements;return _[0]=s,_[1]=b,_[2]=o,_[3]=l,_[4]=p,_[5]=u,_[6]=m,_[7]=i,_[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(s){const l=this.elements,m=s.elements;return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=m[6],l[7]=m[7],l[8]=m[8],this}extractBasis(s,l,m){return s.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),m.setFromMatrix3Column(this,2),this}setFromMatrix4(s){const l=s.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}multiply(s){return this.multiplyMatrices(this,s)}premultiply(s){return this.multiplyMatrices(s,this)}multiplyMatrices(s,l){const m=s.elements,b=l.elements,p=this.elements,i=m[0],o=m[3],u=m[6],f=m[1],_=m[4],x=m[7],M=m[2],E=m[5],D=m[8],k=b[0],O=b[3],I=b[6],U=b[1],B=b[4],j=b[7],$=b[2],G=b[5],Q=b[8];return p[0]=i*k+o*U+u*$,p[3]=i*O+o*B+u*G,p[6]=i*I+o*j+u*Q,p[1]=f*k+_*U+x*$,p[4]=f*O+_*B+x*G,p[7]=f*I+_*j+x*Q,p[2]=M*k+E*U+D*$,p[5]=M*O+E*B+D*G,p[8]=M*I+E*j+D*Q,this}multiplyScalar(s){const l=this.elements;return l[0]*=s,l[3]*=s,l[6]*=s,l[1]*=s,l[4]*=s,l[7]*=s,l[2]*=s,l[5]*=s,l[8]*=s,this}determinant(){const s=this.elements,l=s[0],m=s[1],b=s[2],p=s[3],i=s[4],o=s[5],u=s[6],f=s[7],_=s[8];return l*i*_-l*o*f-m*p*_+m*o*u+b*p*f-b*i*u}invert(){const s=this.elements,l=s[0],m=s[1],b=s[2],p=s[3],i=s[4],o=s[5],u=s[6],f=s[7],_=s[8],x=_*i-o*f,M=o*u-_*p,E=f*p-i*u,D=l*x+m*M+b*E;if(0===D)return this.set(0,0,0,0,0,0,0,0,0);const k=1/D;return s[0]=x*k,s[1]=(b*f-_*m)*k,s[2]=(o*m-b*i)*k,s[3]=M*k,s[4]=(_*l-b*u)*k,s[5]=(b*p-o*l)*k,s[6]=E*k,s[7]=(m*u-f*l)*k,s[8]=(i*l-m*p)*k,this}transpose(){let s;const l=this.elements;return s=l[1],l[1]=l[3],l[3]=s,s=l[2],l[2]=l[6],l[6]=s,s=l[5],l[5]=l[7],l[7]=s,this}getNormalMatrix(s){return this.setFromMatrix4(s).invert().transpose()}transposeIntoArray(s){const l=this.elements;return s[0]=l[0],s[1]=l[3],s[2]=l[6],s[3]=l[1],s[4]=l[4],s[5]=l[7],s[6]=l[2],s[7]=l[5],s[8]=l[8],this}setUvTransform(s,l,m,b,p,i,o){const u=Math.cos(p),f=Math.sin(p);return this.set(m*u,m*f,-m*(u*i+f*o)+i+s,-b*f,b*u,-b*(-f*i+u*o)+o+l,0,0,1),this}scale(s,l){return this.premultiply(er.makeScale(s,l)),this}rotate(s){return this.premultiply(er.makeRotation(-s)),this}translate(s,l){return this.premultiply(er.makeTranslation(s,l)),this}makeTranslation(s,l){return this.set(1,0,s,0,1,l,0,0,1),this}makeRotation(s){const l=Math.cos(s),m=Math.sin(s);return this.set(l,-m,0,m,l,0,0,0,1),this}makeScale(s,l){return this.set(s,0,0,0,l,0,0,0,1),this}equals(s){const l=this.elements,m=s.elements;for(let b=0;b<9;b++)if(l[b]!==m[b])return!1;return!0}fromArray(s,l=0){for(let m=0;m<9;m++)this.elements[m]=s[m+l];return this}toArray(s=[],l=0){const m=this.elements;return s[l]=m[0],s[l+1]=m[1],s[l+2]=m[2],s[l+3]=m[3],s[l+4]=m[4],s[l+5]=m[5],s[l+6]=m[6],s[l+7]=m[7],s[l+8]=m[8],s}clone(){return(new this.constructor).fromArray(this.elements)}}const er=new Wt;function Il(S){for(let s=S.length-1;s>=0;--s)if(S[s]>=65535)return!0;return!1}const vm={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ym(S,s){return new vm[S](s)}function Ri(S){return document.createElementNS("http://www.w3.org/1999/xhtml",S)}function Ju(S){return S<.04045?.0773993808*S:Math.pow(.9478672986*S+.0521327014,2.4)}function Hh(S){return S<.0031308?12.92*S:1.055*Math.pow(S,.41666)-.055}const Uv=(new Wt).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),mi=(new Wt).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Xn={[ic]:S=>S,[du]:S=>S.convertSRGBToLinear(),[gm]:function RM(S){return S.convertSRGBToLinear().applyMatrix3(mi)}},Ia={[ic]:S=>S,[du]:S=>S.convertLinearToSRGB(),[gm]:function Sb(S){return S.applyMatrix3(Uv).convertLinearToSRGB()}},$i={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(S){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!S},get workingColorSpace(){return ic},set workingColorSpace(S){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(S,s,l){if(!1===this.enabled||s===l||!s||!l)return S;const m=Xn[s],b=Ia[l];if(void 0===m||void 0===b)throw new Error(`Unsupported color space conversion, "${s}" to "${l}".`);return b(m(S))},fromWorkingColorSpace:function(S,s){return this.convert(S,this.workingColorSpace,s)},toWorkingColorSpace:function(S,s){return this.convert(S,s,this.workingColorSpace)}};let Mr;class _o{static getDataURL(s){if(/^data:/i.test(s.src)||typeof HTMLCanvasElement>"u")return s.src;let l;if(s instanceof HTMLCanvasElement)l=s;else{void 0===Mr&&(Mr=Ri("canvas")),Mr.width=s.width,Mr.height=s.height;const m=Mr.getContext("2d");s instanceof ImageData?m.putImageData(s,0,0):m.drawImage(s,0,0,s.width,s.height),l=Mr}return l.width>2048||l.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",s),l.toDataURL("image/jpeg",.6)):l.toDataURL("image/png")}static sRGBToLinear(s){if(typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap){const l=Ri("canvas");l.width=s.width,l.height=s.height;const m=l.getContext("2d");m.drawImage(s,0,0,s.width,s.height);const b=m.getImageData(0,0,s.width,s.height),p=b.data;for(let i=0;i<p.length;i++)p[i]=255*Ju(p[i]/255);return m.putImageData(b,0,0),l}if(s.data){const l=s.data.slice(0);for(let m=0;m<l.length;m++)l[m]=l instanceof Uint8Array||l instanceof Uint8ClampedArray?Math.floor(255*Ju(l[m]/255)):Ju(l[m]);return{data:l,width:s.width,height:s.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),s}}class nl{constructor(s=null){this.isSource=!0,this.uuid=go(),this.data=s,this.version=0}set needsUpdate(s){!0===s&&this.version++}toJSON(s){const l=void 0===s||"string"==typeof s;if(!l&&void 0!==s.images[this.uuid])return s.images[this.uuid];const m={uuid:this.uuid,url:""},b=this.data;if(null!==b){let p;if(Array.isArray(b)){p=[];for(let i=0,o=b.length;i<o;i++)p.push(Eo(b[i].isDataTexture?b[i].image:b[i]))}else p=Eo(b);m.url=p}return l||(s.images[this.uuid]=m),m}}function Eo(S){return typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&S instanceof ImageBitmap?_o.getDataURL(S):S.data?{data:Array.from(S.data),width:S.width,height:S.height,type:S.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $_=0,rc=(()=>{class S extends Zu{constructor(l=S.DEFAULT_IMAGE,m=S.DEFAULT_MAPPING,b=Oo,p=Oo,i=mo,o=$u,u=Aa,f=qu,_=S.DEFAULT_ANISOTROPY,x=Qc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$_++}),this.uuid=go(),this.name="",this.source=new nl(l),this.mipmaps=[],this.mapping=m,this.channel=0,this.wrapS=b,this.wrapT=p,this.magFilter=i,this.minFilter=o,this.anisotropy=_,this.format=u,this.internalFormat=null,this.type=f,this.offset=new Sn(0,0),this.repeat=new Sn(1,1),this.center=new Sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=x,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(l=null){this.source.data=l}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(l){return this.name=l.name,this.source=l.source,this.mipmaps=l.mipmaps.slice(0),this.mapping=l.mapping,this.channel=l.channel,this.wrapS=l.wrapS,this.wrapT=l.wrapT,this.magFilter=l.magFilter,this.minFilter=l.minFilter,this.anisotropy=l.anisotropy,this.format=l.format,this.internalFormat=l.internalFormat,this.type=l.type,this.offset.copy(l.offset),this.repeat.copy(l.repeat),this.center.copy(l.center),this.rotation=l.rotation,this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrix.copy(l.matrix),this.generateMipmaps=l.generateMipmaps,this.premultiplyAlpha=l.premultiplyAlpha,this.flipY=l.flipY,this.unpackAlignment=l.unpackAlignment,this.encoding=l.encoding,this.userData=JSON.parse(JSON.stringify(l.userData)),this.needsUpdate=!0,this}toJSON(l){const m=void 0===l||"string"==typeof l;if(!m&&void 0!==l.textures[this.uuid])return l.textures[this.uuid];const b={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(l).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(b.userData=this.userData),m||(l.textures[this.uuid]=b),b}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(l){if(300!==this.mapping)return l;if(l.applyMatrix3(this.matrix),l.x<0||l.x>1)switch(this.wrapS){case Ud:l.x=l.x-Math.floor(l.x);break;case Oo:l.x=l.x<0?0:1;break;case io:l.x=1===Math.abs(Math.floor(l.x)%2)?Math.ceil(l.x)-l.x:l.x-Math.floor(l.x)}if(l.y<0||l.y>1)switch(this.wrapT){case Ud:l.y=l.y-Math.floor(l.y);break;case Oo:l.y=l.y<0?0:1;break;case io:l.y=1===Math.abs(Math.floor(l.y)%2)?Math.ceil(l.y)-l.y:l.y-Math.floor(l.y)}return this.flipY&&(l.y=1-l.y),l}set needsUpdate(l){!0===l&&(this.version++,this.source.needsUpdate=!0)}}return S.DEFAULT_IMAGE=null,S.DEFAULT_MAPPING=300,S.DEFAULT_ANISOTROPY=1,S})();class tr{constructor(s=0,l=0,m=0,b=1){tr.prototype.isVector4=!0,this.x=s,this.y=l,this.z=m,this.w=b}get width(){return this.z}set width(s){this.z=s}get height(){return this.w}set height(s){this.w=s}set(s,l,m,b){return this.x=s,this.y=l,this.z=m,this.w=b,this}setScalar(s){return this.x=s,this.y=s,this.z=s,this.w=s,this}setX(s){return this.x=s,this}setY(s){return this.y=s,this}setZ(s){return this.z=s,this}setW(s){return this.w=s,this}setComponent(s,l){switch(s){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+s)}return this}getComponent(s){switch(s){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+s)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(s){return this.x=s.x,this.y=s.y,this.z=s.z,this.w=void 0!==s.w?s.w:1,this}add(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z,this.w+=s.w,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(s,l){return this.x=s.x+l.x,this.y=s.y+l.y,this.z=s.z+l.z,this.w=s.w+l.w,this}addScaledVector(s,l){return this.x+=s.x*l,this.y+=s.y*l,this.z+=s.z*l,this.w+=s.w*l,this}sub(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z,this.w-=s.w,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(s,l){return this.x=s.x-l.x,this.y=s.y-l.y,this.z=s.z-l.z,this.w=s.w-l.w,this}multiply(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z,this.w*=s.w,this}multiplyScalar(s){return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this}applyMatrix4(s){const l=this.x,m=this.y,b=this.z,p=this.w,i=s.elements;return this.x=i[0]*l+i[4]*m+i[8]*b+i[12]*p,this.y=i[1]*l+i[5]*m+i[9]*b+i[13]*p,this.z=i[2]*l+i[6]*m+i[10]*b+i[14]*p,this.w=i[3]*l+i[7]*m+i[11]*b+i[15]*p,this}divideScalar(s){return this.multiplyScalar(1/s)}setAxisAngleFromQuaternion(s){this.w=2*Math.acos(s.w);const l=Math.sqrt(1-s.w*s.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=s.x/l,this.y=s.y/l,this.z=s.z/l),this}setAxisAngleFromRotationMatrix(s){let l,m,b,p;const u=s.elements,f=u[0],_=u[4],x=u[8],M=u[1],E=u[5],D=u[9],k=u[2],O=u[6],I=u[10];if(Math.abs(_-M)<.01&&Math.abs(x-k)<.01&&Math.abs(D-O)<.01){if(Math.abs(_+M)<.1&&Math.abs(x+k)<.1&&Math.abs(D+O)<.1&&Math.abs(f+E+I-3)<.1)return this.set(1,0,0,0),this;l=Math.PI;const B=(f+1)/2,j=(E+1)/2,$=(I+1)/2,G=(_+M)/4,Q=(x+k)/4,J=(D+O)/4;return B>j&&B>$?B<.01?(m=0,b=.707106781,p=.707106781):(m=Math.sqrt(B),b=G/m,p=Q/m):j>$?j<.01?(m=.707106781,b=0,p=.707106781):(b=Math.sqrt(j),m=G/b,p=J/b):$<.01?(m=.707106781,b=.707106781,p=0):(p=Math.sqrt($),m=Q/p,b=J/p),this.set(m,b,p,l),this}let U=Math.sqrt((O-D)*(O-D)+(x-k)*(x-k)+(M-_)*(M-_));return Math.abs(U)<.001&&(U=1),this.x=(O-D)/U,this.y=(x-k)/U,this.z=(M-_)/U,this.w=Math.acos((f+E+I-1)/2),this}min(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this.z=Math.min(this.z,s.z),this.w=Math.min(this.w,s.w),this}max(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this.z=Math.max(this.z,s.z),this.w=Math.max(this.w,s.w),this}clamp(s,l){return this.x=Math.max(s.x,Math.min(l.x,this.x)),this.y=Math.max(s.y,Math.min(l.y,this.y)),this.z=Math.max(s.z,Math.min(l.z,this.z)),this.w=Math.max(s.w,Math.min(l.w,this.w)),this}clampScalar(s,l){return this.x=Math.max(s,Math.min(l,this.x)),this.y=Math.max(s,Math.min(l,this.y)),this.z=Math.max(s,Math.min(l,this.z)),this.w=Math.max(s,Math.min(l,this.w)),this}clampLength(s,l){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(s,Math.min(l,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(s){return this.x*s.x+this.y*s.y+this.z*s.z+this.w*s.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(s){return this.normalize().multiplyScalar(s)}lerp(s,l){return this.x+=(s.x-this.x)*l,this.y+=(s.y-this.y)*l,this.z+=(s.z-this.z)*l,this.w+=(s.w-this.w)*l,this}lerpVectors(s,l,m){return this.x=s.x+(l.x-s.x)*m,this.y=s.y+(l.y-s.y)*m,this.z=s.z+(l.z-s.z)*m,this.w=s.w+(l.w-s.w)*m,this}equals(s){return s.x===this.x&&s.y===this.y&&s.z===this.z&&s.w===this.w}fromArray(s,l=0){return this.x=s[l],this.y=s[l+1],this.z=s[l+2],this.w=s[l+3],this}toArray(s=[],l=0){return s[l]=this.x,s[l+1]=this.y,s[l+2]=this.z,s[l+3]=this.w,s}fromBufferAttribute(s,l){return this.x=s.getX(l),this.y=s.getY(l),this.z=s.getZ(l),this.w=s.getW(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vi extends Zu{constructor(s=1,l=1,m={}){super(),this.isWebGLRenderTarget=!0,this.width=s,this.height=l,this.depth=1,this.scissor=new tr(0,0,s,l),this.scissorTest=!1,this.viewport=new tr(0,0,s,l),this.texture=new rc({width:s,height:l,depth:1},m.mapping,m.wrapS,m.wrapT,m.magFilter,m.minFilter,m.format,m.type,m.anisotropy,m.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==m.generateMipmaps&&m.generateMipmaps,this.texture.internalFormat=void 0!==m.internalFormat?m.internalFormat:null,this.texture.minFilter=void 0!==m.minFilter?m.minFilter:mo,this.depthBuffer=void 0===m.depthBuffer||m.depthBuffer,this.stencilBuffer=void 0!==m.stencilBuffer&&m.stencilBuffer,this.depthTexture=void 0!==m.depthTexture?m.depthTexture:null,this.samples=void 0!==m.samples?m.samples:0}setSize(s,l,m=1){(this.width!==s||this.height!==l||this.depth!==m)&&(this.width=s,this.height=l,this.depth=m,this.texture.image.width=s,this.texture.image.height=l,this.texture.image.depth=m,this.dispose()),this.viewport.set(0,0,s,l),this.scissor.set(0,0,s,l)}clone(){return(new this.constructor).copy(this)}copy(s){this.width=s.width,this.height=s.height,this.depth=s.depth,this.viewport.copy(s.viewport),this.texture=s.texture.clone(),this.texture.isRenderTargetTexture=!0;const l=Object.assign({},s.texture.image);return this.texture.source=new nl(l),this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,null!==s.depthTexture&&(this.depthTexture=s.depthTexture.clone()),this.samples=s.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gn extends rc{constructor(s=null,l=1,m=1,b=1){super(null),this.isDataArrayTexture=!0,this.image={data:s,width:l,height:m,depth:b},this.magFilter=gr,this.minFilter=gr,this.wrapR=Oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zs extends rc{constructor(s=null,l=1,m=1,b=1){super(null),this.isData3DTexture=!0,this.image={data:s,width:l,height:m,depth:b},this.magFilter=gr,this.minFilter=gr,this.wrapR=Oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fs{constructor(s=0,l=0,m=0,b=1){this.isQuaternion=!0,this._x=s,this._y=l,this._z=m,this._w=b}static slerpFlat(s,l,m,b,p,i,o){let u=m[b+0],f=m[b+1],_=m[b+2],x=m[b+3];const M=p[i+0],E=p[i+1],D=p[i+2],k=p[i+3];if(0===o)return s[l+0]=u,s[l+1]=f,s[l+2]=_,void(s[l+3]=x);if(1===o)return s[l+0]=M,s[l+1]=E,s[l+2]=D,void(s[l+3]=k);if(x!==k||u!==M||f!==E||_!==D){let O=1-o;const I=u*M+f*E+_*D+x*k,U=I>=0?1:-1,B=1-I*I;if(B>Number.EPSILON){const $=Math.sqrt(B),G=Math.atan2($,I*U);O=Math.sin(O*G)/$,o=Math.sin(o*G)/$}const j=o*U;if(u=u*O+M*j,f=f*O+E*j,_=_*O+D*j,x=x*O+k*j,O===1-o){const $=1/Math.sqrt(u*u+f*f+_*_+x*x);u*=$,f*=$,_*=$,x*=$}}s[l]=u,s[l+1]=f,s[l+2]=_,s[l+3]=x}static multiplyQuaternionsFlat(s,l,m,b,p,i){const o=m[b],u=m[b+1],f=m[b+2],_=m[b+3],x=p[i],M=p[i+1],E=p[i+2],D=p[i+3];return s[l]=o*D+_*x+u*E-f*M,s[l+1]=u*D+_*M+f*x-o*E,s[l+2]=f*D+_*E+o*M-u*x,s[l+3]=_*D-o*x-u*M-f*E,s}get x(){return this._x}set x(s){this._x=s,this._onChangeCallback()}get y(){return this._y}set y(s){this._y=s,this._onChangeCallback()}get z(){return this._z}set z(s){this._z=s,this._onChangeCallback()}get w(){return this._w}set w(s){this._w=s,this._onChangeCallback()}set(s,l,m,b){return this._x=s,this._y=l,this._z=m,this._w=b,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(s){return this._x=s.x,this._y=s.y,this._z=s.z,this._w=s.w,this._onChangeCallback(),this}setFromEuler(s,l){const m=s._x,b=s._y,p=s._z,i=s._order,o=Math.cos,u=Math.sin,f=o(m/2),_=o(b/2),x=o(p/2),M=u(m/2),E=u(b/2),D=u(p/2);switch(i){case"XYZ":this._x=M*_*x+f*E*D,this._y=f*E*x-M*_*D,this._z=f*_*D+M*E*x,this._w=f*_*x-M*E*D;break;case"YXZ":this._x=M*_*x+f*E*D,this._y=f*E*x-M*_*D,this._z=f*_*D-M*E*x,this._w=f*_*x+M*E*D;break;case"ZXY":this._x=M*_*x-f*E*D,this._y=f*E*x+M*_*D,this._z=f*_*D+M*E*x,this._w=f*_*x-M*E*D;break;case"ZYX":this._x=M*_*x-f*E*D,this._y=f*E*x+M*_*D,this._z=f*_*D-M*E*x,this._w=f*_*x+M*E*D;break;case"YZX":this._x=M*_*x+f*E*D,this._y=f*E*x+M*_*D,this._z=f*_*D-M*E*x,this._w=f*_*x-M*E*D;break;case"XZY":this._x=M*_*x-f*E*D,this._y=f*E*x-M*_*D,this._z=f*_*D+M*E*x,this._w=f*_*x+M*E*D;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==l&&this._onChangeCallback(),this}setFromAxisAngle(s,l){const m=l/2,b=Math.sin(m);return this._x=s.x*b,this._y=s.y*b,this._z=s.z*b,this._w=Math.cos(m),this._onChangeCallback(),this}setFromRotationMatrix(s){const l=s.elements,m=l[0],b=l[4],p=l[8],i=l[1],o=l[5],u=l[9],f=l[2],_=l[6],x=l[10],M=m+o+x;if(M>0){const E=.5/Math.sqrt(M+1);this._w=.25/E,this._x=(_-u)*E,this._y=(p-f)*E,this._z=(i-b)*E}else if(m>o&&m>x){const E=2*Math.sqrt(1+m-o-x);this._w=(_-u)/E,this._x=.25*E,this._y=(b+i)/E,this._z=(p+f)/E}else if(o>x){const E=2*Math.sqrt(1+o-m-x);this._w=(p-f)/E,this._x=(b+i)/E,this._y=.25*E,this._z=(u+_)/E}else{const E=2*Math.sqrt(1+x-m-o);this._w=(i-b)/E,this._x=(p+f)/E,this._y=(u+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(s,l){let m=s.dot(l)+1;return m<Number.EPSILON?(m=0,Math.abs(s.x)>Math.abs(s.z)?(this._x=-s.y,this._y=s.x,this._z=0,this._w=m):(this._x=0,this._y=-s.z,this._z=s.y,this._w=m)):(this._x=s.y*l.z-s.z*l.y,this._y=s.z*l.x-s.x*l.z,this._z=s.x*l.y-s.y*l.x,this._w=m),this.normalize()}angleTo(s){return 2*Math.acos(Math.abs(kr(this.dot(s),-1,1)))}rotateTowards(s,l){const m=this.angleTo(s);if(0===m)return this;const b=Math.min(1,l/m);return this.slerp(s,b),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(s){return this._x*s._x+this._y*s._y+this._z*s._z+this._w*s._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let s=this.length();return 0===s?(this._x=0,this._y=0,this._z=0,this._w=1):(s=1/s,this._x=this._x*s,this._y=this._y*s,this._z=this._z*s,this._w=this._w*s),this._onChangeCallback(),this}multiply(s){return this.multiplyQuaternions(this,s)}premultiply(s){return this.multiplyQuaternions(s,this)}multiplyQuaternions(s,l){const m=s._x,b=s._y,p=s._z,i=s._w,o=l._x,u=l._y,f=l._z,_=l._w;return this._x=m*_+i*o+b*f-p*u,this._y=b*_+i*u+p*o-m*f,this._z=p*_+i*f+m*u-b*o,this._w=i*_-m*o-b*u-p*f,this._onChangeCallback(),this}slerp(s,l){if(0===l)return this;if(1===l)return this.copy(s);const m=this._x,b=this._y,p=this._z,i=this._w;let o=i*s._w+m*s._x+b*s._y+p*s._z;if(o<0?(this._w=-s._w,this._x=-s._x,this._y=-s._y,this._z=-s._z,o=-o):this.copy(s),o>=1)return this._w=i,this._x=m,this._y=b,this._z=p,this;const u=1-o*o;if(u<=Number.EPSILON){const E=1-l;return this._w=E*i+l*this._w,this._x=E*m+l*this._x,this._y=E*b+l*this._y,this._z=E*p+l*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),_=Math.atan2(f,o),x=Math.sin((1-l)*_)/f,M=Math.sin(l*_)/f;return this._w=i*x+this._w*M,this._x=m*x+this._x*M,this._y=b*x+this._y*M,this._z=p*x+this._z*M,this._onChangeCallback(),this}slerpQuaternions(s,l,m){return this.copy(s).slerp(l,m)}random(){const s=Math.random(),l=Math.sqrt(1-s),m=Math.sqrt(s),b=2*Math.PI*Math.random(),p=2*Math.PI*Math.random();return this.set(l*Math.cos(b),m*Math.sin(p),m*Math.cos(p),l*Math.sin(b))}equals(s){return s._x===this._x&&s._y===this._y&&s._z===this._z&&s._w===this._w}fromArray(s,l=0){return this._x=s[l],this._y=s[l+1],this._z=s[l+2],this._w=s[l+3],this._onChangeCallback(),this}toArray(s=[],l=0){return s[l]=this._x,s[l+1]=this._y,s[l+2]=this._z,s[l+3]=this._w,s}fromBufferAttribute(s,l){return this._x=s.getX(l),this._y=s.getY(l),this._z=s.getZ(l),this._w=s.getW(l),this}toJSON(){return this.toArray()}_onChange(s){return this._onChangeCallback=s,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pe{constructor(s=0,l=0,m=0){Pe.prototype.isVector3=!0,this.x=s,this.y=l,this.z=m}set(s,l,m){return void 0===m&&(m=this.z),this.x=s,this.y=l,this.z=m,this}setScalar(s){return this.x=s,this.y=s,this.z=s,this}setX(s){return this.x=s,this}setY(s){return this.y=s,this}setZ(s){return this.z=s,this}setComponent(s,l){switch(s){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+s)}return this}getComponent(s){switch(s){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+s)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(s){return this.x=s.x,this.y=s.y,this.z=s.z,this}add(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(s,l){return this.x=s.x+l.x,this.y=s.y+l.y,this.z=s.z+l.z,this}addScaledVector(s,l){return this.x+=s.x*l,this.y+=s.y*l,this.z+=s.z*l,this}sub(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(s,l){return this.x=s.x-l.x,this.y=s.y-l.y,this.z=s.z-l.z,this}multiply(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z,this}multiplyScalar(s){return this.x*=s,this.y*=s,this.z*=s,this}multiplyVectors(s,l){return this.x=s.x*l.x,this.y=s.y*l.y,this.z=s.z*l.z,this}applyEuler(s){return this.applyQuaternion(jf.setFromEuler(s))}applyAxisAngle(s,l){return this.applyQuaternion(jf.setFromAxisAngle(s,l))}applyMatrix3(s){const l=this.x,m=this.y,b=this.z,p=s.elements;return this.x=p[0]*l+p[3]*m+p[6]*b,this.y=p[1]*l+p[4]*m+p[7]*b,this.z=p[2]*l+p[5]*m+p[8]*b,this}applyNormalMatrix(s){return this.applyMatrix3(s).normalize()}applyMatrix4(s){const l=this.x,m=this.y,b=this.z,p=s.elements,i=1/(p[3]*l+p[7]*m+p[11]*b+p[15]);return this.x=(p[0]*l+p[4]*m+p[8]*b+p[12])*i,this.y=(p[1]*l+p[5]*m+p[9]*b+p[13])*i,this.z=(p[2]*l+p[6]*m+p[10]*b+p[14])*i,this}applyQuaternion(s){const l=this.x,m=this.y,b=this.z,p=s.x,i=s.y,o=s.z,u=s.w,f=u*l+i*b-o*m,_=u*m+o*l-p*b,x=u*b+p*m-i*l,M=-p*l-i*m-o*b;return this.x=f*u+M*-p+_*-o-x*-i,this.y=_*u+M*-i+x*-p-f*-o,this.z=x*u+M*-o+f*-i-_*-p,this}project(s){return this.applyMatrix4(s.matrixWorldInverse).applyMatrix4(s.projectionMatrix)}unproject(s){return this.applyMatrix4(s.projectionMatrixInverse).applyMatrix4(s.matrixWorld)}transformDirection(s){const l=this.x,m=this.y,b=this.z,p=s.elements;return this.x=p[0]*l+p[4]*m+p[8]*b,this.y=p[1]*l+p[5]*m+p[9]*b,this.z=p[2]*l+p[6]*m+p[10]*b,this.normalize()}divide(s){return this.x/=s.x,this.y/=s.y,this.z/=s.z,this}divideScalar(s){return this.multiplyScalar(1/s)}min(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this.z=Math.min(this.z,s.z),this}max(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this.z=Math.max(this.z,s.z),this}clamp(s,l){return this.x=Math.max(s.x,Math.min(l.x,this.x)),this.y=Math.max(s.y,Math.min(l.y,this.y)),this.z=Math.max(s.z,Math.min(l.z,this.z)),this}clampScalar(s,l){return this.x=Math.max(s,Math.min(l,this.x)),this.y=Math.max(s,Math.min(l,this.y)),this.z=Math.max(s,Math.min(l,this.z)),this}clampLength(s,l){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(s,Math.min(l,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(s){return this.x*s.x+this.y*s.y+this.z*s.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(s){return this.normalize().multiplyScalar(s)}lerp(s,l){return this.x+=(s.x-this.x)*l,this.y+=(s.y-this.y)*l,this.z+=(s.z-this.z)*l,this}lerpVectors(s,l,m){return this.x=s.x+(l.x-s.x)*m,this.y=s.y+(l.y-s.y)*m,this.z=s.z+(l.z-s.z)*m,this}cross(s){return this.crossVectors(this,s)}crossVectors(s,l){const m=s.x,b=s.y,p=s.z,i=l.x,o=l.y,u=l.z;return this.x=b*u-p*o,this.y=p*i-m*u,this.z=m*o-b*i,this}projectOnVector(s){const l=s.lengthSq();if(0===l)return this.set(0,0,0);const m=s.dot(this)/l;return this.copy(s).multiplyScalar(m)}projectOnPlane(s){return Re.copy(this).projectOnVector(s),this.sub(Re)}reflect(s){return this.sub(Re.copy(s).multiplyScalar(2*this.dot(s)))}angleTo(s){const l=Math.sqrt(this.lengthSq()*s.lengthSq());if(0===l)return Math.PI/2;const m=this.dot(s)/l;return Math.acos(kr(m,-1,1))}distanceTo(s){return Math.sqrt(this.distanceToSquared(s))}distanceToSquared(s){const l=this.x-s.x,m=this.y-s.y,b=this.z-s.z;return l*l+m*m+b*b}manhattanDistanceTo(s){return Math.abs(this.x-s.x)+Math.abs(this.y-s.y)+Math.abs(this.z-s.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(s,l,m){const b=Math.sin(l)*s;return this.x=b*Math.sin(m),this.y=Math.cos(l)*s,this.z=b*Math.cos(m),this}setFromCylindrical(s){return this.setFromCylindricalCoords(s.radius,s.theta,s.y)}setFromCylindricalCoords(s,l,m){return this.x=s*Math.sin(l),this.y=m,this.z=s*Math.cos(l),this}setFromMatrixPosition(s){const l=s.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}setFromMatrixScale(s){const l=this.setFromMatrixColumn(s,0).length(),m=this.setFromMatrixColumn(s,1).length(),b=this.setFromMatrixColumn(s,2).length();return this.x=l,this.y=m,this.z=b,this}setFromMatrixColumn(s,l){return this.fromArray(s.elements,4*l)}setFromMatrix3Column(s,l){return this.fromArray(s.elements,3*l)}setFromEuler(s){return this.x=s._x,this.y=s._y,this.z=s._z,this}setFromColor(s){return this.x=s.r,this.y=s.g,this.z=s.b,this}equals(s){return s.x===this.x&&s.y===this.y&&s.z===this.z}fromArray(s,l=0){return this.x=s[l],this.y=s[l+1],this.z=s[l+2],this}toArray(s=[],l=0){return s[l]=this.x,s[l+1]=this.y,s[l+2]=this.z,s}fromBufferAttribute(s,l){return this.x=s.getX(l),this.y=s.getY(l),this.z=s.getZ(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const s=2*(Math.random()-.5),l=Math.random()*Math.PI*2,m=Math.sqrt(1-s**2);return this.x=m*Math.cos(l),this.y=m*Math.sin(l),this.z=s,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Re=new Pe,jf=new fs;class Ac{constructor(s=new Pe(1/0,1/0,1/0),l=new Pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=s,this.max=l}set(s,l){return this.min.copy(s),this.max.copy(l),this}setFromArray(s){this.makeEmpty();for(let l=0,m=s.length;l<m;l+=3)this.expandByPoint(Fo.fromArray(s,l));return this}setFromBufferAttribute(s){this.makeEmpty();for(let l=0,m=s.count;l<m;l++)this.expandByPoint(Fo.fromBufferAttribute(s,l));return this}setFromPoints(s){this.makeEmpty();for(let l=0,m=s.length;l<m;l++)this.expandByPoint(s[l]);return this}setFromCenterAndSize(s,l){const m=Fo.copy(l).multiplyScalar(.5);return this.min.copy(s).sub(m),this.max.copy(s).add(m),this}setFromObject(s,l=!1){return this.makeEmpty(),this.expandByObject(s,l)}clone(){return(new this.constructor).copy(this)}copy(s){return this.min.copy(s.min),this.max.copy(s.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(s){return this.isEmpty()?s.set(0,0,0):s.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(s){return this.isEmpty()?s.set(0,0,0):s.subVectors(this.max,this.min)}expandByPoint(s){return this.min.min(s),this.max.max(s),this}expandByVector(s){return this.min.sub(s),this.max.add(s),this}expandByScalar(s){return this.min.addScalar(-s),this.max.addScalar(s),this}expandByObject(s,l=!1){if(s.updateWorldMatrix(!1,!1),void 0!==s.boundingBox)null===s.boundingBox&&s.computeBoundingBox(),Co.copy(s.boundingBox),Co.applyMatrix4(s.matrixWorld),this.union(Co);else{const b=s.geometry;if(void 0!==b)if(l&&void 0!==b.attributes&&void 0!==b.attributes.position){const p=b.attributes.position;for(let i=0,o=p.count;i<o;i++)Fo.fromBufferAttribute(p,i).applyMatrix4(s.matrixWorld),this.expandByPoint(Fo)}else null===b.boundingBox&&b.computeBoundingBox(),Co.copy(b.boundingBox),Co.applyMatrix4(s.matrixWorld),this.union(Co)}const m=s.children;for(let b=0,p=m.length;b<p;b++)this.expandByObject(m[b],l);return this}containsPoint(s){return!(s.x<this.min.x||s.x>this.max.x||s.y<this.min.y||s.y>this.max.y||s.z<this.min.z||s.z>this.max.z)}containsBox(s){return this.min.x<=s.min.x&&s.max.x<=this.max.x&&this.min.y<=s.min.y&&s.max.y<=this.max.y&&this.min.z<=s.min.z&&s.max.z<=this.max.z}getParameter(s,l){return l.set((s.x-this.min.x)/(this.max.x-this.min.x),(s.y-this.min.y)/(this.max.y-this.min.y),(s.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(s){return!(s.max.x<this.min.x||s.min.x>this.max.x||s.max.y<this.min.y||s.min.y>this.max.y||s.max.z<this.min.z||s.min.z>this.max.z)}intersectsSphere(s){return this.clampPoint(s.center,Fo),Fo.distanceToSquared(s.center)<=s.radius*s.radius}intersectsPlane(s){let l,m;return s.normal.x>0?(l=s.normal.x*this.min.x,m=s.normal.x*this.max.x):(l=s.normal.x*this.max.x,m=s.normal.x*this.min.x),s.normal.y>0?(l+=s.normal.y*this.min.y,m+=s.normal.y*this.max.y):(l+=s.normal.y*this.max.y,m+=s.normal.y*this.min.y),s.normal.z>0?(l+=s.normal.z*this.min.z,m+=s.normal.z*this.max.z):(l+=s.normal.z*this.max.z,m+=s.normal.z*this.min.z),l<=-s.constant&&m>=-s.constant}intersectsTriangle(s){if(this.isEmpty())return!1;this.getCenter(No),pu.subVectors(this.max,No),Ss.subVectors(s.a,No),da.subVectors(s.b,No),Es.subVectors(s.c,No),so.subVectors(da,Ss),Tr.subVectors(Es,da),Ks.subVectors(Ss,Es);let l=[0,-so.z,so.y,0,-Tr.z,Tr.y,0,-Ks.z,Ks.y,so.z,0,-so.x,Tr.z,0,-Tr.x,Ks.z,0,-Ks.x,-so.y,so.x,0,-Tr.y,Tr.x,0,-Ks.y,Ks.x,0];return!(!Dc(l,Ss,da,Es,pu)||(l=[1,0,0,0,1,0,0,0,1],!Dc(l,Ss,da,Es,pu)))&&(wr.crossVectors(so,Tr),l=[wr.x,wr.y,wr.z],Dc(l,Ss,da,Es,pu))}clampPoint(s,l){return l.copy(s).clamp(this.min,this.max)}distanceToPoint(s){return this.clampPoint(s,Fo).distanceTo(s)}getBoundingSphere(s){return this.isEmpty()?s.makeEmpty():(this.getCenter(s.center),s.radius=.5*this.getSize(Fo).length()),s}intersect(s){return this.min.max(s.min),this.max.min(s.max),this.isEmpty()&&this.makeEmpty(),this}union(s){return this.min.min(s.min),this.max.max(s.max),this}applyMatrix4(s){return this.isEmpty()||(gi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(s),gi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(s),gi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(s),gi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(s),gi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(s),gi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(s),gi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(s),gi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(s),this.setFromPoints(gi)),this}translate(s){return this.min.add(s),this.max.add(s),this}equals(s){return s.min.equals(this.min)&&s.max.equals(this.max)}}const gi=[new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe],Fo=new Pe,Co=new Ac,Ss=new Pe,da=new Pe,Es=new Pe,so=new Pe,Tr=new Pe,Ks=new Pe,No=new Pe,pu=new Pe,wr=new Pe,kl=new Pe;function Dc(S,s,l,m,b){for(let p=0,i=S.length-3;p<=i;p+=3){kl.fromArray(S,p);const o=b.x*Math.abs(kl.x)+b.y*Math.abs(kl.y)+b.z*Math.abs(kl.z),u=s.dot(kl),f=l.dot(kl),_=m.dot(kl);if(Math.max(-Math.max(u,f,_),Math.min(u,f,_))>o)return!1}return!0}const Gd=new Ac,Ll=new Pe,ha=new Pe;class Js{constructor(s=new Pe,l=-1){this.center=s,this.radius=l}set(s,l){return this.center.copy(s),this.radius=l,this}setFromPoints(s,l){const m=this.center;void 0!==l?m.copy(l):Gd.setFromPoints(s).getCenter(m);let b=0;for(let p=0,i=s.length;p<i;p++)b=Math.max(b,m.distanceToSquared(s[p]));return this.radius=Math.sqrt(b),this}copy(s){return this.center.copy(s.center),this.radius=s.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(s){return s.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(s){return s.distanceTo(this.center)-this.radius}intersectsSphere(s){const l=this.radius+s.radius;return s.center.distanceToSquared(this.center)<=l*l}intersectsBox(s){return s.intersectsSphere(this)}intersectsPlane(s){return Math.abs(s.distanceToPoint(this.center))<=this.radius}clampPoint(s,l){const m=this.center.distanceToSquared(s);return l.copy(s),m>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}getBoundingBox(s){return this.isEmpty()?(s.makeEmpty(),s):(s.set(this.center,this.center),s.expandByScalar(this.radius),s)}applyMatrix4(s){return this.center.applyMatrix4(s),this.radius=this.radius*s.getMaxScaleOnAxis(),this}translate(s){return this.center.add(s),this}expandByPoint(s){if(this.isEmpty())return this.center.copy(s),this.radius=0,this;Ll.subVectors(s,this.center);const l=Ll.lengthSq();if(l>this.radius*this.radius){const m=Math.sqrt(l),b=.5*(m-this.radius);this.center.addScaledVector(Ll,b/m),this.radius+=b}return this}union(s){return s.isEmpty()?this:this.isEmpty()?(this.copy(s),this):(!0===this.center.equals(s.center)?this.radius=Math.max(this.radius,s.radius):(ha.subVectors(s.center,this.center).setLength(s.radius),this.expandByPoint(Ll.copy(s.center).add(ha)),this.expandByPoint(Ll.copy(s.center).sub(ha))),this)}equals(s){return s.center.equals(this.center)&&s.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Sr=new Pe,sc=new Pe,oo=new Pe,Zr=new Pe,Ol=new Pe,Qu=new Pe,Wd=new Pe;class fa{constructor(s=new Pe,l=new Pe(0,0,-1)){this.origin=s,this.direction=l}set(s,l){return this.origin.copy(s),this.direction.copy(l),this}copy(s){return this.origin.copy(s.origin),this.direction.copy(s.direction),this}at(s,l){return l.copy(this.origin).addScaledVector(this.direction,s)}lookAt(s){return this.direction.copy(s).sub(this.origin).normalize(),this}recast(s){return this.origin.copy(this.at(s,Sr)),this}closestPointToPoint(s,l){l.subVectors(s,this.origin);const m=l.dot(this.direction);return m<0?l.copy(this.origin):l.copy(this.origin).addScaledVector(this.direction,m)}distanceToPoint(s){return Math.sqrt(this.distanceSqToPoint(s))}distanceSqToPoint(s){const l=Sr.subVectors(s,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(s):(Sr.copy(this.origin).addScaledVector(this.direction,l),Sr.distanceToSquared(s))}distanceSqToSegment(s,l,m,b){sc.copy(s).add(l).multiplyScalar(.5),oo.copy(l).sub(s).normalize(),Zr.copy(this.origin).sub(sc);const p=.5*s.distanceTo(l),i=-this.direction.dot(oo),o=Zr.dot(this.direction),u=-Zr.dot(oo),f=Zr.lengthSq(),_=Math.abs(1-i*i);let x,M,E,D;if(_>0)if(x=i*u-o,M=i*o-u,D=p*_,x>=0)if(M>=-D)if(M<=D){const k=1/_;x*=k,M*=k,E=x*(x+i*M+2*o)+M*(i*x+M+2*u)+f}else M=p,x=Math.max(0,-(i*M+o)),E=-x*x+M*(M+2*u)+f;else M=-p,x=Math.max(0,-(i*M+o)),E=-x*x+M*(M+2*u)+f;else M<=-D?(x=Math.max(0,-(-i*p+o)),M=x>0?-p:Math.min(Math.max(-p,-u),p),E=-x*x+M*(M+2*u)+f):M<=D?(x=0,M=Math.min(Math.max(-p,-u),p),E=M*(M+2*u)+f):(x=Math.max(0,-(i*p+o)),M=x>0?p:Math.min(Math.max(-p,-u),p),E=-x*x+M*(M+2*u)+f);else M=i>0?-p:p,x=Math.max(0,-(i*M+o)),E=-x*x+M*(M+2*u)+f;return m&&m.copy(this.origin).addScaledVector(this.direction,x),b&&b.copy(sc).addScaledVector(oo,M),E}intersectSphere(s,l){Sr.subVectors(s.center,this.origin);const m=Sr.dot(this.direction),b=Sr.dot(Sr)-m*m,p=s.radius*s.radius;if(b>p)return null;const i=Math.sqrt(p-b),o=m-i,u=m+i;return u<0?null:this.at(o<0?u:o,l)}intersectsSphere(s){return this.distanceSqToPoint(s.center)<=s.radius*s.radius}distanceToPlane(s){const l=s.normal.dot(this.direction);if(0===l)return 0===s.distanceToPoint(this.origin)?0:null;const m=-(this.origin.dot(s.normal)+s.constant)/l;return m>=0?m:null}intersectPlane(s,l){const m=this.distanceToPlane(s);return null===m?null:this.at(m,l)}intersectsPlane(s){const l=s.distanceToPoint(this.origin);return 0===l||s.normal.dot(this.direction)*l<0}intersectBox(s,l){let m,b,p,i,o,u;const f=1/this.direction.x,_=1/this.direction.y,x=1/this.direction.z,M=this.origin;return f>=0?(m=(s.min.x-M.x)*f,b=(s.max.x-M.x)*f):(m=(s.max.x-M.x)*f,b=(s.min.x-M.x)*f),_>=0?(p=(s.min.y-M.y)*_,i=(s.max.y-M.y)*_):(p=(s.max.y-M.y)*_,i=(s.min.y-M.y)*_),m>i||p>b||((p>m||isNaN(m))&&(m=p),(i<b||isNaN(b))&&(b=i),x>=0?(o=(s.min.z-M.z)*x,u=(s.max.z-M.z)*x):(o=(s.max.z-M.z)*x,u=(s.min.z-M.z)*x),m>u||o>b)||((o>m||m!=m)&&(m=o),(u<b||b!=b)&&(b=u),b<0)?null:this.at(m>=0?m:b,l)}intersectsBox(s){return null!==this.intersectBox(s,Sr)}intersectTriangle(s,l,m,b,p){Ol.subVectors(l,s),Qu.subVectors(m,s),Wd.crossVectors(Ol,Qu);let o,i=this.direction.dot(Wd);if(i>0){if(b)return null;o=1}else{if(!(i<0))return null;o=-1,i=-i}Zr.subVectors(this.origin,s);const u=o*this.direction.dot(Qu.crossVectors(Zr,Qu));if(u<0)return null;const f=o*this.direction.dot(Ol.cross(Zr));if(f<0||u+f>i)return null;const _=-o*Zr.dot(Wd);return _<0?null:this.at(_/i,p)}applyMatrix4(s){return this.origin.applyMatrix4(s),this.direction.transformDirection(s),this}equals(s){return s.origin.equals(this.origin)&&s.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class zi{constructor(){zi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(s,l,m,b,p,i,o,u,f,_,x,M,E,D,k,O){const I=this.elements;return I[0]=s,I[4]=l,I[8]=m,I[12]=b,I[1]=p,I[5]=i,I[9]=o,I[13]=u,I[2]=f,I[6]=_,I[10]=x,I[14]=M,I[3]=E,I[7]=D,I[11]=k,I[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new zi).fromArray(this.elements)}copy(s){const l=this.elements,m=s.elements;return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=m[6],l[7]=m[7],l[8]=m[8],l[9]=m[9],l[10]=m[10],l[11]=m[11],l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15],this}copyPosition(s){const l=this.elements,m=s.elements;return l[12]=m[12],l[13]=m[13],l[14]=m[14],this}setFromMatrix3(s){const l=s.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}extractBasis(s,l,m){return s.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),m.setFromMatrixColumn(this,2),this}makeBasis(s,l,m){return this.set(s.x,l.x,m.x,0,s.y,l.y,m.y,0,s.z,l.z,m.z,0,0,0,0,1),this}extractRotation(s){const l=this.elements,m=s.elements,b=1/Hi.setFromMatrixColumn(s,0).length(),p=1/Hi.setFromMatrixColumn(s,1).length(),i=1/Hi.setFromMatrixColumn(s,2).length();return l[0]=m[0]*b,l[1]=m[1]*b,l[2]=m[2]*b,l[3]=0,l[4]=m[4]*p,l[5]=m[5]*p,l[6]=m[6]*p,l[7]=0,l[8]=m[8]*i,l[9]=m[9]*i,l[10]=m[10]*i,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromEuler(s){const l=this.elements,m=s.x,b=s.y,p=s.z,i=Math.cos(m),o=Math.sin(m),u=Math.cos(b),f=Math.sin(b),_=Math.cos(p),x=Math.sin(p);if("XYZ"===s.order){const M=i*_,E=i*x,D=o*_,k=o*x;l[0]=u*_,l[4]=-u*x,l[8]=f,l[1]=E+D*f,l[5]=M-k*f,l[9]=-o*u,l[2]=k-M*f,l[6]=D+E*f,l[10]=i*u}else if("YXZ"===s.order){const M=u*_,E=u*x,D=f*_,k=f*x;l[0]=M+k*o,l[4]=D*o-E,l[8]=i*f,l[1]=i*x,l[5]=i*_,l[9]=-o,l[2]=E*o-D,l[6]=k+M*o,l[10]=i*u}else if("ZXY"===s.order){const M=u*_,E=u*x,D=f*_,k=f*x;l[0]=M-k*o,l[4]=-i*x,l[8]=D+E*o,l[1]=E+D*o,l[5]=i*_,l[9]=k-M*o,l[2]=-i*f,l[6]=o,l[10]=i*u}else if("ZYX"===s.order){const M=i*_,E=i*x,D=o*_,k=o*x;l[0]=u*_,l[4]=D*f-E,l[8]=M*f+k,l[1]=u*x,l[5]=k*f+M,l[9]=E*f-D,l[2]=-f,l[6]=o*u,l[10]=i*u}else if("YZX"===s.order){const M=i*u,E=i*f,D=o*u,k=o*f;l[0]=u*_,l[4]=k-M*x,l[8]=D*x+E,l[1]=x,l[5]=i*_,l[9]=-o*_,l[2]=-f*_,l[6]=E*x+D,l[10]=M-k*x}else if("XZY"===s.order){const M=i*u,E=i*f,D=o*u,k=o*f;l[0]=u*_,l[4]=-x,l[8]=f*_,l[1]=M*x+k,l[5]=i*_,l[9]=E*x-D,l[2]=D*x-E,l[6]=o*_,l[10]=k*x+M}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromQuaternion(s){return this.compose(Fl,s,IM)}lookAt(s,l,m){const b=this.elements;return ka.subVectors(s,l),0===ka.lengthSq()&&(ka.z=1),ka.normalize(),$f.crossVectors(m,ka),0===$f.lengthSq()&&(1===Math.abs(m.z)?ka.x+=1e-4:ka.z+=1e-4,ka.normalize(),$f.crossVectors(m,ka)),$f.normalize(),ed.crossVectors(ka,$f),b[0]=$f.x,b[4]=ed.x,b[8]=ka.x,b[1]=$f.y,b[5]=ed.y,b[9]=ka.y,b[2]=$f.z,b[6]=ed.z,b[10]=ka.z,this}multiply(s){return this.multiplyMatrices(this,s)}premultiply(s){return this.multiplyMatrices(s,this)}multiplyMatrices(s,l){const m=s.elements,b=l.elements,p=this.elements,i=m[0],o=m[4],u=m[8],f=m[12],_=m[1],x=m[5],M=m[9],E=m[13],D=m[2],k=m[6],O=m[10],I=m[14],U=m[3],B=m[7],j=m[11],$=m[15],G=b[0],Q=b[4],J=b[8],Y=b[12],ee=b[1],he=b[5],xe=b[9],fe=b[13],ce=b[2],de=b[6],Ye=b[10],Qe=b[14],Ne=b[3],$e=b[7],et=b[11],Pt=b[15];return p[0]=i*G+o*ee+u*ce+f*Ne,p[4]=i*Q+o*he+u*de+f*$e,p[8]=i*J+o*xe+u*Ye+f*et,p[12]=i*Y+o*fe+u*Qe+f*Pt,p[1]=_*G+x*ee+M*ce+E*Ne,p[5]=_*Q+x*he+M*de+E*$e,p[9]=_*J+x*xe+M*Ye+E*et,p[13]=_*Y+x*fe+M*Qe+E*Pt,p[2]=D*G+k*ee+O*ce+I*Ne,p[6]=D*Q+k*he+O*de+I*$e,p[10]=D*J+k*xe+O*Ye+I*et,p[14]=D*Y+k*fe+O*Qe+I*Pt,p[3]=U*G+B*ee+j*ce+$*Ne,p[7]=U*Q+B*he+j*de+$*$e,p[11]=U*J+B*xe+j*Ye+$*et,p[15]=U*Y+B*fe+j*Qe+$*Pt,this}multiplyScalar(s){const l=this.elements;return l[0]*=s,l[4]*=s,l[8]*=s,l[12]*=s,l[1]*=s,l[5]*=s,l[9]*=s,l[13]*=s,l[2]*=s,l[6]*=s,l[10]*=s,l[14]*=s,l[3]*=s,l[7]*=s,l[11]*=s,l[15]*=s,this}determinant(){const s=this.elements,l=s[0],m=s[4],b=s[8],p=s[12],i=s[1],o=s[5],u=s[9],f=s[13],_=s[2],x=s[6],M=s[10],E=s[14];return s[3]*(+p*u*x-b*f*x-p*o*M+m*f*M+b*o*E-m*u*E)+s[7]*(+l*u*E-l*f*M+p*i*M-b*i*E+b*f*_-p*u*_)+s[11]*(+l*f*x-l*o*E-p*i*x+m*i*E+p*o*_-m*f*_)+s[15]*(-b*o*_-l*u*x+l*o*M+b*i*x-m*i*M+m*u*_)}transpose(){const s=this.elements;let l;return l=s[1],s[1]=s[4],s[4]=l,l=s[2],s[2]=s[8],s[8]=l,l=s[6],s[6]=s[9],s[9]=l,l=s[3],s[3]=s[12],s[12]=l,l=s[7],s[7]=s[13],s[13]=l,l=s[11],s[11]=s[14],s[14]=l,this}setPosition(s,l,m){const b=this.elements;return s.isVector3?(b[12]=s.x,b[13]=s.y,b[14]=s.z):(b[12]=s,b[13]=l,b[14]=m),this}invert(){const s=this.elements,l=s[0],m=s[1],b=s[2],p=s[3],i=s[4],o=s[5],u=s[6],f=s[7],_=s[8],x=s[9],M=s[10],E=s[11],D=s[12],k=s[13],O=s[14],I=s[15],U=x*O*f-k*M*f+k*u*E-o*O*E-x*u*I+o*M*I,B=D*M*f-_*O*f-D*u*E+i*O*E+_*u*I-i*M*I,j=_*k*f-D*x*f+D*o*E-i*k*E-_*o*I+i*x*I,$=D*x*u-_*k*u-D*o*M+i*k*M+_*o*O-i*x*O,G=l*U+m*B+b*j+p*$;if(0===G)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Q=1/G;return s[0]=U*Q,s[1]=(k*M*p-x*O*p-k*b*E+m*O*E+x*b*I-m*M*I)*Q,s[2]=(o*O*p-k*u*p+k*b*f-m*O*f-o*b*I+m*u*I)*Q,s[3]=(x*u*p-o*M*p-x*b*f+m*M*f+o*b*E-m*u*E)*Q,s[4]=B*Q,s[5]=(_*O*p-D*M*p+D*b*E-l*O*E-_*b*I+l*M*I)*Q,s[6]=(D*u*p-i*O*p-D*b*f+l*O*f+i*b*I-l*u*I)*Q,s[7]=(i*M*p-_*u*p+_*b*f-l*M*f-i*b*E+l*u*E)*Q,s[8]=j*Q,s[9]=(D*x*p-_*k*p-D*m*E+l*k*E+_*m*I-l*x*I)*Q,s[10]=(i*k*p-D*o*p+D*m*f-l*k*f-i*m*I+l*o*I)*Q,s[11]=(_*o*p-i*x*p-_*m*f+l*x*f+i*m*E-l*o*E)*Q,s[12]=$*Q,s[13]=(_*k*b-D*x*b+D*m*M-l*k*M-_*m*O+l*x*O)*Q,s[14]=(D*o*b-i*k*b-D*m*u+l*k*u+i*m*O-l*o*O)*Q,s[15]=(i*x*b-_*o*b+_*m*u-l*x*u-i*m*M+l*o*M)*Q,this}scale(s){const l=this.elements,m=s.x,b=s.y,p=s.z;return l[0]*=m,l[4]*=b,l[8]*=p,l[1]*=m,l[5]*=b,l[9]*=p,l[2]*=m,l[6]*=b,l[10]*=p,l[3]*=m,l[7]*=b,l[11]*=p,this}getMaxScaleOnAxis(){const s=this.elements;return Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1]+s[2]*s[2],s[4]*s[4]+s[5]*s[5]+s[6]*s[6],s[8]*s[8]+s[9]*s[9]+s[10]*s[10]))}makeTranslation(s,l,m){return this.set(1,0,0,s,0,1,0,l,0,0,1,m,0,0,0,1),this}makeRotationX(s){const l=Math.cos(s),m=Math.sin(s);return this.set(1,0,0,0,0,l,-m,0,0,m,l,0,0,0,0,1),this}makeRotationY(s){const l=Math.cos(s),m=Math.sin(s);return this.set(l,0,m,0,0,1,0,0,-m,0,l,0,0,0,0,1),this}makeRotationZ(s){const l=Math.cos(s),m=Math.sin(s);return this.set(l,-m,0,0,m,l,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(s,l){const m=Math.cos(l),b=Math.sin(l),p=1-m,i=s.x,o=s.y,u=s.z,f=p*i,_=p*o;return this.set(f*i+m,f*o-b*u,f*u+b*o,0,f*o+b*u,_*o+m,_*u-b*i,0,f*u-b*o,_*u+b*i,p*u*u+m,0,0,0,0,1),this}makeScale(s,l,m){return this.set(s,0,0,0,0,l,0,0,0,0,m,0,0,0,0,1),this}makeShear(s,l,m,b,p,i){return this.set(1,m,p,0,s,1,i,0,l,b,1,0,0,0,0,1),this}compose(s,l,m){const b=this.elements,p=l._x,i=l._y,o=l._z,u=l._w,f=p+p,_=i+i,x=o+o,M=p*f,E=p*_,D=p*x,k=i*_,O=i*x,I=o*x,U=u*f,B=u*_,j=u*x,$=m.x,G=m.y,Q=m.z;return b[0]=(1-(k+I))*$,b[1]=(E+j)*$,b[2]=(D-B)*$,b[3]=0,b[4]=(E-j)*G,b[5]=(1-(M+I))*G,b[6]=(O+U)*G,b[7]=0,b[8]=(D+B)*Q,b[9]=(O-U)*Q,b[10]=(1-(M+k))*Q,b[11]=0,b[12]=s.x,b[13]=s.y,b[14]=s.z,b[15]=1,this}decompose(s,l,m){const b=this.elements;let p=Hi.set(b[0],b[1],b[2]).length();const i=Hi.set(b[4],b[5],b[6]).length(),o=Hi.set(b[8],b[9],b[10]).length();this.determinant()<0&&(p=-p),s.x=b[12],s.y=b[13],s.z=b[14],Pa.copy(this);const f=1/p,_=1/i,x=1/o;return Pa.elements[0]*=f,Pa.elements[1]*=f,Pa.elements[2]*=f,Pa.elements[4]*=_,Pa.elements[5]*=_,Pa.elements[6]*=_,Pa.elements[8]*=x,Pa.elements[9]*=x,Pa.elements[10]*=x,l.setFromRotationMatrix(Pa),m.x=p,m.y=i,m.z=o,this}makePerspective(s,l,m,b,p,i){const o=this.elements,f=2*p/(m-b),_=(l+s)/(l-s),x=(m+b)/(m-b),M=-(i+p)/(i-p),E=-2*i*p/(i-p);return o[0]=2*p/(l-s),o[4]=0,o[8]=_,o[12]=0,o[1]=0,o[5]=f,o[9]=x,o[13]=0,o[2]=0,o[6]=0,o[10]=M,o[14]=E,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(s,l,m,b,p,i){const o=this.elements,u=1/(l-s),f=1/(m-b),_=1/(i-p),x=(l+s)*u,M=(m+b)*f,E=(i+p)*_;return o[0]=2*u,o[4]=0,o[8]=0,o[12]=-x,o[1]=0,o[5]=2*f,o[9]=0,o[13]=-M,o[2]=0,o[6]=0,o[10]=-2*_,o[14]=-E,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(s){const l=this.elements,m=s.elements;for(let b=0;b<16;b++)if(l[b]!==m[b])return!1;return!0}fromArray(s,l=0){for(let m=0;m<16;m++)this.elements[m]=s[m+l];return this}toArray(s=[],l=0){const m=this.elements;return s[l]=m[0],s[l+1]=m[1],s[l+2]=m[2],s[l+3]=m[3],s[l+4]=m[4],s[l+5]=m[5],s[l+6]=m[6],s[l+7]=m[7],s[l+8]=m[8],s[l+9]=m[9],s[l+10]=m[10],s[l+11]=m[11],s[l+12]=m[12],s[l+13]=m[13],s[l+14]=m[14],s[l+15]=m[15],s}}const Hi=new Pe,Pa=new zi,Fl=new Pe(0,0,0),IM=new Pe(1,1,1),$f=new Pe,ed=new Pe,ka=new Pe,To=new zi,Bv=new fs;let Lg=(()=>{class S{constructor(l=0,m=0,b=0,p=S.DEFAULT_ORDER){this.isEuler=!0,this._x=l,this._y=m,this._z=b,this._order=p}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get order(){return this._order}set order(l){this._order=l,this._onChangeCallback()}set(l,m,b,p=this._order){return this._x=l,this._y=m,this._z=b,this._order=p,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(l){return this._x=l._x,this._y=l._y,this._z=l._z,this._order=l._order,this._onChangeCallback(),this}setFromRotationMatrix(l,m=this._order,b=!0){const p=l.elements,i=p[0],o=p[4],u=p[8],f=p[1],_=p[5],x=p[9],M=p[2],E=p[6],D=p[10];switch(m){case"XYZ":this._y=Math.asin(kr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-x,D),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(E,_),this._z=0);break;case"YXZ":this._x=Math.asin(-kr(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(u,D),this._z=Math.atan2(f,_)):(this._y=Math.atan2(-M,i),this._z=0);break;case"ZXY":this._x=Math.asin(kr(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(-M,D),this._z=Math.atan2(-o,_)):(this._y=0,this._z=Math.atan2(f,i));break;case"ZYX":this._y=Math.asin(-kr(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(E,D),this._z=Math.atan2(f,i)):(this._x=0,this._z=Math.atan2(-o,_));break;case"YZX":this._z=Math.asin(kr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-x,_),this._y=Math.atan2(-M,i)):(this._x=0,this._y=Math.atan2(u,D));break;case"XZY":this._z=Math.asin(-kr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(E,_),this._y=Math.atan2(u,i)):(this._x=Math.atan2(-x,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+m)}return this._order=m,!0===b&&this._onChangeCallback(),this}setFromQuaternion(l,m,b){return To.makeRotationFromQuaternion(l),this.setFromRotationMatrix(To,m,b)}setFromVector3(l,m=this._order){return this.set(l.x,l.y,l.z,m)}reorder(l){return Bv.setFromEuler(this),this.setFromQuaternion(Bv,l)}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._order===this._order}fromArray(l){return this._x=l[0],this._y=l[1],this._z=l[2],void 0!==l[3]&&(this._order=l[3]),this._onChangeCallback(),this}toArray(l=[],m=0){return l[m]=this._x,l[m+1]=this._y,l[m+2]=this._z,l[m+3]=this._order,l}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return S.DEFAULT_ORDER="XYZ",S})();class Og{constructor(){this.mask=1}set(s){this.mask=(1<<s|0)>>>0}enable(s){this.mask|=1<<s|0}enableAll(){this.mask=-1}toggle(s){this.mask^=1<<s|0}disable(s){this.mask&=~(1<<s|0)}disableAll(){this.mask=0}test(s){return 0!=(this.mask&s.mask)}isEnabled(s){return 0!=(this.mask&(1<<s|0))}}let qf=0;const ea=new Pe,Xf=new fs,il=new zi,Rc=new Pe,Nl=new Pe,td=new Pe,xm=new fs,Eb=new Pe(1,0,0),nd=new Pe(0,1,0),Mm=new Pe(0,0,1),Hr={type:"added"},q_={type:"removed"};let os=(()=>{class S extends Zu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qf++}),this.uuid=go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=S.DEFAULT_UP.clone();const l=new Pe,m=new Lg,b=new fs,p=new Pe(1,1,1);m._onChange(function i(){b.setFromEuler(m,!1)}),b._onChange(function o(){m.setFromQuaternion(b,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:m},quaternion:{configurable:!0,enumerable:!0,value:b},scale:{configurable:!0,enumerable:!0,value:p},modelViewMatrix:{value:new zi},normalMatrix:{value:new Wt}}),this.matrix=new zi,this.matrixWorld=new zi,this.matrixAutoUpdate=S.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=S.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Og,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(l){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(l),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(l){return this.quaternion.premultiply(l),this}setRotationFromAxisAngle(l,m){this.quaternion.setFromAxisAngle(l,m)}setRotationFromEuler(l){this.quaternion.setFromEuler(l,!0)}setRotationFromMatrix(l){this.quaternion.setFromRotationMatrix(l)}setRotationFromQuaternion(l){this.quaternion.copy(l)}rotateOnAxis(l,m){return Xf.setFromAxisAngle(l,m),this.quaternion.multiply(Xf),this}rotateOnWorldAxis(l,m){return Xf.setFromAxisAngle(l,m),this.quaternion.premultiply(Xf),this}rotateX(l){return this.rotateOnAxis(Eb,l)}rotateY(l){return this.rotateOnAxis(nd,l)}rotateZ(l){return this.rotateOnAxis(Mm,l)}translateOnAxis(l,m){return ea.copy(l).applyQuaternion(this.quaternion),this.position.add(ea.multiplyScalar(m)),this}translateX(l){return this.translateOnAxis(Eb,l)}translateY(l){return this.translateOnAxis(nd,l)}translateZ(l){return this.translateOnAxis(Mm,l)}localToWorld(l){return this.updateWorldMatrix(!0,!1),l.applyMatrix4(this.matrixWorld)}worldToLocal(l){return this.updateWorldMatrix(!0,!1),l.applyMatrix4(il.copy(this.matrixWorld).invert())}lookAt(l,m,b){l.isVector3?Rc.copy(l):Rc.set(l,m,b);const p=this.parent;this.updateWorldMatrix(!0,!1),Nl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?il.lookAt(Nl,Rc,this.up):il.lookAt(Rc,Nl,this.up),this.quaternion.setFromRotationMatrix(il),p&&(il.extractRotation(p.matrixWorld),Xf.setFromRotationMatrix(il),this.quaternion.premultiply(Xf.invert()))}add(l){if(arguments.length>1){for(let m=0;m<arguments.length;m++)this.add(arguments[m]);return this}return l===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",l),this):(l&&l.isObject3D?(null!==l.parent&&l.parent.remove(l),l.parent=this,this.children.push(l),l.dispatchEvent(Hr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",l),this)}remove(l){if(arguments.length>1){for(let b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}const m=this.children.indexOf(l);return-1!==m&&(l.parent=null,this.children.splice(m,1),l.dispatchEvent(q_)),this}removeFromParent(){const l=this.parent;return null!==l&&l.remove(this),this}clear(){for(let l=0;l<this.children.length;l++){const m=this.children[l];m.parent=null,m.dispatchEvent(q_)}return this.children.length=0,this}attach(l){return this.updateWorldMatrix(!0,!1),il.copy(this.matrixWorld).invert(),null!==l.parent&&(l.parent.updateWorldMatrix(!0,!1),il.multiply(l.parent.matrixWorld)),l.applyMatrix4(il),this.add(l),l.updateWorldMatrix(!1,!0),this}getObjectById(l){return this.getObjectByProperty("id",l)}getObjectByName(l){return this.getObjectByProperty("name",l)}getObjectByProperty(l,m){if(this[l]===m)return this;for(let b=0,p=this.children.length;b<p;b++){const o=this.children[b].getObjectByProperty(l,m);if(void 0!==o)return o}}getObjectsByProperty(l,m){let b=[];this[l]===m&&b.push(this);for(let p=0,i=this.children.length;p<i;p++){const o=this.children[p].getObjectsByProperty(l,m);o.length>0&&(b=b.concat(o))}return b}getWorldPosition(l){return this.updateWorldMatrix(!0,!1),l.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nl,l,td),l}getWorldScale(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nl,xm,l),l}getWorldDirection(l){this.updateWorldMatrix(!0,!1);const m=this.matrixWorld.elements;return l.set(m[8],m[9],m[10]).normalize()}raycast(){}traverse(l){l(this);const m=this.children;for(let b=0,p=m.length;b<p;b++)m[b].traverse(l)}traverseVisible(l){if(!1===this.visible)return;l(this);const m=this.children;for(let b=0,p=m.length;b<p;b++)m[b].traverseVisible(l)}traverseAncestors(l){const m=this.parent;null!==m&&(l(m),m.traverseAncestors(l))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(l){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||l)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,l=!0);const m=this.children;for(let b=0,p=m.length;b<p;b++){const i=m[b];(!0===i.matrixWorldAutoUpdate||!0===l)&&i.updateMatrixWorld(l)}}updateWorldMatrix(l,m){const b=this.parent;if(!0===l&&null!==b&&!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===m){const p=this.children;for(let i=0,o=p.length;i<o;i++){const u=p[i];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(l){const m=void 0===l||"string"==typeof l,b={};m&&(l={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},b.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const p={};function i(u,f){return void 0===u[f.uuid]&&(u[f.uuid]=f.toJSON(l)),f.uuid}if(p.uuid=this.uuid,p.type=this.type,""!==this.name&&(p.name=this.name),!0===this.castShadow&&(p.castShadow=!0),!0===this.receiveShadow&&(p.receiveShadow=!0),!1===this.visible&&(p.visible=!1),!1===this.frustumCulled&&(p.frustumCulled=!1),0!==this.renderOrder&&(p.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(p.userData=this.userData),p.layers=this.layers.mask,p.matrix=this.matrix.toArray(),p.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(p.matrixAutoUpdate=!1),this.isInstancedMesh&&(p.type="InstancedMesh",p.count=this.count,p.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(p.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?p.background=this.background.toJSON():this.background.isTexture&&(p.background=this.background.toJSON(l).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(p.environment=this.environment.toJSON(l).uuid);else if(this.isMesh||this.isLine||this.isPoints){p.geometry=i(l.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const f=u.shapes;if(Array.isArray(f))for(let _=0,x=f.length;_<x;_++)i(l.shapes,f[_]);else i(l.shapes,f)}}if(this.isSkinnedMesh&&(p.bindMode=this.bindMode,p.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(l.skeletons,this.skeleton),p.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let f=0,_=this.material.length;f<_;f++)u.push(i(l.materials,this.material[f]));p.material=u}else p.material=i(l.materials,this.material);if(this.children.length>0){p.children=[];for(let u=0;u<this.children.length;u++)p.children.push(this.children[u].toJSON(l).object)}if(this.animations.length>0){p.animations=[];for(let u=0;u<this.animations.length;u++)p.animations.push(i(l.animations,this.animations[u]))}if(m){const u=o(l.geometries),f=o(l.materials),_=o(l.textures),x=o(l.images),M=o(l.shapes),E=o(l.skeletons),D=o(l.animations),k=o(l.nodes);u.length>0&&(b.geometries=u),f.length>0&&(b.materials=f),_.length>0&&(b.textures=_),x.length>0&&(b.images=x),M.length>0&&(b.shapes=M),E.length>0&&(b.skeletons=E),D.length>0&&(b.animations=D),k.length>0&&(b.nodes=k)}return b.object=p,b;function o(u){const f=[];for(const _ in u){const x=u[_];delete x.metadata,f.push(x)}return f}}clone(l){return(new this.constructor).copy(this,l)}copy(l,m=!0){if(this.name=l.name,this.up.copy(l.up),this.position.copy(l.position),this.rotation.order=l.rotation.order,this.quaternion.copy(l.quaternion),this.scale.copy(l.scale),this.matrix.copy(l.matrix),this.matrixWorld.copy(l.matrixWorld),this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrixWorldNeedsUpdate=l.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=l.matrixWorldAutoUpdate,this.layers.mask=l.layers.mask,this.visible=l.visible,this.castShadow=l.castShadow,this.receiveShadow=l.receiveShadow,this.frustumCulled=l.frustumCulled,this.renderOrder=l.renderOrder,this.userData=JSON.parse(JSON.stringify(l.userData)),!0===m)for(let b=0;b<l.children.length;b++)this.add(l.children[b].clone());return this}}return S.DEFAULT_UP=new Pe(0,1,0),S.DEFAULT_MATRIX_AUTO_UPDATE=!0,S.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,S})();const Qs=new Pe,vo=new Pe,rl=new Pe,Ul=new Pe,Uo=new Pe,Bl=new Pe,ta=new Pe,Gh=new Pe,wm=new Pe,cr=new Pe;let id=!1;class yo{constructor(s=new Pe,l=new Pe,m=new Pe){this.a=s,this.b=l,this.c=m}static getNormal(s,l,m,b){b.subVectors(m,l),Qs.subVectors(s,l),b.cross(Qs);const p=b.lengthSq();return p>0?b.multiplyScalar(1/Math.sqrt(p)):b.set(0,0,0)}static getBarycoord(s,l,m,b,p){Qs.subVectors(b,l),vo.subVectors(m,l),rl.subVectors(s,l);const i=Qs.dot(Qs),o=Qs.dot(vo),u=Qs.dot(rl),f=vo.dot(vo),_=vo.dot(rl),x=i*f-o*o;if(0===x)return p.set(-2,-1,-1);const M=1/x,E=(f*u-o*_)*M,D=(i*_-o*u)*M;return p.set(1-E-D,D,E)}static containsPoint(s,l,m,b){return this.getBarycoord(s,l,m,b,Ul),Ul.x>=0&&Ul.y>=0&&Ul.x+Ul.y<=1}static getUV(s,l,m,b,p,i,o,u){return!1===id&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),id=!0),this.getInterpolation(s,l,m,b,p,i,o,u)}static getInterpolation(s,l,m,b,p,i,o,u){return this.getBarycoord(s,l,m,b,Ul),u.setScalar(0),u.addScaledVector(p,Ul.x),u.addScaledVector(i,Ul.y),u.addScaledVector(o,Ul.z),u}static isFrontFacing(s,l,m,b){return Qs.subVectors(m,l),vo.subVectors(s,l),Qs.cross(vo).dot(b)<0}set(s,l,m){return this.a.copy(s),this.b.copy(l),this.c.copy(m),this}setFromPointsAndIndices(s,l,m,b){return this.a.copy(s[l]),this.b.copy(s[m]),this.c.copy(s[b]),this}setFromAttributeAndIndices(s,l,m,b){return this.a.fromBufferAttribute(s,l),this.b.fromBufferAttribute(s,m),this.c.fromBufferAttribute(s,b),this}clone(){return(new this.constructor).copy(this)}copy(s){return this.a.copy(s.a),this.b.copy(s.b),this.c.copy(s.c),this}getArea(){return Qs.subVectors(this.c,this.b),vo.subVectors(this.a,this.b),.5*Qs.cross(vo).length()}getMidpoint(s){return s.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(s){return yo.getNormal(this.a,this.b,this.c,s)}getPlane(s){return s.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(s,l){return yo.getBarycoord(s,this.a,this.b,this.c,l)}getUV(s,l,m,b,p){return!1===id&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),id=!0),yo.getInterpolation(s,this.a,this.b,this.c,l,m,b,p)}getInterpolation(s,l,m,b,p){return yo.getInterpolation(s,this.a,this.b,this.c,l,m,b,p)}containsPoint(s){return yo.containsPoint(s,this.a,this.b,this.c)}isFrontFacing(s){return yo.isFrontFacing(this.a,this.b,this.c,s)}intersectsBox(s){return s.intersectsTriangle(this)}closestPointToPoint(s,l){const m=this.a,b=this.b,p=this.c;let i,o;Uo.subVectors(b,m),Bl.subVectors(p,m),Gh.subVectors(s,m);const u=Uo.dot(Gh),f=Bl.dot(Gh);if(u<=0&&f<=0)return l.copy(m);wm.subVectors(s,b);const _=Uo.dot(wm),x=Bl.dot(wm);if(_>=0&&x<=_)return l.copy(b);const M=u*x-_*f;if(M<=0&&u>=0&&_<=0)return i=u/(u-_),l.copy(m).addScaledVector(Uo,i);cr.subVectors(s,p);const E=Uo.dot(cr),D=Bl.dot(cr);if(D>=0&&E<=D)return l.copy(p);const k=E*f-u*D;if(k<=0&&f>=0&&D<=0)return o=f/(f-D),l.copy(m).addScaledVector(Bl,o);const O=_*D-E*x;if(O<=0&&x-_>=0&&E-D>=0)return ta.subVectors(p,b),o=(x-_)/(x-_+(E-D)),l.copy(b).addScaledVector(ta,o);const I=1/(O+k+M);return i=k*I,o=M*I,l.copy(m).addScaledVector(Uo,i).addScaledVector(Bl,o)}equals(s){return s.a.equals(this.a)&&s.b.equals(this.b)&&s.c.equals(this.c)}}let Cs=0;class La extends Zu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Cs++}),this.uuid=go(),this.name="",this.type="Material",this.blending=Kn,this.side=ct,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=P_,this.blendDst=pr,this.blendEquation=Jc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=mr,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(s){this._alphaTest>0!=s>0&&this.version++,this._alphaTest=s}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(s){if(void 0!==s)for(const l in s){const m=s[l];if(void 0===m){console.warn(`THREE.Material: parameter '${l}' has value of undefined.`);continue}const b=this[l];void 0!==b?b&&b.isColor?b.set(m):b&&b.isVector3&&m&&m.isVector3?b.copy(m):this[l]=m:console.warn(`THREE.Material: '${l}' is not a property of THREE.${this.type}.`)}}toJSON(s){const l=void 0===s||"string"==typeof s;l&&(s={textures:{},images:{}});const m={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function b(p){const i=[];for(const o in p){const u=p[o];delete u.metadata,i.push(u)}return i}if(m.uuid=this.uuid,m.type=this.type,""!==this.name&&(m.name=this.name),this.color&&this.color.isColor&&(m.color=this.color.getHex()),void 0!==this.roughness&&(m.roughness=this.roughness),void 0!==this.metalness&&(m.metalness=this.metalness),void 0!==this.sheen&&(m.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(m.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(m.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(m.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(m.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(m.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(m.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(m.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(m.shininess=this.shininess),void 0!==this.clearcoat&&(m.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(m.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(m.clearcoatMap=this.clearcoatMap.toJSON(s).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(m.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(s).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(m.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(s).uuid,m.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(m.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(m.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(m.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(m.iridescenceMap=this.iridescenceMap.toJSON(s).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(m.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(s).uuid),this.map&&this.map.isTexture&&(m.map=this.map.toJSON(s).uuid),this.matcap&&this.matcap.isTexture&&(m.matcap=this.matcap.toJSON(s).uuid),this.alphaMap&&this.alphaMap.isTexture&&(m.alphaMap=this.alphaMap.toJSON(s).uuid),this.lightMap&&this.lightMap.isTexture&&(m.lightMap=this.lightMap.toJSON(s).uuid,m.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(m.aoMap=this.aoMap.toJSON(s).uuid,m.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(m.bumpMap=this.bumpMap.toJSON(s).uuid,m.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(m.normalMap=this.normalMap.toJSON(s).uuid,m.normalMapType=this.normalMapType,m.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(m.displacementMap=this.displacementMap.toJSON(s).uuid,m.displacementScale=this.displacementScale,m.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(m.roughnessMap=this.roughnessMap.toJSON(s).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(m.metalnessMap=this.metalnessMap.toJSON(s).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(m.emissiveMap=this.emissiveMap.toJSON(s).uuid),this.specularMap&&this.specularMap.isTexture&&(m.specularMap=this.specularMap.toJSON(s).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(m.specularIntensityMap=this.specularIntensityMap.toJSON(s).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(m.specularColorMap=this.specularColorMap.toJSON(s).uuid),this.envMap&&this.envMap.isTexture&&(m.envMap=this.envMap.toJSON(s).uuid,void 0!==this.combine&&(m.combine=this.combine)),void 0!==this.envMapIntensity&&(m.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(m.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(m.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(m.gradientMap=this.gradientMap.toJSON(s).uuid),void 0!==this.transmission&&(m.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(m.transmissionMap=this.transmissionMap.toJSON(s).uuid),void 0!==this.thickness&&(m.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(m.thicknessMap=this.thicknessMap.toJSON(s).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(m.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(m.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(m.size=this.size),null!==this.shadowSide&&(m.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(m.sizeAttenuation=this.sizeAttenuation),this.blending!==Kn&&(m.blending=this.blending),this.side!==ct&&(m.side=this.side),this.vertexColors&&(m.vertexColors=!0),this.opacity<1&&(m.opacity=this.opacity),!0===this.transparent&&(m.transparent=this.transparent),m.depthFunc=this.depthFunc,m.depthTest=this.depthTest,m.depthWrite=this.depthWrite,m.colorWrite=this.colorWrite,m.stencilWrite=this.stencilWrite,m.stencilWriteMask=this.stencilWriteMask,m.stencilFunc=this.stencilFunc,m.stencilRef=this.stencilRef,m.stencilFuncMask=this.stencilFuncMask,m.stencilFail=this.stencilFail,m.stencilZFail=this.stencilZFail,m.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(m.rotation=this.rotation),!0===this.polygonOffset&&(m.polygonOffset=!0),0!==this.polygonOffsetFactor&&(m.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(m.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(m.linewidth=this.linewidth),void 0!==this.dashSize&&(m.dashSize=this.dashSize),void 0!==this.gapSize&&(m.gapSize=this.gapSize),void 0!==this.scale&&(m.scale=this.scale),!0===this.dithering&&(m.dithering=!0),this.alphaTest>0&&(m.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(m.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(m.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(m.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(m.wireframe=this.wireframe),this.wireframeLinewidth>1&&(m.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(m.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(m.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(m.flatShading=this.flatShading),!1===this.visible&&(m.visible=!1),!1===this.toneMapped&&(m.toneMapped=!1),!1===this.fog&&(m.fog=!1),Object.keys(this.userData).length>0&&(m.userData=this.userData),l){const p=b(s.textures),i=b(s.images);p.length>0&&(m.textures=p),i.length>0&&(m.images=i)}return m}clone(){return(new this.constructor).copy(this)}copy(s){this.name=s.name,this.blending=s.blending,this.side=s.side,this.vertexColors=s.vertexColors,this.opacity=s.opacity,this.transparent=s.transparent,this.blendSrc=s.blendSrc,this.blendDst=s.blendDst,this.blendEquation=s.blendEquation,this.blendSrcAlpha=s.blendSrcAlpha,this.blendDstAlpha=s.blendDstAlpha,this.blendEquationAlpha=s.blendEquationAlpha,this.depthFunc=s.depthFunc,this.depthTest=s.depthTest,this.depthWrite=s.depthWrite,this.stencilWriteMask=s.stencilWriteMask,this.stencilFunc=s.stencilFunc,this.stencilRef=s.stencilRef,this.stencilFuncMask=s.stencilFuncMask,this.stencilFail=s.stencilFail,this.stencilZFail=s.stencilZFail,this.stencilZPass=s.stencilZPass,this.stencilWrite=s.stencilWrite;const l=s.clippingPlanes;let m=null;if(null!==l){const b=l.length;m=new Array(b);for(let p=0;p!==b;++p)m[p]=l[p].clone()}return this.clippingPlanes=m,this.clipIntersection=s.clipIntersection,this.clipShadows=s.clipShadows,this.shadowSide=s.shadowSide,this.colorWrite=s.colorWrite,this.precision=s.precision,this.polygonOffset=s.polygonOffset,this.polygonOffsetFactor=s.polygonOffsetFactor,this.polygonOffsetUnits=s.polygonOffsetUnits,this.dithering=s.dithering,this.alphaTest=s.alphaTest,this.alphaToCoverage=s.alphaToCoverage,this.premultipliedAlpha=s.premultipliedAlpha,this.forceSinglePass=s.forceSinglePass,this.visible=s.visible,this.toneMapped=s.toneMapped,this.userData=JSON.parse(JSON.stringify(s.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(s){!0===s&&this.version++}}const jd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},na={h:0,s:0,l:0},gs={h:0,s:0,l:0};function Yf(S,s,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?S+6*(s-S)*l:l<.5?s:l<2/3?S+6*(s-S)*(2/3-l):S}class Yn{constructor(s,l,m){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===l&&void 0===m?this.set(s):this.setRGB(s,l,m)}set(s){return s&&s.isColor?this.copy(s):"number"==typeof s?this.setHex(s):"string"==typeof s&&this.setStyle(s),this}setScalar(s){return this.r=s,this.g=s,this.b=s,this}setHex(s,l=du){return s=Math.floor(s),this.r=(s>>16&255)/255,this.g=(s>>8&255)/255,this.b=(255&s)/255,$i.toWorkingColorSpace(this,l),this}setRGB(s,l,m,b=$i.workingColorSpace){return this.r=s,this.g=l,this.b=m,$i.toWorkingColorSpace(this,b),this}setHSL(s,l,m,b=$i.workingColorSpace){if(s=Vs(s,1),l=kr(l,0,1),m=kr(m,0,1),0===l)this.r=this.g=this.b=m;else{const p=m<=.5?m*(1+l):m+l-m*l,i=2*m-p;this.r=Yf(i,p,s+1/3),this.g=Yf(i,p,s),this.b=Yf(i,p,s-1/3)}return $i.toWorkingColorSpace(this,b),this}setStyle(s,l=du){function m(p){void 0!==p&&parseFloat(p)<1&&console.warn("THREE.Color: Alpha component of "+s+" will be ignored.")}let b;if(b=/^(\w+)\(([^\)]*)\)/.exec(s)){let p;const o=b[2];switch(b[1]){case"rgb":case"rgba":if(p=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(p[1],10))/255,this.g=Math.min(255,parseInt(p[2],10))/255,this.b=Math.min(255,parseInt(p[3],10))/255,$i.toWorkingColorSpace(this,l),m(p[4]),this;if(p=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(p[1],10))/100,this.g=Math.min(100,parseInt(p[2],10))/100,this.b=Math.min(100,parseInt(p[3],10))/100,$i.toWorkingColorSpace(this,l),m(p[4]),this;break;case"hsl":case"hsla":if(p=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const u=parseFloat(p[1])/360,f=parseFloat(p[2])/100,_=parseFloat(p[3])/100;return m(p[4]),this.setHSL(u,f,_,l)}break;default:console.warn("THREE.Color: Unknown color model "+s)}}else if(b=/^\#([A-Fa-f\d]+)$/.exec(s)){const p=b[1],i=p.length;if(3===i)return this.setRGB(parseInt(p.charAt(0),16)/15,parseInt(p.charAt(1),16)/15,parseInt(p.charAt(2),16)/15,l);if(6===i)return this.setHex(parseInt(p,16),l);console.warn("THREE.Color: Invalid hex color "+s)}else if(s&&s.length>0)return this.setColorName(s,l);return this}setColorName(s,l=du){const m=jd[s.toLowerCase()];return void 0!==m?this.setHex(m,l):console.warn("THREE.Color: Unknown color "+s),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(s){return this.r=s.r,this.g=s.g,this.b=s.b,this}copySRGBToLinear(s){return this.r=Ju(s.r),this.g=Ju(s.g),this.b=Ju(s.b),this}copyLinearToSRGB(s){return this.r=Hh(s.r),this.g=Hh(s.g),this.b=Hh(s.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(s=du){return $i.fromWorkingColorSpace(Ln.copy(this),s),kr(255*Ln.r,0,255)<<16^kr(255*Ln.g,0,255)<<8^kr(255*Ln.b,0,255)<<0}getHexString(s=du){return("000000"+this.getHex(s).toString(16)).slice(-6)}getHSL(s,l=$i.workingColorSpace){$i.fromWorkingColorSpace(Ln.copy(this),l);const m=Ln.r,b=Ln.g,p=Ln.b,i=Math.max(m,b,p),o=Math.min(m,b,p);let u,f;const _=(o+i)/2;if(o===i)u=0,f=0;else{const x=i-o;switch(f=_<=.5?x/(i+o):x/(2-i-o),i){case m:u=(b-p)/x+(b<p?6:0);break;case b:u=(p-m)/x+2;break;case p:u=(m-b)/x+4}u/=6}return s.h=u,s.s=f,s.l=_,s}getRGB(s,l=$i.workingColorSpace){return $i.fromWorkingColorSpace(Ln.copy(this),l),s.r=Ln.r,s.g=Ln.g,s.b=Ln.b,s}getStyle(s=du){$i.fromWorkingColorSpace(Ln.copy(this),s);const l=Ln.r,m=Ln.g,b=Ln.b;return s!==du?`color(${s} ${l.toFixed(3)} ${m.toFixed(3)} ${b.toFixed(3)})`:`rgb(${255*l|0},${255*m|0},${255*b|0})`}offsetHSL(s,l,m){return this.getHSL(na),na.h+=s,na.s+=l,na.l+=m,this.setHSL(na.h,na.s,na.l),this}add(s){return this.r+=s.r,this.g+=s.g,this.b+=s.b,this}addColors(s,l){return this.r=s.r+l.r,this.g=s.g+l.g,this.b=s.b+l.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(s){return this.r=Math.max(0,this.r-s.r),this.g=Math.max(0,this.g-s.g),this.b=Math.max(0,this.b-s.b),this}multiply(s){return this.r*=s.r,this.g*=s.g,this.b*=s.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(s,l){return this.r+=(s.r-this.r)*l,this.g+=(s.g-this.g)*l,this.b+=(s.b-this.b)*l,this}lerpColors(s,l,m){return this.r=s.r+(l.r-s.r)*m,this.g=s.g+(l.g-s.g)*m,this.b=s.b+(l.b-s.b)*m,this}lerpHSL(s,l){this.getHSL(na),s.getHSL(gs);const m=Hd(na.h,gs.h,l),b=Hd(na.s,gs.s,l),p=Hd(na.l,gs.l,l);return this.setHSL(m,b,p),this}setFromVector3(s){return this.r=s.x,this.g=s.y,this.b=s.z,this}applyMatrix3(s){const l=this.r,m=this.g,b=this.b,p=s.elements;return this.r=p[0]*l+p[3]*m+p[6]*b,this.g=p[1]*l+p[4]*m+p[7]*b,this.b=p[2]*l+p[5]*m+p[8]*b,this}equals(s){return s.r===this.r&&s.g===this.g&&s.b===this.b}fromArray(s,l=0){return this.r=s[l],this.g=s[l+1],this.b=s[l+2],this}toArray(s=[],l=0){return s[l]=this.r,s[l+1]=this.g,s[l+2]=this.b,s}fromBufferAttribute(s,l){return this.r=s.getX(l),this.g=s.getY(l),this.b=s.getZ(l),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ln=new Yn;Yn.NAMES=jd;class Gr extends La{constructor(s){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Uh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.specularMap=s.specularMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.combine=s.combine,this.reflectivity=s.reflectivity,this.refractionRatio=s.refractionRatio,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.fog=s.fog,this}}const ia=sl();function sl(){const S=new ArrayBuffer(4),s=new Float32Array(S),l=new Uint32Array(S),m=new Uint32Array(512),b=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(m[u]=0,m[256|u]=32768,b[u]=24,b[256|u]=24):f<-14?(m[u]=1024>>-f-14,m[256|u]=1024>>-f-14|32768,b[u]=-f-1,b[256|u]=-f-1):f<=15?(m[u]=f+15<<10,m[256|u]=f+15<<10|32768,b[u]=13,b[256|u]=13):f<128?(m[u]=31744,m[256|u]=64512,b[u]=24,b[256|u]=24):(m[u]=31744,m[256|u]=64512,b[u]=13,b[256|u]=13)}const p=new Uint32Array(2048),i=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,_=0;for(;!(8388608&f);)f<<=1,_-=8388608;f&=-8388609,_+=947912704,p[u]=f|_}for(let u=1024;u<2048;++u)p[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)i[u]=u<<23;i[31]=1199570944,i[32]=2147483648;for(let u=33;u<63;++u)i[u]=2147483648+(u-32<<23);i[63]=3347054592;for(let u=1;u<64;++u)32!==u&&(o[u]=1024);return{floatView:s,uint32View:l,baseTable:m,shiftTable:b,mantissaTable:p,exponentTable:i,offsetTable:o}}function fi(S){Math.abs(S)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),S=kr(S,-65504,65504),ia.floatView[0]=S;const s=ia.uint32View[0],l=s>>23&511;return ia.baseTable[l]+((8388607&s)>>ia.shiftTable[l])}function Bo(S){const s=S>>10;return ia.uint32View[0]=ia.mantissaTable[ia.offsetTable[s]+(1023&S)]+ia.exponentTable[s],ia.floatView[0]}const Sm={toHalfFloat:fi,fromHalfFloat:Bo},Ts=new Pe,zs=new Sn;class Zi{constructor(s,l,m=!1){if(Array.isArray(s))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=s,this.itemSize=l,this.count=void 0!==s?s.length/l:0,this.normalized=m,this.usage=_m,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(s){!0===s&&this.version++}setUsage(s){return this.usage=s,this}copy(s){return this.name=s.name,this.array=new s.array.constructor(s.array),this.itemSize=s.itemSize,this.count=s.count,this.normalized=s.normalized,this.usage=s.usage,this}copyAt(s,l,m){s*=this.itemSize,m*=l.itemSize;for(let b=0,p=this.itemSize;b<p;b++)this.array[s+b]=l.array[m+b];return this}copyArray(s){return this.array.set(s),this}applyMatrix3(s){if(2===this.itemSize)for(let l=0,m=this.count;l<m;l++)zs.fromBufferAttribute(this,l),zs.applyMatrix3(s),this.setXY(l,zs.x,zs.y);else if(3===this.itemSize)for(let l=0,m=this.count;l<m;l++)Ts.fromBufferAttribute(this,l),Ts.applyMatrix3(s),this.setXYZ(l,Ts.x,Ts.y,Ts.z);return this}applyMatrix4(s){for(let l=0,m=this.count;l<m;l++)Ts.fromBufferAttribute(this,l),Ts.applyMatrix4(s),this.setXYZ(l,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(s){for(let l=0,m=this.count;l<m;l++)Ts.fromBufferAttribute(this,l),Ts.applyNormalMatrix(s),this.setXYZ(l,Ts.x,Ts.y,Ts.z);return this}transformDirection(s){for(let l=0,m=this.count;l<m;l++)Ts.fromBufferAttribute(this,l),Ts.transformDirection(s),this.setXYZ(l,Ts.x,Ts.y,Ts.z);return this}set(s,l=0){return this.array.set(s,l),this}getX(s){let l=this.array[s*this.itemSize];return this.normalized&&(l=ro(l,this.array)),l}setX(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize]=l,this}getY(s){let l=this.array[s*this.itemSize+1];return this.normalized&&(l=ro(l,this.array)),l}setY(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+1]=l,this}getZ(s){let l=this.array[s*this.itemSize+2];return this.normalized&&(l=ro(l,this.array)),l}setZ(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+2]=l,this}getW(s){let l=this.array[s*this.itemSize+3];return this.normalized&&(l=ro(l,this.array)),l}setW(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+3]=l,this}setXY(s,l,m){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array)),this.array[s+0]=l,this.array[s+1]=m,this}setXYZ(s,l,m,b){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array)),this.array[s+0]=l,this.array[s+1]=m,this.array[s+2]=b,this}setXYZW(s,l,m,b,p){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array),p=Bn(p,this.array)),this.array[s+0]=l,this.array[s+1]=m,this.array[s+2]=b,this.array[s+3]=p,this}onUpload(s){return this.onUploadCallback=s,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const s={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(s.name=this.name),this.usage!==_m&&(s.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(s.updateRange=this.updateRange),s}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class lr extends Zi{constructor(s,l,m){super(new Uint16Array(s),l,m)}}class oc extends Zi{constructor(s,l,m){super(new Uint32Array(s),l,m)}}class oi extends Zi{constructor(s,l,m){super(new Float32Array(s),l,m)}}let rd=0;const ra=new zi,Fa=new os,Vl=new Pe,Ao=new Ac,Vo=new Ac,_r=new Pe;class ai extends Zu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rd++}),this.uuid=go(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(s){return this.index=Array.isArray(s)?new(Il(s)?oc:lr)(s,1):s,this}getAttribute(s){return this.attributes[s]}setAttribute(s,l){return this.attributes[s]=l,this}deleteAttribute(s){return delete this.attributes[s],this}hasAttribute(s){return void 0!==this.attributes[s]}addGroup(s,l,m=0){this.groups.push({start:s,count:l,materialIndex:m})}clearGroups(){this.groups=[]}setDrawRange(s,l){this.drawRange.start=s,this.drawRange.count=l}applyMatrix4(s){const l=this.attributes.position;void 0!==l&&(l.applyMatrix4(s),l.needsUpdate=!0);const m=this.attributes.normal;if(void 0!==m){const p=(new Wt).getNormalMatrix(s);m.applyNormalMatrix(p),m.needsUpdate=!0}const b=this.attributes.tangent;return void 0!==b&&(b.transformDirection(s),b.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(s){return ra.makeRotationFromQuaternion(s),this.applyMatrix4(ra),this}rotateX(s){return ra.makeRotationX(s),this.applyMatrix4(ra),this}rotateY(s){return ra.makeRotationY(s),this.applyMatrix4(ra),this}rotateZ(s){return ra.makeRotationZ(s),this.applyMatrix4(ra),this}translate(s,l,m){return ra.makeTranslation(s,l,m),this.applyMatrix4(ra),this}scale(s,l,m){return ra.makeScale(s,l,m),this.applyMatrix4(ra),this}lookAt(s){return Fa.lookAt(s),Fa.updateMatrix(),this.applyMatrix4(Fa.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vl).negate(),this.translate(Vl.x,Vl.y,Vl.z),this}setFromPoints(s){const l=[];for(let m=0,b=s.length;m<b;m++){const p=s[m];l.push(p.x,p.y,p.z||0)}return this.setAttribute("position",new oi(l,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ac);const s=this.attributes.position,l=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Pe(-1/0,-1/0,-1/0),new Pe(1/0,1/0,1/0));if(void 0!==s){if(this.boundingBox.setFromBufferAttribute(s),l)for(let m=0,b=l.length;m<b;m++)Ao.setFromBufferAttribute(l[m]),this.morphTargetsRelative?(_r.addVectors(this.boundingBox.min,Ao.min),this.boundingBox.expandByPoint(_r),_r.addVectors(this.boundingBox.max,Ao.max),this.boundingBox.expandByPoint(_r)):(this.boundingBox.expandByPoint(Ao.min),this.boundingBox.expandByPoint(Ao.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Js);const s=this.attributes.position,l=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Pe,1/0);if(s){const m=this.boundingSphere.center;if(Ao.setFromBufferAttribute(s),l)for(let p=0,i=l.length;p<i;p++)Vo.setFromBufferAttribute(l[p]),this.morphTargetsRelative?(_r.addVectors(Ao.min,Vo.min),Ao.expandByPoint(_r),_r.addVectors(Ao.max,Vo.max),Ao.expandByPoint(_r)):(Ao.expandByPoint(Vo.min),Ao.expandByPoint(Vo.max));Ao.getCenter(m);let b=0;for(let p=0,i=s.count;p<i;p++)_r.fromBufferAttribute(s,p),b=Math.max(b,m.distanceToSquared(_r));if(l)for(let p=0,i=l.length;p<i;p++){const o=l[p],u=this.morphTargetsRelative;for(let f=0,_=o.count;f<_;f++)_r.fromBufferAttribute(o,f),u&&(Vl.fromBufferAttribute(s,f),_r.add(Vl)),b=Math.max(b,m.distanceToSquared(_r))}this.boundingSphere.radius=Math.sqrt(b),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const s=this.index,l=this.attributes;if(null===s||void 0===l.position||void 0===l.normal||void 0===l.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const m=s.array,b=l.position.array,p=l.normal.array,i=l.uv.array,o=b.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Zi(new Float32Array(4*o),4));const u=this.getAttribute("tangent").array,f=[],_=[];for(let ee=0;ee<o;ee++)f[ee]=new Pe,_[ee]=new Pe;const x=new Pe,M=new Pe,E=new Pe,D=new Sn,k=new Sn,O=new Sn,I=new Pe,U=new Pe;function B(ee,he,xe){x.fromArray(b,3*ee),M.fromArray(b,3*he),E.fromArray(b,3*xe),D.fromArray(i,2*ee),k.fromArray(i,2*he),O.fromArray(i,2*xe),M.sub(x),E.sub(x),k.sub(D),O.sub(D);const fe=1/(k.x*O.y-O.x*k.y);isFinite(fe)&&(I.copy(M).multiplyScalar(O.y).addScaledVector(E,-k.y).multiplyScalar(fe),U.copy(E).multiplyScalar(k.x).addScaledVector(M,-O.x).multiplyScalar(fe),f[ee].add(I),f[he].add(I),f[xe].add(I),_[ee].add(U),_[he].add(U),_[xe].add(U))}let j=this.groups;0===j.length&&(j=[{start:0,count:m.length}]);for(let ee=0,he=j.length;ee<he;++ee){const xe=j[ee],fe=xe.start;for(let de=fe,Ye=fe+xe.count;de<Ye;de+=3)B(m[de+0],m[de+1],m[de+2])}const $=new Pe,G=new Pe,Q=new Pe,J=new Pe;function Y(ee){Q.fromArray(p,3*ee),J.copy(Q);const he=f[ee];$.copy(he),$.sub(Q.multiplyScalar(Q.dot(he))).normalize(),G.crossVectors(J,he);const fe=G.dot(_[ee])<0?-1:1;u[4*ee]=$.x,u[4*ee+1]=$.y,u[4*ee+2]=$.z,u[4*ee+3]=fe}for(let ee=0,he=j.length;ee<he;++ee){const xe=j[ee],fe=xe.start;for(let de=fe,Ye=fe+xe.count;de<Ye;de+=3)Y(m[de+0]),Y(m[de+1]),Y(m[de+2])}}computeVertexNormals(){const s=this.index,l=this.getAttribute("position");if(void 0!==l){let m=this.getAttribute("normal");if(void 0===m)m=new Zi(new Float32Array(3*l.count),3),this.setAttribute("normal",m);else for(let M=0,E=m.count;M<E;M++)m.setXYZ(M,0,0,0);const b=new Pe,p=new Pe,i=new Pe,o=new Pe,u=new Pe,f=new Pe,_=new Pe,x=new Pe;if(s)for(let M=0,E=s.count;M<E;M+=3){const D=s.getX(M+0),k=s.getX(M+1),O=s.getX(M+2);b.fromBufferAttribute(l,D),p.fromBufferAttribute(l,k),i.fromBufferAttribute(l,O),_.subVectors(i,p),x.subVectors(b,p),_.cross(x),o.fromBufferAttribute(m,D),u.fromBufferAttribute(m,k),f.fromBufferAttribute(m,O),o.add(_),u.add(_),f.add(_),m.setXYZ(D,o.x,o.y,o.z),m.setXYZ(k,u.x,u.y,u.z),m.setXYZ(O,f.x,f.y,f.z)}else for(let M=0,E=l.count;M<E;M+=3)b.fromBufferAttribute(l,M+0),p.fromBufferAttribute(l,M+1),i.fromBufferAttribute(l,M+2),_.subVectors(i,p),x.subVectors(b,p),_.cross(x),m.setXYZ(M+0,_.x,_.y,_.z),m.setXYZ(M+1,_.x,_.y,_.z),m.setXYZ(M+2,_.x,_.y,_.z);this.normalizeNormals(),m.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const s=this.attributes.normal;for(let l=0,m=s.count;l<m;l++)_r.fromBufferAttribute(s,l),_r.normalize(),s.setXYZ(l,_r.x,_r.y,_r.z)}toNonIndexed(){function s(o,u){const f=o.array,_=o.itemSize,x=o.normalized,M=new f.constructor(u.length*_);let E=0,D=0;for(let k=0,O=u.length;k<O;k++){E=o.isInterleavedBufferAttribute?u[k]*o.data.stride+o.offset:u[k]*_;for(let I=0;I<_;I++)M[D++]=f[E++]}return new Zi(M,_,x)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new ai,m=this.index.array,b=this.attributes;for(const o in b){const f=s(b[o],m);l.setAttribute(o,f)}const p=this.morphAttributes;for(const o in p){const u=[],f=p[o];for(let _=0,x=f.length;_<x;_++){const E=s(f[_],m);u.push(E)}l.morphAttributes[o]=u}l.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let o=0,u=i.length;o<u;o++){const f=i[o];l.addGroup(f.start,f.count,f.materialIndex)}return l}toJSON(){const s={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),Object.keys(this.userData).length>0&&(s.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const f in u)void 0!==u[f]&&(s[f]=u[f]);return s}s.data={attributes:{}};const l=this.index;null!==l&&(s.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const m=this.attributes;for(const u in m)s.data.attributes[u]=m[u].toJSON(s.data);const b={};let p=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],_=[];for(let x=0,M=f.length;x<M;x++)_.push(f[x].toJSON(s.data));_.length>0&&(b[u]=_,p=!0)}p&&(s.data.morphAttributes=b,s.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(s.data.groups=JSON.parse(JSON.stringify(i)));const o=this.boundingSphere;return null!==o&&(s.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),s}clone(){return(new this.constructor).copy(this)}copy(s){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=s.name;const m=s.index;null!==m&&this.setIndex(m.clone(l));const b=s.attributes;for(const f in b)this.setAttribute(f,b[f].clone(l));const p=s.morphAttributes;for(const f in p){const _=[],x=p[f];for(let M=0,E=x.length;M<E;M++)_.push(x[M].clone(l));this.morphAttributes[f]=_}this.morphTargetsRelative=s.morphTargetsRelative;const i=s.groups;for(let f=0,_=i.length;f<_;f++){const x=i[f];this.addGroup(x.start,x.count,x.materialIndex)}const o=s.boundingBox;null!==o&&(this.boundingBox=o.clone());const u=s.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=s.drawRange.start,this.drawRange.count=s.drawRange.count,this.userData=s.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nr=new zi,sa=new fa,eo=new Js,Fg=new Pe,Wh=new Pe,zl=new Pe,ol=new Pe,Hl=new Pe,mu=new Pe,$d=new Sn,gu=new Sn,sd=new Sn,qd=new Pe,Zf=new Pe,al=new Pe,Na=new Pe,jh=new Pe;class _s extends os{constructor(s=new ai,l=new Gr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=s,this.material=l,this.updateMorphTargets()}copy(s,l){return super.copy(s,l),void 0!==s.morphTargetInfluences&&(this.morphTargetInfluences=s.morphTargetInfluences.slice()),void 0!==s.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},s.morphTargetDictionary)),this.material=s.material,this.geometry=s.geometry,this}updateMorphTargets(){const l=this.geometry.morphAttributes,m=Object.keys(l);if(m.length>0){const b=l[m[0]];if(void 0!==b){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let p=0,i=b.length;p<i;p++){const o=b[p].name||String(p);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=p}}}}getVertexPosition(s,l){const m=this.geometry,p=m.morphAttributes.position,i=m.morphTargetsRelative;l.fromBufferAttribute(m.attributes.position,s);const o=this.morphTargetInfluences;if(p&&o){mu.set(0,0,0);for(let u=0,f=p.length;u<f;u++){const _=o[u];0!==_&&(Hl.fromBufferAttribute(p[u],s),mu.addScaledVector(i?Hl:Hl.sub(l),_))}l.add(mu)}return this.isSkinnedMesh&&this.applyBoneTransform(s,l),l}raycast(s,l){const m=this.geometry,b=this.material,p=this.matrixWorld;if(void 0===b||(null===m.boundingSphere&&m.computeBoundingSphere(),eo.copy(m.boundingSphere),eo.applyMatrix4(p),sa.copy(s.ray).recast(s.near),!1===eo.containsPoint(sa.origin)&&(null===sa.intersectSphere(eo,Fg)||sa.origin.distanceToSquared(Fg)>(s.far-s.near)**2))||(nr.copy(p).invert(),sa.copy(s.ray).applyMatrix4(nr),null!==m.boundingBox&&!1===sa.intersectsBox(m.boundingBox)))return;let i;const o=m.index,u=m.attributes.position,f=m.attributes.uv,_=m.attributes.uv2,x=m.attributes.normal,M=m.groups,E=m.drawRange;if(null!==o)if(Array.isArray(b))for(let D=0,k=M.length;D<k;D++){const O=M[D],I=b[O.materialIndex];for(let j=Math.max(O.start,E.start),$=Math.min(o.count,Math.min(O.start+O.count,E.start+E.count));j<$;j+=3){const G=o.getX(j),Q=o.getX(j+1),J=o.getX(j+2);i=Ng(this,I,s,sa,f,_,x,G,Q,J),i&&(i.faceIndex=Math.floor(j/3),i.face.materialIndex=O.materialIndex,l.push(i))}}else for(let O=Math.max(0,E.start),I=Math.min(o.count,E.start+E.count);O<I;O+=3){const U=o.getX(O),B=o.getX(O+1),j=o.getX(O+2);i=Ng(this,b,s,sa,f,_,x,U,B,j),i&&(i.faceIndex=Math.floor(O/3),l.push(i))}else if(void 0!==u)if(Array.isArray(b))for(let D=0,k=M.length;D<k;D++){const O=M[D],I=b[O.materialIndex];for(let j=Math.max(O.start,E.start),$=Math.min(u.count,Math.min(O.start+O.count,E.start+E.count));j<$;j+=3)i=Ng(this,I,s,sa,f,_,x,j,j+1,j+2),i&&(i.faceIndex=Math.floor(j/3),i.face.materialIndex=O.materialIndex,l.push(i))}else for(let O=Math.max(0,E.start),I=Math.min(u.count,E.start+E.count);O<I;O+=3)i=Ng(this,b,s,sa,f,_,x,O,O+1,O+2),i&&(i.faceIndex=Math.floor(O/3),l.push(i))}}function Ng(S,s,l,m,b,p,i,o,u,f){S.getVertexPosition(o,Wh),S.getVertexPosition(u,zl),S.getVertexPosition(f,ol);const _=function ac(S,s,l,m,b,p,i,o){let u;if(u=s.side===Mt?m.intersectTriangle(i,p,b,!0,o):m.intersectTriangle(b,p,i,s.side===ct,o),null===u)return null;jh.copy(o),jh.applyMatrix4(S.matrixWorld);const f=l.ray.origin.distanceTo(jh);return f<l.near||f>l.far?null:{distance:f,point:jh.clone(),object:S}}(S,s,l,m,Wh,zl,ol,Na);if(_){b&&($d.fromBufferAttribute(b,o),gu.fromBufferAttribute(b,u),sd.fromBufferAttribute(b,f),_.uv=yo.getInterpolation(Na,Wh,zl,ol,$d,gu,sd,new Sn)),p&&($d.fromBufferAttribute(p,o),gu.fromBufferAttribute(p,u),sd.fromBufferAttribute(p,f),_.uv2=yo.getInterpolation(Na,Wh,zl,ol,$d,gu,sd,new Sn)),i&&(qd.fromBufferAttribute(i,o),Zf.fromBufferAttribute(i,u),al.fromBufferAttribute(i,f),_.normal=yo.getInterpolation(Na,Wh,zl,ol,qd,Zf,al,new Pe),_.normal.dot(m.direction)>0&&_.normal.multiplyScalar(-1));const x={a:o,b:u,c:f,normal:new Pe,materialIndex:0};yo.getNormal(Wh,zl,ol,x.normal),_.face=x}return _}class cl extends ai{constructor(s=1,l=1,m=1,b=1,p=1,i=1){super(),this.type="BoxGeometry",this.parameters={width:s,height:l,depth:m,widthSegments:b,heightSegments:p,depthSegments:i};const o=this;b=Math.floor(b),p=Math.floor(p),i=Math.floor(i);const u=[],f=[],_=[],x=[];let M=0,E=0;function D(k,O,I,U,B,j,$,G,Q,J,Y){const ee=j/Q,he=$/J,xe=j/2,fe=$/2,ce=G/2,de=Q+1,Ye=J+1;let Qe=0,Ne=0;const $e=new Pe;for(let et=0;et<Ye;et++){const Pt=et*he-fe;for(let Dt=0;Dt<de;Dt++)$e[k]=(Dt*ee-xe)*U,$e[O]=Pt*B,$e[I]=ce,f.push($e.x,$e.y,$e.z),$e[k]=0,$e[O]=0,$e[I]=G>0?1:-1,_.push($e.x,$e.y,$e.z),x.push(Dt/Q),x.push(1-et/J),Qe+=1}for(let et=0;et<J;et++)for(let Pt=0;Pt<Q;Pt++){const Ze=M+Pt+de*(et+1),at=M+(Pt+1)+de*(et+1),bt=M+(Pt+1)+de*et;u.push(M+Pt+de*et,Ze,bt),u.push(Ze,at,bt),Ne+=6}o.addGroup(E,Ne,Y),E+=Ne,M+=Qe}D("z","y","x",-1,-1,m,l,s,i,p,0),D("z","y","x",1,-1,m,l,-s,i,p,1),D("x","z","y",1,1,s,m,l,b,i,2),D("x","z","y",1,-1,s,m,-l,b,i,3),D("x","y","z",1,-1,s,l,m,b,p,4),D("x","y","z",-1,-1,s,l,-m,b,p,5),this.setIndex(u),this.setAttribute("position",new oi(f,3)),this.setAttribute("normal",new oi(_,3)),this.setAttribute("uv",new oi(x,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new cl(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments)}}function As(S){const s={};for(const l in S){s[l]={};for(const m in S[l]){const b=S[l][m];b&&(b.isColor||b.isMatrix3||b.isMatrix4||b.isVector2||b.isVector3||b.isVector4||b.isTexture||b.isQuaternion)?b.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),s[l][m]=null):s[l][m]=b.clone():s[l][m]=Array.isArray(b)?b.slice():b}}return s}function as(S){const s={};for(let l=0;l<S.length;l++){const m=As(S[l]);for(const b in m)s[b]=m[b]}return s}function Kf(S){return null===S.getRenderTarget()&&S.outputEncoding===Wi?du:ic}const Z_={clone:As,merge:as};class od extends La{constructor(s){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==s&&this.setValues(s)}copy(s){return super.copy(s),this.fragmentShader=s.fragmentShader,this.vertexShader=s.vertexShader,this.uniforms=As(s.uniforms),this.uniformsGroups=function vr(S){const s=[];for(let l=0;l<S.length;l++)s.push(S[l].clone());return s}(s.uniformsGroups),this.defines=Object.assign({},s.defines),this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.fog=s.fog,this.lights=s.lights,this.clipping=s.clipping,this.extensions=Object.assign({},s.extensions),this.glslVersion=s.glslVersion,this}toJSON(s){const l=super.toJSON(s);l.glslVersion=this.glslVersion,l.uniforms={};for(const b in this.uniforms){const i=this.uniforms[b].value;l.uniforms[b]=i&&i.isTexture?{type:"t",value:i.toJSON(s).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader;const m={};for(const b in this.extensions)!0===this.extensions[b]&&(m[b]=!0);return Object.keys(m).length>0&&(l.extensions=m),l}}class _u extends os{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zi,this.projectionMatrix=new zi,this.projectionMatrixInverse=new zi}copy(s,l){return super.copy(s,l),this.matrixWorldInverse.copy(s.matrixWorldInverse),this.projectionMatrix.copy(s.projectionMatrix),this.projectionMatrixInverse.copy(s.projectionMatrixInverse),this}getWorldDirection(s){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return s.set(-l[8],-l[9],-l[10]).normalize()}updateMatrixWorld(s){super.updateMatrixWorld(s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(s,l){super.updateWorldMatrix(s,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ao extends _u{constructor(s=50,l=1,m=.1,b=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=s,this.zoom=1,this.near=m,this.far=b,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(s,l){return super.copy(s,l),this.fov=s.fov,this.zoom=s.zoom,this.near=s.near,this.far=s.far,this.focus=s.focus,this.aspect=s.aspect,this.view=null===s.view?null:Object.assign({},s.view),this.filmGauge=s.filmGauge,this.filmOffset=s.filmOffset,this}setFocalLength(s){const l=.5*this.getFilmHeight()/s;this.fov=2*Cc*Math.atan(l),this.updateProjectionMatrix()}getFocalLength(){const s=Math.tan(.5*Ra*this.fov);return.5*this.getFilmHeight()/s}getEffectiveFOV(){return 2*Cc*Math.atan(Math.tan(.5*Ra*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(s,l,m,b,p,i){this.aspect=s/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=s,this.view.fullHeight=l,this.view.offsetX=m,this.view.offsetY=b,this.view.width=p,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const s=this.near;let l=s*Math.tan(.5*Ra*this.fov)/this.zoom,m=2*l,b=this.aspect*m,p=-.5*b;const i=this.view;if(null!==this.view&&this.view.enabled){const u=i.fullWidth,f=i.fullHeight;p+=i.offsetX*b/u,l-=i.offsetY*m/f,b*=i.width/u,m*=i.height/f}const o=this.filmOffset;0!==o&&(p+=s*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(p,p+b,l,l-m,s,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(s){const l=super.toJSON(s);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}class Xd extends os{constructor(s,l,m){super(),this.type="CubeCamera",this.renderTarget=m;const b=new ao(-90,1,s,l);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(1,0,0),this.add(b);const p=new ao(-90,1,s,l);p.layers=this.layers,p.up.set(0,1,0),p.lookAt(-1,0,0),this.add(p);const i=new ao(-90,1,s,l);i.layers=this.layers,i.up.set(0,0,-1),i.lookAt(0,1,0),this.add(i);const o=new ao(-90,1,s,l);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);const u=new ao(-90,1,s,l);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const f=new ao(-90,1,s,l);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(s,l){null===this.parent&&this.updateMatrixWorld();const m=this.renderTarget,[b,p,i,o,u,f]=this.children,_=s.getRenderTarget(),x=s.toneMapping,M=s.xr.enabled;s.toneMapping=cu,s.xr.enabled=!1;const E=m.texture.generateMipmaps;m.texture.generateMipmaps=!1,s.setRenderTarget(m,0),s.render(l,b),s.setRenderTarget(m,1),s.render(l,p),s.setRenderTarget(m,2),s.render(l,i),s.setRenderTarget(m,3),s.render(l,o),s.setRenderTarget(m,4),s.render(l,u),m.texture.generateMipmaps=E,s.setRenderTarget(m,5),s.render(l,f),s.setRenderTarget(_),s.toneMapping=x,s.xr.enabled=M,m.texture.needsPMREMUpdate=!0}}class Em extends rc{constructor(s,l,m,b,p,i,o,u,f,_){super(s=void 0!==s?s:[],l=void 0!==l?l:lu,m,b,p,i,o,u,f,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(s){this.image=s}}class Bg extends Vi{constructor(s=1,l={}){super(s,s,l),this.isWebGLCubeRenderTarget=!0;const m={width:s,height:s,depth:1};this.texture=new Em([m,m,m,m,m,m],l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,this.texture.minFilter=void 0!==l.minFilter?l.minFilter:mo}fromEquirectangularTexture(s,l){this.texture.type=l.type,this.texture.encoding=l.encoding,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;const m_uniforms={tEquirect:{value:null}},m_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",m_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",b=new cl(5,5,5),p=new od({name:"CubemapFromEquirect",uniforms:As(m_uniforms),vertexShader:m_vertexShader,fragmentShader:m_fragmentShader,side:Mt,blending:mn});p.uniforms.tEquirect.value=l;const i=new _s(b,p),o=l.minFilter;return l.minFilter===$u&&(l.minFilter=mo),new Xd(1,10,this).update(s,i),l.minFilter=o,i.geometry.dispose(),i.material.dispose(),this}clear(s,l,m,b){const p=s.getRenderTarget();for(let i=0;i<6;i++)s.setRenderTarget(this,i),s.clear(l,m,b);s.setRenderTarget(p)}}const $h=new Pe,Jf=new Pe,PM=new Wt;class Qf{constructor(s=new Pe(1,0,0),l=0){this.isPlane=!0,this.normal=s,this.constant=l}set(s,l){return this.normal.copy(s),this.constant=l,this}setComponents(s,l,m,b){return this.normal.set(s,l,m),this.constant=b,this}setFromNormalAndCoplanarPoint(s,l){return this.normal.copy(s),this.constant=-l.dot(this.normal),this}setFromCoplanarPoints(s,l,m){const b=$h.subVectors(m,l).cross(Jf.subVectors(s,l)).normalize();return this.setFromNormalAndCoplanarPoint(b,s),this}copy(s){return this.normal.copy(s.normal),this.constant=s.constant,this}normalize(){const s=1/this.normal.length();return this.normal.multiplyScalar(s),this.constant*=s,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(s){return this.normal.dot(s)+this.constant}distanceToSphere(s){return this.distanceToPoint(s.center)-s.radius}projectPoint(s,l){return l.copy(s).addScaledVector(this.normal,-this.distanceToPoint(s))}intersectLine(s,l){const m=s.delta($h),b=this.normal.dot(m);if(0===b)return 0===this.distanceToPoint(s.start)?l.copy(s.start):null;const p=-(s.start.dot(this.normal)+this.constant)/b;return p<0||p>1?null:l.copy(s.start).addScaledVector(m,p)}intersectsLine(s){const l=this.distanceToPoint(s.start),m=this.distanceToPoint(s.end);return l<0&&m>0||m<0&&l>0}intersectsBox(s){return s.intersectsPlane(this)}intersectsSphere(s){return s.intersectsPlane(this)}coplanarPoint(s){return s.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(s,l){const m=l||PM.getNormalMatrix(s),b=this.coplanarPoint($h).applyMatrix4(s),p=this.normal.applyMatrix3(m).normalize();return this.constant=-b.dot(p),this}translate(s){return this.constant-=s.dot(this.normal),this}equals(s){return s.normal.equals(this.normal)&&s.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const lc=new Js,Yd=new Pe;class ep{constructor(s=new Qf,l=new Qf,m=new Qf,b=new Qf,p=new Qf,i=new Qf){this.planes=[s,l,m,b,p,i]}set(s,l,m,b,p,i){const o=this.planes;return o[0].copy(s),o[1].copy(l),o[2].copy(m),o[3].copy(b),o[4].copy(p),o[5].copy(i),this}copy(s){const l=this.planes;for(let m=0;m<6;m++)l[m].copy(s.planes[m]);return this}setFromProjectionMatrix(s){const l=this.planes,m=s.elements,b=m[0],p=m[1],i=m[2],o=m[3],u=m[4],f=m[5],_=m[6],x=m[7],M=m[8],E=m[9],D=m[10],k=m[11],O=m[12],I=m[13],U=m[14],B=m[15];return l[0].setComponents(o-b,x-u,k-M,B-O).normalize(),l[1].setComponents(o+b,x+u,k+M,B+O).normalize(),l[2].setComponents(o+p,x+f,k+E,B+I).normalize(),l[3].setComponents(o-p,x-f,k-E,B-I).normalize(),l[4].setComponents(o-i,x-_,k-D,B-U).normalize(),l[5].setComponents(o+i,x+_,k+D,B+U).normalize(),this}intersectsObject(s){if(void 0!==s.boundingSphere)null===s.boundingSphere&&s.computeBoundingSphere(),lc.copy(s.boundingSphere).applyMatrix4(s.matrixWorld);else{const l=s.geometry;null===l.boundingSphere&&l.computeBoundingSphere(),lc.copy(l.boundingSphere).applyMatrix4(s.matrixWorld)}return this.intersectsSphere(lc)}intersectsSprite(s){return lc.center.set(0,0,0),lc.radius=.7071067811865476,lc.applyMatrix4(s.matrixWorld),this.intersectsSphere(lc)}intersectsSphere(s){const l=this.planes,m=s.center,b=-s.radius;for(let p=0;p<6;p++)if(l[p].distanceToPoint(m)<b)return!1;return!0}intersectsBox(s){const l=this.planes;for(let m=0;m<6;m++){const b=l[m];if(Yd.x=b.normal.x>0?s.max.x:s.min.x,Yd.y=b.normal.y>0?s.max.y:s.min.y,Yd.z=b.normal.z>0?s.max.z:s.min.z,b.distanceToPoint(Yd)<0)return!1}return!0}containsPoint(s){const l=this.planes;for(let m=0;m<6;m++)if(l[m].distanceToPoint(s)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function K_(){let S=null,s=!1,l=null,m=null;function b(p,i){l(p,i),m=S.requestAnimationFrame(b)}return{start:function(){!0!==s&&null!==l&&(m=S.requestAnimationFrame(b),s=!0)},stop:function(){S.cancelAnimationFrame(m),s=!1},setAnimationLoop:function(p){l=p},setContext:function(p){S=p}}}function kM(S,s){const l=s.isWebGL2,m=new WeakMap;return{get:function i(f){return f.isInterleavedBufferAttribute&&(f=f.data),m.get(f)},remove:function o(f){f.isInterleavedBufferAttribute&&(f=f.data);const _=m.get(f);_&&(S.deleteBuffer(_.buffer),m.delete(f))},update:function u(f,_){if(f.isGLBufferAttribute){const M=m.get(f);return void((!M||M.version<f.version)&&m.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version}))}f.isInterleavedBufferAttribute&&(f=f.data);const x=m.get(f);void 0===x?m.set(f,function b(f,_){const x=f.array,M=f.usage,E=S.createBuffer();let D;if(S.bindBuffer(_,E),S.bufferData(_,x,M),f.onUploadCallback(),x instanceof Float32Array)D=S.FLOAT;else if(x instanceof Uint16Array)if(f.isFloat16BufferAttribute){if(!l)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");D=S.HALF_FLOAT}else D=S.UNSIGNED_SHORT;else if(x instanceof Int16Array)D=S.SHORT;else if(x instanceof Uint32Array)D=S.UNSIGNED_INT;else if(x instanceof Int32Array)D=S.INT;else if(x instanceof Int8Array)D=S.BYTE;else if(x instanceof Uint8Array)D=S.UNSIGNED_BYTE;else{if(!(x instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+x);D=S.UNSIGNED_BYTE}return{buffer:E,type:D,bytesPerElement:x.BYTES_PER_ELEMENT,version:f.version}}(f,_)):x.version<f.version&&(function p(f,_,x){const M=_.array,E=_.updateRange;S.bindBuffer(x,f),-1===E.count?S.bufferSubData(x,0,M):(l?S.bufferSubData(x,E.offset*M.BYTES_PER_ELEMENT,M,E.offset,E.count):S.bufferSubData(x,E.offset*M.BYTES_PER_ELEMENT,M.subarray(E.offset,E.offset+E.count)),E.count=-1),_.onUploadCallback()}(x.buffer,f,_),x.version=f.version)}}}class Vg extends ai{constructor(s=1,l=1,m=1,b=1){super(),this.type="PlaneGeometry",this.parameters={width:s,height:l,widthSegments:m,heightSegments:b};const p=s/2,i=l/2,o=Math.floor(m),u=Math.floor(b),f=o+1,_=u+1,x=s/o,M=l/u,E=[],D=[],k=[],O=[];for(let I=0;I<_;I++){const U=I*M-i;for(let B=0;B<f;B++)D.push(B*x-p,-U,0),k.push(0,0,1),O.push(B/o),O.push(1-I/u)}for(let I=0;I<u;I++)for(let U=0;U<o;U++){const j=U+f*(I+1),$=U+1+f*(I+1),G=U+1+f*I;E.push(U+f*I,j,G),E.push(j,$,G)}this.setIndex(E),this.setAttribute("position",new oi(D,3)),this.setAttribute("normal",new oi(k,3)),this.setAttribute("uv",new oi(O,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new Vg(s.width,s.height,s.widthSegments,s.heightSegments)}}const Ki={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},un={common:{diffuse:{value:new Yn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new Yn(16777215)},opacity:{value:1},center:{value:new Sn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaTest:{value:0}}},On={basic:{uniforms:as([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:Ki.meshbasic_vert,fragmentShader:Ki.meshbasic_frag},lambert:{uniforms:as([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new Yn(0)}}]),vertexShader:Ki.meshlambert_vert,fragmentShader:Ki.meshlambert_frag},phong:{uniforms:as([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new Yn(0)},specular:{value:new Yn(1118481)},shininess:{value:30}}]),vertexShader:Ki.meshphong_vert,fragmentShader:Ki.meshphong_frag},standard:{uniforms:as([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new Yn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ki.meshphysical_vert,fragmentShader:Ki.meshphysical_frag},toon:{uniforms:as([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new Yn(0)}}]),vertexShader:Ki.meshtoon_vert,fragmentShader:Ki.meshtoon_frag},matcap:{uniforms:as([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:Ki.meshmatcap_vert,fragmentShader:Ki.meshmatcap_frag},points:{uniforms:as([un.points,un.fog]),vertexShader:Ki.points_vert,fragmentShader:Ki.points_frag},dashed:{uniforms:as([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ki.linedashed_vert,fragmentShader:Ki.linedashed_frag},depth:{uniforms:as([un.common,un.displacementmap]),vertexShader:Ki.depth_vert,fragmentShader:Ki.depth_frag},normal:{uniforms:as([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:Ki.meshnormal_vert,fragmentShader:Ki.meshnormal_frag},sprite:{uniforms:as([un.sprite,un.fog]),vertexShader:Ki.sprite_vert,fragmentShader:Ki.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ki.background_vert,fragmentShader:Ki.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ki.backgroundCube_vert,fragmentShader:Ki.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ki.cube_vert,fragmentShader:Ki.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ki.equirect_vert,fragmentShader:Ki.equirect_frag},distanceRGBA:{uniforms:as([un.common,un.displacementmap,{referencePosition:{value:new Pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ki.distanceRGBA_vert,fragmentShader:Ki.distanceRGBA_frag},shadow:{uniforms:as([un.lights,un.fog,{color:{value:new Yn(0)},opacity:{value:1}}]),vertexShader:Ki.shadow_vert,fragmentShader:Ki.shadow_frag}};On.physical={uniforms:as([On.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Sn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new Yn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new Yn(0)},specularColor:{value:new Yn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt}}]),vertexShader:Ki.meshphysical_vert,fragmentShader:Ki.meshphysical_frag};const Pc={r:0,b:0,g:0};function km(S,s,l,m,b,p,i){const o=new Yn(0);let f,_,u=!0===p?0:1,x=null,M=0,E=null;function k(O,I){O.getRGB(Pc,Kf(S)),m.buffers.color.setClear(Pc.r,Pc.g,Pc.b,I,i)}return{getClearColor:function(){return o},setClearColor:function(O,I=1){o.set(O),u=I,k(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(O){u=O,k(o,u)},render:function D(O,I){let U=!1,B=!0===I.isScene?I.background:null;B&&B.isTexture&&(B=(I.backgroundBlurriness>0?l:s).get(B));const j=S.xr,$=j.getSession&&j.getSession();$&&"additive"===$.environmentBlendMode&&(B=null),null===B?k(o,u):B&&B.isColor&&(k(B,1),U=!0),(S.autoClear||U)&&S.clear(S.autoClearColor,S.autoClearDepth,S.autoClearStencil),B&&(B.isCubeTexture||B.mapping===ju)?(void 0===_&&(_=new _s(new cl(1,1,1),new od({name:"BackgroundCubeMaterial",uniforms:As(On.backgroundCube.uniforms),vertexShader:On.backgroundCube.vertexShader,fragmentShader:On.backgroundCube.fragmentShader,side:Mt,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(G,Q,J){this.matrixWorld.copyPosition(J.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),b.update(_)),_.material.uniforms.envMap.value=B,_.material.uniforms.flipEnvMap.value=B.isCubeTexture&&!1===B.isRenderTargetTexture?-1:1,_.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,_.material.toneMapped=B.encoding!==Wi,(x!==B||M!==B.version||E!==S.toneMapping)&&(_.material.needsUpdate=!0,x=B,M=B.version,E=S.toneMapping),_.layers.enableAll(),O.unshift(_,_.geometry,_.material,0,0,null)):B&&B.isTexture&&(void 0===f&&(f=new _s(new Vg(2,2),new od({name:"BackgroundMaterial",uniforms:As(On.background.uniforms),vertexShader:On.background.vertexShader,fragmentShader:On.background.fragmentShader,side:ct,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),b.update(f)),f.material.uniforms.t2D.value=B,f.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,f.material.toneMapped=B.encoding!==Wi,!0===B.matrixAutoUpdate&&B.updateMatrix(),f.material.uniforms.uvTransform.value.copy(B.matrix),(x!==B||M!==B.version||E!==S.toneMapping)&&(f.material.needsUpdate=!0,x=B,M=B.version,E=S.toneMapping),f.layers.enableAll(),O.unshift(f,f.geometry,f.material,0,0,null))}}}function Ua(S,s,l,m){const b=S.getParameter(S.MAX_VERTEX_ATTRIBS),p=m.isWebGL2?null:s.get("OES_vertex_array_object"),i=m.isWebGL2||null!==p,o={},u=O(null);let f=u,_=!1;function E(ce){return m.isWebGL2?S.bindVertexArray(ce):p.bindVertexArrayOES(ce)}function D(ce){return m.isWebGL2?S.deleteVertexArray(ce):p.deleteVertexArrayOES(ce)}function O(ce){const de=[],Ye=[],Qe=[];for(let Ne=0;Ne<b;Ne++)de[Ne]=0,Ye[Ne]=0,Qe[Ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:de,enabledAttributes:Ye,attributeDivisors:Qe,object:ce,attributes:{},index:null}}function B(){const ce=f.newAttributes;for(let de=0,Ye=ce.length;de<Ye;de++)ce[de]=0}function j(ce){$(ce,0)}function $(ce,de){const Qe=f.enabledAttributes,Ne=f.attributeDivisors;f.newAttributes[ce]=1,0===Qe[ce]&&(S.enableVertexAttribArray(ce),Qe[ce]=1),Ne[ce]!==de&&((m.isWebGL2?S:s.get("ANGLE_instanced_arrays"))[m.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ce,de),Ne[ce]=de)}function G(){const ce=f.newAttributes,de=f.enabledAttributes;for(let Ye=0,Qe=de.length;Ye<Qe;Ye++)de[Ye]!==ce[Ye]&&(S.disableVertexAttribArray(Ye),de[Ye]=0)}function Q(ce,de,Ye,Qe,Ne,$e){!0!==m.isWebGL2||Ye!==S.INT&&Ye!==S.UNSIGNED_INT?S.vertexAttribPointer(ce,de,Ye,Qe,Ne,$e):S.vertexAttribIPointer(ce,de,Ye,Ne,$e)}function xe(){fe(),_=!0,f!==u&&(f=u,E(f.object))}function fe(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function x(ce,de,Ye,Qe,Ne){let $e=!1;if(i){const et=function k(ce,de,Ye){const Qe=!0===Ye.wireframe;let Ne=o[ce.id];void 0===Ne&&(Ne={},o[ce.id]=Ne);let $e=Ne[de.id];void 0===$e&&($e={},Ne[de.id]=$e);let et=$e[Qe];return void 0===et&&(et=O(function M(){return m.isWebGL2?S.createVertexArray():p.createVertexArrayOES()}()),$e[Qe]=et),et}(Qe,Ye,de);f!==et&&(f=et,E(f.object)),$e=function I(ce,de,Ye,Qe){const Ne=f.attributes,$e=de.attributes;let et=0;const Pt=Ye.getAttributes();for(const Dt in Pt)if(Pt[Dt].location>=0){const at=Ne[Dt];let bt=$e[Dt];if(void 0===bt&&("instanceMatrix"===Dt&&ce.instanceMatrix&&(bt=ce.instanceMatrix),"instanceColor"===Dt&&ce.instanceColor&&(bt=ce.instanceColor)),void 0===at||at.attribute!==bt||bt&&at.data!==bt.data)return!0;et++}return f.attributesNum!==et||f.index!==Qe}(ce,Qe,Ye,Ne),$e&&function U(ce,de,Ye,Qe){const Ne={},$e=de.attributes;let et=0;const Pt=Ye.getAttributes();for(const Dt in Pt)if(Pt[Dt].location>=0){let at=$e[Dt];void 0===at&&("instanceMatrix"===Dt&&ce.instanceMatrix&&(at=ce.instanceMatrix),"instanceColor"===Dt&&ce.instanceColor&&(at=ce.instanceColor));const bt={};bt.attribute=at,at&&at.data&&(bt.data=at.data),Ne[Dt]=bt,et++}f.attributes=Ne,f.attributesNum=et,f.index=Qe}(ce,Qe,Ye,Ne)}else{const et=!0===de.wireframe;(f.geometry!==Qe.id||f.program!==Ye.id||f.wireframe!==et)&&(f.geometry=Qe.id,f.program=Ye.id,f.wireframe=et,$e=!0)}null!==Ne&&l.update(Ne,S.ELEMENT_ARRAY_BUFFER),($e||_)&&(_=!1,function J(ce,de,Ye,Qe){if(!1===m.isWebGL2&&(ce.isInstancedMesh||Qe.isInstancedBufferGeometry)&&null===s.get("ANGLE_instanced_arrays"))return;B();const Ne=Qe.attributes,$e=Ye.getAttributes(),et=de.defaultAttributeValues;for(const Pt in $e){const Dt=$e[Pt];if(Dt.location>=0){let Ze=Ne[Pt];if(void 0===Ze&&("instanceMatrix"===Pt&&ce.instanceMatrix&&(Ze=ce.instanceMatrix),"instanceColor"===Pt&&ce.instanceColor&&(Ze=ce.instanceColor)),void 0!==Ze){const at=Ze.normalized,bt=Ze.itemSize,tn=l.get(Ze);if(void 0===tn)continue;const Ve=tn.buffer,St=tn.type,Ft=tn.bytesPerElement;if(Ze.isInterleavedBufferAttribute){const Et=Ze.data,an=Et.stride,je=Ze.offset;if(Et.isInstancedInterleavedBuffer){for(let Tt=0;Tt<Dt.locationSize;Tt++)$(Dt.location+Tt,Et.meshPerAttribute);!0!==ce.isInstancedMesh&&void 0===Qe._maxInstanceCount&&(Qe._maxInstanceCount=Et.meshPerAttribute*Et.count)}else for(let Tt=0;Tt<Dt.locationSize;Tt++)j(Dt.location+Tt);S.bindBuffer(S.ARRAY_BUFFER,Ve);for(let Tt=0;Tt<Dt.locationSize;Tt++)Q(Dt.location+Tt,bt/Dt.locationSize,St,at,an*Ft,(je+bt/Dt.locationSize*Tt)*Ft)}else{if(Ze.isInstancedBufferAttribute){for(let Et=0;Et<Dt.locationSize;Et++)$(Dt.location+Et,Ze.meshPerAttribute);!0!==ce.isInstancedMesh&&void 0===Qe._maxInstanceCount&&(Qe._maxInstanceCount=Ze.meshPerAttribute*Ze.count)}else for(let Et=0;Et<Dt.locationSize;Et++)j(Dt.location+Et);S.bindBuffer(S.ARRAY_BUFFER,Ve);for(let Et=0;Et<Dt.locationSize;Et++)Q(Dt.location+Et,bt/Dt.locationSize,St,at,bt*Ft,bt/Dt.locationSize*Et*Ft)}}else if(void 0!==et){const at=et[Pt];if(void 0!==at)switch(at.length){case 2:S.vertexAttrib2fv(Dt.location,at);break;case 3:S.vertexAttrib3fv(Dt.location,at);break;case 4:S.vertexAttrib4fv(Dt.location,at);break;default:S.vertexAttrib1fv(Dt.location,at)}}}}G()}(ce,de,Ye,Qe),null!==Ne&&S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,l.get(Ne).buffer))},reset:xe,resetDefaultState:fe,dispose:function Y(){xe();for(const ce in o){const de=o[ce];for(const Ye in de){const Qe=de[Ye];for(const Ne in Qe)D(Qe[Ne].object),delete Qe[Ne];delete de[Ye]}delete o[ce]}},releaseStatesOfGeometry:function ee(ce){if(void 0===o[ce.id])return;const de=o[ce.id];for(const Ye in de){const Qe=de[Ye];for(const Ne in Qe)D(Qe[Ne].object),delete Qe[Ne];delete de[Ye]}delete o[ce.id]},releaseStatesOfProgram:function he(ce){for(const de in o){const Ye=o[de];if(void 0===Ye[ce.id])continue;const Qe=Ye[ce.id];for(const Ne in Qe)D(Qe[Ne].object),delete Qe[Ne];delete Ye[ce.id]}},initAttributes:B,enableAttribute:j,disableUnusedAttributes:G}}function Lm(S,s,l,m){const b=m.isWebGL2;let p;this.setMode=function i(f){p=f},this.render=function o(f,_){S.drawArrays(p,f,_),l.update(_,p,1)},this.renderInstances=function u(f,_,x){if(0===x)return;let M,E;if(b)M=S,E="drawArraysInstanced";else if(M=s.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",null===M)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");M[E](p,f,_,x),l.update(_,p,x)}}function Om(S,s,l){let m;function p(Q){if("highp"===Q){if(S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.HIGH_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.HIGH_FLOAT).precision>0)return"highp";Q="mediump"}return"mediump"===Q&&S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.MEDIUM_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const i=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===S.constructor.name;let o=void 0!==l.precision?l.precision:"highp";const u=p(o);u!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",u,"instead."),o=u);const f=i||s.has("WEBGL_draw_buffers"),_=!0===l.logarithmicDepthBuffer,x=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS),M=S.getParameter(S.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=S.getParameter(S.MAX_TEXTURE_SIZE),D=S.getParameter(S.MAX_CUBE_MAP_TEXTURE_SIZE),k=S.getParameter(S.MAX_VERTEX_ATTRIBS),O=S.getParameter(S.MAX_VERTEX_UNIFORM_VECTORS),I=S.getParameter(S.MAX_VARYING_VECTORS),U=S.getParameter(S.MAX_FRAGMENT_UNIFORM_VECTORS),B=M>0,j=i||s.has("OES_texture_float");return{isWebGL2:i,drawBuffers:f,getMaxAnisotropy:function b(){if(void 0!==m)return m;if(!0===s.has("EXT_texture_filter_anisotropic")){const Q=s.get("EXT_texture_filter_anisotropic");m=S.getParameter(Q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else m=0;return m},getMaxPrecision:p,precision:o,logarithmicDepthBuffer:_,maxTextures:x,maxVertexTextures:M,maxTextureSize:E,maxCubemapSize:D,maxAttributes:k,maxVertexUniforms:O,maxVaryings:I,maxFragmentUniforms:U,vertexTextures:B,floatFragmentTextures:j,floatVertexTextures:B&&j,maxSamples:i?S.getParameter(S.MAX_SAMPLES):0}}function u0(S){const s=this;let l=null,m=0,b=!1,p=!1;const i=new Qf,o=new Wt,u={value:null,needsUpdate:!1};function _(x,M,E,D){const k=null!==x?x.length:0;let O=null;if(0!==k){if(O=u.value,!0!==D||null===O){const I=E+4*k,U=M.matrixWorldInverse;o.getNormalMatrix(U),(null===O||O.length<I)&&(O=new Float32Array(I));for(let B=0,j=E;B!==k;++B,j+=4)i.copy(x[B]).applyMatrix4(U,o),i.normal.toArray(O,j),O[j+3]=i.constant}u.value=O,u.needsUpdate=!0}return s.numPlanes=k,s.numIntersection=0,O}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(x,M){const E=0!==x.length||M||0!==m||b;return b=M,m=x.length,E},this.beginShadows=function(){p=!0,_(null)},this.endShadows=function(){p=!1},this.setGlobalState=function(x,M){l=_(x,M,0)},this.setState=function(x,M,E){const D=x.clippingPlanes,k=x.clipIntersection,O=x.clipShadows,I=S.get(x);if(!b||null===D||0===D.length||p&&!O)p?_(null):function f(){u.value!==l&&(u.value=l,u.needsUpdate=m>0),s.numPlanes=m,s.numIntersection=0}();else{const U=p?0:m,B=4*U;let j=I.clippingState||null;u.value=j,j=_(D,M,B,E);for(let $=0;$!==B;++$)j[$]=l[$];I.clippingState=j,this.numIntersection=k?this.numPlanes:0,this.numPlanes+=U}}}function pa(S){let s=new WeakMap;function l(i,o){return o===Wu?i.mapping=lu:o===Tl&&(i.mapping=Ca),i}function b(i){const o=i.target;o.removeEventListener("dispose",b);const u=s.get(o);void 0!==u&&(s.delete(o),u.dispose())}return{get:function m(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===Wu||o===Tl){if(s.has(i))return l(s.get(i).texture,i.mapping);{const u=i.image;if(u&&u.height>0){const f=new Bg(u.height/2);return f.fromEquirectangularTexture(S,i),s.set(i,f),i.addEventListener("dispose",b),l(f.texture,i.mapping)}return null}}}return i},dispose:function p(){s=new WeakMap}}}class Jd extends _u{constructor(s=-1,l=1,m=1,b=-1,p=.1,i=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=s,this.right=l,this.top=m,this.bottom=b,this.near=p,this.far=i,this.updateProjectionMatrix()}copy(s,l){return super.copy(s,l),this.left=s.left,this.right=s.right,this.top=s.top,this.bottom=s.bottom,this.near=s.near,this.far=s.far,this.zoom=s.zoom,this.view=null===s.view?null:Object.assign({},s.view),this}setViewOffset(s,l,m,b,p,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=s,this.view.fullHeight=l,this.view.offsetX=m,this.view.offsetY=b,this.view.width=p,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const s=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),m=(this.right+this.left)/2,b=(this.top+this.bottom)/2;let p=m-s,i=m+s,o=b+l,u=b-l;if(null!==this.view&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p+=f*this.view.offsetX,i=p+f*this.view.width,o-=_*this.view.offsetY,u=o-_*this.view.height}this.projectionMatrix.makeOrthographic(p,i,o,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(s){const l=super.toJSON(s);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,null!==this.view&&(l.object.view=Object.assign({},this.view)),l}}const aa=[.125,.215,.35,.446,.526,.582],ud=new Jd,jg=new Yn;let $g=null;const eh=(1+Math.sqrt(5))/2,Do=1/eh,ap=[new Pe(1,1,1),new Pe(-1,1,1),new Pe(1,1,-1),new Pe(-1,1,-1),new Pe(0,eh,Do),new Pe(0,eh,-Do),new Pe(Do,0,eh),new Pe(-Do,0,eh),new Pe(eh,Do,0),new Pe(-eh,Do,0)];class d0{constructor(s){this._renderer=s,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(s,l=0,m=.1,b=100){$g=this._renderer.getRenderTarget(),this._setSize(256);const p=this._allocateTargets();return p.depthBuffer=!0,this._sceneToCubeUV(s,m,b,p),l>0&&this._blur(p,0,0,l),this._applyPMREM(p),this._cleanup(p),p}fromEquirectangular(s,l=null){return this._fromTexture(s,l)}fromCubemap(s,l=null){return this._fromTexture(s,l)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Xg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dd(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(s){this._lodMax=Math.floor(Math.log2(s)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let s=0;s<this._lodPlanes.length;s++)this._lodPlanes[s].dispose()}_cleanup(s){this._renderer.setRenderTarget($g),s.scissorTest=!1,qg(s,0,0,s.width,s.height)}_fromTexture(s,l){this._setSize(s.mapping===lu||s.mapping===Ca?0===s.image.length?16:s.image[0].width||s.image[0].image.width:s.image.width/4),$g=this._renderer.getRenderTarget();const m=l||this._allocateTargets();return this._textureToCubeUV(s,m),this._applyPMREM(m),this._cleanup(m),m}_allocateTargets(){const s=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,m={magFilter:mo,minFilter:mo,generateMipmaps:!1,type:Sc,format:Aa,encoding:Qc,depthBuffer:!1},b=f0(s,l,m);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==s||this._pingPongRenderTarget.height!==l){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=f0(s,l,m);const{_lodMax:p}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function h0(S){const s=[],l=[],m=[];let b=S;const p=S-4+1+aa.length;for(let i=0;i<p;i++){const o=Math.pow(2,b);l.push(o);let u=1/o;i>S-4?u=aa[i-S+4-1]:0===i&&(u=0),m.push(u);const f=1/(o-2),_=-f,x=1+f,M=[_,_,x,_,x,x,_,_,x,x,_,x],E=6,D=6,k=3,O=2,I=1,U=new Float32Array(k*D*E),B=new Float32Array(O*D*E),j=new Float32Array(I*D*E);for(let G=0;G<E;G++){const Q=G%3*2/3-1,J=G>2?0:-1;U.set([Q,J,0,Q+2/3,J,0,Q+2/3,J+1,0,Q,J,0,Q+2/3,J+1,0,Q,J+1,0],k*D*G),B.set(M,O*D*G),j.set([G,G,G,G,G,G],I*D*G)}const $=new ai;$.setAttribute("position",new Zi(U,k)),$.setAttribute("uv",new Zi(B,O)),$.setAttribute("faceIndex",new Zi(j,I)),s.push($),b>4&&b--}return{lodPlanes:s,sizeLods:l,sigmas:m}}(p)),this._blurMaterial=function Zh(S,s,l){const m=new Float32Array(20),b=new Pe(0,1,0);return new od({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/s,CUBEUV_TEXEL_HEIGHT:1/l,CUBEUV_MAX_MIP:`${S}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:m},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:b}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:mn,depthTest:!1,depthWrite:!1})}(p,s,l)}return b}_compileMaterial(s){const l=new _s(this._lodPlanes[0],s);this._renderer.compile(l,ud)}_sceneToCubeUV(s,l,m,b){const o=new ao(90,1,l,m),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],_=this._renderer,x=_.autoClear,M=_.toneMapping;_.getClearColor(jg),_.toneMapping=cu,_.autoClear=!1;const E=new Gr({name:"PMREM.Background",side:Mt,depthWrite:!1,depthTest:!1}),D=new _s(new cl,E);let k=!1;const O=s.background;O?O.isColor&&(E.color.copy(O),s.background=null,k=!0):(E.color.copy(jg),k=!0);for(let I=0;I<6;I++){const U=I%3;0===U?(o.up.set(0,u[I],0),o.lookAt(f[I],0,0)):1===U?(o.up.set(0,0,u[I]),o.lookAt(0,f[I],0)):(o.up.set(0,u[I],0),o.lookAt(0,0,f[I]));const B=this._cubeSize;qg(b,U*B,I>2?B:0,B,B),_.setRenderTarget(b),k&&_.render(D,o),_.render(s,o)}D.geometry.dispose(),D.material.dispose(),_.toneMapping=M,_.autoClear=x,s.background=O}_textureToCubeUV(s,l){const m=this._renderer,b=s.mapping===lu||s.mapping===Ca;b?(null===this._cubemapMaterial&&(this._cubemapMaterial=Xg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===s.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dd());const p=b?this._cubemapMaterial:this._equirectMaterial,i=new _s(this._lodPlanes[0],p);p.uniforms.envMap.value=s;const u=this._cubeSize;qg(l,0,0,3*u,2*u),m.setRenderTarget(l),m.render(i,ud)}_applyPMREM(s){const l=this._renderer,m=l.autoClear;l.autoClear=!1;for(let b=1;b<this._lodPlanes.length;b++){const p=Math.sqrt(this._sigmas[b]*this._sigmas[b]-this._sigmas[b-1]*this._sigmas[b-1]);this._blur(s,b-1,b,p,ap[(b-1)%ap.length])}l.autoClear=m}_blur(s,l,m,b,p){const i=this._pingPongRenderTarget;this._halfBlur(s,i,l,m,b,"latitudinal",p),this._halfBlur(i,s,m,m,b,"longitudinal",p)}_halfBlur(s,l,m,b,p,i,o){const u=this._renderer,f=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");const x=new _s(this._lodPlanes[b],f),M=f.uniforms,E=this._sizeLods[m]-1,D=isFinite(p)?Math.PI/(2*E):2*Math.PI/39,k=p/D,O=isFinite(p)?1+Math.floor(3*k):20;O>20&&console.warn(`sigmaRadians, ${p}, is too large and will clip, as it requested ${O} samples when the maximum is set to 20`);const I=[];let U=0;for(let Q=0;Q<20;++Q){const J=Q/k,Y=Math.exp(-J*J/2);I.push(Y),0===Q?U+=Y:Q<O&&(U+=2*Y)}for(let Q=0;Q<I.length;Q++)I[Q]=I[Q]/U;M.envMap.value=s.texture,M.samples.value=O,M.weights.value=I,M.latitudinal.value="latitudinal"===i,o&&(M.poleAxis.value=o);const{_lodMax:B}=this;M.dTheta.value=D,M.mipInt.value=B-m;const j=this._sizeLods[b];qg(l,3*j*(b>B-4?b-B+4:0),4*(this._cubeSize-j),3*j,2*j),u.setRenderTarget(l),u.render(x,ud)}}function f0(S,s,l){const m=new Vi(S,s,l);return m.texture.mapping=ju,m.texture.name="PMREM.cubeUv",m.scissorTest=!0,m}function qg(S,s,l,m,b){S.viewport.set(s,l,m,b),S.scissor.set(s,l,m,b)}function dd(){return new od({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:mn,depthTest:!1,depthWrite:!1})}function Xg(){return new od({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:mn,depthTest:!1,depthWrite:!1})}function yu(S){let s=new WeakMap,l=null;function p(o){const u=o.target;u.removeEventListener("dispose",p);const f=s.get(u);void 0!==f&&(s.delete(u),f.dispose())}return{get:function m(o){if(o&&o.isTexture){const u=o.mapping,f=u===Wu||u===Tl,_=u===lu||u===Ca;if(f||_){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let x=s.get(o);return null===l&&(l=new d0(S)),x=f?l.fromEquirectangular(o,x):l.fromCubemap(o,x),s.set(o,x),x.texture}if(s.has(o))return s.get(o).texture;{const x=o.image;if(f&&x&&x.height>0||_&&x&&function b(o){let u=0;for(let _=0;_<6;_++)void 0!==o[_]&&u++;return 6===u}(x)){null===l&&(l=new d0(S));const M=f?l.fromEquirectangular(o):l.fromCubemap(o);return s.set(o,M),o.addEventListener("dispose",p),M.texture}return null}}}return o},dispose:function i(){s=new WeakMap,null!==l&&(l.dispose(),l=null)}}}function p0(S){const s={};function l(m){if(void 0!==s[m])return s[m];let b;switch(m){case"WEBGL_depth_texture":b=S.getExtension("WEBGL_depth_texture")||S.getExtension("MOZ_WEBGL_depth_texture")||S.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":b=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":b=S.getExtension("WEBGL_compressed_texture_s3tc")||S.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":b=S.getExtension("WEBGL_compressed_texture_pvrtc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:b=S.getExtension(m)}return s[m]=b,b}return{has:function(m){return null!==l(m)},init:function(m){m.isWebGL2?l("EXT_color_buffer_float"):(l("WEBGL_depth_texture"),l("OES_texture_float"),l("OES_texture_half_float"),l("OES_texture_half_float_linear"),l("OES_standard_derivatives"),l("OES_element_index_uint"),l("OES_vertex_array_object"),l("ANGLE_instanced_arrays")),l("OES_texture_float_linear"),l("EXT_color_buffer_half_float"),l("WEBGL_multisampled_render_to_texture")},get:function(m){const b=l(m);return null===b&&console.warn("THREE.WebGLRenderer: "+m+" extension not supported."),b}}}function cp(S,s,l,m){const b={},p=new WeakMap;function i(x){const M=x.target;null!==M.index&&s.remove(M.index);for(const D in M.attributes)s.remove(M.attributes[D]);M.removeEventListener("dispose",i),delete b[M.id];const E=p.get(M);E&&(s.remove(E),p.delete(M)),m.releaseStatesOfGeometry(M),!0===M.isInstancedBufferGeometry&&delete M._maxInstanceCount,l.memory.geometries--}function f(x){const M=[],E=x.index,D=x.attributes.position;let k=0;if(null!==E){const U=E.array;k=E.version;for(let B=0,j=U.length;B<j;B+=3){const $=U[B+0],G=U[B+1],Q=U[B+2];M.push($,G,G,Q,Q,$)}}else{k=D.version;for(let B=0,j=D.array.length/3-1;B<j;B+=3){const $=B+0,G=B+1,Q=B+2;M.push($,G,G,Q,Q,$)}}const O=new(Il(M)?oc:lr)(M,1);O.version=k;const I=p.get(x);I&&s.remove(I),p.set(x,O)}return{get:function o(x,M){return!0===b[M.id]||(M.addEventListener("dispose",i),b[M.id]=!0,l.memory.geometries++),M},update:function u(x){const M=x.attributes;for(const D in M)s.update(M[D],S.ARRAY_BUFFER);const E=x.morphAttributes;for(const D in E){const k=E[D];for(let O=0,I=k.length;O<I;O++)s.update(k[O],S.ARRAY_BUFFER)}},getWireframeAttribute:function _(x){const M=p.get(x);if(M){const E=x.index;null!==E&&M.version<E.version&&f(x)}else f(x);return p.get(x)}}}function Jv(S,s,l,m){const b=m.isWebGL2;let p,o,u;this.setMode=function i(M){p=M},this.setIndex=function f(M){o=M.type,u=M.bytesPerElement},this.render=function _(M,E){S.drawElements(p,E,o,M*u),l.update(E,p,1)},this.renderInstances=function x(M,E,D){if(0===D)return;let k,O;if(b)k=S,O="drawElementsInstanced";else if(k=s.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",null===k)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");k[O](p,E,o,M*u,D),l.update(E,p,D)}}function ex(S){const l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function b(){l.frame++,l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function m(p,i,o){switch(l.calls++,i){case S.TRIANGLES:l.triangles+=o*(p/3);break;case S.LINES:l.lines+=o*(p/2);break;case S.LINE_STRIP:l.lines+=o*(p-1);break;case S.LINE_LOOP:l.lines+=o*p;break;case S.POINTS:l.points+=o*p;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function aw(S,s){return S[0]-s[0]}function Qv(S,s){return Math.abs(s[1])-Math.abs(S[1])}function Kr(S,s,l){const m={},b=new Float32Array(8),p=new WeakMap,i=new tr,o=[];for(let f=0;f<8;f++)o[f]=[f,0];return{update:function u(f,_,x){const M=f.morphTargetInfluences;if(!0===s.isWebGL2){const E=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,D=void 0!==E?E.length:0;let k=p.get(_);if(void 0===k||k.count!==D){let ce=function(){xe.dispose(),p.delete(_),_.removeEventListener("dispose",ce)};void 0!==k&&k.texture.dispose();const U=void 0!==_.morphAttributes.position,B=void 0!==_.morphAttributes.normal,j=void 0!==_.morphAttributes.color,$=_.morphAttributes.position||[],G=_.morphAttributes.normal||[],Q=_.morphAttributes.color||[];let J=0;!0===U&&(J=1),!0===B&&(J=2),!0===j&&(J=3);let Y=_.attributes.position.count*J,ee=1;Y>s.maxTextureSize&&(ee=Math.ceil(Y/s.maxTextureSize),Y=s.maxTextureSize);const he=new Float32Array(Y*ee*4*D),xe=new Gn(he,Y,ee,D);xe.type=Ta,xe.needsUpdate=!0;const fe=4*J;for(let de=0;de<D;de++){const Ye=$[de],Qe=G[de],Ne=Q[de],$e=Y*ee*4*de;for(let et=0;et<Ye.count;et++){const Pt=et*fe;!0===U&&(i.fromBufferAttribute(Ye,et),he[$e+Pt+0]=i.x,he[$e+Pt+1]=i.y,he[$e+Pt+2]=i.z,he[$e+Pt+3]=0),!0===B&&(i.fromBufferAttribute(Qe,et),he[$e+Pt+4]=i.x,he[$e+Pt+5]=i.y,he[$e+Pt+6]=i.z,he[$e+Pt+7]=0),!0===j&&(i.fromBufferAttribute(Ne,et),he[$e+Pt+8]=i.x,he[$e+Pt+9]=i.y,he[$e+Pt+10]=i.z,he[$e+Pt+11]=4===Ne.itemSize?i.w:1)}}k={count:D,texture:xe,size:new Sn(Y,ee)},p.set(_,k),_.addEventListener("dispose",ce)}let O=0;for(let U=0;U<M.length;U++)O+=M[U];const I=_.morphTargetsRelative?1:1-O;x.getUniforms().setValue(S,"morphTargetBaseInfluence",I),x.getUniforms().setValue(S,"morphTargetInfluences",M),x.getUniforms().setValue(S,"morphTargetsTexture",k.texture,l),x.getUniforms().setValue(S,"morphTargetsTextureSize",k.size)}else{const E=void 0===M?0:M.length;let D=m[_.id];if(void 0===D||D.length!==E){D=[];for(let B=0;B<E;B++)D[B]=[B,0];m[_.id]=D}for(let B=0;B<E;B++){const j=D[B];j[0]=B,j[1]=M[B]}D.sort(Qv);for(let B=0;B<8;B++)B<E&&D[B][1]?(o[B][0]=D[B][0],o[B][1]=D[B][1]):(o[B][0]=Number.MAX_SAFE_INTEGER,o[B][1]=0);o.sort(aw);const k=_.morphAttributes.position,O=_.morphAttributes.normal;let I=0;for(let B=0;B<8;B++){const j=o[B],$=j[0],G=j[1];$!==Number.MAX_SAFE_INTEGER&&G?(k&&_.getAttribute("morphTarget"+B)!==k[$]&&_.setAttribute("morphTarget"+B,k[$]),O&&_.getAttribute("morphNormal"+B)!==O[$]&&_.setAttribute("morphNormal"+B,O[$]),b[B]=G,I+=G):(k&&!0===_.hasAttribute("morphTarget"+B)&&_.deleteAttribute("morphTarget"+B),O&&!0===_.hasAttribute("morphNormal"+B)&&_.deleteAttribute("morphNormal"+B),b[B]=0)}const U=_.morphTargetsRelative?1:1-I;x.getUniforms().setValue(S,"morphTargetBaseInfluence",U),x.getUniforms().setValue(S,"morphTargetInfluences",b)}}}}function zo(S,s,l,m){let b=new WeakMap;function o(u){const f=u.target;f.removeEventListener("dispose",o),l.remove(f.instanceMatrix),null!==f.instanceColor&&l.remove(f.instanceColor)}return{update:function p(u){const f=m.render.frame,x=s.get(u,u.geometry);return b.get(x)!==f&&(s.update(x),b.set(x,f)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",o)&&u.addEventListener("dispose",o),l.update(u.instanceMatrix,S.ARRAY_BUFFER),null!==u.instanceColor&&l.update(u.instanceColor,S.ARRAY_BUFFER)),x},dispose:function i(){b=new WeakMap}}}const tx=new rc,lp=new Gn,nx=new Zs,ix=new Em,ey=[],Yg=[],Cn=new Float32Array(16),Zg=new Float32Array(9),ty=new Float32Array(4);function up(S,s,l){const m=S[0];if(m<=0||m>0)return S;const b=s*l;let p=ey[b];if(void 0===p&&(p=new Float32Array(b),ey[b]=p),0!==s){m.toArray(p,0);for(let i=1,o=0;i!==s;++i)o+=l,S[i].toArray(p,o)}return p}function Jr(S,s){if(S.length!==s.length)return!1;for(let l=0,m=S.length;l<m;l++)if(S[l]!==s[l])return!1;return!0}function ir(S,s){for(let l=0,m=s.length;l<m;l++)S[l]=s[l]}function cs(S,s){let l=Yg[s];void 0===l&&(l=new Int32Array(s),Yg[s]=l);for(let m=0;m!==s;++m)l[m]=S.allocateTextureUnit();return l}function Nm(S,s){const l=this.cache;l[0]!==s&&(S.uniform1f(this.addr,s),l[0]=s)}function Ba(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y)&&(S.uniform2f(this.addr,s.x,s.y),l[0]=s.x,l[1]=s.y);else{if(Jr(l,s))return;S.uniform2fv(this.addr,s),ir(l,s)}}function cw(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z)&&(S.uniform3f(this.addr,s.x,s.y,s.z),l[0]=s.x,l[1]=s.y,l[2]=s.z);else if(void 0!==s.r)(l[0]!==s.r||l[1]!==s.g||l[2]!==s.b)&&(S.uniform3f(this.addr,s.r,s.g,s.b),l[0]=s.r,l[1]=s.g,l[2]=s.b);else{if(Jr(l,s))return;S.uniform3fv(this.addr,s),ir(l,s)}}function ny(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z||l[3]!==s.w)&&(S.uniform4f(this.addr,s.x,s.y,s.z,s.w),l[0]=s.x,l[1]=s.y,l[2]=s.z,l[3]=s.w);else{if(Jr(l,s))return;S.uniform4fv(this.addr,s),ir(l,s)}}function iy(S,s){const l=this.cache,m=s.elements;if(void 0===m){if(Jr(l,s))return;S.uniformMatrix2fv(this.addr,!1,s),ir(l,s)}else{if(Jr(l,m))return;ty.set(m),S.uniformMatrix2fv(this.addr,!1,ty),ir(l,m)}}function lw(S,s){const l=this.cache,m=s.elements;if(void 0===m){if(Jr(l,s))return;S.uniformMatrix3fv(this.addr,!1,s),ir(l,s)}else{if(Jr(l,m))return;Zg.set(m),S.uniformMatrix3fv(this.addr,!1,Zg),ir(l,m)}}function rx(S,s){const l=this.cache,m=s.elements;if(void 0===m){if(Jr(l,s))return;S.uniformMatrix4fv(this.addr,!1,s),ir(l,s)}else{if(Jr(l,m))return;Cn.set(m),S.uniformMatrix4fv(this.addr,!1,Cn),ir(l,m)}}function sx(S,s){const l=this.cache;l[0]!==s&&(S.uniform1i(this.addr,s),l[0]=s)}function dp(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y)&&(S.uniform2i(this.addr,s.x,s.y),l[0]=s.x,l[1]=s.y);else{if(Jr(l,s))return;S.uniform2iv(this.addr,s),ir(l,s)}}function Kh(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z)&&(S.uniform3i(this.addr,s.x,s.y,s.z),l[0]=s.x,l[1]=s.y,l[2]=s.z);else{if(Jr(l,s))return;S.uniform3iv(this.addr,s),ir(l,s)}}function hp(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z||l[3]!==s.w)&&(S.uniform4i(this.addr,s.x,s.y,s.z,s.w),l[0]=s.x,l[1]=s.y,l[2]=s.z,l[3]=s.w);else{if(Jr(l,s))return;S.uniform4iv(this.addr,s),ir(l,s)}}function Kg(S,s){const l=this.cache;l[0]!==s&&(S.uniform1ui(this.addr,s),l[0]=s)}function Jg(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y)&&(S.uniform2ui(this.addr,s.x,s.y),l[0]=s.x,l[1]=s.y);else{if(Jr(l,s))return;S.uniform2uiv(this.addr,s),ir(l,s)}}function ry(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z)&&(S.uniform3ui(this.addr,s.x,s.y,s.z),l[0]=s.x,l[1]=s.y,l[2]=s.z);else{if(Jr(l,s))return;S.uniform3uiv(this.addr,s),ir(l,s)}}function m0(S,s){const l=this.cache;if(void 0!==s.x)(l[0]!==s.x||l[1]!==s.y||l[2]!==s.z||l[3]!==s.w)&&(S.uniform4ui(this.addr,s.x,s.y,s.z,s.w),l[0]=s.x,l[1]=s.y,l[2]=s.z,l[3]=s.w);else{if(Jr(l,s))return;S.uniform4uiv(this.addr,s),ir(l,s)}}function g0(S,s,l){const m=this.cache,b=l.allocateTextureUnit();m[0]!==b&&(S.uniform1i(this.addr,b),m[0]=b),l.setTexture2D(s||tx,b)}function _0(S,s,l){const m=this.cache,b=l.allocateTextureUnit();m[0]!==b&&(S.uniform1i(this.addr,b),m[0]=b),l.setTexture3D(s||nx,b)}function fp(S,s,l){const m=this.cache,b=l.allocateTextureUnit();m[0]!==b&&(S.uniform1i(this.addr,b),m[0]=b),l.setTextureCube(s||ix,b)}function sy(S,s,l){const m=this.cache,b=l.allocateTextureUnit();m[0]!==b&&(S.uniform1i(this.addr,b),m[0]=b),l.setTexture2DArray(s||lp,b)}function hd(S,s){S.uniform1fv(this.addr,s)}function y0(S,s){const l=up(s,this.size,2);S.uniform2fv(this.addr,l)}function ox(S,s){const l=up(s,this.size,3);S.uniform3fv(this.addr,l)}function dc(S,s){const l=up(s,this.size,4);S.uniform4fv(this.addr,l)}function pp(S,s){const l=up(s,this.size,4);S.uniformMatrix2fv(this.addr,!1,l)}function th(S,s){const l=up(s,this.size,9);S.uniformMatrix3fv(this.addr,!1,l)}function Qg(S,s){const l=up(s,this.size,16);S.uniformMatrix4fv(this.addr,!1,l)}function Va(S,s){S.uniform1iv(this.addr,s)}function oy(S,s){S.uniform2iv(this.addr,s)}function Um(S,s){S.uniform3iv(this.addr,s)}function Y1(S,s){S.uniform4iv(this.addr,s)}function Z1(S,s){S.uniform1uiv(this.addr,s)}function ax(S,s){S.uniform2uiv(this.addr,s)}function uw(S,s){S.uniform3uiv(this.addr,s)}function cx(S,s){S.uniform4uiv(this.addr,s)}function b0(S,s,l){const m=this.cache,b=s.length,p=cs(l,b);Jr(m,p)||(S.uniform1iv(this.addr,p),ir(m,p));for(let i=0;i!==b;++i)l.setTexture2D(s[i]||tx,p[i])}function fd(S,s,l){const m=this.cache,b=s.length,p=cs(l,b);Jr(m,p)||(S.uniform1iv(this.addr,p),ir(m,p));for(let i=0;i!==b;++i)l.setTexture3D(s[i]||nx,p[i])}function nh(S,s,l){const m=this.cache,b=s.length,p=cs(l,b);Jr(m,p)||(S.uniform1iv(this.addr,p),ir(m,p));for(let i=0;i!==b;++i)l.setTextureCube(s[i]||ix,p[i])}function ih(S,s,l){const m=this.cache,b=s.length,p=cs(l,b);Jr(m,p)||(S.uniform1iv(this.addr,p),ir(m,p));for(let i=0;i!==b;++i)l.setTexture2DArray(s[i]||lp,p[i])}class za{constructor(s,l,m){this.id=s,this.addr=m,this.cache=[],this.setValue=function v0(S){switch(S){case 5126:return Nm;case 35664:return Ba;case 35665:return cw;case 35666:return ny;case 35674:return iy;case 35675:return lw;case 35676:return rx;case 5124:case 35670:return sx;case 35667:case 35671:return dp;case 35668:case 35672:return Kh;case 35669:case 35673:return hp;case 5125:return Kg;case 36294:return Jg;case 36295:return ry;case 36296:return m0;case 35678:case 36198:case 36298:case 36306:case 35682:return g0;case 35679:case 36299:case 36307:return _0;case 35680:case 36300:case 36308:case 36293:return fp;case 36289:case 36303:case 36311:case 36292:return sy}}(l.type)}}class pd{constructor(s,l,m){this.id=s,this.addr=m,this.cache=[],this.size=l.size,this.setValue=function bu(S){switch(S){case 5126:return hd;case 35664:return y0;case 35665:return ox;case 35666:return dc;case 35674:return pp;case 35675:return th;case 35676:return Qg;case 5124:case 35670:return Va;case 35667:case 35671:return oy;case 35668:case 35672:return Um;case 35669:case 35673:return Y1;case 5125:return Z1;case 36294:return ax;case 36295:return uw;case 36296:return cx;case 35678:case 36198:case 36298:case 36306:case 35682:return b0;case 35679:case 36299:case 36307:return fd;case 35680:case 36300:case 36308:case 36293:return nh;case 36289:case 36303:case 36311:case 36292:return ih}}(l.type)}}class hc{constructor(s){this.id=s,this.seq=[],this.map={}}setValue(s,l,m){const b=this.seq;for(let p=0,i=b.length;p!==i;++p){const o=b[p];o.setValue(s,l[o.id],m)}}}const ma=/(\w+)(\])?(\[|\.)?/g;function Bm(S,s){S.seq.push(s),S.map[s.id]=s}function x0(S,s,l){const m=S.name,b=m.length;for(ma.lastIndex=0;;){const p=ma.exec(m);let o=p[1];const f=p[3];if("]"===p[2]&&(o|=0),void 0===f||"["===f&&ma.lastIndex+2===b){Bm(l,void 0===f?new za(o,S,s):new pd(o,S,s));break}{let x=l.map[o];void 0===x&&(x=new hc(o),Bm(l,x)),l=x}}}class ca{constructor(s,l){this.seq=[],this.map={};const m=s.getProgramParameter(l,s.ACTIVE_UNIFORMS);for(let b=0;b<m;++b){const p=s.getActiveUniform(l,b);x0(p,s.getUniformLocation(l,p.name),this)}}setValue(s,l,m,b){const p=this.map[l];void 0!==p&&p.setValue(s,m,b)}setOptional(s,l,m){const b=l[m];void 0!==b&&this.setValue(s,m,b)}static upload(s,l,m,b){for(let p=0,i=l.length;p!==i;++p){const o=l[p],u=m[o.id];!1!==u.needsUpdate&&o.setValue(s,u.value,b)}}static seqWithValue(s,l){const m=[];for(let b=0,p=s.length;b!==p;++b){const i=s[b];i.id in l&&m.push(i)}return m}}function Ha(S,s,l){const m=S.createShader(s);return S.shaderSource(m,l),S.compileShader(m),m}let M0=0;function e_(S,s,l){const m=S.getShaderParameter(s,S.COMPILE_STATUS),b=S.getShaderInfoLog(s).trim();if(m&&""===b)return"";const p=/ERROR: 0:(\d+)/.exec(b);if(p){const i=parseInt(p[1]);return l.toUpperCase()+"\n\n"+b+"\n\n"+function ay(S,s){const l=S.split("\n"),m=[],b=Math.max(s-6,0),p=Math.min(s+6,l.length);for(let i=b;i<p;i++){const o=i+1;m.push(`${o===s?">":" "} ${o}: ${l[i]}`)}return m.join("\n")}(S.getShaderSource(s),i)}return b}function t_(S,s){const l=function w0(S){switch(S){case Qc:return["Linear","( value )"];case Wi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",S),["Linear","( value )"]}}(s);return"vec4 "+S+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function mp(S,s){let l;switch(s){case wc:l="Linear";break;case fb:l="Reinhard";break;case wv:l="OptimizedCineon";break;case Sv:l="ACESFilmic";break;case Of:l="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",s),l="Linear"}return"vec3 "+S+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function ui(S){return""!==S}function Ar(S,s){const l=s.numSpotLightShadows+s.numSpotLightMaps-s.numSpotLightShadowsWithMaps;return S.replace(/NUM_DIR_LIGHTS/g,s.numDirLights).replace(/NUM_SPOT_LIGHTS/g,s.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,s.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,l).replace(/NUM_RECT_AREA_LIGHTS/g,s.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,s.numPointLights).replace(/NUM_HEMI_LIGHTS/g,s.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,s.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,s.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,s.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,s.numPointLightShadows)}function Dr(S,s){return S.replace(/NUM_CLIPPING_PLANES/g,s.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,s.numClippingPlanes-s.numClipIntersection)}const Xi=/^[ \t]*#include +<([\w\d./]+)>/gm;function Lc(S){return S.replace(Xi,vs)}function vs(S,s){const l=Ki[s];if(void 0===l)throw new Error("Can not resolve #include <"+s+">");return Lc(l)}const fc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qh(S){return S.replace(fc,cy)}function cy(S,s,l,m){let b="";for(let p=parseInt(s);p<parseInt(l);p++)b+=m.replace(/\[\s*i\s*\]/g,"[ "+p+" ]").replace(/UNROLLED_LOOP_INDEX/g,p);return b}function Ws(S){let s="precision "+S.precision+" float;\nprecision "+S.precision+" int;";return"highp"===S.precision?s+="\n#define HIGH_PRECISION":"mediump"===S.precision?s+="\n#define MEDIUM_PRECISION":"lowp"===S.precision&&(s+="\n#define LOW_PRECISION"),s}function dx(S,s,l,m){const b=S.getContext(),p=l.defines;let i=l.vertexShader,o=l.fragmentShader;const u=function dw(S){let s="SHADOWMAP_TYPE_BASIC";return S.shadowMapType===be?s="SHADOWMAP_TYPE_PCF":S.shadowMapType===He?s="SHADOWMAP_TYPE_PCF_SOFT":S.shadowMapType===ze&&(s="SHADOWMAP_TYPE_VSM"),s}(l),f=function lx(S){let s="ENVMAP_TYPE_CUBE";if(S.envMap)switch(S.envMapMode){case lu:case Ca:s="ENVMAP_TYPE_CUBE";break;case ju:s="ENVMAP_TYPE_CUBE_UV"}return s}(l),_=function ux(S){let s="ENVMAP_MODE_REFLECTION";return S.envMap&&S.envMapMode===Ca&&(s="ENVMAP_MODE_REFRACTION"),s}(l),x=function K1(S){let s="ENVMAP_BLENDING_NONE";if(S.envMap)switch(S.combine){case Uh:s="ENVMAP_BLENDING_MULTIPLY";break;case Eg:s="ENVMAP_BLENDING_MIX";break;case hb:s="ENVMAP_BLENDING_ADD"}return s}(l),M=function J1(S){const s=S.envMapCubeUVHeight;if(null===s)return null;const l=Math.log2(s)-2,m=1/s;return{texelWidth:1/(3*Math.max(Math.pow(2,l),112)),texelHeight:m,maxMip:l}}(l),E=l.isWebGL2?"":function Jh(S){return[S.extensionDerivatives||S.envMapCubeUVHeight||S.bumpMap||S.normalMapTangentSpace||S.clearcoatNormalMap||S.flatShading||"physical"===S.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(S.extensionFragDepth||S.logarithmicDepthBuffer)&&S.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",S.extensionDrawBuffers&&S.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(S.extensionShaderTextureLOD||S.envMap||S.transmission)&&S.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ui).join("\n")}(l),D=function gp(S){const s=[];for(const l in S){const m=S[l];!1!==m&&s.push("#define "+l+" "+m)}return s.join("\n")}(p),k=b.createProgram();let O,I,U=l.glslVersion?"#version "+l.glslVersion+"\n":"";l.isRawShaderMaterial?(O=[D].filter(ui).join("\n"),O.length>0&&(O+="\n"),I=[E,D].filter(ui).join("\n"),I.length>0&&(I+="\n")):(O=[Ws(l),"#define SHADER_NAME "+l.shaderName,D,l.instancing?"#define USE_INSTANCING":"",l.instancingColor?"#define USE_INSTANCING_COLOR":"",l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+_:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",l.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",l.displacementMap?"#define USE_DISPLACEMENTMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",l.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",l.mapUv?"#define MAP_UV "+l.mapUv:"",l.alphaMapUv?"#define ALPHAMAP_UV "+l.alphaMapUv:"",l.lightMapUv?"#define LIGHTMAP_UV "+l.lightMapUv:"",l.aoMapUv?"#define AOMAP_UV "+l.aoMapUv:"",l.emissiveMapUv?"#define EMISSIVEMAP_UV "+l.emissiveMapUv:"",l.bumpMapUv?"#define BUMPMAP_UV "+l.bumpMapUv:"",l.normalMapUv?"#define NORMALMAP_UV "+l.normalMapUv:"",l.displacementMapUv?"#define DISPLACEMENTMAP_UV "+l.displacementMapUv:"",l.metalnessMapUv?"#define METALNESSMAP_UV "+l.metalnessMapUv:"",l.roughnessMapUv?"#define ROUGHNESSMAP_UV "+l.roughnessMapUv:"",l.clearcoatMapUv?"#define CLEARCOATMAP_UV "+l.clearcoatMapUv:"",l.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+l.clearcoatNormalMapUv:"",l.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+l.clearcoatRoughnessMapUv:"",l.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+l.iridescenceMapUv:"",l.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+l.iridescenceThicknessMapUv:"",l.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+l.sheenColorMapUv:"",l.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+l.sheenRoughnessMapUv:"",l.specularMapUv?"#define SPECULARMAP_UV "+l.specularMapUv:"",l.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+l.specularColorMapUv:"",l.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+l.specularIntensityMapUv:"",l.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+l.transmissionMapUv:"",l.thicknessMapUv?"#define THICKNESSMAP_UV "+l.thicknessMapUv:"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs2?"#define USE_UV2":"",l.pointsUvs?"#define USE_POINTS_UV":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&!1===l.flatShading?"#define USE_MORPHNORMALS":"",l.morphColors&&l.isWebGL2?"#define USE_MORPHCOLORS":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+l.morphTextureStride:"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_COUNT "+l.morphTargetsCount:"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+u:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ui).join("\n"),I=[E,Ws(l),"#define SHADER_NAME "+l.shaderName,D,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+f:"",l.envMap?"#define "+_:"",l.envMap?"#define "+x:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",l.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.clearcoat?"#define USE_CLEARCOAT":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescence?"#define USE_IRIDESCENCE":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",l.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaTest?"#define USE_ALPHATEST":"",l.sheen?"#define USE_SHEEN":"",l.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors||l.instancingColor?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs2?"#define USE_UV2":"",l.pointsUvs?"#define USE_POINTS_UV":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+u:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.useLegacyLights?"#define LEGACY_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",l.toneMapping!==cu?"#define TONE_MAPPING":"",l.toneMapping!==cu?Ki.tonemapping_pars_fragment:"",l.toneMapping!==cu?mp("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.opaque?"#define OPAQUE":"",Ki.encodings_pars_fragment,t_("linearToOutputTexel",l.outputEncoding),l.useDepthPacking?"#define DEPTH_PACKING "+l.depthPacking:"","\n"].filter(ui).join("\n")),i=Lc(i),i=Ar(i,l),i=Dr(i,l),o=Lc(o),o=Ar(o,l),o=Dr(o,l),i=Qh(i),o=Qh(o),l.isWebGL2&&!0!==l.isRawShaderMaterial&&(U="#version 300 es\n",O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+O,I=["#define varying in",l.glslVersion===CM?"":"layout(location = 0) out highp vec4 pc_fragColor;",l.glslVersion===CM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+I);const j=U+I+o,$=Ha(b,b.VERTEX_SHADER,U+O+i),G=Ha(b,b.FRAGMENT_SHADER,j);if(b.attachShader(k,$),b.attachShader(k,G),void 0!==l.index0AttributeName?b.bindAttribLocation(k,0,l.index0AttributeName):!0===l.morphTargets&&b.bindAttribLocation(k,0,"position"),b.linkProgram(k),S.debug.checkShaderErrors){const Y=b.getProgramInfoLog(k).trim(),ee=b.getShaderInfoLog($).trim(),he=b.getShaderInfoLog(G).trim();let xe=!0,fe=!0;if(!1===b.getProgramParameter(k,b.LINK_STATUS))if(xe=!1,"function"==typeof S.debug.onShaderError)S.debug.onShaderError(b,k,$,G);else{const ce=e_(b,$,"vertex"),de=e_(b,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+b.getError()+" - VALIDATE_STATUS "+b.getProgramParameter(k,b.VALIDATE_STATUS)+"\n\nProgram Info Log: "+Y+"\n"+ce+"\n"+de)}else""!==Y?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(""===ee||""===he)&&(fe=!1);fe&&(this.diagnostics={runnable:xe,programLog:Y,vertexShader:{log:ee,prefix:O},fragmentShader:{log:he,prefix:I}})}let Q,J;return b.deleteShader($),b.deleteShader(G),this.getUniforms=function(){return void 0===Q&&(Q=new ca(b,k)),Q},this.getAttributes=function(){return void 0===J&&(J=function ii(S,s){const l={},m=S.getProgramParameter(s,S.ACTIVE_ATTRIBUTES);for(let b=0;b<m;b++){const p=S.getActiveAttrib(s,b),i=p.name;let o=1;p.type===S.FLOAT_MAT2&&(o=2),p.type===S.FLOAT_MAT3&&(o=3),p.type===S.FLOAT_MAT4&&(o=4),l[i]={type:p.type,location:S.getAttribLocation(s,i),locationSize:o}}return l}(b,k)),J},this.destroy=function(){m.releaseStatesOfProgram(this),b.deleteProgram(k),this.program=void 0},this.name=l.shaderName,this.id=M0++,this.cacheKey=s,this.usedTimes=1,this.program=k,this.vertexShader=$,this.fragmentShader=G,this}let ul=0;class dl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(s){const m=s.fragmentShader,b=this._getShaderStage(s.vertexShader),p=this._getShaderStage(m),i=this._getShaderCacheForMaterial(s);return!1===i.has(b)&&(i.add(b),b.usedTimes++),!1===i.has(p)&&(i.add(p),p.usedTimes++),this}remove(s){const l=this.materialCache.get(s);for(const m of l)m.usedTimes--,0===m.usedTimes&&this.shaderCache.delete(m.code);return this.materialCache.delete(s),this}getVertexShaderID(s){return this._getShaderStage(s.vertexShader).id}getFragmentShaderID(s){return this._getShaderStage(s.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(s){const l=this.materialCache;let m=l.get(s);return void 0===m&&(m=new Set,l.set(s,m)),m}_getShaderStage(s){const l=this.shaderCache;let m=l.get(s);return void 0===m&&(m=new hl(s),l.set(s,m)),m}}class hl{constructor(s){this.id=ul++,this.code=s,this.usedTimes=0}}function _p(S,s,l,m,b,p,i){const o=new Og,u=new dl,f=[],_=b.isWebGL2,x=b.logarithmicDepthBuffer,M=b.vertexTextures;let E=b.precision;const D={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(Y){return 1===Y?"uv2":"uv"}return{getParameters:function O(Y,ee,he,xe,fe){const ce=xe.fog,de=fe.geometry,Qe=(Y.isMeshStandardMaterial?l:s).get(Y.envMap||(Y.isMeshStandardMaterial?xe.environment:null)),Ne=Qe&&Qe.mapping===ju?Qe.image.height:null,$e=D[Y.type];null!==Y.precision&&(E=b.getMaxPrecision(Y.precision),E!==Y.precision&&console.warn("THREE.WebGLProgram.getParameters:",Y.precision,"not supported, using",E,"instead."));const et=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Pt=void 0!==et?et.length:0;let Ze,at,bt,tn,Dt=0;if(void 0!==de.morphAttributes.position&&(Dt=1),void 0!==de.morphAttributes.normal&&(Dt=2),void 0!==de.morphAttributes.color&&(Dt=3),$e){const wn=On[$e];Ze=wn.vertexShader,at=wn.fragmentShader}else Ze=Y.vertexShader,at=Y.fragmentShader,u.update(Y),bt=u.getVertexShaderID(Y),tn=u.getFragmentShaderID(Y);const Ve=S.getRenderTarget(),St=!0===fe.isInstancedMesh,Ft=!!Y.map,an=!!Qe,je=!!Y.aoMap,Tt=!!Y.lightMap,Ut=!!Y.bumpMap,Nt=!!Y.normalMap,en=!!Y.displacementMap,tt=!!Y.emissiveMap,wt=!!Y.metalnessMap,Bt=!!Y.roughnessMap,En=Y.clearcoat>0,cn=Y.iridescence>0,Ae=Y.sheen>0,ge=Y.transmission>0,dt=En&&!!Y.clearcoatMap,Ot=En&&!!Y.clearcoatNormalMap,hn=En&&!!Y.clearcoatRoughnessMap,we=cn&&!!Y.iridescenceMap,ve=cn&&!!Y.iridescenceThicknessMap,lt=Ae&&!!Y.sheenColorMap,nt=Ae&&!!Y.sheenRoughnessMap,zt=!!Y.specularMap,sn=!!Y.specularColorMap,Xe=!!Y.specularIntensityMap,vt=ge&&!!Y.transmissionMap,pt=ge&&!!Y.thicknessMap,In=!!Y.alphaMap,qe=!!Y.extensions,_t=!!de.attributes.uv2;return{isWebGL2:_,shaderID:$e,shaderName:Y.type,vertexShader:Ze,fragmentShader:at,defines:Y.defines,customVertexShaderID:bt,customFragmentShaderID:tn,isRawShaderMaterial:!0===Y.isRawShaderMaterial,glslVersion:Y.glslVersion,precision:E,instancing:St,instancingColor:St&&null!==fe.instanceColor,supportsVertexTextures:M,outputEncoding:null===Ve?S.outputEncoding:!0===Ve.isXRRenderTarget?Ve.texture.encoding:Qc,map:Ft,matcap:!!Y.matcap,envMap:an,envMapMode:an&&Qe.mapping,envMapCubeUVHeight:Ne,aoMap:je,lightMap:Tt,bumpMap:Ut,normalMap:Nt,displacementMap:M&&en,emissiveMap:tt,normalMapObjectSpace:Nt&&Y.normalMapType===nc,normalMapTangentSpace:Nt&&Y.normalMapType===zd,decodeVideoTexture:Ft&&!0===Y.map.isVideoTexture&&Y.map.encoding===Wi,metalnessMap:wt,roughnessMap:Bt,clearcoat:En,clearcoatMap:dt,clearcoatNormalMap:Ot,clearcoatRoughnessMap:hn,iridescence:cn,iridescenceMap:we,iridescenceThicknessMap:ve,sheen:Ae,sheenColorMap:lt,sheenRoughnessMap:nt,specularMap:zt,specularColorMap:sn,specularIntensityMap:Xe,transmission:ge,transmissionMap:vt,thicknessMap:pt,gradientMap:!!Y.gradientMap,opaque:!1===Y.transparent&&Y.blending===Kn,alphaMap:In,alphaTest:Y.alphaTest>0,combine:Y.combine,mapUv:Ft&&k(Y.map.channel),aoMapUv:je&&k(Y.aoMap.channel),lightMapUv:Tt&&k(Y.lightMap.channel),bumpMapUv:Ut&&k(Y.bumpMap.channel),normalMapUv:Nt&&k(Y.normalMap.channel),displacementMapUv:en&&k(Y.displacementMap.channel),emissiveMapUv:tt&&k(Y.emissiveMap.channel),metalnessMapUv:wt&&k(Y.metalnessMap.channel),roughnessMapUv:Bt&&k(Y.roughnessMap.channel),clearcoatMapUv:dt&&k(Y.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&k(Y.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:hn&&k(Y.clearcoatRoughnessMap.channel),iridescenceMapUv:we&&k(Y.iridescenceMap.channel),iridescenceThicknessMapUv:ve&&k(Y.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&k(Y.sheenColorMap.channel),sheenRoughnessMapUv:nt&&k(Y.sheenRoughnessMap.channel),specularMapUv:zt&&k(Y.specularMap.channel),specularColorMapUv:sn&&k(Y.specularColorMap.channel),specularIntensityMapUv:Xe&&k(Y.specularIntensityMap.channel),transmissionMapUv:vt&&k(Y.transmissionMap.channel),thicknessMapUv:pt&&k(Y.thicknessMap.channel),alphaMapUv:In&&k(Y.alphaMap.channel),vertexTangents:Nt&&!!de.attributes.tangent,vertexColors:Y.vertexColors,vertexAlphas:!0===Y.vertexColors&&!!de.attributes.color&&4===de.attributes.color.itemSize,vertexUvs2:_t,pointsUvs:!0===fe.isPoints&&!!de.attributes.uv&&(Ft||In),fog:!!ce,useFog:!0===Y.fog,fogExp2:ce&&ce.isFogExp2,flatShading:!0===Y.flatShading,sizeAttenuation:!0===Y.sizeAttenuation,logarithmicDepthBuffer:x,skinning:!0===fe.isSkinnedMesh,morphTargets:void 0!==de.morphAttributes.position,morphNormals:void 0!==de.morphAttributes.normal,morphColors:void 0!==de.morphAttributes.color,morphTargetsCount:Pt,morphTextureStride:Dt,numDirLights:ee.directional.length,numPointLights:ee.point.length,numSpotLights:ee.spot.length,numSpotLightMaps:ee.spotLightMap.length,numRectAreaLights:ee.rectArea.length,numHemiLights:ee.hemi.length,numDirLightShadows:ee.directionalShadowMap.length,numPointLightShadows:ee.pointShadowMap.length,numSpotLightShadows:ee.spotShadowMap.length,numSpotLightShadowsWithMaps:ee.numSpotLightShadowsWithMaps,numClippingPlanes:i.numPlanes,numClipIntersection:i.numIntersection,dithering:Y.dithering,shadowMapEnabled:S.shadowMap.enabled&&he.length>0,shadowMapType:S.shadowMap.type,toneMapping:Y.toneMapped?S.toneMapping:cu,useLegacyLights:S.useLegacyLights,premultipliedAlpha:Y.premultipliedAlpha,doubleSided:Y.side===At,flipSided:Y.side===Mt,useDepthPacking:Y.depthPacking>=0,depthPacking:Y.depthPacking||0,index0AttributeName:Y.index0AttributeName,extensionDerivatives:qe&&!0===Y.extensions.derivatives,extensionFragDepth:qe&&!0===Y.extensions.fragDepth,extensionDrawBuffers:qe&&!0===Y.extensions.drawBuffers,extensionShaderTextureLOD:qe&&!0===Y.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||m.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||m.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||m.has("EXT_shader_texture_lod"),customProgramCacheKey:Y.customProgramCacheKey()}},getProgramCacheKey:function I(Y){const ee=[];if(Y.shaderID?ee.push(Y.shaderID):(ee.push(Y.customVertexShaderID),ee.push(Y.customFragmentShaderID)),void 0!==Y.defines)for(const he in Y.defines)ee.push(he),ee.push(Y.defines[he]);return!1===Y.isRawShaderMaterial&&(function U(Y,ee){Y.push(ee.precision),Y.push(ee.outputEncoding),Y.push(ee.envMapMode),Y.push(ee.envMapCubeUVHeight),Y.push(ee.mapUv),Y.push(ee.alphaMapUv),Y.push(ee.lightMapUv),Y.push(ee.aoMapUv),Y.push(ee.bumpMapUv),Y.push(ee.normalMapUv),Y.push(ee.displacementMapUv),Y.push(ee.emissiveMapUv),Y.push(ee.metalnessMapUv),Y.push(ee.roughnessMapUv),Y.push(ee.clearcoatMapUv),Y.push(ee.clearcoatNormalMapUv),Y.push(ee.clearcoatRoughnessMapUv),Y.push(ee.iridescenceMapUv),Y.push(ee.iridescenceThicknessMapUv),Y.push(ee.sheenColorMapUv),Y.push(ee.sheenRoughnessMapUv),Y.push(ee.specularMapUv),Y.push(ee.specularColorMapUv),Y.push(ee.specularIntensityMapUv),Y.push(ee.transmissionMapUv),Y.push(ee.thicknessMapUv),Y.push(ee.combine),Y.push(ee.fogExp2),Y.push(ee.sizeAttenuation),Y.push(ee.morphTargetsCount),Y.push(ee.morphAttributeCount),Y.push(ee.numDirLights),Y.push(ee.numPointLights),Y.push(ee.numSpotLights),Y.push(ee.numSpotLightMaps),Y.push(ee.numHemiLights),Y.push(ee.numRectAreaLights),Y.push(ee.numDirLightShadows),Y.push(ee.numPointLightShadows),Y.push(ee.numSpotLightShadows),Y.push(ee.numSpotLightShadowsWithMaps),Y.push(ee.shadowMapType),Y.push(ee.toneMapping),Y.push(ee.numClippingPlanes),Y.push(ee.numClipIntersection),Y.push(ee.depthPacking)}(ee,Y),function B(Y,ee){o.disableAll(),ee.isWebGL2&&o.enable(0),ee.supportsVertexTextures&&o.enable(1),ee.instancing&&o.enable(2),ee.instancingColor&&o.enable(3),ee.matcap&&o.enable(4),ee.envMap&&o.enable(5),ee.normalMapObjectSpace&&o.enable(6),ee.normalMapTangentSpace&&o.enable(7),ee.clearcoat&&o.enable(8),ee.iridescence&&o.enable(9),ee.alphaTest&&o.enable(10),ee.vertexColors&&o.enable(11),ee.vertexAlphas&&o.enable(12),ee.vertexUvs2&&o.enable(13),ee.vertexTangents&&o.enable(14),Y.push(o.mask),o.disableAll(),ee.fog&&o.enable(0),ee.useFog&&o.enable(1),ee.flatShading&&o.enable(2),ee.logarithmicDepthBuffer&&o.enable(3),ee.skinning&&o.enable(4),ee.morphTargets&&o.enable(5),ee.morphNormals&&o.enable(6),ee.morphColors&&o.enable(7),ee.premultipliedAlpha&&o.enable(8),ee.shadowMapEnabled&&o.enable(9),ee.useLegacyLights&&o.enable(10),ee.doubleSided&&o.enable(11),ee.flipSided&&o.enable(12),ee.useDepthPacking&&o.enable(13),ee.dithering&&o.enable(14),ee.transmission&&o.enable(15),ee.sheen&&o.enable(16),ee.decodeVideoTexture&&o.enable(17),ee.opaque&&o.enable(18),ee.pointsUvs&&o.enable(19),Y.push(o.mask)}(ee,Y),ee.push(S.outputEncoding)),ee.push(Y.customProgramCacheKey),ee.join()},getUniforms:function j(Y){const ee=D[Y.type];let he;return he=ee?Z_.clone(On[ee].uniforms):Y.uniforms,he},acquireProgram:function $(Y,ee){let he;for(let xe=0,fe=f.length;xe<fe;xe++){const ce=f[xe];if(ce.cacheKey===ee){he=ce,++he.usedTimes;break}}return void 0===he&&(he=new dx(S,ee,Y,p),f.push(he)),he},releaseProgram:function G(Y){if(0==--Y.usedTimes){const ee=f.indexOf(Y);f[ee]=f[f.length-1],f.pop(),Y.destroy()}},releaseShaderCache:function Q(Y){u.remove(Y)},programs:f,dispose:function J(){u.dispose()}}}function ef(){let S=new WeakMap;return{get:function s(p){let i=S.get(p);return void 0===i&&(i={},S.set(p,i)),i},remove:function l(p){S.delete(p)},update:function m(p,i,o){S.get(p)[i]=o},dispose:function b(){S=new WeakMap}}}function Ga(S,s){return S.groupOrder!==s.groupOrder?S.groupOrder-s.groupOrder:S.renderOrder!==s.renderOrder?S.renderOrder-s.renderOrder:S.material.id!==s.material.id?S.material.id-s.material.id:S.z!==s.z?S.z-s.z:S.id-s.id}function pc(S,s){return S.groupOrder!==s.groupOrder?S.groupOrder-s.groupOrder:S.renderOrder!==s.renderOrder?S.renderOrder-s.renderOrder:S.z!==s.z?s.z-S.z:S.id-s.id}function xu(){const S=[];let s=0;const l=[],m=[],b=[];function i(x,M,E,D,k,O){let I=S[s];return void 0===I?(I={id:x.id,object:x,geometry:M,material:E,groupOrder:D,renderOrder:x.renderOrder,z:k,group:O},S[s]=I):(I.id=x.id,I.object=x,I.geometry=M,I.material=E,I.groupOrder=D,I.renderOrder=x.renderOrder,I.z=k,I.group=O),s++,I}return{opaque:l,transmissive:m,transparent:b,init:function p(){s=0,l.length=0,m.length=0,b.length=0},push:function o(x,M,E,D,k,O){const I=i(x,M,E,D,k,O);E.transmission>0?m.push(I):!0===E.transparent?b.push(I):l.push(I)},unshift:function u(x,M,E,D,k,O){const I=i(x,M,E,D,k,O);E.transmission>0?m.unshift(I):!0===E.transparent?b.unshift(I):l.unshift(I)},finish:function _(){for(let x=s,M=S.length;x<M;x++){const E=S[x];if(null===E.id)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}},sort:function f(x,M){l.length>1&&l.sort(x||Ga),m.length>1&&m.sort(M||pc),b.length>1&&b.sort(M||pc)}}}function Oc(){let S=new WeakMap;return{get:function s(m,b){const p=S.get(m);let i;return void 0===p?(i=new xu,S.set(m,[i])):b>=p.length?(i=new xu,p.push(i)):i=p[b],i},dispose:function l(){S=new WeakMap}}}function yr(){const S={};return{get:function(s){if(void 0!==S[s.id])return S[s.id];let l;switch(s.type){case"DirectionalLight":l={direction:new Pe,color:new Yn};break;case"SpotLight":l={position:new Pe,direction:new Pe,color:new Yn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new Pe,color:new Yn,distance:0,decay:0};break;case"HemisphereLight":l={direction:new Pe,skyColor:new Yn,groundColor:new Yn};break;case"RectAreaLight":l={color:new Yn,position:new Pe,halfWidth:new Pe,halfHeight:new Pe}}return S[s.id]=l,l}}}let uy=0;function S0(S,s){return(s.castShadow?2:0)-(S.castShadow?2:0)+(s.map?1:0)-(S.map?1:0)}function E0(S,s){const l=new yr,m=function ly(){const S={};return{get:function(s){if(void 0!==S[s.id])return S[s.id];let l;switch(s.type){case"DirectionalLight":case"SpotLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sn};break;case"PointLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sn,shadowCameraNear:1,shadowCameraFar:1e3}}return S[s.id]=l,l}}}(),b={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let _=0;_<9;_++)b.probe.push(new Pe);const p=new Pe,i=new zi,o=new zi;return{setup:function u(_,x){let M=0,E=0,D=0;for(let he=0;he<9;he++)b.probe[he].set(0,0,0);let k=0,O=0,I=0,U=0,B=0,j=0,$=0,G=0,Q=0,J=0;_.sort(S0);const Y=!0===x?Math.PI:1;for(let he=0,xe=_.length;he<xe;he++){const fe=_[he],ce=fe.color,de=fe.intensity,Ye=fe.distance,Qe=fe.shadow&&fe.shadow.map?fe.shadow.map.texture:null;if(fe.isAmbientLight)M+=ce.r*de*Y,E+=ce.g*de*Y,D+=ce.b*de*Y;else if(fe.isLightProbe)for(let Ne=0;Ne<9;Ne++)b.probe[Ne].addScaledVector(fe.sh.coefficients[Ne],de);else if(fe.isDirectionalLight){const Ne=l.get(fe);if(Ne.color.copy(fe.color).multiplyScalar(fe.intensity*Y),fe.castShadow){const $e=fe.shadow,et=m.get(fe);et.shadowBias=$e.bias,et.shadowNormalBias=$e.normalBias,et.shadowRadius=$e.radius,et.shadowMapSize=$e.mapSize,b.directionalShadow[k]=et,b.directionalShadowMap[k]=Qe,b.directionalShadowMatrix[k]=fe.shadow.matrix,j++}b.directional[k]=Ne,k++}else if(fe.isSpotLight){const Ne=l.get(fe);Ne.position.setFromMatrixPosition(fe.matrixWorld),Ne.color.copy(ce).multiplyScalar(de*Y),Ne.distance=Ye,Ne.coneCos=Math.cos(fe.angle),Ne.penumbraCos=Math.cos(fe.angle*(1-fe.penumbra)),Ne.decay=fe.decay,b.spot[I]=Ne;const $e=fe.shadow;if(fe.map&&(b.spotLightMap[Q]=fe.map,Q++,$e.updateMatrices(fe),fe.castShadow&&J++),b.spotLightMatrix[I]=$e.matrix,fe.castShadow){const et=m.get(fe);et.shadowBias=$e.bias,et.shadowNormalBias=$e.normalBias,et.shadowRadius=$e.radius,et.shadowMapSize=$e.mapSize,b.spotShadow[I]=et,b.spotShadowMap[I]=Qe,G++}I++}else if(fe.isRectAreaLight){const Ne=l.get(fe);Ne.color.copy(ce).multiplyScalar(de),Ne.halfWidth.set(.5*fe.width,0,0),Ne.halfHeight.set(0,.5*fe.height,0),b.rectArea[U]=Ne,U++}else if(fe.isPointLight){const Ne=l.get(fe);if(Ne.color.copy(fe.color).multiplyScalar(fe.intensity*Y),Ne.distance=fe.distance,Ne.decay=fe.decay,fe.castShadow){const $e=fe.shadow,et=m.get(fe);et.shadowBias=$e.bias,et.shadowNormalBias=$e.normalBias,et.shadowRadius=$e.radius,et.shadowMapSize=$e.mapSize,et.shadowCameraNear=$e.camera.near,et.shadowCameraFar=$e.camera.far,b.pointShadow[O]=et,b.pointShadowMap[O]=Qe,b.pointShadowMatrix[O]=fe.shadow.matrix,$++}b.point[O]=Ne,O++}else if(fe.isHemisphereLight){const Ne=l.get(fe);Ne.skyColor.copy(fe.color).multiplyScalar(de*Y),Ne.groundColor.copy(fe.groundColor).multiplyScalar(de*Y),b.hemi[B]=Ne,B++}}U>0&&(s.isWebGL2||!0===S.has("OES_texture_float_linear")?(b.rectAreaLTC1=un.LTC_FLOAT_1,b.rectAreaLTC2=un.LTC_FLOAT_2):!0===S.has("OES_texture_half_float_linear")?(b.rectAreaLTC1=un.LTC_HALF_1,b.rectAreaLTC2=un.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),b.ambient[0]=M,b.ambient[1]=E,b.ambient[2]=D;const ee=b.hash;(ee.directionalLength!==k||ee.pointLength!==O||ee.spotLength!==I||ee.rectAreaLength!==U||ee.hemiLength!==B||ee.numDirectionalShadows!==j||ee.numPointShadows!==$||ee.numSpotShadows!==G||ee.numSpotMaps!==Q)&&(b.directional.length=k,b.spot.length=I,b.rectArea.length=U,b.point.length=O,b.hemi.length=B,b.directionalShadow.length=j,b.directionalShadowMap.length=j,b.pointShadow.length=$,b.pointShadowMap.length=$,b.spotShadow.length=G,b.spotShadowMap.length=G,b.directionalShadowMatrix.length=j,b.pointShadowMatrix.length=$,b.spotLightMatrix.length=G+Q-J,b.spotLightMap.length=Q,b.numSpotLightShadowsWithMaps=J,ee.directionalLength=k,ee.pointLength=O,ee.spotLength=I,ee.rectAreaLength=U,ee.hemiLength=B,ee.numDirectionalShadows=j,ee.numPointShadows=$,ee.numSpotShadows=G,ee.numSpotMaps=Q,b.version=uy++)},setupView:function f(_,x){let M=0,E=0,D=0,k=0,O=0;const I=x.matrixWorldInverse;for(let U=0,B=_.length;U<B;U++){const j=_[U];if(j.isDirectionalLight){const $=b.directional[M];$.direction.setFromMatrixPosition(j.matrixWorld),p.setFromMatrixPosition(j.target.matrixWorld),$.direction.sub(p),$.direction.transformDirection(I),M++}else if(j.isSpotLight){const $=b.spot[D];$.position.setFromMatrixPosition(j.matrixWorld),$.position.applyMatrix4(I),$.direction.setFromMatrixPosition(j.matrixWorld),p.setFromMatrixPosition(j.target.matrixWorld),$.direction.sub(p),$.direction.transformDirection(I),D++}else if(j.isRectAreaLight){const $=b.rectArea[k];$.position.setFromMatrixPosition(j.matrixWorld),$.position.applyMatrix4(I),o.identity(),i.copy(j.matrixWorld),i.premultiply(I),o.extractRotation(i),$.halfWidth.set(.5*j.width,0,0),$.halfHeight.set(0,.5*j.height,0),$.halfWidth.applyMatrix4(o),$.halfHeight.applyMatrix4(o),k++}else if(j.isPointLight){const $=b.point[E];$.position.setFromMatrixPosition(j.matrixWorld),$.position.applyMatrix4(I),E++}else if(j.isHemisphereLight){const $=b.hemi[O];$.direction.setFromMatrixPosition(j.matrixWorld),$.direction.transformDirection(I),O++}}},state:b}}function C0(S,s){const l=new E0(S,s),m=[],b=[];return{init:function p(){m.length=0,b.length=0},state:{lightsArray:m,shadowsArray:b,lights:l},setupLights:function u(x){l.setup(m,x)},setupLightsView:function f(x){l.setupView(m,x)},pushLight:function i(x){m.push(x)},pushShadow:function o(x){b.push(x)}}}function T0(S,s){let l=new WeakMap;return{get:function m(p,i=0){const o=l.get(p);let u;return void 0===o?(u=new C0(S,s),l.set(p,[u])):i>=o.length?(u=new C0(S,s),o.push(u)):u=o[i],u},dispose:function b(){l=new WeakMap}}}class n_ extends La{constructor(s){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(s)}copy(s){return super.copy(s),this.depthPacking=s.depthPacking,this.map=s.map,this.alphaMap=s.alphaMap,this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this}}class Vm extends La{constructor(s){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(s)}copy(s){return super.copy(s),this.map=s.map,this.alphaMap=s.alphaMap,this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this}}const i_="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",hx="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function A0(S,s,l){let m=new ep;const b=new Sn,p=new Sn,i=new tr,o=new n_({depthPacking:gb}),u=new Vm,f={},_=l.maxTextureSize,x={[ct]:Mt,[Mt]:ct,[At]:At},M=new od({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Sn},radius:{value:4}},vertexShader:i_,fragmentShader:hx}),E=M.clone();E.defines.HORIZONTAL_PASS=1;const D=new ai;D.setAttribute("position",new Zi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const k=new _s(D,M),O=this;function I(j,$){const G=s.update(k);M.defines.VSM_SAMPLES!==j.blurSamples&&(M.defines.VSM_SAMPLES=j.blurSamples,E.defines.VSM_SAMPLES=j.blurSamples,M.needsUpdate=!0,E.needsUpdate=!0),null===j.mapPass&&(j.mapPass=new Vi(b.x,b.y)),M.uniforms.shadow_pass.value=j.map.texture,M.uniforms.resolution.value=j.mapSize,M.uniforms.radius.value=j.radius,S.setRenderTarget(j.mapPass),S.clear(),S.renderBufferDirect($,null,G,M,k,null),E.uniforms.shadow_pass.value=j.mapPass.texture,E.uniforms.resolution.value=j.mapSize,E.uniforms.radius.value=j.radius,S.setRenderTarget(j.map),S.clear(),S.renderBufferDirect($,null,G,E,k,null)}function U(j,$,G,Q){let J=null;const Y=!0===G.isPointLight?j.customDistanceMaterial:j.customDepthMaterial;if(void 0!==Y)J=Y;else if(J=!0===G.isPointLight?u:o,S.localClippingEnabled&&!0===$.clipShadows&&Array.isArray($.clippingPlanes)&&0!==$.clippingPlanes.length||$.displacementMap&&0!==$.displacementScale||$.alphaMap&&$.alphaTest>0||$.map&&$.alphaTest>0){const ee=J.uuid,he=$.uuid;let xe=f[ee];void 0===xe&&(xe={},f[ee]=xe);let fe=xe[he];void 0===fe&&(fe=J.clone(),xe[he]=fe),J=fe}return J.visible=$.visible,J.wireframe=$.wireframe,J.side=Q===ze?null!==$.shadowSide?$.shadowSide:$.side:null!==$.shadowSide?$.shadowSide:x[$.side],J.alphaMap=$.alphaMap,J.alphaTest=$.alphaTest,J.map=$.map,J.clipShadows=$.clipShadows,J.clippingPlanes=$.clippingPlanes,J.clipIntersection=$.clipIntersection,J.displacementMap=$.displacementMap,J.displacementScale=$.displacementScale,J.displacementBias=$.displacementBias,J.wireframeLinewidth=$.wireframeLinewidth,J.linewidth=$.linewidth,!0===G.isPointLight&&!0===J.isMeshDistanceMaterial&&(S.properties.get(J).light=G),J}function B(j,$,G,Q,J){if(!1===j.visible)return;if(j.layers.test($.layers)&&(j.isMesh||j.isLine||j.isPoints)&&(j.castShadow||j.receiveShadow&&J===ze)&&(!j.frustumCulled||m.intersectsObject(j))){j.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,j.matrixWorld);const he=s.update(j),xe=j.material;if(Array.isArray(xe)){const fe=he.groups;for(let ce=0,de=fe.length;ce<de;ce++){const Ye=fe[ce],Qe=xe[Ye.materialIndex];if(Qe&&Qe.visible){const Ne=U(j,Qe,Q,J);S.renderBufferDirect(G,null,he,Ne,j,Ye)}}}else if(xe.visible){const fe=U(j,xe,Q,J);S.renderBufferDirect(G,null,he,fe,j,null)}}const ee=j.children;for(let he=0,xe=ee.length;he<xe;he++)B(ee[he],$,G,Q,J)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=be,this.render=function(j,$,G){if(!1===O.enabled||!1===O.autoUpdate&&!1===O.needsUpdate||0===j.length)return;const Q=S.getRenderTarget(),J=S.getActiveCubeFace(),Y=S.getActiveMipmapLevel(),ee=S.state;ee.setBlending(mn),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);for(let he=0,xe=j.length;he<xe;he++){const fe=j[he],ce=fe.shadow;if(void 0===ce){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(!1===ce.autoUpdate&&!1===ce.needsUpdate)continue;b.copy(ce.mapSize);const de=ce.getFrameExtents();b.multiply(de),p.copy(ce.mapSize),(b.x>_||b.y>_)&&(b.x>_&&(p.x=Math.floor(_/de.x),b.x=p.x*de.x,ce.mapSize.x=p.x),b.y>_&&(p.y=Math.floor(_/de.y),b.y=p.y*de.y,ce.mapSize.y=p.y)),null===ce.map&&(ce.map=new Vi(b.x,b.y,this.type!==ze?{minFilter:gr,magFilter:gr}:{}),ce.map.texture.name=fe.name+".shadowMap",ce.camera.updateProjectionMatrix()),S.setRenderTarget(ce.map),S.clear();const Ye=ce.getViewportCount();for(let Qe=0;Qe<Ye;Qe++){const Ne=ce.getViewport(Qe);i.set(p.x*Ne.x,p.y*Ne.y,p.x*Ne.z,p.y*Ne.w),ee.viewport(i),ce.updateMatrices(fe,Qe),m=ce.getFrustum(),B($,G,ce.camera,fe,this.type)}!0!==ce.isPointLightShadow&&this.type===ze&&I(ce,G),ce.needsUpdate=!1}O.needsUpdate=!1,S.setRenderTarget(Q,J,Y)}}function tf(S,s,l){const m=l.isWebGL2,o=new function b(){let qe=!1;const _t=new tr;let Yt=null;const wn=new tr(0,0,0,0);return{setMask:function(jn){Yt!==jn&&!qe&&(S.colorMask(jn,jn,jn,jn),Yt=jn)},setLocked:function(jn){qe=jn},setClear:function(jn,ot,qt,vn,Hn){!0===Hn&&(jn*=vn,ot*=vn,qt*=vn),_t.set(jn,ot,qt,vn),!1===wn.equals(_t)&&(S.clearColor(jn,ot,qt,vn),wn.copy(_t))},reset:function(){qe=!1,Yt=null,wn.set(-1,0,0,0)}}},u=new function p(){let qe=!1,_t=null,Yt=null,wn=null;return{setTest:function(jn){jn?Ve(S.DEPTH_TEST):St(S.DEPTH_TEST)},setMask:function(jn){_t!==jn&&!qe&&(S.depthMask(jn),_t=jn)},setFunc:function(jn){if(Yt!==jn){switch(jn){case L_:S.depthFunc(S.NEVER);break;case Nh:S.depthFunc(S.ALWAYS);break;case qr:S.depthFunc(S.LESS);break;case mr:S.depthFunc(S.LEQUAL);break;case lm:S.depthFunc(S.EQUAL);break;case ri:S.depthFunc(S.GEQUAL);break;case O_:S.depthFunc(S.GREATER);break;case Mv:S.depthFunc(S.NOTEQUAL);break;default:S.depthFunc(S.LEQUAL)}Yt=jn}},setLocked:function(jn){qe=jn},setClear:function(jn){wn!==jn&&(S.clearDepth(jn),wn=jn)},reset:function(){qe=!1,_t=null,Yt=null,wn=null}}},f=new function i(){let qe=!1,_t=null,Yt=null,wn=null,jn=null,ot=null,qt=null,vn=null,Hn=null;return{setTest:function(qn){qe||(qn?Ve(S.STENCIL_TEST):St(S.STENCIL_TEST))},setMask:function(qn){_t!==qn&&!qe&&(S.stencilMask(qn),_t=qn)},setFunc:function(qn,br,Nr){(Yt!==qn||wn!==br||jn!==Nr)&&(S.stencilFunc(qn,br,Nr),Yt=qn,wn=br,jn=Nr)},setOp:function(qn,br,Nr){(ot!==qn||qt!==br||vn!==Nr)&&(S.stencilOp(qn,br,Nr),ot=qn,qt=br,vn=Nr)},setLocked:function(qn){qe=qn},setClear:function(qn){Hn!==qn&&(S.clearStencil(qn),Hn=qn)},reset:function(){qe=!1,_t=null,Yt=null,wn=null,jn=null,ot=null,qt=null,vn=null,Hn=null}}},_=new WeakMap,x=new WeakMap;let M={},E={},D=new WeakMap,k=[],O=null,I=!1,U=null,B=null,j=null,$=null,G=null,Q=null,J=null,Y=!1,ee=null,he=null,xe=null,fe=null,ce=null;const de=S.getParameter(S.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ye=!1,Qe=0;const Ne=S.getParameter(S.VERSION);-1!==Ne.indexOf("WebGL")?(Qe=parseFloat(/^WebGL (\d)/.exec(Ne)[1]),Ye=Qe>=1):-1!==Ne.indexOf("OpenGL ES")&&(Qe=parseFloat(/^OpenGL ES (\d)/.exec(Ne)[1]),Ye=Qe>=2);let $e=null,et={};const Pt=S.getParameter(S.SCISSOR_BOX),Dt=S.getParameter(S.VIEWPORT),Ze=(new tr).fromArray(Pt),at=(new tr).fromArray(Dt);function bt(qe,_t,Yt){const wn=new Uint8Array(4),jn=S.createTexture();S.bindTexture(qe,jn),S.texParameteri(qe,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(qe,S.TEXTURE_MAG_FILTER,S.NEAREST);for(let ot=0;ot<Yt;ot++)S.texImage2D(_t+ot,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,wn);return jn}const tn={};function Ve(qe){!0!==M[qe]&&(S.enable(qe),M[qe]=!0)}function St(qe){!1!==M[qe]&&(S.disable(qe),M[qe]=!1)}tn[S.TEXTURE_2D]=bt(S.TEXTURE_2D,S.TEXTURE_2D,1),tn[S.TEXTURE_CUBE_MAP]=bt(S.TEXTURE_CUBE_MAP,S.TEXTURE_CUBE_MAP_POSITIVE_X,6),o.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Ve(S.DEPTH_TEST),u.setFunc(mr),en(!1),tt(Je),Ve(S.CULL_FACE),Ut(mn);const je={[Jc]:S.FUNC_ADD,[Bs]:S.FUNC_SUBTRACT,[ou]:S.FUNC_REVERSE_SUBTRACT};if(m)je[cm]=S.MIN,je[au]=S.MAX;else{const qe=s.get("EXT_blend_minmax");null!==qe&&(je[cm]=qe.MIN_EXT,je[au]=qe.MAX_EXT)}const Tt={[Gu]:S.ZERO,[Lh]:S.ONE,[Mo]:S.SRC_COLOR,[P_]:S.SRC_ALPHA,[Ci]:S.SRC_ALPHA_SATURATE,[k_]:S.DST_COLOR,[Oh]:S.DST_ALPHA,[wo]:S.ONE_MINUS_SRC_COLOR,[pr]:S.ONE_MINUS_SRC_ALPHA,[xv]:S.ONE_MINUS_DST_COLOR,[Fh]:S.ONE_MINUS_DST_ALPHA};function Ut(qe,_t,Yt,wn,jn,ot,qt,vn){if(qe!==mn){if(!1===I&&(Ve(S.BLEND),I=!0),qe===Mc)jn=jn||_t,ot=ot||Yt,qt=qt||wn,(_t!==B||jn!==G)&&(S.blendEquationSeparate(je[_t],je[jn]),B=_t,G=jn),(Yt!==j||wn!==$||ot!==Q||qt!==J)&&(S.blendFuncSeparate(Tt[Yt],Tt[wn],Tt[ot],Tt[qt]),j=Yt,$=wn,Q=ot,J=qt),U=qe,Y=!1;else if(qe!==U||vn!==Y){if((B!==Jc||G!==Jc)&&(S.blendEquation(S.FUNC_ADD),B=Jc,G=Jc),vn)switch(qe){case Kn:S.blendFuncSeparate(S.ONE,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case $r:S.blendFunc(S.ONE,S.ONE);break;case po:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case xo:S.blendFuncSeparate(S.ZERO,S.SRC_COLOR,S.ZERO,S.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",qe)}else switch(qe){case Kn:S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case $r:S.blendFunc(S.SRC_ALPHA,S.ONE);break;case po:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case xo:S.blendFunc(S.ZERO,S.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",qe)}j=null,$=null,Q=null,J=null,U=qe,Y=vn}}else!0===I&&(St(S.BLEND),I=!1)}function en(qe){ee!==qe&&(S.frontFace(qe?S.CW:S.CCW),ee=qe)}function tt(qe){qe!==nn?(Ve(S.CULL_FACE),qe!==he&&S.cullFace(qe===Je?S.BACK:qe===Zt?S.FRONT:S.FRONT_AND_BACK)):St(S.CULL_FACE),he=qe}function Bt(qe,_t,Yt){qe?(Ve(S.POLYGON_OFFSET_FILL),(fe!==_t||ce!==Yt)&&(S.polygonOffset(_t,Yt),fe=_t,ce=Yt)):St(S.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:u,stencil:f},enable:Ve,disable:St,bindFramebuffer:function Ft(qe,_t){return E[qe]!==_t&&(S.bindFramebuffer(qe,_t),E[qe]=_t,m&&(qe===S.DRAW_FRAMEBUFFER&&(E[S.FRAMEBUFFER]=_t),qe===S.FRAMEBUFFER&&(E[S.DRAW_FRAMEBUFFER]=_t)),!0)},drawBuffers:function Et(qe,_t){let Yt=k,wn=!1;if(qe)if(Yt=D.get(_t),void 0===Yt&&(Yt=[],D.set(_t,Yt)),qe.isWebGLMultipleRenderTargets){const jn=qe.texture;if(Yt.length!==jn.length||Yt[0]!==S.COLOR_ATTACHMENT0){for(let ot=0,qt=jn.length;ot<qt;ot++)Yt[ot]=S.COLOR_ATTACHMENT0+ot;Yt.length=jn.length,wn=!0}}else Yt[0]!==S.COLOR_ATTACHMENT0&&(Yt[0]=S.COLOR_ATTACHMENT0,wn=!0);else Yt[0]!==S.BACK&&(Yt[0]=S.BACK,wn=!0);wn&&(l.isWebGL2?S.drawBuffers(Yt):s.get("WEBGL_draw_buffers").drawBuffersWEBGL(Yt))},useProgram:function an(qe){return O!==qe&&(S.useProgram(qe),O=qe,!0)},setBlending:Ut,setMaterial:function Nt(qe,_t){qe.side===At?St(S.CULL_FACE):Ve(S.CULL_FACE);let Yt=qe.side===Mt;_t&&(Yt=!Yt),en(Yt),qe.blending===Kn&&!1===qe.transparent?Ut(mn):Ut(qe.blending,qe.blendEquation,qe.blendSrc,qe.blendDst,qe.blendEquationAlpha,qe.blendSrcAlpha,qe.blendDstAlpha,qe.premultipliedAlpha),u.setFunc(qe.depthFunc),u.setTest(qe.depthTest),u.setMask(qe.depthWrite),o.setMask(qe.colorWrite);const wn=qe.stencilWrite;f.setTest(wn),wn&&(f.setMask(qe.stencilWriteMask),f.setFunc(qe.stencilFunc,qe.stencilRef,qe.stencilFuncMask),f.setOp(qe.stencilFail,qe.stencilZFail,qe.stencilZPass)),Bt(qe.polygonOffset,qe.polygonOffsetFactor,qe.polygonOffsetUnits),!0===qe.alphaToCoverage?Ve(S.SAMPLE_ALPHA_TO_COVERAGE):St(S.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:en,setCullFace:tt,setLineWidth:function wt(qe){qe!==xe&&(Ye&&S.lineWidth(qe),xe=qe)},setPolygonOffset:Bt,setScissorTest:function En(qe){qe?Ve(S.SCISSOR_TEST):St(S.SCISSOR_TEST)},activeTexture:function cn(qe){void 0===qe&&(qe=S.TEXTURE0+de-1),$e!==qe&&(S.activeTexture(qe),$e=qe)},bindTexture:function Ae(qe,_t,Yt){void 0===Yt&&(Yt=null===$e?S.TEXTURE0+de-1:$e);let wn=et[Yt];void 0===wn&&(wn={type:void 0,texture:void 0},et[Yt]=wn),(wn.type!==qe||wn.texture!==_t)&&($e!==Yt&&(S.activeTexture(Yt),$e=Yt),S.bindTexture(qe,_t||tn[qe]),wn.type=qe,wn.texture=_t)},unbindTexture:function ge(){const qe=et[$e];void 0!==qe&&void 0!==qe.type&&(S.bindTexture(qe.type,null),qe.type=void 0,qe.texture=void 0)},compressedTexImage2D:function dt(){try{S.compressedTexImage2D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},compressedTexImage3D:function Ot(){try{S.compressedTexImage3D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},texImage2D:function sn(){try{S.texImage2D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},texImage3D:function Xe(){try{S.texImage3D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},updateUBOMapping:function yn(qe,_t){let Yt=x.get(_t);void 0===Yt&&(Yt=new WeakMap,x.set(_t,Yt));let wn=Yt.get(qe);void 0===wn&&(wn=S.getUniformBlockIndex(_t,qe.name),Yt.set(qe,wn))},uniformBlockBinding:function In(qe,_t){const wn=x.get(_t).get(qe);_.get(_t)!==wn&&(S.uniformBlockBinding(_t,wn,qe.__bindingPointIndex),_.set(_t,wn))},texStorage2D:function nt(){try{S.texStorage2D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},texStorage3D:function zt(){try{S.texStorage3D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},texSubImage2D:function hn(){try{S.texSubImage2D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},texSubImage3D:function we(){try{S.texSubImage3D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},compressedTexSubImage2D:function ve(){try{S.compressedTexSubImage2D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},compressedTexSubImage3D:function lt(){try{S.compressedTexSubImage3D.apply(S,arguments)}catch(qe){console.error("THREE.WebGLState:",qe)}},scissor:function vt(qe){!1===Ze.equals(qe)&&(S.scissor(qe.x,qe.y,qe.z,qe.w),Ze.copy(qe))},viewport:function pt(qe){!1===at.equals(qe)&&(S.viewport(qe.x,qe.y,qe.z,qe.w),at.copy(qe))},reset:function Wn(){S.disable(S.BLEND),S.disable(S.CULL_FACE),S.disable(S.DEPTH_TEST),S.disable(S.POLYGON_OFFSET_FILL),S.disable(S.SCISSOR_TEST),S.disable(S.STENCIL_TEST),S.disable(S.SAMPLE_ALPHA_TO_COVERAGE),S.blendEquation(S.FUNC_ADD),S.blendFunc(S.ONE,S.ZERO),S.blendFuncSeparate(S.ONE,S.ZERO,S.ONE,S.ZERO),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.depthMask(!0),S.depthFunc(S.LESS),S.clearDepth(1),S.stencilMask(4294967295),S.stencilFunc(S.ALWAYS,0,4294967295),S.stencilOp(S.KEEP,S.KEEP,S.KEEP),S.clearStencil(0),S.cullFace(S.BACK),S.frontFace(S.CCW),S.polygonOffset(0,0),S.activeTexture(S.TEXTURE0),S.bindFramebuffer(S.FRAMEBUFFER,null),!0===m&&(S.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),S.bindFramebuffer(S.READ_FRAMEBUFFER,null)),S.useProgram(null),S.lineWidth(1),S.scissor(0,0,S.canvas.width,S.canvas.height),S.viewport(0,0,S.canvas.width,S.canvas.height),M={},$e=null,et={},E={},D=new WeakMap,k=[],O=null,I=!1,U=null,B=null,j=null,$=null,G=null,Q=null,J=null,Y=!1,ee=null,he=null,xe=null,fe=null,ce=null,Ze.set(0,0,S.canvas.width,S.canvas.height),at.set(0,0,S.canvas.width,S.canvas.height),o.reset(),u.reset(),f.reset()}}}function md(S,s,l,m,b,p,i){const o=b.isWebGL2,u=b.maxTextures,f=b.maxCubemapSize,_=b.maxTextureSize,x=b.maxSamples,M=s.has("WEBGL_multisampled_render_to_texture")?s.get("WEBGL_multisampled_render_to_texture"):null,E=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),D=new WeakMap;let k;const O=new WeakMap;let I=!1;try{I=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function U(Ae,ge){return I?new OffscreenCanvas(Ae,ge):Ri("canvas")}function B(Ae,ge,dt,Ot){let hn=1;if((Ae.width>Ot||Ae.height>Ot)&&(hn=Ot/Math.max(Ae.width,Ae.height)),hn<1||!0===ge){if(typeof HTMLImageElement<"u"&&Ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ae instanceof ImageBitmap){const we=ge?el:Math.floor,ve=we(hn*Ae.width),lt=we(hn*Ae.height);void 0===k&&(k=U(ve,lt));const nt=dt?U(ve,lt):k;return nt.width=ve,nt.height=lt,nt.getContext("2d").drawImage(Ae,0,0,ve,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+ve+"x"+lt+")."),nt}return"data"in Ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),Ae}return Ae}function j(Ae){return j_(Ae.width)&&j_(Ae.height)}function G(Ae,ge){return Ae.generateMipmaps&&ge&&Ae.minFilter!==gr&&Ae.minFilter!==mo}function Q(Ae){S.generateMipmap(Ae)}function J(Ae,ge,dt,Ot,hn=!1){if(!1===o)return ge;if(null!==Ae){if(void 0!==S[Ae])return S[Ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ae+"'")}let we=ge;return ge===S.RED&&(dt===S.FLOAT&&(we=S.R32F),dt===S.HALF_FLOAT&&(we=S.R16F),dt===S.UNSIGNED_BYTE&&(we=S.R8)),ge===S.RG&&(dt===S.FLOAT&&(we=S.RG32F),dt===S.HALF_FLOAT&&(we=S.RG16F),dt===S.UNSIGNED_BYTE&&(we=S.RG8)),ge===S.RGBA&&(dt===S.FLOAT&&(we=S.RGBA32F),dt===S.HALF_FLOAT&&(we=S.RGBA16F),dt===S.UNSIGNED_BYTE&&(we=Ot===Wi&&!1===hn?S.SRGB8_ALPHA8:S.RGBA8),dt===S.UNSIGNED_SHORT_4_4_4_4&&(we=S.RGBA4),dt===S.UNSIGNED_SHORT_5_5_5_1&&(we=S.RGB5_A1)),(we===S.R16F||we===S.R32F||we===S.RG16F||we===S.RG32F||we===S.RGBA16F||we===S.RGBA32F)&&s.get("EXT_color_buffer_float"),we}function Y(Ae,ge,dt){return!0===G(Ae,dt)||Ae.isFramebufferTexture&&Ae.minFilter!==gr&&Ae.minFilter!==mo?Math.log2(Math.max(ge.width,ge.height))+1:void 0!==Ae.mipmaps&&Ae.mipmaps.length>0?Ae.mipmaps.length:Ae.isCompressedTexture&&Array.isArray(Ae.image)?ge.mipmaps.length:1}function ee(Ae){return Ae===gr||Ae===Xr||Ae===Ff?S.NEAREST:S.LINEAR}function he(Ae){const ge=Ae.target;ge.removeEventListener("dispose",he),function fe(Ae){const ge=m.get(Ae);if(void 0===ge.__webglInit)return;const dt=Ae.source,Ot=O.get(dt);if(Ot){const hn=Ot[ge.__cacheKey];hn.usedTimes--,0===hn.usedTimes&&ce(Ae),0===Object.keys(Ot).length&&O.delete(dt)}m.remove(Ae)}(ge),ge.isVideoTexture&&D.delete(ge)}function xe(Ae){const ge=Ae.target;ge.removeEventListener("dispose",xe),function de(Ae){const ge=Ae.texture,dt=m.get(Ae),Ot=m.get(ge);if(void 0!==Ot.__webglTexture&&(S.deleteTexture(Ot.__webglTexture),i.memory.textures--),Ae.depthTexture&&Ae.depthTexture.dispose(),Ae.isWebGLCubeRenderTarget)for(let hn=0;hn<6;hn++)S.deleteFramebuffer(dt.__webglFramebuffer[hn]),dt.__webglDepthbuffer&&S.deleteRenderbuffer(dt.__webglDepthbuffer[hn]);else{if(S.deleteFramebuffer(dt.__webglFramebuffer),dt.__webglDepthbuffer&&S.deleteRenderbuffer(dt.__webglDepthbuffer),dt.__webglMultisampledFramebuffer&&S.deleteFramebuffer(dt.__webglMultisampledFramebuffer),dt.__webglColorRenderbuffer)for(let hn=0;hn<dt.__webglColorRenderbuffer.length;hn++)dt.__webglColorRenderbuffer[hn]&&S.deleteRenderbuffer(dt.__webglColorRenderbuffer[hn]);dt.__webglDepthRenderbuffer&&S.deleteRenderbuffer(dt.__webglDepthRenderbuffer)}if(Ae.isWebGLMultipleRenderTargets)for(let hn=0,we=ge.length;hn<we;hn++){const ve=m.get(ge[hn]);ve.__webglTexture&&(S.deleteTexture(ve.__webglTexture),i.memory.textures--),m.remove(ge[hn])}m.remove(ge),m.remove(Ae)}(ge)}function ce(Ae){const ge=m.get(Ae);S.deleteTexture(ge.__webglTexture),delete O.get(Ae.source)[ge.__cacheKey],i.memory.textures--}let Ye=0;function et(Ae,ge){const dt=m.get(Ae);if(Ae.isVideoTexture&&function En(Ae){const ge=i.render.frame;D.get(Ae)!==ge&&(D.set(Ae,ge),Ae.update())}(Ae),!1===Ae.isRenderTargetTexture&&Ae.version>0&&dt.__version!==Ae.version){const Ot=Ae.image;if(null===Ot)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ot.complete)return void St(dt,Ae,ge);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}l.bindTexture(S.TEXTURE_2D,dt.__webglTexture,S.TEXTURE0+ge)}const at={[Ud]:S.REPEAT,[Oo]:S.CLAMP_TO_EDGE,[io]:S.MIRRORED_REPEAT},bt={[gr]:S.NEAREST,[Xr]:S.NEAREST_MIPMAP_NEAREST,[Ff]:S.NEAREST_MIPMAP_LINEAR,[mo]:S.LINEAR,[bs]:S.LINEAR_MIPMAP_NEAREST,[$u]:S.LINEAR_MIPMAP_LINEAR};function tn(Ae,ge,dt){if(dt?(S.texParameteri(Ae,S.TEXTURE_WRAP_S,at[ge.wrapS]),S.texParameteri(Ae,S.TEXTURE_WRAP_T,at[ge.wrapT]),(Ae===S.TEXTURE_3D||Ae===S.TEXTURE_2D_ARRAY)&&S.texParameteri(Ae,S.TEXTURE_WRAP_R,at[ge.wrapR]),S.texParameteri(Ae,S.TEXTURE_MAG_FILTER,bt[ge.magFilter]),S.texParameteri(Ae,S.TEXTURE_MIN_FILTER,bt[ge.minFilter])):(S.texParameteri(Ae,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(Ae,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),(Ae===S.TEXTURE_3D||Ae===S.TEXTURE_2D_ARRAY)&&S.texParameteri(Ae,S.TEXTURE_WRAP_R,S.CLAMP_TO_EDGE),(ge.wrapS!==Oo||ge.wrapT!==Oo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),S.texParameteri(Ae,S.TEXTURE_MAG_FILTER,ee(ge.magFilter)),S.texParameteri(Ae,S.TEXTURE_MIN_FILTER,ee(ge.minFilter)),ge.minFilter!==gr&&ge.minFilter!==mo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===s.has("EXT_texture_filter_anisotropic")){const Ot=s.get("EXT_texture_filter_anisotropic");if(ge.magFilter===gr||ge.minFilter!==Ff&&ge.minFilter!==$u||ge.type===Ta&&!1===s.has("OES_texture_float_linear")||!1===o&&ge.type===Sc&&!1===s.has("OES_texture_half_float_linear"))return;(ge.anisotropy>1||m.get(ge).__currentAnisotropy)&&(S.texParameterf(Ae,Ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ge.anisotropy,b.getMaxAnisotropy())),m.get(ge).__currentAnisotropy=ge.anisotropy)}}function Ve(Ae,ge){let dt=!1;void 0===Ae.__webglInit&&(Ae.__webglInit=!0,ge.addEventListener("dispose",he));const Ot=ge.source;let hn=O.get(Ot);void 0===hn&&(hn={},O.set(Ot,hn));const we=function $e(Ae){const ge=[];return ge.push(Ae.wrapS),ge.push(Ae.wrapT),ge.push(Ae.wrapR||0),ge.push(Ae.magFilter),ge.push(Ae.minFilter),ge.push(Ae.anisotropy),ge.push(Ae.internalFormat),ge.push(Ae.format),ge.push(Ae.type),ge.push(Ae.generateMipmaps),ge.push(Ae.premultiplyAlpha),ge.push(Ae.flipY),ge.push(Ae.unpackAlignment),ge.push(Ae.encoding),ge.join()}(ge);if(we!==Ae.__cacheKey){void 0===hn[we]&&(hn[we]={texture:S.createTexture(),usedTimes:0},i.memory.textures++,dt=!0),hn[we].usedTimes++;const ve=hn[Ae.__cacheKey];void 0!==ve&&(hn[Ae.__cacheKey].usedTimes--,0===ve.usedTimes&&ce(ge)),Ae.__cacheKey=we,Ae.__webglTexture=hn[we].texture}return dt}function St(Ae,ge,dt){let Ot=S.TEXTURE_2D;(ge.isDataArrayTexture||ge.isCompressedArrayTexture)&&(Ot=S.TEXTURE_2D_ARRAY),ge.isData3DTexture&&(Ot=S.TEXTURE_3D);const hn=Ve(Ae,ge),we=ge.source;l.bindTexture(Ot,Ae.__webglTexture,S.TEXTURE0+dt);const ve=m.get(we);if(we.version!==ve.__version||!0===hn){l.activeTexture(S.TEXTURE0+dt),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,ge.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,ge.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const lt=function $(Ae){return!o&&(Ae.wrapS!==Oo||Ae.wrapT!==Oo||Ae.minFilter!==gr&&Ae.minFilter!==mo)}(ge)&&!1===j(ge.image);let nt=B(ge.image,lt,!1,_);nt=cn(ge,nt);const zt=j(nt)||o,sn=p.convert(ge.format,ge.encoding);let pt,Xe=p.convert(ge.type),vt=J(ge.internalFormat,sn,Xe,ge.encoding,ge.isVideoTexture);tn(Ot,ge,zt);const yn=ge.mipmaps,In=o&&!0!==ge.isVideoTexture,Wn=void 0===ve.__version||!0===hn,qe=Y(ge,nt,zt);if(ge.isDepthTexture)vt=S.DEPTH_COMPONENT,o?vt=ge.type===Ta?S.DEPTH_COMPONENT32F:ge.type===uu?S.DEPTH_COMPONENT24:ge.type===Bf?S.DEPTH24_STENCIL8:S.DEPTH_COMPONENT16:ge.type===Ta&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ge.format===xs&&vt===S.DEPTH_COMPONENT&&ge.type!==Nf&&ge.type!==uu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ge.type=uu,Xe=p.convert(ge.type)),ge.format===So&&vt===S.DEPTH_COMPONENT&&(vt=S.DEPTH_STENCIL,ge.type!==Bf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ge.type=Bf,Xe=p.convert(ge.type))),Wn&&(In?l.texStorage2D(S.TEXTURE_2D,1,vt,nt.width,nt.height):l.texImage2D(S.TEXTURE_2D,0,vt,nt.width,nt.height,0,sn,Xe,null));else if(ge.isDataTexture)if(yn.length>0&&zt){In&&Wn&&l.texStorage2D(S.TEXTURE_2D,qe,vt,yn[0].width,yn[0].height);for(let _t=0,Yt=yn.length;_t<Yt;_t++)pt=yn[_t],In?l.texSubImage2D(S.TEXTURE_2D,_t,0,0,pt.width,pt.height,sn,Xe,pt.data):l.texImage2D(S.TEXTURE_2D,_t,vt,pt.width,pt.height,0,sn,Xe,pt.data);ge.generateMipmaps=!1}else In?(Wn&&l.texStorage2D(S.TEXTURE_2D,qe,vt,nt.width,nt.height),l.texSubImage2D(S.TEXTURE_2D,0,0,0,nt.width,nt.height,sn,Xe,nt.data)):l.texImage2D(S.TEXTURE_2D,0,vt,nt.width,nt.height,0,sn,Xe,nt.data);else if(ge.isCompressedTexture)if(ge.isCompressedArrayTexture){In&&Wn&&l.texStorage3D(S.TEXTURE_2D_ARRAY,qe,vt,yn[0].width,yn[0].height,nt.depth);for(let _t=0,Yt=yn.length;_t<Yt;_t++)pt=yn[_t],ge.format!==Aa?null!==sn?In?l.compressedTexSubImage3D(S.TEXTURE_2D_ARRAY,_t,0,0,0,pt.width,pt.height,nt.depth,sn,pt.data,0,0):l.compressedTexImage3D(S.TEXTURE_2D_ARRAY,_t,vt,pt.width,pt.height,nt.depth,0,pt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):In?l.texSubImage3D(S.TEXTURE_2D_ARRAY,_t,0,0,0,pt.width,pt.height,nt.depth,sn,Xe,pt.data):l.texImage3D(S.TEXTURE_2D_ARRAY,_t,vt,pt.width,pt.height,nt.depth,0,sn,Xe,pt.data)}else{In&&Wn&&l.texStorage2D(S.TEXTURE_2D,qe,vt,yn[0].width,yn[0].height);for(let _t=0,Yt=yn.length;_t<Yt;_t++)pt=yn[_t],ge.format!==Aa?null!==sn?In?l.compressedTexSubImage2D(S.TEXTURE_2D,_t,0,0,pt.width,pt.height,sn,pt.data):l.compressedTexImage2D(S.TEXTURE_2D,_t,vt,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):In?l.texSubImage2D(S.TEXTURE_2D,_t,0,0,pt.width,pt.height,sn,Xe,pt.data):l.texImage2D(S.TEXTURE_2D,_t,vt,pt.width,pt.height,0,sn,Xe,pt.data)}else if(ge.isDataArrayTexture)In?(Wn&&l.texStorage3D(S.TEXTURE_2D_ARRAY,qe,vt,nt.width,nt.height,nt.depth),l.texSubImage3D(S.TEXTURE_2D_ARRAY,0,0,0,0,nt.width,nt.height,nt.depth,sn,Xe,nt.data)):l.texImage3D(S.TEXTURE_2D_ARRAY,0,vt,nt.width,nt.height,nt.depth,0,sn,Xe,nt.data);else if(ge.isData3DTexture)In?(Wn&&l.texStorage3D(S.TEXTURE_3D,qe,vt,nt.width,nt.height,nt.depth),l.texSubImage3D(S.TEXTURE_3D,0,0,0,0,nt.width,nt.height,nt.depth,sn,Xe,nt.data)):l.texImage3D(S.TEXTURE_3D,0,vt,nt.width,nt.height,nt.depth,0,sn,Xe,nt.data);else if(ge.isFramebufferTexture){if(Wn)if(In)l.texStorage2D(S.TEXTURE_2D,qe,vt,nt.width,nt.height);else{let _t=nt.width,Yt=nt.height;for(let wn=0;wn<qe;wn++)l.texImage2D(S.TEXTURE_2D,wn,vt,_t,Yt,0,sn,Xe,null),_t>>=1,Yt>>=1}}else if(yn.length>0&&zt){In&&Wn&&l.texStorage2D(S.TEXTURE_2D,qe,vt,yn[0].width,yn[0].height);for(let _t=0,Yt=yn.length;_t<Yt;_t++)pt=yn[_t],In?l.texSubImage2D(S.TEXTURE_2D,_t,0,0,sn,Xe,pt):l.texImage2D(S.TEXTURE_2D,_t,vt,sn,Xe,pt);ge.generateMipmaps=!1}else In?(Wn&&l.texStorage2D(S.TEXTURE_2D,qe,vt,nt.width,nt.height),l.texSubImage2D(S.TEXTURE_2D,0,0,0,sn,Xe,nt)):l.texImage2D(S.TEXTURE_2D,0,vt,sn,Xe,nt);G(ge,zt)&&Q(Ot),ve.__version=we.version,ge.onUpdate&&ge.onUpdate(ge)}Ae.__version=ge.version}function Et(Ae,ge,dt,Ot,hn){const we=p.convert(dt.format,dt.encoding),ve=p.convert(dt.type),lt=J(dt.internalFormat,we,ve,dt.encoding);m.get(ge).__hasExternalTextures||(hn===S.TEXTURE_3D||hn===S.TEXTURE_2D_ARRAY?l.texImage3D(hn,0,lt,ge.width,ge.height,ge.depth,0,we,ve,null):l.texImage2D(hn,0,lt,ge.width,ge.height,0,we,ve,null)),l.bindFramebuffer(S.FRAMEBUFFER,Ae),Bt(ge)?M.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,Ot,hn,m.get(dt).__webglTexture,0,wt(ge)):(hn===S.TEXTURE_2D||hn>=S.TEXTURE_CUBE_MAP_POSITIVE_X&&hn<=S.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&S.framebufferTexture2D(S.FRAMEBUFFER,Ot,hn,m.get(dt).__webglTexture,0),l.bindFramebuffer(S.FRAMEBUFFER,null)}function an(Ae,ge,dt){if(S.bindRenderbuffer(S.RENDERBUFFER,Ae),ge.depthBuffer&&!ge.stencilBuffer){let Ot=S.DEPTH_COMPONENT16;if(dt||Bt(ge)){const hn=ge.depthTexture;hn&&hn.isDepthTexture&&(hn.type===Ta?Ot=S.DEPTH_COMPONENT32F:hn.type===uu&&(Ot=S.DEPTH_COMPONENT24));const we=wt(ge);Bt(ge)?M.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,we,Ot,ge.width,ge.height):S.renderbufferStorageMultisample(S.RENDERBUFFER,we,Ot,ge.width,ge.height)}else S.renderbufferStorage(S.RENDERBUFFER,Ot,ge.width,ge.height);S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.RENDERBUFFER,Ae)}else if(ge.depthBuffer&&ge.stencilBuffer){const Ot=wt(ge);dt&&!1===Bt(ge)?S.renderbufferStorageMultisample(S.RENDERBUFFER,Ot,S.DEPTH24_STENCIL8,ge.width,ge.height):Bt(ge)?M.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,Ot,S.DEPTH24_STENCIL8,ge.width,ge.height):S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,ge.width,ge.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.RENDERBUFFER,Ae)}else{const Ot=!0===ge.isWebGLMultipleRenderTargets?ge.texture:[ge.texture];for(let hn=0;hn<Ot.length;hn++){const we=Ot[hn],ve=p.convert(we.format,we.encoding),lt=p.convert(we.type),nt=J(we.internalFormat,ve,lt,we.encoding),zt=wt(ge);dt&&!1===Bt(ge)?S.renderbufferStorageMultisample(S.RENDERBUFFER,zt,nt,ge.width,ge.height):Bt(ge)?M.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,zt,nt,ge.width,ge.height):S.renderbufferStorage(S.RENDERBUFFER,nt,ge.width,ge.height)}}S.bindRenderbuffer(S.RENDERBUFFER,null)}function Tt(Ae){const ge=m.get(Ae),dt=!0===Ae.isWebGLCubeRenderTarget;if(Ae.depthTexture&&!ge.__autoAllocateDepthBuffer){if(dt)throw new Error("target.depthTexture not supported in Cube render targets");!function je(Ae,ge){if(ge&&ge.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(S.FRAMEBUFFER,Ae),!ge.depthTexture||!ge.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!m.get(ge.depthTexture).__webglTexture||ge.depthTexture.image.width!==ge.width||ge.depthTexture.image.height!==ge.height)&&(ge.depthTexture.image.width=ge.width,ge.depthTexture.image.height=ge.height,ge.depthTexture.needsUpdate=!0),et(ge.depthTexture,0);const Ot=m.get(ge.depthTexture).__webglTexture,hn=wt(ge);if(ge.depthTexture.format===xs)Bt(ge)?M.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,Ot,0,hn):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,Ot,0);else{if(ge.depthTexture.format!==So)throw new Error("Unknown depthTexture format");Bt(ge)?M.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,Ot,0,hn):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,Ot,0)}}(ge.__webglFramebuffer,Ae)}else if(dt){ge.__webglDepthbuffer=[];for(let Ot=0;Ot<6;Ot++)l.bindFramebuffer(S.FRAMEBUFFER,ge.__webglFramebuffer[Ot]),ge.__webglDepthbuffer[Ot]=S.createRenderbuffer(),an(ge.__webglDepthbuffer[Ot],Ae,!1)}else l.bindFramebuffer(S.FRAMEBUFFER,ge.__webglFramebuffer),ge.__webglDepthbuffer=S.createRenderbuffer(),an(ge.__webglDepthbuffer,Ae,!1);l.bindFramebuffer(S.FRAMEBUFFER,null)}function wt(Ae){return Math.min(x,Ae.samples)}function Bt(Ae){const ge=m.get(Ae);return o&&Ae.samples>0&&!0===s.has("WEBGL_multisampled_render_to_texture")&&!1!==ge.__useRenderToTexture}function cn(Ae,ge){const dt=Ae.encoding,Ot=Ae.format,hn=Ae.type;return!0===Ae.isCompressedTexture||!0===Ae.isVideoTexture||Ae.format===ss||dt!==Qc&&(dt===Wi?!1===o?!0===s.has("EXT_sRGB")&&Ot===Aa?(Ae.format=ss,Ae.minFilter=mo,Ae.generateMipmaps=!1):ge=_o.sRGBToLinear(ge):(Ot!==Aa||hn!==qu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",dt)),ge}this.allocateTextureUnit=function Ne(){const Ae=Ye;return Ae>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Ae+" texture units while this GPU supports only "+u),Ye+=1,Ae},this.resetTextureUnits=function Qe(){Ye=0},this.setTexture2D=et,this.setTexture2DArray=function Pt(Ae,ge){const dt=m.get(Ae);Ae.version>0&&dt.__version!==Ae.version?St(dt,Ae,ge):l.bindTexture(S.TEXTURE_2D_ARRAY,dt.__webglTexture,S.TEXTURE0+ge)},this.setTexture3D=function Dt(Ae,ge){const dt=m.get(Ae);Ae.version>0&&dt.__version!==Ae.version?St(dt,Ae,ge):l.bindTexture(S.TEXTURE_3D,dt.__webglTexture,S.TEXTURE0+ge)},this.setTextureCube=function Ze(Ae,ge){const dt=m.get(Ae);Ae.version>0&&dt.__version!==Ae.version?function Ft(Ae,ge,dt){if(6!==ge.image.length)return;const Ot=Ve(Ae,ge),hn=ge.source;l.bindTexture(S.TEXTURE_CUBE_MAP,Ae.__webglTexture,S.TEXTURE0+dt);const we=m.get(hn);if(hn.version!==we.__version||!0===Ot){l.activeTexture(S.TEXTURE0+dt),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,ge.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,ge.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const ve=ge.isCompressedTexture||ge.image[0].isCompressedTexture,lt=ge.image[0]&&ge.image[0].isDataTexture,nt=[];for(let _t=0;_t<6;_t++)nt[_t]=ve||lt?lt?ge.image[_t].image:ge.image[_t]:B(ge.image[_t],!1,!0,f),nt[_t]=cn(ge,nt[_t]);const zt=nt[0],sn=j(zt)||o,Xe=p.convert(ge.format,ge.encoding),vt=p.convert(ge.type),pt=J(ge.internalFormat,Xe,vt,ge.encoding),yn=o&&!0!==ge.isVideoTexture,In=void 0===we.__version||!0===Ot;let qe,Wn=Y(ge,zt,sn);if(tn(S.TEXTURE_CUBE_MAP,ge,sn),ve){yn&&In&&l.texStorage2D(S.TEXTURE_CUBE_MAP,Wn,pt,zt.width,zt.height);for(let _t=0;_t<6;_t++){qe=nt[_t].mipmaps;for(let Yt=0;Yt<qe.length;Yt++){const wn=qe[Yt];ge.format!==Aa?null!==Xe?yn?l.compressedTexSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt,0,0,wn.width,wn.height,Xe,wn.data):l.compressedTexImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt,pt,wn.width,wn.height,0,wn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):yn?l.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt,0,0,wn.width,wn.height,Xe,vt,wn.data):l.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt,pt,wn.width,wn.height,0,Xe,vt,wn.data)}}}else{qe=ge.mipmaps,yn&&In&&(qe.length>0&&Wn++,l.texStorage2D(S.TEXTURE_CUBE_MAP,Wn,pt,nt[0].width,nt[0].height));for(let _t=0;_t<6;_t++)if(lt){yn?l.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,0,0,nt[_t].width,nt[_t].height,Xe,vt,nt[_t].data):l.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,pt,nt[_t].width,nt[_t].height,0,Xe,vt,nt[_t].data);for(let Yt=0;Yt<qe.length;Yt++){const jn=qe[Yt].image[_t].image;yn?l.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt+1,0,0,jn.width,jn.height,Xe,vt,jn.data):l.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt+1,pt,jn.width,jn.height,0,Xe,vt,jn.data)}}else{yn?l.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,0,0,Xe,vt,nt[_t]):l.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,pt,Xe,vt,nt[_t]);for(let Yt=0;Yt<qe.length;Yt++){const wn=qe[Yt];yn?l.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt+1,0,0,Xe,vt,wn.image[_t]):l.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+_t,Yt+1,pt,Xe,vt,wn.image[_t])}}}G(ge,sn)&&Q(S.TEXTURE_CUBE_MAP),we.__version=hn.version,ge.onUpdate&&ge.onUpdate(ge)}Ae.__version=ge.version}(dt,Ae,ge):l.bindTexture(S.TEXTURE_CUBE_MAP,dt.__webglTexture,S.TEXTURE0+ge)},this.rebindTextures=function Ut(Ae,ge,dt){const Ot=m.get(Ae);void 0!==ge&&Et(Ot.__webglFramebuffer,Ae,Ae.texture,S.COLOR_ATTACHMENT0,S.TEXTURE_2D),void 0!==dt&&Tt(Ae)},this.setupRenderTarget=function Nt(Ae){const ge=Ae.texture,dt=m.get(Ae),Ot=m.get(ge);Ae.addEventListener("dispose",xe),!0!==Ae.isWebGLMultipleRenderTargets&&(void 0===Ot.__webglTexture&&(Ot.__webglTexture=S.createTexture()),Ot.__version=ge.version,i.memory.textures++);const hn=!0===Ae.isWebGLCubeRenderTarget,we=!0===Ae.isWebGLMultipleRenderTargets,ve=j(Ae)||o;if(hn){dt.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)dt.__webglFramebuffer[lt]=S.createFramebuffer()}else{if(dt.__webglFramebuffer=S.createFramebuffer(),we)if(b.drawBuffers){const lt=Ae.texture;for(let nt=0,zt=lt.length;nt<zt;nt++){const sn=m.get(lt[nt]);void 0===sn.__webglTexture&&(sn.__webglTexture=S.createTexture(),i.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&Ae.samples>0&&!1===Bt(Ae)){const lt=we?ge:[ge];dt.__webglMultisampledFramebuffer=S.createFramebuffer(),dt.__webglColorRenderbuffer=[],l.bindFramebuffer(S.FRAMEBUFFER,dt.__webglMultisampledFramebuffer);for(let nt=0;nt<lt.length;nt++){const zt=lt[nt];dt.__webglColorRenderbuffer[nt]=S.createRenderbuffer(),S.bindRenderbuffer(S.RENDERBUFFER,dt.__webglColorRenderbuffer[nt]);const sn=p.convert(zt.format,zt.encoding),Xe=p.convert(zt.type),vt=J(zt.internalFormat,sn,Xe,zt.encoding,!0===Ae.isXRRenderTarget),pt=wt(Ae);S.renderbufferStorageMultisample(S.RENDERBUFFER,pt,vt,Ae.width,Ae.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+nt,S.RENDERBUFFER,dt.__webglColorRenderbuffer[nt])}S.bindRenderbuffer(S.RENDERBUFFER,null),Ae.depthBuffer&&(dt.__webglDepthRenderbuffer=S.createRenderbuffer(),an(dt.__webglDepthRenderbuffer,Ae,!0)),l.bindFramebuffer(S.FRAMEBUFFER,null)}}if(hn){l.bindTexture(S.TEXTURE_CUBE_MAP,Ot.__webglTexture),tn(S.TEXTURE_CUBE_MAP,ge,ve);for(let lt=0;lt<6;lt++)Et(dt.__webglFramebuffer[lt],Ae,ge,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+lt);G(ge,ve)&&Q(S.TEXTURE_CUBE_MAP),l.unbindTexture()}else if(we){const lt=Ae.texture;for(let nt=0,zt=lt.length;nt<zt;nt++){const sn=lt[nt],Xe=m.get(sn);l.bindTexture(S.TEXTURE_2D,Xe.__webglTexture),tn(S.TEXTURE_2D,sn,ve),Et(dt.__webglFramebuffer,Ae,sn,S.COLOR_ATTACHMENT0+nt,S.TEXTURE_2D),G(sn,ve)&&Q(S.TEXTURE_2D)}l.unbindTexture()}else{let lt=S.TEXTURE_2D;(Ae.isWebGL3DRenderTarget||Ae.isWebGLArrayRenderTarget)&&(o?lt=Ae.isWebGL3DRenderTarget?S.TEXTURE_3D:S.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),l.bindTexture(lt,Ot.__webglTexture),tn(lt,ge,ve),Et(dt.__webglFramebuffer,Ae,ge,S.COLOR_ATTACHMENT0,lt),G(ge,ve)&&Q(lt),l.unbindTexture()}Ae.depthBuffer&&Tt(Ae)},this.updateRenderTargetMipmap=function en(Ae){const ge=j(Ae)||o,dt=!0===Ae.isWebGLMultipleRenderTargets?Ae.texture:[Ae.texture];for(let Ot=0,hn=dt.length;Ot<hn;Ot++){const we=dt[Ot];if(G(we,ge)){const ve=Ae.isWebGLCubeRenderTarget?S.TEXTURE_CUBE_MAP:S.TEXTURE_2D,lt=m.get(we).__webglTexture;l.bindTexture(ve,lt),Q(ve),l.unbindTexture()}}},this.updateMultisampleRenderTarget=function tt(Ae){if(o&&Ae.samples>0&&!1===Bt(Ae)){const ge=Ae.isWebGLMultipleRenderTargets?Ae.texture:[Ae.texture],dt=Ae.width,Ot=Ae.height;let hn=S.COLOR_BUFFER_BIT;const we=[],ve=Ae.stencilBuffer?S.DEPTH_STENCIL_ATTACHMENT:S.DEPTH_ATTACHMENT,lt=m.get(Ae),nt=!0===Ae.isWebGLMultipleRenderTargets;if(nt)for(let zt=0;zt<ge.length;zt++)l.bindFramebuffer(S.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+zt,S.RENDERBUFFER,null),l.bindFramebuffer(S.FRAMEBUFFER,lt.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+zt,S.TEXTURE_2D,null,0);l.bindFramebuffer(S.READ_FRAMEBUFFER,lt.__webglMultisampledFramebuffer),l.bindFramebuffer(S.DRAW_FRAMEBUFFER,lt.__webglFramebuffer);for(let zt=0;zt<ge.length;zt++){we.push(S.COLOR_ATTACHMENT0+zt),Ae.depthBuffer&&we.push(ve);const sn=void 0!==lt.__ignoreDepthValues&&lt.__ignoreDepthValues;if(!1===sn&&(Ae.depthBuffer&&(hn|=S.DEPTH_BUFFER_BIT),Ae.stencilBuffer&&(hn|=S.STENCIL_BUFFER_BIT)),nt&&S.framebufferRenderbuffer(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.RENDERBUFFER,lt.__webglColorRenderbuffer[zt]),!0===sn&&(S.invalidateFramebuffer(S.READ_FRAMEBUFFER,[ve]),S.invalidateFramebuffer(S.DRAW_FRAMEBUFFER,[ve])),nt){const Xe=m.get(ge[zt]).__webglTexture;S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,Xe,0)}S.blitFramebuffer(0,0,dt,Ot,0,0,dt,Ot,hn,S.NEAREST),E&&S.invalidateFramebuffer(S.READ_FRAMEBUFFER,we)}if(l.bindFramebuffer(S.READ_FRAMEBUFFER,null),l.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),nt)for(let zt=0;zt<ge.length;zt++){l.bindFramebuffer(S.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+zt,S.RENDERBUFFER,lt.__webglColorRenderbuffer[zt]);const sn=m.get(ge[zt]).__webglTexture;l.bindFramebuffer(S.FRAMEBUFFER,lt.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+zt,S.TEXTURE_2D,sn,0)}l.bindFramebuffer(S.DRAW_FRAMEBUFFER,lt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=Et,this.useMultisampledRTT=Bt}function zm(S,s,l){const m=l.isWebGL2;return{convert:function b(p,i=null){let o;if(p===qu)return S.UNSIGNED_BYTE;if(p===Uf)return S.UNSIGNED_SHORT_4_4_4_4;if(p===Tv)return S.UNSIGNED_SHORT_5_5_5_1;if(p===Al)return S.BYTE;if(p===Ev)return S.SHORT;if(p===Nf)return S.UNSIGNED_SHORT;if(p===Cv)return S.INT;if(p===uu)return S.UNSIGNED_INT;if(p===Ta)return S.FLOAT;if(p===Sc)return m?S.HALF_FLOAT:(o=s.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(p===Bh)return S.ALPHA;if(p===Aa)return S.RGBA;if(p===Ec)return S.LUMINANCE;if(p===Av)return S.LUMINANCE_ALPHA;if(p===xs)return S.DEPTH_COMPONENT;if(p===So)return S.DEPTH_STENCIL;if(p===ss)return o=s.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(p===Vf)return S.RED;if(p===pb)return S.RED_INTEGER;if(p===Dv)return S.RG;if(p===Rv)return S.RG_INTEGER;if(p===mb)return S.RGBA_INTEGER;if(p===N_||p===ec||p===hm||p===ns)if(i===Wi){if(o=s.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(p===N_)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===ec)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===hm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===ns)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=s.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(p===N_)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===ec)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===hm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===ns)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===Xu||p===ua||p===Iv||p===U_){if(o=s.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(p===Xu)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===ua)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===Iv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===U_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===B_)return o=s.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===Tg||p===zf){if(o=s.get("WEBGL_compressed_texture_etc"),null===o)return null;if(p===Tg)return i===Wi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(p===zf)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(p===Vh||p===V_||p===fm||p===Ag||p===z_||p===Dg||p===Rg||p===H_||p===Ig||p===G_||p===Hf||p===Ms||p===tc||p===Vd){if(o=s.get("WEBGL_compressed_texture_astc"),null===o)return null;if(p===Vh)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===V_)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===fm)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===Ag)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===z_)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===Dg)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===Rg)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===H_)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===Ig)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===G_)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===Hf)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===Ms)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===tc)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===Vd)return i===Wi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===zh){if(o=s.get("EXT_texture_compression_bptc"),null===o)return null;if(p===zh)return i===Wi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(p===Yr||p===Pg||p===is||p===pm){if(o=s.get("EXT_texture_compression_rgtc"),null===o)return null;if(p===zh)return o.COMPRESSED_RED_RGTC1_EXT;if(p===Pg)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(p===is)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(p===pm)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return p===Bf?m?S.UNSIGNED_INT_24_8:(o=s.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==S[p]?S[p]:null}}}class D0 extends ao{constructor(s=[]){super(),this.isArrayCamera=!0,this.cameras=s}}class rh extends os{constructor(){super(),this.isGroup=!0,this.type="Group"}}const vp={type:"move"};class R0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Pe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Pe),this._grip}dispatchEvent(s){return null!==this._targetRay&&this._targetRay.dispatchEvent(s),null!==this._grip&&this._grip.dispatchEvent(s),null!==this._hand&&this._hand.dispatchEvent(s),this}connect(s){if(s&&s.hand){const l=this._hand;if(l)for(const m of s.hand.values())this._getHandJoint(l,m)}return this.dispatchEvent({type:"connected",data:s}),this}disconnect(s){return this.dispatchEvent({type:"disconnected",data:s}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(s,l,m){let b=null,p=null,i=null;const o=this._targetRay,u=this._grip,f=this._hand;if(s&&"visible-blurred"!==l.session.visibilityState){if(f&&s.hand){i=!0;for(const k of s.hand.values()){const O=l.getJointPose(k,m),I=this._getHandJoint(f,k);null!==O&&(I.matrix.fromArray(O.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.jointRadius=O.radius),I.visible=null!==O}const M=f.joints["index-finger-tip"].position.distanceTo(f.joints["thumb-tip"].position),E=.02,D=.005;f.inputState.pinching&&M>E+D?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:s.handedness,target:this})):!f.inputState.pinching&&M<=E-D&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:s.handedness,target:this}))}else null!==u&&s.gripSpace&&(p=l.getPose(s.gripSpace,m),null!==p&&(u.matrix.fromArray(p.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),p.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(p.linearVelocity)):u.hasLinearVelocity=!1,p.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(p.angularVelocity)):u.hasAngularVelocity=!1));null!==o&&(b=l.getPose(s.targetRaySpace,m),null===b&&null!==p&&(b=p),null!==b&&(o.matrix.fromArray(b.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),b.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(b.linearVelocity)):o.hasLinearVelocity=!1,b.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(b.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(vp)))}return null!==o&&(o.visible=null!==b),null!==u&&(u.visible=null!==p),null!==f&&(f.visible=null!==i),this}_getHandJoint(s,l){if(void 0===s.joints[l.jointName]){const m=new rh;m.matrixAutoUpdate=!1,m.visible=!1,s.joints[l.jointName]=m,s.add(m)}return s.joints[l.jointName]}}class Hm extends rc{constructor(s,l,m,b,p,i,o,u,f,_){if((_=void 0!==_?_:xs)!==xs&&_!==So)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===m&&_===xs&&(m=uu),void 0===m&&_===So&&(m=Bf),super(null,b,p,i,o,u,_,m,f),this.isDepthTexture=!0,this.image={width:s,height:l},this.magFilter=void 0!==o?o:gr,this.minFilter=void 0!==u?u:gr,this.flipY=!1,this.generateMipmaps=!1}}class dy extends Zu{constructor(s,l){super();const m=this;let b=null,p=1,i=null,o="local-floor",u=1,f=null,_=null,x=null,M=null,E=null,D=null;const k=l.getContextAttributes();let O=null,I=null;const U=[],B=[],j=new Set,$=new Map,G=new ao;G.layers.enable(1),G.viewport=new tr;const Q=new ao;Q.layers.enable(2),Q.viewport=new tr;const J=[G,Q],Y=new D0;Y.layers.enable(1),Y.layers.enable(2);let ee=null,he=null;function xe(Ze){const at=B.indexOf(Ze.inputSource);if(-1===at)return;const bt=U[at];void 0!==bt&&bt.dispatchEvent({type:Ze.type,data:Ze.inputSource})}function fe(){b.removeEventListener("select",xe),b.removeEventListener("selectstart",xe),b.removeEventListener("selectend",xe),b.removeEventListener("squeeze",xe),b.removeEventListener("squeezestart",xe),b.removeEventListener("squeezeend",xe),b.removeEventListener("end",fe),b.removeEventListener("inputsourceschange",ce);for(let Ze=0;Ze<U.length;Ze++){const at=B[Ze];null!==at&&(B[Ze]=null,U[Ze].disconnect(at))}ee=null,he=null,s.setRenderTarget(O),E=null,M=null,x=null,b=null,I=null,Dt.stop(),m.isPresenting=!1,m.dispatchEvent({type:"sessionend"})}function ce(Ze){for(let at=0;at<Ze.removed.length;at++){const bt=Ze.removed[at],tn=B.indexOf(bt);tn>=0&&(B[tn]=null,U[tn].disconnect(bt))}for(let at=0;at<Ze.added.length;at++){const bt=Ze.added[at];let tn=B.indexOf(bt);if(-1===tn){for(let St=0;St<U.length;St++){if(St>=B.length){B.push(bt),tn=St;break}if(null===B[St]){B[St]=bt,tn=St;break}}if(-1===tn)break}const Ve=U[tn];Ve&&Ve.connect(bt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ze){let at=U[Ze];return void 0===at&&(at=new R0,U[Ze]=at),at.getTargetRaySpace()},this.getControllerGrip=function(Ze){let at=U[Ze];return void 0===at&&(at=new R0,U[Ze]=at),at.getGripSpace()},this.getHand=function(Ze){let at=U[Ze];return void 0===at&&(at=new R0,U[Ze]=at),at.getHandSpace()},this.setFramebufferScaleFactor=function(Ze){p=Ze,!0===m.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ze){o=Ze,!0===m.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||i},this.setReferenceSpace=function(Ze){f=Ze},this.getBaseLayer=function(){return null!==M?M:E},this.getBinding=function(){return x},this.getFrame=function(){return D},this.getSession=function(){return b},this.setSession=function(){var Ze=rn(function*(at){if(b=at,null!==b){if(O=s.getRenderTarget(),b.addEventListener("select",xe),b.addEventListener("selectstart",xe),b.addEventListener("selectend",xe),b.addEventListener("squeeze",xe),b.addEventListener("squeezestart",xe),b.addEventListener("squeezeend",xe),b.addEventListener("end",fe),b.addEventListener("inputsourceschange",ce),!0!==k.xrCompatible&&(yield l.makeXRCompatible()),void 0===b.renderState.layers||!1===s.capabilities.isWebGL2)E=new XRWebGLLayer(b,l,{antialias:void 0!==b.renderState.layers||k.antialias,alpha:k.alpha,depth:k.depth,stencil:k.stencil,framebufferScaleFactor:p}),b.updateRenderState({baseLayer:E}),I=new Vi(E.framebufferWidth,E.framebufferHeight,{format:Aa,type:qu,encoding:s.outputEncoding,stencilBuffer:k.stencil});else{let bt=null,tn=null,Ve=null;k.depth&&(Ve=k.stencil?l.DEPTH24_STENCIL8:l.DEPTH_COMPONENT24,bt=k.stencil?So:xs,tn=k.stencil?Bf:uu);const St={colorFormat:l.RGBA8,depthFormat:Ve,scaleFactor:p};x=new XRWebGLBinding(b,l),M=x.createProjectionLayer(St),b.updateRenderState({layers:[M]}),I=new Vi(M.textureWidth,M.textureHeight,{format:Aa,type:qu,depthTexture:new Hm(M.textureWidth,M.textureHeight,tn,void 0,void 0,void 0,void 0,void 0,void 0,bt),stencilBuffer:k.stencil,encoding:s.outputEncoding,samples:k.antialias?4:0}),s.properties.get(I).__ignoreDepthValues=M.ignoreDepthValues}I.isXRRenderTarget=!0,this.setFoveation(u),f=null,i=yield b.requestReferenceSpace(o),Dt.setContext(b),Dt.start(),m.isPresenting=!0,m.dispatchEvent({type:"sessionstart"})}});return function(at){return Ze.apply(this,arguments)}}();const de=new Pe,Ye=new Pe;function Ne(Ze,at){null===at?Ze.matrixWorld.copy(Ze.matrix):Ze.matrixWorld.multiplyMatrices(at.matrixWorld,Ze.matrix),Ze.matrixWorldInverse.copy(Ze.matrixWorld).invert()}this.updateCamera=function(Ze){if(null===b)return;Y.near=Q.near=G.near=Ze.near,Y.far=Q.far=G.far=Ze.far,(ee!==Y.near||he!==Y.far)&&(b.updateRenderState({depthNear:Y.near,depthFar:Y.far}),ee=Y.near,he=Y.far);const at=Ze.parent,bt=Y.cameras;Ne(Y,at);for(let tn=0;tn<bt.length;tn++)Ne(bt[tn],at);2===bt.length?function Qe(Ze,at,bt){de.setFromMatrixPosition(at.matrixWorld),Ye.setFromMatrixPosition(bt.matrixWorld);const tn=de.distanceTo(Ye),Ve=at.projectionMatrix.elements,St=bt.projectionMatrix.elements,Ft=Ve[14]/(Ve[10]-1),Et=Ve[14]/(Ve[10]+1),an=(Ve[9]+1)/Ve[5],je=(Ve[9]-1)/Ve[5],Tt=(Ve[8]-1)/Ve[0],Ut=(St[8]+1)/St[0],Nt=Ft*Tt,en=Ft*Ut,tt=tn/(-Tt+Ut),wt=tt*-Tt;at.matrixWorld.decompose(Ze.position,Ze.quaternion,Ze.scale),Ze.translateX(wt),Ze.translateZ(tt),Ze.matrixWorld.compose(Ze.position,Ze.quaternion,Ze.scale),Ze.matrixWorldInverse.copy(Ze.matrixWorld).invert();const Bt=Ft+tt,En=Et+tt;Ze.projectionMatrix.makePerspective(Nt-wt,en+(tn-wt),an*Et/En*Bt,je*Et/En*Bt,Bt,En),Ze.projectionMatrixInverse.copy(Ze.projectionMatrix).invert()}(Y,G,Q):Y.projectionMatrix.copy(G.projectionMatrix),function $e(Ze,at,bt){null===bt?Ze.matrix.copy(at.matrixWorld):(Ze.matrix.copy(bt.matrixWorld),Ze.matrix.invert(),Ze.matrix.multiply(at.matrixWorld)),Ze.matrix.decompose(Ze.position,Ze.quaternion,Ze.scale),Ze.updateMatrixWorld(!0);const tn=Ze.children;for(let Ve=0,St=tn.length;Ve<St;Ve++)tn[Ve].updateMatrixWorld(!0);Ze.projectionMatrix.copy(at.projectionMatrix),Ze.projectionMatrixInverse.copy(at.projectionMatrixInverse),Ze.isPerspectiveCamera&&(Ze.fov=2*Cc*Math.atan(1/Ze.projectionMatrix.elements[5]),Ze.zoom=1)}(Ze,Y,at)},this.getCamera=function(){return Y},this.getFoveation=function(){if(null!==M||null!==E)return u},this.setFoveation=function(Ze){u=Ze,null!==M&&(M.fixedFoveation=Ze),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=Ze)},this.getPlanes=function(){return j};let et=null;const Dt=new K_;Dt.setAnimationLoop(function Pt(Ze,at){if(_=at.getViewerPose(f||i),D=at,null!==_){const bt=_.views;null!==E&&(s.setRenderTargetFramebuffer(I,E.framebuffer),s.setRenderTarget(I));let tn=!1;bt.length!==Y.cameras.length&&(Y.cameras.length=0,tn=!0);for(let Ve=0;Ve<bt.length;Ve++){const St=bt[Ve];let Ft=null;if(null!==E)Ft=E.getViewport(St);else{const an=x.getViewSubImage(M,St);Ft=an.viewport,0===Ve&&(s.setRenderTargetTextures(I,an.colorTexture,M.ignoreDepthValues?void 0:an.depthStencilTexture),s.setRenderTarget(I))}let Et=J[Ve];void 0===Et&&(Et=new ao,Et.layers.enable(Ve),Et.viewport=new tr,J[Ve]=Et),Et.matrix.fromArray(St.transform.matrix),Et.matrix.decompose(Et.position,Et.quaternion,Et.scale),Et.projectionMatrix.fromArray(St.projectionMatrix),Et.projectionMatrixInverse.copy(Et.projectionMatrix).invert(),Et.viewport.set(Ft.x,Ft.y,Ft.width,Ft.height),0===Ve&&(Y.matrix.copy(Et.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale)),!0===tn&&Y.cameras.push(Et)}}for(let bt=0;bt<U.length;bt++){const tn=B[bt],Ve=U[bt];null!==tn&&void 0!==Ve&&Ve.update(tn,at,f||i)}if(et&&et(Ze,at),at.detectedPlanes){m.dispatchEvent({type:"planesdetected",data:at.detectedPlanes});let bt=null;for(const tn of j)at.detectedPlanes.has(tn)||(null===bt&&(bt=[]),bt.push(tn));if(null!==bt)for(const tn of bt)j.delete(tn),$.delete(tn),m.dispatchEvent({type:"planeremoved",data:tn});for(const tn of at.detectedPlanes)if(j.has(tn)){const Ve=$.get(tn);tn.lastChangedTime>Ve&&($.set(tn,tn.lastChangedTime),m.dispatchEvent({type:"planechanged",data:tn}))}else j.add(tn),$.set(tn,at.lastChangedTime),m.dispatchEvent({type:"planeadded",data:tn})}D=null}),this.setAnimationLoop=function(Ze){et=Ze},this.dispose=function(){}}}function I0(S,s){function l(O,I){!0===O.matrixAutoUpdate&&O.updateMatrix(),I.value.copy(O.matrix)}function p(O,I){O.opacity.value=I.opacity,I.color&&O.diffuse.value.copy(I.color),I.emissive&&O.emissive.value.copy(I.emissive).multiplyScalar(I.emissiveIntensity),I.map&&(O.map.value=I.map,l(I.map,O.mapTransform)),I.alphaMap&&(O.alphaMap.value=I.alphaMap,l(I.alphaMap,O.alphaMapTransform)),I.bumpMap&&(O.bumpMap.value=I.bumpMap,l(I.bumpMap,O.bumpMapTransform),O.bumpScale.value=I.bumpScale,I.side===Mt&&(O.bumpScale.value*=-1)),I.normalMap&&(O.normalMap.value=I.normalMap,l(I.normalMap,O.normalMapTransform),O.normalScale.value.copy(I.normalScale),I.side===Mt&&O.normalScale.value.negate()),I.displacementMap&&(O.displacementMap.value=I.displacementMap,l(I.displacementMap,O.displacementMapTransform),O.displacementScale.value=I.displacementScale,O.displacementBias.value=I.displacementBias),I.emissiveMap&&(O.emissiveMap.value=I.emissiveMap,l(I.emissiveMap,O.emissiveMapTransform)),I.specularMap&&(O.specularMap.value=I.specularMap,l(I.specularMap,O.specularMapTransform)),I.alphaTest>0&&(O.alphaTest.value=I.alphaTest);const U=s.get(I).envMap;if(U&&(O.envMap.value=U,O.flipEnvMap.value=U.isCubeTexture&&!1===U.isRenderTargetTexture?-1:1,O.reflectivity.value=I.reflectivity,O.ior.value=I.ior,O.refractionRatio.value=I.refractionRatio),I.lightMap){O.lightMap.value=I.lightMap;const B=!0===S.useLegacyLights?Math.PI:1;O.lightMapIntensity.value=I.lightMapIntensity*B,l(I.lightMap,O.lightMapTransform)}I.aoMap&&(O.aoMap.value=I.aoMap,O.aoMapIntensity.value=I.aoMapIntensity,l(I.aoMap,O.aoMapTransform))}return{refreshFogUniforms:function m(O,I){I.color.getRGB(O.fogColor.value,Kf(S)),I.isFog?(O.fogNear.value=I.near,O.fogFar.value=I.far):I.isFogExp2&&(O.fogDensity.value=I.density)},refreshMaterialUniforms:function b(O,I,U,B,j){I.isMeshBasicMaterial||I.isMeshLambertMaterial?p(O,I):I.isMeshToonMaterial?(p(O,I),function x(O,I){I.gradientMap&&(O.gradientMap.value=I.gradientMap)}(O,I)):I.isMeshPhongMaterial?(p(O,I),function _(O,I){O.specular.value.copy(I.specular),O.shininess.value=Math.max(I.shininess,1e-4)}(O,I)):I.isMeshStandardMaterial?(p(O,I),function M(O,I){O.metalness.value=I.metalness,I.metalnessMap&&(O.metalnessMap.value=I.metalnessMap,l(I.metalnessMap,O.metalnessMapTransform)),O.roughness.value=I.roughness,I.roughnessMap&&(O.roughnessMap.value=I.roughnessMap,l(I.roughnessMap,O.roughnessMapTransform)),s.get(I).envMap&&(O.envMapIntensity.value=I.envMapIntensity)}(O,I),I.isMeshPhysicalMaterial&&function E(O,I,U){O.ior.value=I.ior,I.sheen>0&&(O.sheenColor.value.copy(I.sheenColor).multiplyScalar(I.sheen),O.sheenRoughness.value=I.sheenRoughness,I.sheenColorMap&&(O.sheenColorMap.value=I.sheenColorMap,l(I.sheenColorMap,O.sheenColorMapTransform)),I.sheenRoughnessMap&&(O.sheenRoughnessMap.value=I.sheenRoughnessMap,l(I.sheenRoughnessMap,O.sheenRoughnessMapTransform))),I.clearcoat>0&&(O.clearcoat.value=I.clearcoat,O.clearcoatRoughness.value=I.clearcoatRoughness,I.clearcoatMap&&(O.clearcoatMap.value=I.clearcoatMap,l(I.clearcoatMap,O.clearcoatMapTransform)),I.clearcoatRoughnessMap&&(O.clearcoatRoughnessMap.value=I.clearcoatRoughnessMap,l(I.clearcoatRoughnessMap,O.clearcoatRoughnessMapTransform)),I.clearcoatNormalMap&&(O.clearcoatNormalMap.value=I.clearcoatNormalMap,l(I.clearcoatNormalMap,O.clearcoatNormalMapTransform),O.clearcoatNormalScale.value.copy(I.clearcoatNormalScale),I.side===Mt&&O.clearcoatNormalScale.value.negate())),I.iridescence>0&&(O.iridescence.value=I.iridescence,O.iridescenceIOR.value=I.iridescenceIOR,O.iridescenceThicknessMinimum.value=I.iridescenceThicknessRange[0],O.iridescenceThicknessMaximum.value=I.iridescenceThicknessRange[1],I.iridescenceMap&&(O.iridescenceMap.value=I.iridescenceMap,l(I.iridescenceMap,O.iridescenceMapTransform)),I.iridescenceThicknessMap&&(O.iridescenceThicknessMap.value=I.iridescenceThicknessMap,l(I.iridescenceThicknessMap,O.iridescenceThicknessMapTransform))),I.transmission>0&&(O.transmission.value=I.transmission,O.transmissionSamplerMap.value=U.texture,O.transmissionSamplerSize.value.set(U.width,U.height),I.transmissionMap&&(O.transmissionMap.value=I.transmissionMap,l(I.transmissionMap,O.transmissionMapTransform)),O.thickness.value=I.thickness,I.thicknessMap&&(O.thicknessMap.value=I.thicknessMap,l(I.thicknessMap,O.thicknessMapTransform)),O.attenuationDistance.value=I.attenuationDistance,O.attenuationColor.value.copy(I.attenuationColor)),O.specularIntensity.value=I.specularIntensity,O.specularColor.value.copy(I.specularColor),I.specularColorMap&&(O.specularColorMap.value=I.specularColorMap,l(I.specularColorMap,O.specularColorMapTransform)),I.specularIntensityMap&&(O.specularIntensityMap.value=I.specularIntensityMap,l(I.specularIntensityMap,O.specularIntensityMapTransform))}(O,I,j)):I.isMeshMatcapMaterial?(p(O,I),function D(O,I){I.matcap&&(O.matcap.value=I.matcap)}(O,I)):I.isMeshDepthMaterial?p(O,I):I.isMeshDistanceMaterial?(p(O,I),function k(O,I){const U=s.get(I).light;O.referencePosition.value.setFromMatrixPosition(U.matrixWorld),O.nearDistance.value=U.shadow.camera.near,O.farDistance.value=U.shadow.camera.far}(O,I)):I.isMeshNormalMaterial?p(O,I):I.isLineBasicMaterial?(function i(O,I){O.diffuse.value.copy(I.color),O.opacity.value=I.opacity,I.map&&(O.map.value=I.map,l(I.map,O.mapTransform))}(O,I),I.isLineDashedMaterial&&function o(O,I){O.dashSize.value=I.dashSize,O.totalSize.value=I.dashSize+I.gapSize,O.scale.value=I.scale}(O,I)):I.isPointsMaterial?function u(O,I,U,B){O.diffuse.value.copy(I.color),O.opacity.value=I.opacity,O.size.value=I.size*U,O.scale.value=.5*B,I.map&&(O.map.value=I.map,l(I.map,O.uvTransform)),I.alphaMap&&(O.alphaMap.value=I.alphaMap),I.alphaTest>0&&(O.alphaTest.value=I.alphaTest)}(O,I,U,B):I.isSpriteMaterial?function f(O,I){O.diffuse.value.copy(I.color),O.opacity.value=I.opacity,O.rotation.value=I.rotation,I.map&&(O.map.value=I.map,l(I.map,O.mapTransform)),I.alphaMap&&(O.alphaMap.value=I.alphaMap),I.alphaTest>0&&(O.alphaTest.value=I.alphaTest)}(O,I):I.isShadowMaterial?(O.color.value.copy(I.color),O.opacity.value=I.opacity):I.isShaderMaterial&&(I.uniformsNeedUpdate=!1)}}}function hw(S,s,l,m){let b={},p={},i=[];const o=l.isWebGL2?S.getParameter(S.MAX_UNIFORM_BUFFER_BINDINGS):0;function E(U,B,j){const $=U.value;if(void 0===j[B]){if("number"==typeof $)j[B]=$;else{const G=Array.isArray($)?$:[$],Q=[];for(let J=0;J<G.length;J++)Q.push(G[J].clone());j[B]=Q}return!0}if("number"==typeof $){if(j[B]!==$)return j[B]=$,!0}else{const G=Array.isArray(j[B])?j[B]:[j[B]],Q=Array.isArray($)?$:[$];for(let J=0;J<G.length;J++){const Y=G[J];if(!1===Y.equals(Q[J]))return Y.copy(Q[J]),!0}}return!1}function k(U){const B={boundary:0,storage:0};return"number"==typeof U?(B.boundary=4,B.storage=4):U.isVector2?(B.boundary=8,B.storage=8):U.isVector3||U.isColor?(B.boundary=16,B.storage=12):U.isVector4?(B.boundary=16,B.storage=16):U.isMatrix3?(B.boundary=48,B.storage=48):U.isMatrix4?(B.boundary=64,B.storage=64):U.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",U),B}function O(U){const B=U.target;B.removeEventListener("dispose",O);const j=i.indexOf(B.__bindingPointIndex);i.splice(j,1),S.deleteBuffer(b[B.id]),delete b[B.id],delete p[B.id]}return{bind:function u(U,B){m.uniformBlockBinding(U,B.program)},update:function f(U,B){let j=b[U.id];void 0===j&&(function D(U){const B=U.uniforms;let j=0;let G=0;for(let Q=0,J=B.length;Q<J;Q++){const Y=B[Q],ee={boundary:0,storage:0},he=Array.isArray(Y.value)?Y.value:[Y.value];for(let xe=0,fe=he.length;xe<fe;xe++){const de=k(he[xe]);ee.boundary+=de.boundary,ee.storage+=de.storage}Y.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=j,Q>0&&(G=j%16,0!==G&&16-G-ee.boundary<0&&(j+=16-G,Y.__offset=j)),j+=ee.storage}G=j%16,G>0&&(j+=16-G),U.__size=j,U.__cache={}}(U),j=function _(U){const B=function x(){for(let U=0;U<o;U++)if(-1===i.indexOf(U))return i.push(U),U;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();U.__bindingPointIndex=B;const j=S.createBuffer(),$=U.__size,G=U.usage;return S.bindBuffer(S.UNIFORM_BUFFER,j),S.bufferData(S.UNIFORM_BUFFER,$,G),S.bindBuffer(S.UNIFORM_BUFFER,null),S.bindBufferBase(S.UNIFORM_BUFFER,B,j),j}(U),b[U.id]=j,U.addEventListener("dispose",O)),m.updateUBOMapping(U,B.program);const G=s.render.frame;p[U.id]!==G&&(function M(U){const j=U.uniforms,$=U.__cache;S.bindBuffer(S.UNIFORM_BUFFER,b[U.id]);for(let G=0,Q=j.length;G<Q;G++){const J=j[G];if(!0===E(J,G,$)){const Y=J.__offset,ee=Array.isArray(J.value)?J.value:[J.value];let he=0;for(let xe=0;xe<ee.length;xe++){const fe=ee[xe],ce=k(fe);"number"==typeof fe?(J.__data[0]=fe,S.bufferSubData(S.UNIFORM_BUFFER,Y+he,J.__data)):fe.isMatrix3?(J.__data[0]=fe.elements[0],J.__data[1]=fe.elements[1],J.__data[2]=fe.elements[2],J.__data[3]=fe.elements[0],J.__data[4]=fe.elements[3],J.__data[5]=fe.elements[4],J.__data[6]=fe.elements[5],J.__data[7]=fe.elements[0],J.__data[8]=fe.elements[6],J.__data[9]=fe.elements[7],J.__data[10]=fe.elements[8],J.__data[11]=fe.elements[0]):(fe.toArray(J.__data,he),he+=ce.storage/Float32Array.BYTES_PER_ELEMENT)}S.bufferSubData(S.UNIFORM_BUFFER,Y,J.__data)}}S.bindBuffer(S.UNIFORM_BUFFER,null)}(U),p[U.id]=G)},dispose:function I(){for(const U in b)S.deleteBuffer(b[U]);i=[],b={},p={}}}}function hy(){const S=Ri("canvas");return S.style.display="block",S}class r_{constructor(s={}){const{canvas:l=hy(),context:m=null,depth:b=!0,stencil:p=!0,alpha:i=!1,antialias:o=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:_="default",failIfMajorPerformanceCaveat:x=!1}=s;let M;this.isWebGLRenderer=!0,M=null!==m?m.getContextAttributes().alpha:i;let E=null,D=null;const k=[],O=[];this.domElement=l,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Qc,this.useLegacyLights=!0,this.toneMapping=cu,this.toneMappingExposure=1;const I=this;let U=!1,B=0,j=0,$=null,G=-1,Q=null;const J=new tr,Y=new tr;let ee=null,he=l.width,xe=l.height,fe=1,ce=null,de=null;const Ye=new tr(0,0,he,xe),Qe=new tr(0,0,he,xe);let Ne=!1;const $e=new ep;let et=!1,Pt=!1,Dt=null;const Ze=new zi,at=new Pe,bt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function tn(){return null===$?fe:1}let Ft,Et,an,je,Tt,Ut,Nt,en,tt,wt,Bt,En,cn,Ae,ge,dt,Ot,hn,we,ve,lt,nt,zt,sn,Ve=m;function St(Fe,Ht){for(let fn=0;fn<Fe.length;fn++){const _n=l.getContext(Fe[fn],Ht);if(null!==_n)return _n}return null}try{const Fe={alpha:!0,depth:b,stencil:p,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:_,failIfMajorPerformanceCaveat:x};if("setAttribute"in l&&l.setAttribute("data-engine",`three.js r${Un}`),l.addEventListener("webglcontextlost",pt,!1),l.addEventListener("webglcontextrestored",yn,!1),l.addEventListener("webglcontextcreationerror",In,!1),null===Ve){const Ht=["webgl2","webgl","experimental-webgl"];if(!0===I.isWebGL1Renderer&&Ht.shift(),Ve=St(Ht,Fe),null===Ve)throw St(Ht)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ve.getShaderPrecisionFormat&&(Ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Fe){throw console.error("THREE.WebGLRenderer: "+Fe.message),Fe}function Xe(){Ft=new p0(Ve),Et=new Om(Ve,Ft,s),Ft.init(Et),nt=new zm(Ve,Ft,Et),an=new tf(Ve,Ft,Et),je=new ex(Ve),Tt=new ef,Ut=new md(Ve,Ft,an,Tt,Et,nt,je),Nt=new pa(I),en=new yu(I),tt=new kM(Ve,Et),zt=new Ua(Ve,Ft,tt,Et),wt=new cp(Ve,tt,je,zt),Bt=new zo(Ve,wt,tt,je),we=new Kr(Ve,Et,Ut),dt=new u0(Tt),En=new _p(I,Nt,en,Ft,Et,zt,dt),cn=new I0(I,Tt),Ae=new Oc,ge=new T0(Ft,Et),hn=new km(I,Nt,en,an,Bt,M,u),Ot=new A0(I,Bt,Et),sn=new hw(Ve,je,Et,an),ve=new Lm(Ve,Ft,je,Et),lt=new Jv(Ve,Ft,je,Et),je.programs=En.programs,I.capabilities=Et,I.extensions=Ft,I.properties=Tt,I.renderLists=Ae,I.shadowMap=Ot,I.state=an,I.info=je}Xe();const vt=new dy(I,Ve);function pt(Fe){Fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function yn(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const Fe=je.autoReset,Ht=Ot.enabled,fn=Ot.autoUpdate,Lt=Ot.needsUpdate,_n=Ot.type;Xe(),je.autoReset=Fe,Ot.enabled=Ht,Ot.autoUpdate=fn,Ot.needsUpdate=Lt,Ot.type=_n}function In(Fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Fe.statusMessage)}function Wn(Fe){const Ht=Fe.target;Ht.removeEventListener("dispose",Wn),function qe(Fe){(function _t(Fe){const Ht=Tt.get(Fe).programs;void 0!==Ht&&(Ht.forEach(function(fn){En.releaseProgram(fn)}),Fe.isShaderMaterial&&En.releaseShaderCache(Fe))})(Fe),Tt.remove(Fe)}(Ht)}this.xr=vt,this.getContext=function(){return Ve},this.getContextAttributes=function(){return Ve.getContextAttributes()},this.forceContextLoss=function(){const Fe=Ft.get("WEBGL_lose_context");Fe&&Fe.loseContext()},this.forceContextRestore=function(){const Fe=Ft.get("WEBGL_lose_context");Fe&&Fe.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(Fe){void 0!==Fe&&(fe=Fe,this.setSize(he,xe,!1))},this.getSize=function(Fe){return Fe.set(he,xe)},this.setSize=function(Fe,Ht,fn=!0){vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(he=Fe,xe=Ht,l.width=Math.floor(Fe*fe),l.height=Math.floor(Ht*fe),!0===fn&&(l.style.width=Fe+"px",l.style.height=Ht+"px"),this.setViewport(0,0,Fe,Ht))},this.getDrawingBufferSize=function(Fe){return Fe.set(he*fe,xe*fe).floor()},this.setDrawingBufferSize=function(Fe,Ht,fn){he=Fe,xe=Ht,fe=fn,l.width=Math.floor(Fe*fn),l.height=Math.floor(Ht*fn),this.setViewport(0,0,Fe,Ht)},this.getCurrentViewport=function(Fe){return Fe.copy(J)},this.getViewport=function(Fe){return Fe.copy(Ye)},this.setViewport=function(Fe,Ht,fn,Lt){Fe.isVector4?Ye.set(Fe.x,Fe.y,Fe.z,Fe.w):Ye.set(Fe,Ht,fn,Lt),an.viewport(J.copy(Ye).multiplyScalar(fe).floor())},this.getScissor=function(Fe){return Fe.copy(Qe)},this.setScissor=function(Fe,Ht,fn,Lt){Fe.isVector4?Qe.set(Fe.x,Fe.y,Fe.z,Fe.w):Qe.set(Fe,Ht,fn,Lt),an.scissor(Y.copy(Qe).multiplyScalar(fe).floor())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(Fe){an.setScissorTest(Ne=Fe)},this.setOpaqueSort=function(Fe){ce=Fe},this.setTransparentSort=function(Fe){de=Fe},this.getClearColor=function(Fe){return Fe.copy(hn.getClearColor())},this.setClearColor=function(){hn.setClearColor.apply(hn,arguments)},this.getClearAlpha=function(){return hn.getClearAlpha()},this.setClearAlpha=function(){hn.setClearAlpha.apply(hn,arguments)},this.clear=function(Fe=!0,Ht=!0,fn=!0){let Lt=0;Fe&&(Lt|=Ve.COLOR_BUFFER_BIT),Ht&&(Lt|=Ve.DEPTH_BUFFER_BIT),fn&&(Lt|=Ve.STENCIL_BUFFER_BIT),Ve.clear(Lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){l.removeEventListener("webglcontextlost",pt,!1),l.removeEventListener("webglcontextrestored",yn,!1),l.removeEventListener("webglcontextcreationerror",In,!1),Ae.dispose(),ge.dispose(),Tt.dispose(),Nt.dispose(),en.dispose(),Bt.dispose(),zt.dispose(),sn.dispose(),En.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",jn),vt.removeEventListener("sessionend",ot),Dt&&(Dt.dispose(),Dt=null),qt.stop()},this.renderBufferDirect=function(Fe,Ht,fn,Lt,_n,Ee){null===Ht&&(Ht=bt);const mt=_n.isMesh&&_n.matrixWorld.determinant()<0,Ct=function ho(Fe,Ht,fn,Lt,_n){!0!==Ht.isScene&&(Ht=bt),Ut.resetTextureUnits();const Ee=Ht.fog,Ct=null===$?I.outputEncoding:!0===$.isXRRenderTarget?$.texture.encoding:Qc,ht=(Lt.isMeshStandardMaterial?en:Nt).get(Lt.envMap||(Lt.isMeshStandardMaterial?Ht.environment:null)),Gt=!0===Lt.vertexColors&&!!fn.attributes.color&&4===fn.attributes.color.itemSize,Fn=!!Lt.normalMap&&!!fn.attributes.tangent,Nn=!!fn.morphAttributes.position,Zn=!!fn.morphAttributes.normal,Mi=!!fn.morphAttributes.color,_i=Lt.toneMapped?I.toneMapping:cu,Gi=fn.morphAttributes.position||fn.morphAttributes.normal||fn.morphAttributes.color,vi=void 0!==Gi?Gi.length:0,li=Tt.get(Lt),Zo=D.state.lights;!0!==et||!0!==Pt&&Fe===Q||dt.setState(Lt,Fe,Fe===Q&&Lt.id===G);let jr=!1;Lt.version===li.__version?(li.needsLights&&li.lightsStateVersion!==Zo.state.version||li.outputEncoding!==Ct||_n.isInstancedMesh&&!1===li.instancing||!_n.isInstancedMesh&&!0===li.instancing||_n.isSkinnedMesh&&!1===li.skinning||!_n.isSkinnedMesh&&!0===li.skinning||li.envMap!==ht||!0===Lt.fog&&li.fog!==Ee||void 0!==li.numClippingPlanes&&(li.numClippingPlanes!==dt.numPlanes||li.numIntersection!==dt.numIntersection)||li.vertexAlphas!==Gt||li.vertexTangents!==Fn||li.morphTargets!==Nn||li.morphNormals!==Zn||li.morphColors!==Mi||li.toneMapping!==_i||!0===Et.isWebGL2&&li.morphTargetsCount!==vi)&&(jr=!0):(jr=!0,li.__version=Lt.version);let $c=li.currentProgram;!0===jr&&($c=ko(Lt,Ht,_n));let Ns=!1,hr=!1,Xp=!1;const Er=$c.getUniforms(),qa=li.uniforms;if(an.useProgram($c.program)&&(Ns=!0,hr=!0,Xp=!0),Lt.id!==G&&(G=Lt.id,hr=!0),Ns||Q!==Fe){if(Er.setValue(Ve,"projectionMatrix",Fe.projectionMatrix),Et.logarithmicDepthBuffer&&Er.setValue(Ve,"logDepthBufFC",2/(Math.log(Fe.far+1)/Math.LN2)),Q!==Fe&&(Q=Fe,hr=!0,Xp=!0),Lt.isShaderMaterial||Lt.isMeshPhongMaterial||Lt.isMeshToonMaterial||Lt.isMeshStandardMaterial||Lt.envMap){const Lo=Er.map.cameraPosition;void 0!==Lo&&Lo.setValue(Ve,at.setFromMatrixPosition(Fe.matrixWorld))}(Lt.isMeshPhongMaterial||Lt.isMeshToonMaterial||Lt.isMeshLambertMaterial||Lt.isMeshBasicMaterial||Lt.isMeshStandardMaterial||Lt.isShaderMaterial)&&Er.setValue(Ve,"isOrthographic",!0===Fe.isOrthographicCamera),(Lt.isMeshPhongMaterial||Lt.isMeshToonMaterial||Lt.isMeshLambertMaterial||Lt.isMeshBasicMaterial||Lt.isMeshStandardMaterial||Lt.isShaderMaterial||Lt.isShadowMaterial||_n.isSkinnedMesh)&&Er.setValue(Ve,"viewMatrix",Fe.matrixWorldInverse)}if(_n.isSkinnedMesh){Er.setOptional(Ve,_n,"bindMatrix"),Er.setOptional(Ve,_n,"bindMatrixInverse");const Lo=_n.skeleton;Lo&&(Et.floatVertexTextures?(null===Lo.boneTexture&&Lo.computeBoneTexture(),Er.setValue(Ve,"boneTexture",Lo.boneTexture,Ut),Er.setValue(Ve,"boneTextureSize",Lo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const J0=fn.morphAttributes;if((void 0!==J0.position||void 0!==J0.normal||void 0!==J0.color&&!0===Et.isWebGL2)&&we.update(_n,fn,$c),(hr||li.receiveShadow!==_n.receiveShadow)&&(li.receiveShadow=_n.receiveShadow,Er.setValue(Ve,"receiveShadow",_n.receiveShadow)),Lt.isMeshGouraudMaterial&&null!==Lt.envMap&&(qa.envMap.value=ht,qa.flipEnvMap.value=ht.isCubeTexture&&!1===ht.isRenderTargetTexture?-1:1),hr&&(Er.setValue(Ve,"toneMappingExposure",I.toneMappingExposure),li.needsLights&&function $a(Fe,Ht){Fe.ambientLightColor.needsUpdate=Ht,Fe.lightProbe.needsUpdate=Ht,Fe.directionalLights.needsUpdate=Ht,Fe.directionalLightShadows.needsUpdate=Ht,Fe.pointLights.needsUpdate=Ht,Fe.pointLightShadows.needsUpdate=Ht,Fe.spotLights.needsUpdate=Ht,Fe.spotLightShadows.needsUpdate=Ht,Fe.rectAreaLights.needsUpdate=Ht,Fe.hemisphereLights.needsUpdate=Ht}(qa,Xp),Ee&&!0===Lt.fog&&cn.refreshFogUniforms(qa,Ee),cn.refreshMaterialUniforms(qa,Lt,fe,xe,Dt),ca.upload(Ve,li.uniformsList,qa,Ut)),Lt.isShaderMaterial&&!0===Lt.uniformsNeedUpdate&&(ca.upload(Ve,li.uniformsList,qa,Ut),Lt.uniformsNeedUpdate=!1),Lt.isSpriteMaterial&&Er.setValue(Ve,"center",_n.center),Er.setValue(Ve,"modelViewMatrix",_n.modelViewMatrix),Er.setValue(Ve,"normalMatrix",_n.normalMatrix),Er.setValue(Ve,"modelMatrix",_n.matrixWorld),Lt.isShaderMaterial||Lt.isRawShaderMaterial){const Lo=Lt.uniformsGroups;for(let S_=0,bo=Lo.length;S_<bo;S_++)if(Et.isWebGL2){const Ef=Lo[S_];sn.update(Ef,$c),sn.bind(Ef,$c)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return $c}(Fe,Ht,fn,Lt,_n);an.setMaterial(Lt,mt);let ht=fn.index,Gt=1;!0===Lt.wireframe&&(ht=wt.getWireframeAttribute(fn),Gt=2);const Fn=fn.drawRange,Nn=fn.attributes.position;let Zn=Fn.start*Gt,Mi=(Fn.start+Fn.count)*Gt;null!==Ee&&(Zn=Math.max(Zn,Ee.start*Gt),Mi=Math.min(Mi,(Ee.start+Ee.count)*Gt)),null!==ht?(Zn=Math.max(Zn,0),Mi=Math.min(Mi,ht.count)):null!=Nn&&(Zn=Math.max(Zn,0),Mi=Math.min(Mi,Nn.count));const _i=Mi-Zn;if(_i<0||_i===1/0)return;zt.setup(_n,Lt,Ct,fn,ht);let Gi,vi=ve;if(null!==ht&&(Gi=tt.get(ht),vi=lt,vi.setIndex(Gi)),_n.isMesh)!0===Lt.wireframe?(an.setLineWidth(Lt.wireframeLinewidth*tn()),vi.setMode(Ve.LINES)):vi.setMode(Ve.TRIANGLES);else if(_n.isLine){let li=Lt.linewidth;void 0===li&&(li=1),an.setLineWidth(li*tn()),vi.setMode(_n.isLineSegments?Ve.LINES:_n.isLineLoop?Ve.LINE_LOOP:Ve.LINE_STRIP)}else _n.isPoints?vi.setMode(Ve.POINTS):_n.isSprite&&vi.setMode(Ve.TRIANGLES);if(_n.isInstancedMesh)vi.renderInstances(Zn,_i,_n.count);else if(fn.isInstancedBufferGeometry){const Zo=Math.min(fn.instanceCount,void 0!==fn._maxInstanceCount?fn._maxInstanceCount:1/0);vi.renderInstances(Zn,_i,Zo)}else vi.render(Zn,_i)},this.compile=function(Fe,Ht){function fn(Lt,_n,Ee){!0===Lt.transparent&&Lt.side===At&&!1===Lt.forceSinglePass?(Lt.side=Mt,Lt.needsUpdate=!0,ko(Lt,_n,Ee),Lt.side=ct,Lt.needsUpdate=!0,ko(Lt,_n,Ee),Lt.side=At):ko(Lt,_n,Ee)}D=ge.get(Fe),D.init(),O.push(D),Fe.traverseVisible(function(Lt){Lt.isLight&&Lt.layers.test(Ht.layers)&&(D.pushLight(Lt),Lt.castShadow&&D.pushShadow(Lt))}),D.setupLights(I.useLegacyLights),Fe.traverse(function(Lt){const _n=Lt.material;if(_n)if(Array.isArray(_n))for(let Ee=0;Ee<_n.length;Ee++)fn(_n[Ee],Fe,Lt);else fn(_n,Fe,Lt)}),O.pop(),D=null};let Yt=null;function jn(){qt.stop()}function ot(){qt.start()}const qt=new K_;function vn(Fe,Ht,fn,Lt){if(!1===Fe.visible)return;if(Fe.layers.test(Ht.layers))if(Fe.isGroup)fn=Fe.renderOrder;else if(Fe.isLOD)!0===Fe.autoUpdate&&Fe.update(Ht);else if(Fe.isLight)D.pushLight(Fe),Fe.castShadow&&D.pushShadow(Fe);else if(Fe.isSprite){if(!Fe.frustumCulled||$e.intersectsSprite(Fe)){Lt&&at.setFromMatrixPosition(Fe.matrixWorld).applyMatrix4(Ze);const mt=Bt.update(Fe),Ct=Fe.material;Ct.visible&&E.push(Fe,mt,Ct,fn,at.z,null)}}else if((Fe.isMesh||Fe.isLine||Fe.isPoints)&&(Fe.isSkinnedMesh&&Fe.skeleton.frame!==je.render.frame&&(Fe.skeleton.update(),Fe.skeleton.frame=je.render.frame),!Fe.frustumCulled||$e.intersectsObject(Fe))){Lt&&at.setFromMatrixPosition(Fe.matrixWorld).applyMatrix4(Ze);const mt=Bt.update(Fe),Ct=Fe.material;if(Array.isArray(Ct)){const ht=mt.groups;for(let Gt=0,Fn=ht.length;Gt<Fn;Gt++){const Nn=ht[Gt],Zn=Ct[Nn.materialIndex];Zn&&Zn.visible&&E.push(Fe,mt,Zn,fn,at.z,Nn)}}else Ct.visible&&E.push(Fe,mt,Ct,fn,at.z,null)}const Ee=Fe.children;for(let mt=0,Ct=Ee.length;mt<Ct;mt++)vn(Ee[mt],Ht,fn,Lt)}function Hn(Fe,Ht,fn,Lt){const _n=Fe.opaque,Ee=Fe.transmissive,mt=Fe.transparent;D.setupLightsView(fn),!0===et&&dt.setGlobalState(I.clippingPlanes,fn),Ee.length>0&&function qn(Fe,Ht,fn,Lt){if(null===Dt){const Ct=Et.isWebGL2;Dt=new Vi(1024,1024,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")?Sc:qu,minFilter:$u,samples:Ct&&!0===o?4:0})}const _n=I.getRenderTarget();I.setRenderTarget(Dt),I.clear();const Ee=I.toneMapping;I.toneMapping=cu,br(Fe,fn,Lt),Ut.updateMultisampleRenderTarget(Dt),Ut.updateRenderTargetMipmap(Dt);let mt=!1;for(let Ct=0,ht=Ht.length;Ct<ht;Ct++){const Gt=Ht[Ct],Fn=Gt.object,Nn=Gt.geometry,Zn=Gt.material,Mi=Gt.group;if(Zn.side===At&&Fn.layers.test(Lt.layers)){const _i=Zn.side;Zn.side=Mt,Zn.needsUpdate=!0,Nr(Fn,fn,Lt,Nn,Zn,Mi),Zn.side=_i,Zn.needsUpdate=!0,mt=!0}}!0===mt&&(Ut.updateMultisampleRenderTarget(Dt),Ut.updateRenderTargetMipmap(Dt)),I.setRenderTarget(_n),I.toneMapping=Ee}(_n,Ee,Ht,fn),Lt&&an.viewport(J.copy(Lt)),_n.length>0&&br(_n,Ht,fn),Ee.length>0&&br(Ee,Ht,fn),mt.length>0&&br(mt,Ht,fn),an.buffers.depth.setTest(!0),an.buffers.depth.setMask(!0),an.buffers.color.setMask(!0),an.setPolygonOffset(!1)}function br(Fe,Ht,fn){const Lt=!0===Ht.isScene?Ht.overrideMaterial:null;for(let _n=0,Ee=Fe.length;_n<Ee;_n++){const mt=Fe[_n],Ct=mt.object,ht=mt.geometry,Gt=null===Lt?mt.material:Lt,Fn=mt.group;Ct.layers.test(fn.layers)&&Nr(Ct,Ht,fn,ht,Gt,Fn)}}function Nr(Fe,Ht,fn,Lt,_n,Ee){Fe.onBeforeRender(I,Ht,fn,Lt,_n,Ee),Fe.modelViewMatrix.multiplyMatrices(fn.matrixWorldInverse,Fe.matrixWorld),Fe.normalMatrix.getNormalMatrix(Fe.modelViewMatrix),_n.onBeforeRender(I,Ht,fn,Lt,Fe,Ee),!0===_n.transparent&&_n.side===At&&!1===_n.forceSinglePass?(_n.side=Mt,_n.needsUpdate=!0,I.renderBufferDirect(fn,Ht,Lt,_n,Fe,Ee),_n.side=ct,_n.needsUpdate=!0,I.renderBufferDirect(fn,Ht,Lt,_n,Fe,Ee),_n.side=At):I.renderBufferDirect(fn,Ht,Lt,_n,Fe,Ee),Fe.onAfterRender(I,Ht,fn,Lt,_n,Ee)}function ko(Fe,Ht,fn){!0!==Ht.isScene&&(Ht=bt);const Lt=Tt.get(Fe),_n=D.state.lights,mt=_n.state.version,Ct=En.getParameters(Fe,_n.state,D.state.shadowsArray,Ht,fn),ht=En.getProgramCacheKey(Ct);let Gt=Lt.programs;Lt.environment=Fe.isMeshStandardMaterial?Ht.environment:null,Lt.fog=Ht.fog,Lt.envMap=(Fe.isMeshStandardMaterial?en:Nt).get(Fe.envMap||Lt.environment),void 0===Gt&&(Fe.addEventListener("dispose",Wn),Gt=new Map,Lt.programs=Gt);let Fn=Gt.get(ht);if(void 0!==Fn){if(Lt.currentProgram===Fn&&Lt.lightsStateVersion===mt)return Id(Fe,Ct),Fn}else Ct.uniforms=En.getUniforms(Fe),Fe.onBuild(fn,Ct,I),Fe.onBeforeCompile(Ct,I),Fn=En.acquireProgram(Ct,ht),Gt.set(ht,Fn),Lt.uniforms=Ct.uniforms;const Nn=Lt.uniforms;(!Fe.isShaderMaterial&&!Fe.isRawShaderMaterial||!0===Fe.clipping)&&(Nn.clippingPlanes=dt.uniform),Id(Fe,Ct),Lt.needsLights=function Sl(Fe){return Fe.isMeshLambertMaterial||Fe.isMeshToonMaterial||Fe.isMeshPhongMaterial||Fe.isMeshStandardMaterial||Fe.isShadowMaterial||Fe.isShaderMaterial&&!0===Fe.lights}(Fe),Lt.lightsStateVersion=mt,Lt.needsLights&&(Nn.ambientLightColor.value=_n.state.ambient,Nn.lightProbe.value=_n.state.probe,Nn.directionalLights.value=_n.state.directional,Nn.directionalLightShadows.value=_n.state.directionalShadow,Nn.spotLights.value=_n.state.spot,Nn.spotLightShadows.value=_n.state.spotShadow,Nn.rectAreaLights.value=_n.state.rectArea,Nn.ltc_1.value=_n.state.rectAreaLTC1,Nn.ltc_2.value=_n.state.rectAreaLTC2,Nn.pointLights.value=_n.state.point,Nn.pointLightShadows.value=_n.state.pointShadow,Nn.hemisphereLights.value=_n.state.hemi,Nn.directionalShadowMap.value=_n.state.directionalShadowMap,Nn.directionalShadowMatrix.value=_n.state.directionalShadowMatrix,Nn.spotShadowMap.value=_n.state.spotShadowMap,Nn.spotLightMatrix.value=_n.state.spotLightMatrix,Nn.spotLightMap.value=_n.state.spotLightMap,Nn.pointShadowMap.value=_n.state.pointShadowMap,Nn.pointShadowMatrix.value=_n.state.pointShadowMatrix);const Zn=Fn.getUniforms(),Mi=ca.seqWithValue(Zn.seq,Nn);return Lt.currentProgram=Fn,Lt.uniformsList=Mi,Fn}function Id(Fe,Ht){const fn=Tt.get(Fe);fn.outputEncoding=Ht.outputEncoding,fn.instancing=Ht.instancing,fn.skinning=Ht.skinning,fn.morphTargets=Ht.morphTargets,fn.morphNormals=Ht.morphNormals,fn.morphColors=Ht.morphColors,fn.morphTargetsCount=Ht.morphTargetsCount,fn.numClippingPlanes=Ht.numClippingPlanes,fn.numIntersection=Ht.numClipIntersection,fn.vertexAlphas=Ht.vertexAlphas,fn.vertexTangents=Ht.vertexTangents,fn.toneMapping=Ht.toneMapping}qt.setAnimationLoop(function wn(Fe){Yt&&Yt(Fe)}),typeof self<"u"&&qt.setContext(self),this.setAnimationLoop=function(Fe){Yt=Fe,vt.setAnimationLoop(Fe),null===Fe?qt.stop():qt.start()},vt.addEventListener("sessionstart",jn),vt.addEventListener("sessionend",ot),this.render=function(Fe,Ht){if(void 0===Ht||!0===Ht.isCamera){if(!0!==U){if(!0===Fe.matrixWorldAutoUpdate&&Fe.updateMatrixWorld(),null===Ht.parent&&!0===Ht.matrixWorldAutoUpdate&&Ht.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(Ht),Ht=vt.getCamera()),!0===Fe.isScene&&Fe.onBeforeRender(I,Fe,Ht,$),D=ge.get(Fe,O.length),D.init(),O.push(D),Ze.multiplyMatrices(Ht.projectionMatrix,Ht.matrixWorldInverse),$e.setFromProjectionMatrix(Ze),Pt=this.localClippingEnabled,et=dt.init(this.clippingPlanes,Pt),E=Ae.get(Fe,k.length),E.init(),k.push(E),vn(Fe,Ht,0,I.sortObjects),E.finish(),!0===I.sortObjects&&E.sort(ce,de),!0===et&&dt.beginShadows(),Ot.render(D.state.shadowsArray,Fe,Ht),!0===et&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),hn.render(E,Fe),D.setupLights(I.useLegacyLights),Ht.isArrayCamera){const Lt=Ht.cameras;for(let _n=0,Ee=Lt.length;_n<Ee;_n++){const mt=Lt[_n];Hn(E,Fe,mt,mt.viewport)}}else Hn(E,Fe,Ht);null!==$&&(Ut.updateMultisampleRenderTarget($),Ut.updateRenderTargetMipmap($)),!0===Fe.isScene&&Fe.onAfterRender(I,Fe,Ht),zt.resetDefaultState(),G=-1,Q=null,O.pop(),D=O.length>0?O[O.length-1]:null,k.pop(),E=k.length>0?k[k.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return j},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(Fe,Ht,fn){Tt.get(Fe.texture).__webglTexture=Ht,Tt.get(Fe.depthTexture).__webglTexture=fn;const Lt=Tt.get(Fe);Lt.__hasExternalTextures=!0,Lt.__hasExternalTextures&&(Lt.__autoAllocateDepthBuffer=void 0===fn,Lt.__autoAllocateDepthBuffer||!0===Ft.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Lt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Fe,Ht){const fn=Tt.get(Fe);fn.__webglFramebuffer=Ht,fn.__useDefaultFramebuffer=void 0===Ht},this.setRenderTarget=function(Fe,Ht=0,fn=0){$=Fe,B=Ht,j=fn;let Lt=!0,_n=null,Ee=!1,mt=!1;if(Fe){const ht=Tt.get(Fe);void 0!==ht.__useDefaultFramebuffer?(an.bindFramebuffer(Ve.FRAMEBUFFER,null),Lt=!1):void 0===ht.__webglFramebuffer?Ut.setupRenderTarget(Fe):ht.__hasExternalTextures&&Ut.rebindTextures(Fe,Tt.get(Fe.texture).__webglTexture,Tt.get(Fe.depthTexture).__webglTexture);const Gt=Fe.texture;(Gt.isData3DTexture||Gt.isDataArrayTexture||Gt.isCompressedArrayTexture)&&(mt=!0);const Fn=Tt.get(Fe).__webglFramebuffer;Fe.isWebGLCubeRenderTarget?(_n=Fn[Ht],Ee=!0):_n=Et.isWebGL2&&Fe.samples>0&&!1===Ut.useMultisampledRTT(Fe)?Tt.get(Fe).__webglMultisampledFramebuffer:Fn,J.copy(Fe.viewport),Y.copy(Fe.scissor),ee=Fe.scissorTest}else J.copy(Ye).multiplyScalar(fe).floor(),Y.copy(Qe).multiplyScalar(fe).floor(),ee=Ne;if(an.bindFramebuffer(Ve.FRAMEBUFFER,_n)&&Et.drawBuffers&&Lt&&an.drawBuffers(Fe,_n),an.viewport(J),an.scissor(Y),an.setScissorTest(ee),Ee){const ht=Tt.get(Fe.texture);Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ht.__webglTexture,fn)}else if(mt){const ht=Tt.get(Fe.texture);Ve.framebufferTextureLayer(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,ht.__webglTexture,fn||0,Ht||0)}G=-1},this.readRenderTargetPixels=function(Fe,Ht,fn,Lt,_n,Ee,mt){if(!Fe||!Fe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=Tt.get(Fe).__webglFramebuffer;if(Fe.isWebGLCubeRenderTarget&&void 0!==mt&&(Ct=Ct[mt]),Ct){an.bindFramebuffer(Ve.FRAMEBUFFER,Ct);try{const ht=Fe.texture,Gt=ht.format,Fn=ht.type;if(Gt!==Aa&&nt.convert(Gt)!==Ve.getParameter(Ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Nn=Fn===Sc&&(Ft.has("EXT_color_buffer_half_float")||Et.isWebGL2&&Ft.has("EXT_color_buffer_float"));if(!(Fn===qu||nt.convert(Fn)===Ve.getParameter(Ve.IMPLEMENTATION_COLOR_READ_TYPE)||Fn===Ta&&(Et.isWebGL2||Ft.has("OES_texture_float")||Ft.has("WEBGL_color_buffer_float"))||Nn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ht>=0&&Ht<=Fe.width-Lt&&fn>=0&&fn<=Fe.height-_n&&Ve.readPixels(Ht,fn,Lt,_n,nt.convert(Gt),nt.convert(Fn),Ee)}finally{const ht=null!==$?Tt.get($).__webglFramebuffer:null;an.bindFramebuffer(Ve.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(Fe,Ht,fn=0){const Lt=Math.pow(2,-fn),_n=Math.floor(Ht.image.width*Lt),Ee=Math.floor(Ht.image.height*Lt);Ut.setTexture2D(Ht,0),Ve.copyTexSubImage2D(Ve.TEXTURE_2D,fn,0,0,Fe.x,Fe.y,_n,Ee),an.unbindTexture()},this.copyTextureToTexture=function(Fe,Ht,fn,Lt=0){const _n=Ht.image.width,Ee=Ht.image.height,mt=nt.convert(fn.format),Ct=nt.convert(fn.type);Ut.setTexture2D(fn,0),Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,fn.flipY),Ve.pixelStorei(Ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fn.premultiplyAlpha),Ve.pixelStorei(Ve.UNPACK_ALIGNMENT,fn.unpackAlignment),Ht.isDataTexture?Ve.texSubImage2D(Ve.TEXTURE_2D,Lt,Fe.x,Fe.y,_n,Ee,mt,Ct,Ht.image.data):Ht.isCompressedTexture?Ve.compressedTexSubImage2D(Ve.TEXTURE_2D,Lt,Fe.x,Fe.y,Ht.mipmaps[0].width,Ht.mipmaps[0].height,mt,Ht.mipmaps[0].data):Ve.texSubImage2D(Ve.TEXTURE_2D,Lt,Fe.x,Fe.y,mt,Ct,Ht.image),0===Lt&&fn.generateMipmaps&&Ve.generateMipmap(Ve.TEXTURE_2D),an.unbindTexture()},this.copyTextureToTexture3D=function(Fe,Ht,fn,Lt,_n=0){if(I.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ee=Fe.max.x-Fe.min.x+1,mt=Fe.max.y-Fe.min.y+1,Ct=Fe.max.z-Fe.min.z+1,ht=nt.convert(Lt.format),Gt=nt.convert(Lt.type);let Fn;if(Lt.isData3DTexture)Ut.setTexture3D(Lt,0),Fn=Ve.TEXTURE_3D;else{if(!Lt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ut.setTexture2DArray(Lt,0),Fn=Ve.TEXTURE_2D_ARRAY}Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,Lt.flipY),Ve.pixelStorei(Ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Lt.premultiplyAlpha),Ve.pixelStorei(Ve.UNPACK_ALIGNMENT,Lt.unpackAlignment);const Nn=Ve.getParameter(Ve.UNPACK_ROW_LENGTH),Zn=Ve.getParameter(Ve.UNPACK_IMAGE_HEIGHT),Mi=Ve.getParameter(Ve.UNPACK_SKIP_PIXELS),_i=Ve.getParameter(Ve.UNPACK_SKIP_ROWS),Gi=Ve.getParameter(Ve.UNPACK_SKIP_IMAGES),vi=fn.isCompressedTexture?fn.mipmaps[0]:fn.image;Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,vi.width),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,vi.height),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,Fe.min.x),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,Fe.min.y),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,Fe.min.z),fn.isDataTexture||fn.isData3DTexture?Ve.texSubImage3D(Fn,_n,Ht.x,Ht.y,Ht.z,Ee,mt,Ct,ht,Gt,vi.data):fn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ve.compressedTexSubImage3D(Fn,_n,Ht.x,Ht.y,Ht.z,Ee,mt,Ct,ht,vi.data)):Ve.texSubImage3D(Fn,_n,Ht.x,Ht.y,Ht.z,Ee,mt,Ct,ht,Gt,vi),Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,Nn),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,Zn),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,Mi),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,_i),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,Gi),0===_n&&Lt.generateMipmaps&&Ve.generateMipmap(Fn),an.unbindTexture()},this.initTexture=function(Fe){Fe.isCubeTexture?Ut.setTextureCube(Fe,0):Fe.isData3DTexture?Ut.setTexture3D(Fe,0):Fe.isDataArrayTexture||Fe.isCompressedArrayTexture?Ut.setTexture2DArray(Fe,0):Ut.setTexture2D(Fe,0),an.unbindTexture()},this.resetState=function(){B=0,j=0,$=null,an.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(s){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!s}}class Mu extends r_{}Mu.prototype.isWebGL1Renderer=!0;class yp{constructor(s,l=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yn(s),this.density=l}clone(){return new yp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class gd{constructor(s,l=1,m=1e3){this.isFog=!0,this.name="",this.color=new Yn(s),this.near=l,this.far=m}clone(){return new gd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Wa extends os{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(s,l){return super.copy(s,l),null!==s.background&&(this.background=s.background.clone()),null!==s.environment&&(this.environment=s.environment.clone()),null!==s.fog&&(this.fog=s.fog.clone()),this.backgroundBlurriness=s.backgroundBlurriness,this.backgroundIntensity=s.backgroundIntensity,null!==s.overrideMaterial&&(this.overrideMaterial=s.overrideMaterial.clone()),this.matrixAutoUpdate=s.matrixAutoUpdate,this}toJSON(s){const l=super.toJSON(s);return null!==this.fog&&(l.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(l.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(l.object.backgroundIntensity=this.backgroundIntensity),l}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(s){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=s}}class s_{constructor(s,l){this.isInterleavedBuffer=!0,this.array=s,this.stride=l,this.count=void 0!==s?s.length/l:0,this.usage=_m,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=go()}onUploadCallback(){}set needsUpdate(s){!0===s&&this.version++}setUsage(s){return this.usage=s,this}copy(s){return this.array=new s.array.constructor(s.array),this.count=s.count,this.stride=s.stride,this.usage=s.usage,this}copyAt(s,l,m){s*=this.stride,m*=l.stride;for(let b=0,p=this.stride;b<p;b++)this.array[s+b]=l.array[m+b];return this}set(s,l=0){return this.array.set(s,l),this}clone(s){void 0===s.arrayBuffers&&(s.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=go()),void 0===s.arrayBuffers[this.array.buffer._uuid]&&(s.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const l=new this.array.constructor(s.arrayBuffers[this.array.buffer._uuid]),m=new this.constructor(l,this.stride);return m.setUsage(this.usage),m}onUpload(s){return this.onUploadCallback=s,this}toJSON(s){return void 0===s.arrayBuffers&&(s.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=go()),void 0===s.arrayBuffers[this.array.buffer._uuid]&&(s.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ho=new Pe;class ks{constructor(s,l,m,b=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=s,this.itemSize=l,this.offset=m,this.normalized=b}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(s){this.data.needsUpdate=s}applyMatrix4(s){for(let l=0,m=this.data.count;l<m;l++)Ho.fromBufferAttribute(this,l),Ho.applyMatrix4(s),this.setXYZ(l,Ho.x,Ho.y,Ho.z);return this}applyNormalMatrix(s){for(let l=0,m=this.count;l<m;l++)Ho.fromBufferAttribute(this,l),Ho.applyNormalMatrix(s),this.setXYZ(l,Ho.x,Ho.y,Ho.z);return this}transformDirection(s){for(let l=0,m=this.count;l<m;l++)Ho.fromBufferAttribute(this,l),Ho.transformDirection(s),this.setXYZ(l,Ho.x,Ho.y,Ho.z);return this}setX(s,l){return this.normalized&&(l=Bn(l,this.array)),this.data.array[s*this.data.stride+this.offset]=l,this}setY(s,l){return this.normalized&&(l=Bn(l,this.array)),this.data.array[s*this.data.stride+this.offset+1]=l,this}setZ(s,l){return this.normalized&&(l=Bn(l,this.array)),this.data.array[s*this.data.stride+this.offset+2]=l,this}setW(s,l){return this.normalized&&(l=Bn(l,this.array)),this.data.array[s*this.data.stride+this.offset+3]=l,this}getX(s){let l=this.data.array[s*this.data.stride+this.offset];return this.normalized&&(l=ro(l,this.array)),l}getY(s){let l=this.data.array[s*this.data.stride+this.offset+1];return this.normalized&&(l=ro(l,this.array)),l}getZ(s){let l=this.data.array[s*this.data.stride+this.offset+2];return this.normalized&&(l=ro(l,this.array)),l}getW(s){let l=this.data.array[s*this.data.stride+this.offset+3];return this.normalized&&(l=ro(l,this.array)),l}setXY(s,l,m){return s=s*this.data.stride+this.offset,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array)),this.data.array[s+0]=l,this.data.array[s+1]=m,this}setXYZ(s,l,m,b){return s=s*this.data.stride+this.offset,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array)),this.data.array[s+0]=l,this.data.array[s+1]=m,this.data.array[s+2]=b,this}setXYZW(s,l,m,b,p){return s=s*this.data.stride+this.offset,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array),p=Bn(p,this.array)),this.data.array[s+0]=l,this.data.array[s+1]=m,this.data.array[s+2]=b,this.data.array[s+3]=p,this}clone(s){if(void 0===s){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const l=[];for(let m=0;m<this.count;m++){const b=m*this.data.stride+this.offset;for(let p=0;p<this.itemSize;p++)l.push(this.data.array[b+p])}return new Zi(new this.array.constructor(l),this.itemSize,this.normalized)}return void 0===s.interleavedBuffers&&(s.interleavedBuffers={}),void 0===s.interleavedBuffers[this.data.uuid]&&(s.interleavedBuffers[this.data.uuid]=this.data.clone(s)),new ks(s.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(s){if(void 0===s){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const l=[];for(let m=0;m<this.count;m++){const b=m*this.data.stride+this.offset;for(let p=0;p<this.itemSize;p++)l.push(this.data.array[b+p])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:l,normalized:this.normalized}}return void 0===s.interleavedBuffers&&(s.interleavedBuffers={}),void 0===s.interleavedBuffers[this.data.uuid]&&(s.interleavedBuffers[this.data.uuid]=this.data.toJSON(s)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nf extends La{constructor(s){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.alphaMap=s.alphaMap,this.rotation=s.rotation,this.sizeAttenuation=s.sizeAttenuation,this.fog=s.fog,this}}let Go;const ga=new Pe,Wo=new Pe,fl=new Pe,Fc=new Sn,wu=new Sn,bp=new zi,sh=new Pe,pl=new Pe,xp=new Pe,P0=new Sn,o_=new Sn,oh=new Sn;class Gm extends os{constructor(s){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Go){Go=new ai;const l=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),m=new s_(l,5);Go.setIndex([0,1,2,0,2,3]),Go.setAttribute("position",new ks(m,3,0,!1)),Go.setAttribute("uv",new ks(m,2,3,!1))}this.geometry=Go,this.material=void 0!==s?s:new nf,this.center=new Sn(.5,.5)}raycast(s,l){null===s.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wo.setFromMatrixScale(this.matrixWorld),bp.copy(s.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(s.camera.matrixWorldInverse,this.matrixWorld),fl.setFromMatrixPosition(this.modelViewMatrix),s.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wo.multiplyScalar(-fl.z);const m=this.material.rotation;let b,p;0!==m&&(p=Math.cos(m),b=Math.sin(m));const i=this.center;a_(sh.set(-.5,-.5,0),fl,i,Wo,b,p),a_(pl.set(.5,-.5,0),fl,i,Wo,b,p),a_(xp.set(.5,.5,0),fl,i,Wo,b,p),P0.set(0,0),o_.set(1,0),oh.set(1,1);let o=s.ray.intersectTriangle(sh,pl,xp,!1,ga);if(null===o&&(a_(pl.set(-.5,.5,0),fl,i,Wo,b,p),o_.set(0,1),o=s.ray.intersectTriangle(sh,xp,pl,!1,ga),null===o))return;const u=s.ray.origin.distanceTo(ga);u<s.near||u>s.far||l.push({distance:u,point:ga.clone(),uv:yo.getInterpolation(ga,sh,pl,xp,P0,o_,oh,new Sn),face:null,object:this})}copy(s,l){return super.copy(s,l),void 0!==s.center&&this.center.copy(s.center),this.material=s.material,this}}function a_(S,s,l,m,b,p){Fc.subVectors(S,l).addScalar(.5).multiply(m),void 0!==b?(wu.x=p*Fc.x-b*Fc.y,wu.y=b*Fc.x+p*Fc.y):wu.copy(Fc),S.copy(s),S.x+=wu.x,S.y+=wu.y,S.applyMatrix4(bp)}const ah=new Pe,Wm=new Pe;class fx extends os{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(s){super.copy(s,!1);const l=s.levels;for(let m=0,b=l.length;m<b;m++){const p=l[m];this.addLevel(p.object.clone(),p.distance,p.hysteresis)}return this.autoUpdate=s.autoUpdate,this}addLevel(s,l=0,m=0){l=Math.abs(l);const b=this.levels;let p;for(p=0;p<b.length&&!(l<b[p].distance);p++);return b.splice(p,0,{distance:l,hysteresis:m,object:s}),this.add(s),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(s){const l=this.levels;if(l.length>0){let m,b;for(m=1,b=l.length;m<b;m++){let p=l[m].distance;if(l[m].object.visible&&(p-=p*l[m].hysteresis),s<p)break}return l[m-1].object}return null}raycast(s,l){if(this.levels.length>0){ah.setFromMatrixPosition(this.matrixWorld);const b=s.ray.origin.distanceTo(ah);this.getObjectForDistance(b).raycast(s,l)}}update(s){const l=this.levels;if(l.length>1){ah.setFromMatrixPosition(s.matrixWorld),Wm.setFromMatrixPosition(this.matrixWorld);const m=ah.distanceTo(Wm)/s.zoom;let b,p;for(l[0].object.visible=!0,b=1,p=l.length;b<p;b++){let i=l[b].distance;if(l[b].object.visible&&(i-=i*l[b].hysteresis),!(m>=i))break;l[b-1].object.visible=!1,l[b].object.visible=!0}for(this._currentLevel=b-1;b<p;b++)l[b].object.visible=!1}}toJSON(s){const l=super.toJSON(s);!1===this.autoUpdate&&(l.object.autoUpdate=!1),l.object.levels=[];const m=this.levels;for(let b=0,p=m.length;b<p;b++){const i=m[b];l.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return l}}const px=new Pe,Nc=new tr,Mp=new tr,wp=new Pe,Li=new zi,rf=new Pe;class _a extends _s{constructor(s,l){super(s,l),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zi,this.bindMatrixInverse=new zi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const s=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ac),this.boundingBox.makeEmpty();const l=s.getAttribute("position");for(let m=0;m<l.count;m++)rf.fromBufferAttribute(l,m),this.applyBoneTransform(m,rf),this.boundingBox.expandByPoint(rf)}computeBoundingSphere(){const s=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Js),this.boundingSphere.makeEmpty();const l=s.getAttribute("position");for(let m=0;m<l.count;m++)rf.fromBufferAttribute(l,m),this.applyBoneTransform(m,rf),this.boundingSphere.expandByPoint(rf)}copy(s,l){return super.copy(s,l),this.bindMode=s.bindMode,this.bindMatrix.copy(s.bindMatrix),this.bindMatrixInverse.copy(s.bindMatrixInverse),this.skeleton=s.skeleton,this}bind(s,l){this.skeleton=s,void 0===l&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.copy(l).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const s=new tr,l=this.geometry.attributes.skinWeight;for(let m=0,b=l.count;m<b;m++){s.fromBufferAttribute(l,m);const p=1/s.manhattanLength();p!==1/0?s.multiplyScalar(p):s.set(1,0,0,0),l.setXYZW(m,s.x,s.y,s.z,s.w)}}updateMatrixWorld(s){super.updateMatrixWorld(s),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(s,l){const m=this.skeleton,b=this.geometry;Nc.fromBufferAttribute(b.attributes.skinIndex,s),Mp.fromBufferAttribute(b.attributes.skinWeight,s),px.copy(l).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let p=0;p<4;p++){const i=Mp.getComponent(p);if(0!==i){const o=Nc.getComponent(p);Li.multiplyMatrices(m.bones[o].matrixWorld,m.boneInverses[o]),l.addScaledVector(wp.copy(px).applyMatrix4(Li),i)}}return l.applyMatrix4(this.bindMatrixInverse)}boneTransform(s,l){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(s,l)}}class ml extends os{constructor(){super(),this.isBone=!0,this.type="Bone"}}class sf extends rc{constructor(s=null,l=1,m=1,b,p,i,o,u,f=gr,_=gr,x,M){super(null,i,o,u,f,_,b,p,x,M),this.isDataTexture=!0,this.image={data:s,width:l,height:m},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jm=new zi,gl=new zi;class k0{constructor(s=[],l=[]){this.uuid=go(),this.bones=s.slice(0),this.boneInverses=l,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const s=this.bones,l=this.boneInverses;if(this.boneMatrices=new Float32Array(16*s.length),0===l.length)this.calculateInverses();else if(s.length!==l.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let m=0,b=this.bones.length;m<b;m++)this.boneInverses.push(new zi)}}calculateInverses(){this.boneInverses.length=0;for(let s=0,l=this.bones.length;s<l;s++){const m=new zi;this.bones[s]&&m.copy(this.bones[s].matrixWorld).invert(),this.boneInverses.push(m)}}pose(){for(let s=0,l=this.bones.length;s<l;s++){const m=this.bones[s];m&&m.matrixWorld.copy(this.boneInverses[s]).invert()}for(let s=0,l=this.bones.length;s<l;s++){const m=this.bones[s];m&&(m.parent&&m.parent.isBone?(m.matrix.copy(m.parent.matrixWorld).invert(),m.matrix.multiply(m.matrixWorld)):m.matrix.copy(m.matrixWorld),m.matrix.decompose(m.position,m.quaternion,m.scale))}}update(){const s=this.bones,l=this.boneInverses,m=this.boneMatrices,b=this.boneTexture;for(let p=0,i=s.length;p<i;p++)jm.multiplyMatrices(s[p]?s[p].matrixWorld:gl,l[p]),jm.toArray(m,16*p);null!==b&&(b.needsUpdate=!0)}clone(){return new k0(this.bones,this.boneInverses)}computeBoneTexture(){let s=Math.sqrt(4*this.bones.length);s=Tc(s),s=Math.max(s,4);const l=new Float32Array(s*s*4);l.set(this.boneMatrices);const m=new sf(l,s,s,Aa,Ta);return m.needsUpdate=!0,this.boneMatrices=l,this.boneTexture=m,this.boneTextureSize=s,this}getBoneByName(s){for(let l=0,m=this.bones.length;l<m;l++){const b=this.bones[l];if(b.name===s)return b}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(s,l){this.uuid=s.uuid;for(let m=0,b=s.bones.length;m<b;m++){const p=s.bones[m];let i=l[p];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",p),i=new ml),this.bones.push(i),this.boneInverses.push((new zi).fromArray(s.boneInverses[m]))}return this.init(),this}toJSON(){const s={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};s.uuid=this.uuid;const l=this.bones,m=this.boneInverses;for(let b=0,p=l.length;b<p;b++)s.bones.push(l[b].uuid),s.boneInverses.push(m[b].toArray());return s}}class _d extends Zi{constructor(s,l,m,b=1){super(s,l,m),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=b}copy(s){return super.copy(s),this.meshPerAttribute=s.meshPerAttribute,this}toJSON(){const s=super.toJSON();return s.meshPerAttribute=this.meshPerAttribute,s.isInstancedBufferAttribute=!0,s}}const jl=new zi,Sp=new zi,ch=[],Uc=new Ac,mx=new zi,af=new _s,Su=new Js;class $m extends _s{constructor(s,l,m){super(s,l),this.isInstancedMesh=!0,this.instanceMatrix=new _d(new Float32Array(16*m),16),this.instanceColor=null,this.count=m,this.boundingBox=null,this.boundingSphere=null;for(let b=0;b<m;b++)this.setMatrixAt(b,mx)}computeBoundingBox(){const s=this.geometry,l=this.count;null===this.boundingBox&&(this.boundingBox=new Ac),null===s.boundingBox&&s.computeBoundingBox(),this.boundingBox.makeEmpty();for(let m=0;m<l;m++)this.getMatrixAt(m,jl),Uc.copy(s.boundingBox).applyMatrix4(jl),this.boundingBox.union(Uc)}computeBoundingSphere(){const s=this.geometry,l=this.count;null===this.boundingSphere&&(this.boundingSphere=new Js),null===s.boundingSphere&&s.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let m=0;m<l;m++)this.getMatrixAt(m,jl),Su.copy(s.boundingSphere).applyMatrix4(jl),this.boundingSphere.union(Su)}copy(s,l){return super.copy(s,l),this.instanceMatrix.copy(s.instanceMatrix),null!==s.instanceColor&&(this.instanceColor=s.instanceColor.clone()),this.count=s.count,this}getColorAt(s,l){l.fromArray(this.instanceColor.array,3*s)}getMatrixAt(s,l){l.fromArray(this.instanceMatrix.array,16*s)}raycast(s,l){const m=this.matrixWorld,b=this.count;if(af.geometry=this.geometry,af.material=this.material,void 0!==af.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Su.copy(this.boundingSphere),Su.applyMatrix4(m),!1!==s.ray.intersectsSphere(Su)))for(let p=0;p<b;p++){this.getMatrixAt(p,jl),Sp.multiplyMatrices(m,jl),af.matrixWorld=Sp,af.raycast(s,ch);for(let i=0,o=ch.length;i<o;i++){const u=ch[i];u.instanceId=p,u.object=this,l.push(u)}ch.length=0}}setColorAt(s,l){null===this.instanceColor&&(this.instanceColor=new _d(new Float32Array(3*this.instanceMatrix.count),3)),l.toArray(this.instanceColor.array,3*s)}setMatrixAt(s,l){l.toArray(this.instanceMatrix.array,16*s)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class mc extends La{constructor(s){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.linewidth=s.linewidth,this.linecap=s.linecap,this.linejoin=s.linejoin,this.fog=s.fog,this}}const Bc=new Pe,fy=new Pe,cf=new zi,_l=new fa,lf=new Js;class vl extends os{constructor(s=new ai,l=new mc){super(),this.isLine=!0,this.type="Line",this.geometry=s,this.material=l,this.updateMorphTargets()}copy(s,l){return super.copy(s,l),this.material=s.material,this.geometry=s.geometry,this}computeLineDistances(){const s=this.geometry;if(null===s.index){const l=s.attributes.position,m=[0];for(let b=1,p=l.count;b<p;b++)Bc.fromBufferAttribute(l,b-1),fy.fromBufferAttribute(l,b),m[b]=m[b-1],m[b]+=Bc.distanceTo(fy);s.setAttribute("lineDistance",new oi(m,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(s,l){const m=this.geometry,b=this.matrixWorld,p=s.params.Line.threshold,i=m.drawRange;if(null===m.boundingSphere&&m.computeBoundingSphere(),lf.copy(m.boundingSphere),lf.applyMatrix4(b),lf.radius+=p,!1===s.ray.intersectsSphere(lf))return;cf.copy(b).invert(),_l.copy(s.ray).applyMatrix4(cf);const o=p/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,f=new Pe,_=new Pe,x=new Pe,M=new Pe,E=this.isLineSegments?2:1,D=m.index,O=m.attributes.position;if(null!==D)for(let B=Math.max(0,i.start),j=Math.min(D.count,i.start+i.count)-1;B<j;B+=E){const $=D.getX(B),G=D.getX(B+1);if(f.fromBufferAttribute(O,$),_.fromBufferAttribute(O,G),_l.distanceSqToSegment(f,_,M,x)>u)continue;M.applyMatrix4(this.matrixWorld);const J=s.ray.origin.distanceTo(M);J<s.near||J>s.far||l.push({distance:J,point:x.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}else for(let B=Math.max(0,i.start),j=Math.min(O.count,i.start+i.count)-1;B<j;B+=E){if(f.fromBufferAttribute(O,B),_.fromBufferAttribute(O,B+1),_l.distanceSqToSegment(f,_,M,x)>u)continue;M.applyMatrix4(this.matrixWorld);const G=s.ray.origin.distanceTo(M);G<s.near||G>s.far||l.push({distance:G,point:x.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const l=this.geometry.morphAttributes,m=Object.keys(l);if(m.length>0){const b=l[m[0]];if(void 0!==b){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let p=0,i=b.length;p<i;p++){const o=b[p].name||String(p);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=p}}}}}const uf=new Pe,L0=new Pe;class yl extends vl{constructor(s,l){super(s,l),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const s=this.geometry;if(null===s.index){const l=s.attributes.position,m=[];for(let b=0,p=l.count;b<p;b+=2)uf.fromBufferAttribute(l,b),L0.fromBufferAttribute(l,b+1),m[b]=0===b?0:m[b-1],m[b+1]=m[b]+uf.distanceTo(L0);s.setAttribute("lineDistance",new oi(m,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gx extends vl{constructor(s,l){super(s,l),this.isLineLoop=!0,this.type="LineLoop"}}class c_ extends La{constructor(s){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.alphaMap=s.alphaMap,this.size=s.size,this.sizeAttenuation=s.sizeAttenuation,this.fog=s.fog,this}}const va=new zi,O0=new fa,Ep=new Js,vd=new Pe;class Eu extends os{constructor(s=new ai,l=new c_){super(),this.isPoints=!0,this.type="Points",this.geometry=s,this.material=l,this.updateMorphTargets()}copy(s,l){return super.copy(s,l),this.material=s.material,this.geometry=s.geometry,this}raycast(s,l){const m=this.geometry,b=this.matrixWorld,p=s.params.Points.threshold,i=m.drawRange;if(null===m.boundingSphere&&m.computeBoundingSphere(),Ep.copy(m.boundingSphere),Ep.applyMatrix4(b),Ep.radius+=p,!1===s.ray.intersectsSphere(Ep))return;va.copy(b).invert(),O0.copy(s.ray).applyMatrix4(va);const o=p/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,f=m.index,x=m.attributes.position;if(null!==f)for(let D=Math.max(0,i.start),k=Math.min(f.count,i.start+i.count);D<k;D++){const O=f.getX(D);vd.fromBufferAttribute(x,O),bl(vd,O,u,b,s,l,this)}else for(let D=Math.max(0,i.start),k=Math.min(x.count,i.start+i.count);D<k;D++)vd.fromBufferAttribute(x,D),bl(vd,D,u,b,s,l,this)}updateMorphTargets(){const l=this.geometry.morphAttributes,m=Object.keys(l);if(m.length>0){const b=l[m[0]];if(void 0!==b){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let p=0,i=b.length;p<i;p++){const o=b[p].name||String(p);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=p}}}}}function bl(S,s,l,m,b,p,i){const o=O0.distanceSqToPoint(S);if(o<l){const u=new Pe;O0.closestPointToPoint(S,u),u.applyMatrix4(m);const f=b.ray.origin.distanceTo(u);if(f<b.near||f>b.far)return;p.push({distance:f,distanceToRay:Math.sqrt(o),point:u,index:s,face:null,object:i})}}class vx extends rc{constructor(s,l,m,b,p,i,o,u,f,_,x,M){super(null,i,o,u,f,_,b,p,x,M),this.isCompressedTexture=!0,this.image={width:l,height:m},this.mipmaps=s,this.flipY=!1,this.generateMipmaps=!1}}class yd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(s,l){const m=this.getUtoTmapping(s);return this.getPoint(m,l)}getPoints(s=5){const l=[];for(let m=0;m<=s;m++)l.push(this.getPoint(m/s));return l}getSpacedPoints(s=5){const l=[];for(let m=0;m<=s;m++)l.push(this.getPointAt(m/s));return l}getLength(){const s=this.getLengths();return s[s.length-1]}getLengths(s=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let m,b=this.getPoint(0),p=0;l.push(0);for(let i=1;i<=s;i++)m=this.getPoint(i/s),p+=m.distanceTo(b),l.push(p),b=m;return this.cacheArcLengths=l,l}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(s,l){const m=this.getLengths();let b=0;const p=m.length;let i;i=l||s*m[p-1];let f,o=0,u=p-1;for(;o<=u;)if(b=Math.floor(o+(u-o)/2),f=m[b]-i,f<0)o=b+1;else{if(!(f>0)){u=b;break}u=b-1}if(b=u,m[b]===i)return b/(p-1);const _=m[b];return(b+(i-_)/(m[b+1]-_))/(p-1)}getTangent(s,l){let b=s-1e-4,p=s+1e-4;b<0&&(b=0),p>1&&(p=1);const i=this.getPoint(b),o=this.getPoint(p),u=l||(i.isVector2?new Sn:new Pe);return u.copy(o).sub(i).normalize(),u}getTangentAt(s,l){const m=this.getUtoTmapping(s);return this.getTangent(m,l)}computeFrenetFrames(s,l){const m=new Pe,b=[],p=[],i=[],o=new Pe,u=new zi;for(let E=0;E<=s;E++)b[E]=this.getTangentAt(E/s,new Pe);p[0]=new Pe,i[0]=new Pe;let f=Number.MAX_VALUE;const _=Math.abs(b[0].x),x=Math.abs(b[0].y),M=Math.abs(b[0].z);_<=f&&(f=_,m.set(1,0,0)),x<=f&&(f=x,m.set(0,1,0)),M<=f&&m.set(0,0,1),o.crossVectors(b[0],m).normalize(),p[0].crossVectors(b[0],o),i[0].crossVectors(b[0],p[0]);for(let E=1;E<=s;E++){if(p[E]=p[E-1].clone(),i[E]=i[E-1].clone(),o.crossVectors(b[E-1],b[E]),o.length()>Number.EPSILON){o.normalize();const D=Math.acos(kr(b[E-1].dot(b[E]),-1,1));p[E].applyMatrix4(u.makeRotationAxis(o,D))}i[E].crossVectors(b[E],p[E])}if(!0===l){let E=Math.acos(kr(p[0].dot(p[s]),-1,1));E/=s,b[0].dot(o.crossVectors(p[0],p[s]))>0&&(E=-E);for(let D=1;D<=s;D++)p[D].applyMatrix4(u.makeRotationAxis(b[D],E*D)),i[D].crossVectors(b[D],p[D])}return{tangents:b,normals:p,binormals:i}}clone(){return(new this.constructor).copy(this)}copy(s){return this.arcLengthDivisions=s.arcLengthDivisions,this}toJSON(){const s={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return s.arcLengthDivisions=this.arcLengthDivisions,s.type=this.type,s}fromJSON(s){return this.arcLengthDivisions=s.arcLengthDivisions,this}}class Ro extends yd{constructor(s=0,l=0,m=1,b=1,p=0,i=2*Math.PI,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=s,this.aY=l,this.xRadius=m,this.yRadius=b,this.aStartAngle=p,this.aEndAngle=i,this.aClockwise=o,this.aRotation=u}getPoint(s,l){const m=l||new Sn,b=2*Math.PI;let p=this.aEndAngle-this.aStartAngle;const i=Math.abs(p)<Number.EPSILON;for(;p<0;)p+=b;for(;p>b;)p-=b;p<Number.EPSILON&&(p=i?0:b),!0===this.aClockwise&&!i&&(p===b?p=-b:p-=b);const o=this.aStartAngle+s*p;let u=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const _=Math.cos(this.aRotation),x=Math.sin(this.aRotation),M=u-this.aX,E=f-this.aY;u=M*_-E*x+this.aX,f=M*x+E*_+this.aY}return m.set(u,f)}copy(s){return super.copy(s),this.aX=s.aX,this.aY=s.aY,this.xRadius=s.xRadius,this.yRadius=s.yRadius,this.aStartAngle=s.aStartAngle,this.aEndAngle=s.aEndAngle,this.aClockwise=s.aClockwise,this.aRotation=s.aRotation,this}toJSON(){const s=super.toJSON();return s.aX=this.aX,s.aY=this.aY,s.xRadius=this.xRadius,s.yRadius=this.yRadius,s.aStartAngle=this.aStartAngle,s.aEndAngle=this.aEndAngle,s.aClockwise=this.aClockwise,s.aRotation=this.aRotation,s}fromJSON(s){return super.fromJSON(s),this.aX=s.aX,this.aY=s.aY,this.xRadius=s.xRadius,this.yRadius=s.yRadius,this.aStartAngle=s.aStartAngle,this.aEndAngle=s.aEndAngle,this.aClockwise=s.aClockwise,this.aRotation=s.aRotation,this}}class l_ extends Ro{constructor(s,l,m,b,p,i){super(s,l,m,m,b,p,i),this.isArcCurve=!0,this.type="ArcCurve"}}function py(){let S=0,s=0,l=0,m=0;function b(p,i,o,u){S=p,s=o,l=-3*p+3*i-2*o-u,m=2*p-2*i+o+u}return{initCatmullRom:function(p,i,o,u,f){b(i,o,f*(o-p),f*(u-i))},initNonuniformCatmullRom:function(p,i,o,u,f,_,x){let M=(i-p)/f-(o-p)/(f+_)+(o-i)/_,E=(o-i)/_-(u-i)/(_+x)+(u-o)/x;M*=_,E*=_,b(i,o,M,E)},calc:function(p){const i=p*p;return S+s*p+l*i+m*(i*p)}}}const qm=new Pe,Pi=new py,zn=new py,Xm=new py;class u_ extends yd{constructor(s=[],l=!1,m="centripetal",b=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=s,this.closed=l,this.curveType=m,this.tension=b}getPoint(s,l=new Pe){const m=l,b=this.points,p=b.length,i=(p-(this.closed?0:1))*s;let f,_,o=Math.floor(i),u=i-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/p)+1)*p:0===u&&o===p-1&&(o=p-2,u=1),this.closed||o>0?f=b[(o-1)%p]:(qm.subVectors(b[0],b[1]).add(b[0]),f=qm);const x=b[o%p],M=b[(o+1)%p];if(this.closed||o+2<p?_=b[(o+2)%p]:(qm.subVectors(b[p-1],b[p-2]).add(b[p-1]),_=qm),"centripetal"===this.curveType||"chordal"===this.curveType){const E="chordal"===this.curveType?.5:.25;let D=Math.pow(f.distanceToSquared(x),E),k=Math.pow(x.distanceToSquared(M),E),O=Math.pow(M.distanceToSquared(_),E);k<1e-4&&(k=1),D<1e-4&&(D=k),O<1e-4&&(O=k),Pi.initNonuniformCatmullRom(f.x,x.x,M.x,_.x,D,k,O),zn.initNonuniformCatmullRom(f.y,x.y,M.y,_.y,D,k,O),Xm.initNonuniformCatmullRom(f.z,x.z,M.z,_.z,D,k,O)}else"catmullrom"===this.curveType&&(Pi.initCatmullRom(f.x,x.x,M.x,_.x,this.tension),zn.initCatmullRom(f.y,x.y,M.y,_.y,this.tension),Xm.initCatmullRom(f.z,x.z,M.z,_.z,this.tension));return m.set(Pi.calc(u),zn.calc(u),Xm.calc(u)),m}copy(s){super.copy(s),this.points=[];for(let l=0,m=s.points.length;l<m;l++)this.points.push(s.points[l].clone());return this.closed=s.closed,this.curveType=s.curveType,this.tension=s.tension,this}toJSON(){const s=super.toJSON();s.points=[];for(let l=0,m=this.points.length;l<m;l++)s.points.push(this.points[l].toArray());return s.closed=this.closed,s.curveType=this.curveType,s.tension=this.tension,s}fromJSON(s){super.fromJSON(s),this.points=[];for(let l=0,m=s.points.length;l<m;l++){const b=s.points[l];this.points.push((new Pe).fromArray(b))}return this.closed=s.closed,this.curveType=s.curveType,this.tension=s.tension,this}}function yx(S,s,l,m,b){const p=.5*(m-s),i=.5*(b-l),o=S*S;return(2*l-2*m+p+i)*(S*o)+(-3*l+3*m-2*p-i)*o+p*S+l}function Ym(S,s,l,m){return function bx(S,s){const l=1-S;return l*l*s}(S,s)+function xx(S,s){return 2*(1-S)*S*s}(S,l)+function mw(S,s){return S*S*s}(S,m)}function Cp(S,s,l,m,b){return function Zm(S,s){const l=1-S;return l*l*l*s}(S,s)+function my(S,s){const l=1-S;return 3*l*l*S*s}(S,l)+function eS(S,s){return 3*(1-S)*S*S*s}(S,m)+function Mx(S,s){return S*S*S*s}(S,b)}class js extends yd{constructor(s=new Sn,l=new Sn,m=new Sn,b=new Sn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=s,this.v1=l,this.v2=m,this.v3=b}getPoint(s,l=new Sn){const m=l,b=this.v0,p=this.v1,i=this.v2,o=this.v3;return m.set(Cp(s,b.x,p.x,i.x,o.x),Cp(s,b.y,p.y,i.y,o.y)),m}copy(s){return super.copy(s),this.v0.copy(s.v0),this.v1.copy(s.v1),this.v2.copy(s.v2),this.v3.copy(s.v3),this}toJSON(){const s=super.toJSON();return s.v0=this.v0.toArray(),s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s.v3=this.v3.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v0.fromArray(s.v0),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this.v3.fromArray(s.v3),this}}class F0 extends yd{constructor(s=new Pe,l=new Pe,m=new Pe,b=new Pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=s,this.v1=l,this.v2=m,this.v3=b}getPoint(s,l=new Pe){const m=l,b=this.v0,p=this.v1,i=this.v2,o=this.v3;return m.set(Cp(s,b.x,p.x,i.x,o.x),Cp(s,b.y,p.y,i.y,o.y),Cp(s,b.z,p.z,i.z,o.z)),m}copy(s){return super.copy(s),this.v0.copy(s.v0),this.v1.copy(s.v1),this.v2.copy(s.v2),this.v3.copy(s.v3),this}toJSON(){const s=super.toJSON();return s.v0=this.v0.toArray(),s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s.v3=this.v3.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v0.fromArray(s.v0),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this.v3.fromArray(s.v3),this}}class Km extends yd{constructor(s=new Sn,l=new Sn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=s,this.v2=l}getPoint(s,l=new Sn){const m=l;return 1===s?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(s).add(this.v1)),m}getPointAt(s,l){return this.getPoint(s,l)}getTangent(s,l=new Sn){return l.subVectors(this.v2,this.v1).normalize()}getTangentAt(s,l){return this.getTangent(s,l)}copy(s){return super.copy(s),this.v1.copy(s.v1),this.v2.copy(s.v2),this}toJSON(){const s=super.toJSON();return s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this}}class Jm extends yd{constructor(s=new Pe,l=new Pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=s,this.v2=l}getPoint(s,l=new Pe){const m=l;return 1===s?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(s).add(this.v1)),m}getPointAt(s,l){return this.getPoint(s,l)}getTangent(s,l=new Pe){return l.subVectors(this.v2,this.v1).normalize()}getTangentAt(s,l){return this.getTangent(s,l)}copy(s){return super.copy(s),this.v1.copy(s.v1),this.v2.copy(s.v2),this}toJSON(){const s=super.toJSON();return s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this}}class N0 extends yd{constructor(s=new Sn,l=new Sn,m=new Sn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=s,this.v1=l,this.v2=m}getPoint(s,l=new Sn){const m=l,b=this.v0,p=this.v1,i=this.v2;return m.set(Ym(s,b.x,p.x,i.x),Ym(s,b.y,p.y,i.y)),m}copy(s){return super.copy(s),this.v0.copy(s.v0),this.v1.copy(s.v1),this.v2.copy(s.v2),this}toJSON(){const s=super.toJSON();return s.v0=this.v0.toArray(),s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v0.fromArray(s.v0),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this}}class bd extends yd{constructor(s=new Pe,l=new Pe,m=new Pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=s,this.v1=l,this.v2=m}getPoint(s,l=new Pe){const m=l,b=this.v0,p=this.v1,i=this.v2;return m.set(Ym(s,b.x,p.x,i.x),Ym(s,b.y,p.y,i.y),Ym(s,b.z,p.z,i.z)),m}copy(s){return super.copy(s),this.v0.copy(s.v0),this.v1.copy(s.v1),this.v2.copy(s.v2),this}toJSON(){const s=super.toJSON();return s.v0=this.v0.toArray(),s.v1=this.v1.toArray(),s.v2=this.v2.toArray(),s}fromJSON(s){return super.fromJSON(s),this.v0.fromArray(s.v0),this.v1.fromArray(s.v1),this.v2.fromArray(s.v2),this}}class gy extends yd{constructor(s=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=s}getPoint(s,l=new Sn){const m=l,b=this.points,p=(b.length-1)*s,i=Math.floor(p),o=p-i,u=b[0===i?i:i-1],f=b[i],_=b[i>b.length-2?b.length-1:i+1],x=b[i>b.length-3?b.length-1:i+2];return m.set(yx(o,u.x,f.x,_.x,x.x),yx(o,u.y,f.y,_.y,x.y)),m}copy(s){super.copy(s),this.points=[];for(let l=0,m=s.points.length;l<m;l++)this.points.push(s.points[l].clone());return this}toJSON(){const s=super.toJSON();s.points=[];for(let l=0,m=this.points.length;l<m;l++)s.points.push(this.points[l].toArray());return s}fromJSON(s){super.fromJSON(s),this.points=[];for(let l=0,m=s.points.length;l<m;l++){const b=s.points[l];this.points.push((new Sn).fromArray(b))}return this}}var _y=Object.freeze({__proto__:null,ArcCurve:l_,CatmullRomCurve3:u_,CubicBezierCurve:js,CubicBezierCurve3:F0,EllipseCurve:Ro,LineCurve:Km,LineCurve3:Jm,QuadraticBezierCurve:N0,QuadraticBezierCurve3:bd,SplineCurve:gy});class d_ extends yd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(s){this.curves.push(s)}closePath(){const s=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);s.equals(l)||this.curves.push(new Km(l,s))}getPoint(s,l){const m=s*this.getLength(),b=this.getCurveLengths();let p=0;for(;p<b.length;){if(b[p]>=m){const i=b[p]-m,o=this.curves[p],u=o.getLength();return o.getPointAt(0===u?0:1-i/u,l)}p++}return null}getLength(){const s=this.getCurveLengths();return s[s.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const s=[];let l=0;for(let m=0,b=this.curves.length;m<b;m++)l+=this.curves[m].getLength(),s.push(l);return this.cacheLengths=s,s}getSpacedPoints(s=40){const l=[];for(let m=0;m<=s;m++)l.push(this.getPoint(m/s));return this.autoClose&&l.push(l[0]),l}getPoints(s=12){const l=[];let m;for(let b=0,p=this.curves;b<p.length;b++){const i=p[b],u=i.getPoints(i.isEllipseCurve?2*s:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?s*i.points.length:s);for(let f=0;f<u.length;f++){const _=u[f];m&&m.equals(_)||(l.push(_),m=_)}}return this.autoClose&&l.length>1&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l}copy(s){super.copy(s),this.curves=[];for(let l=0,m=s.curves.length;l<m;l++)this.curves.push(s.curves[l].clone());return this.autoClose=s.autoClose,this}toJSON(){const s=super.toJSON();s.autoClose=this.autoClose,s.curves=[];for(let l=0,m=this.curves.length;l<m;l++)s.curves.push(this.curves[l].toJSON());return s}fromJSON(s){super.fromJSON(s),this.autoClose=s.autoClose,this.curves=[];for(let l=0,m=s.curves.length;l<m;l++){const b=s.curves[l];this.curves.push((new _y[b.type]).fromJSON(b))}return this}}class Qm extends d_{constructor(s){super(),this.type="Path",this.currentPoint=new Sn,s&&this.setFromPoints(s)}setFromPoints(s){this.moveTo(s[0].x,s[0].y);for(let l=1,m=s.length;l<m;l++)this.lineTo(s[l].x,s[l].y);return this}moveTo(s,l){return this.currentPoint.set(s,l),this}lineTo(s,l){const m=new Km(this.currentPoint.clone(),new Sn(s,l));return this.curves.push(m),this.currentPoint.set(s,l),this}quadraticCurveTo(s,l,m,b){const p=new N0(this.currentPoint.clone(),new Sn(s,l),new Sn(m,b));return this.curves.push(p),this.currentPoint.set(m,b),this}bezierCurveTo(s,l,m,b,p,i){const o=new js(this.currentPoint.clone(),new Sn(s,l),new Sn(m,b),new Sn(p,i));return this.curves.push(o),this.currentPoint.set(p,i),this}splineThru(s){const l=[this.currentPoint.clone()].concat(s),m=new gy(l);return this.curves.push(m),this.currentPoint.copy(s[s.length-1]),this}arc(s,l,m,b,p,i){return this.absarc(s+this.currentPoint.x,l+this.currentPoint.y,m,b,p,i),this}absarc(s,l,m,b,p,i){return this.absellipse(s,l,m,m,b,p,i),this}ellipse(s,l,m,b,p,i,o,u){return this.absellipse(s+this.currentPoint.x,l+this.currentPoint.y,m,b,p,i,o,u),this}absellipse(s,l,m,b,p,i,o,u){const f=new Ro(s,l,m,b,p,i,o,u);if(this.curves.length>0){const x=f.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(f);const _=f.getPoint(1);return this.currentPoint.copy(_),this}copy(s){return super.copy(s),this.currentPoint.copy(s.currentPoint),this}toJSON(){const s=super.toJSON();return s.currentPoint=this.currentPoint.toArray(),s}fromJSON(s){return super.fromJSON(s),this.currentPoint.fromArray(s.currentPoint),this}}class df extends ai{constructor(s=[new Sn(0,-.5),new Sn(.5,0),new Sn(0,.5)],l=12,m=0,b=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:s,segments:l,phiStart:m,phiLength:b},l=Math.floor(l),b=kr(b,0,2*Math.PI);const p=[],i=[],o=[],u=[],f=[],_=1/l,x=new Pe,M=new Sn,E=new Pe,D=new Pe,k=new Pe;let O=0,I=0;for(let U=0;U<=s.length-1;U++)switch(U){case 0:O=s[U+1].x-s[U].x,I=s[U+1].y-s[U].y,E.x=1*I,E.y=-O,E.z=0*I,k.copy(E),E.normalize(),u.push(E.x,E.y,E.z);break;case s.length-1:u.push(k.x,k.y,k.z);break;default:O=s[U+1].x-s[U].x,I=s[U+1].y-s[U].y,E.x=1*I,E.y=-O,E.z=0*I,D.copy(E),E.x+=k.x,E.y+=k.y,E.z+=k.z,E.normalize(),u.push(E.x,E.y,E.z),k.copy(D)}for(let U=0;U<=l;U++){const B=m+U*_*b,j=Math.sin(B),$=Math.cos(B);for(let G=0;G<=s.length-1;G++)x.x=s[G].x*j,x.y=s[G].y,x.z=s[G].x*$,i.push(x.x,x.y,x.z),M.x=U/l,M.y=G/(s.length-1),o.push(M.x,M.y),f.push(u[3*G+0]*j,u[3*G+1],u[3*G+0]*$)}for(let U=0;U<l;U++)for(let B=0;B<s.length-1;B++){const j=B+U*s.length,G=j+s.length,Q=j+s.length+1,J=j+1;p.push(j,G,J),p.push(Q,J,G)}this.setIndex(p),this.setAttribute("position",new oi(i,3)),this.setAttribute("uv",new oi(o,2)),this.setAttribute("normal",new oi(f,3))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new df(s.points,s.segments,s.phiStart,s.phiLength)}}class lh extends df{constructor(s=1,l=1,m=4,b=8){const p=new Qm;p.absarc(0,-l/2,s,1.5*Math.PI,0),p.absarc(0,l/2,s,0,.5*Math.PI),super(p.getPoints(m),b),this.type="CapsuleGeometry",this.parameters={radius:s,height:l,capSegments:m,radialSegments:b}}static fromJSON(s){return new lh(s.radius,s.length,s.capSegments,s.radialSegments)}}class Vc extends ai{constructor(s=1,l=32,m=0,b=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:s,segments:l,thetaStart:m,thetaLength:b},l=Math.max(3,l);const p=[],i=[],o=[],u=[],f=new Pe,_=new Sn;i.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let x=0,M=3;x<=l;x++,M+=3){const E=m+x/l*b;f.x=s*Math.cos(E),f.y=s*Math.sin(E),i.push(f.x,f.y,f.z),o.push(0,0,1),_.x=(i[M]/s+1)/2,_.y=(i[M+1]/s+1)/2,u.push(_.x,_.y)}for(let x=1;x<=l;x++)p.push(x,x+1,0);this.setIndex(p),this.setAttribute("position",new oi(i,3)),this.setAttribute("normal",new oi(o,3)),this.setAttribute("uv",new oi(u,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new Vc(s.radius,s.segments,s.thetaStart,s.thetaLength)}}class uh extends ai{constructor(s=1,l=1,m=1,b=32,p=1,i=!1,o=0,u=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:s,radiusBottom:l,height:m,radialSegments:b,heightSegments:p,openEnded:i,thetaStart:o,thetaLength:u};const f=this;b=Math.floor(b),p=Math.floor(p);const _=[],x=[],M=[],E=[];let D=0;const k=[],O=m/2;let I=0;function B(j){const $=D,G=new Sn,Q=new Pe;let J=0;const Y=!0===j?s:l,ee=!0===j?1:-1;for(let xe=1;xe<=b;xe++)x.push(0,O*ee,0),M.push(0,ee,0),E.push(.5,.5),D++;const he=D;for(let xe=0;xe<=b;xe++){const ce=xe/b*u+o,de=Math.cos(ce),Ye=Math.sin(ce);Q.x=Y*Ye,Q.y=O*ee,Q.z=Y*de,x.push(Q.x,Q.y,Q.z),M.push(0,ee,0),G.x=.5*de+.5,G.y=.5*Ye*ee+.5,E.push(G.x,G.y),D++}for(let xe=0;xe<b;xe++){const fe=$+xe,ce=he+xe;!0===j?_.push(ce,ce+1,fe):_.push(ce+1,ce,fe),J+=3}f.addGroup(I,J,!0===j?1:2),I+=J}(function U(){const j=new Pe,$=new Pe;let G=0;const Q=(l-s)/m;for(let J=0;J<=p;J++){const Y=[],ee=J/p,he=ee*(l-s)+s;for(let xe=0;xe<=b;xe++){const fe=xe/b,ce=fe*u+o,de=Math.sin(ce),Ye=Math.cos(ce);$.x=he*de,$.y=-ee*m+O,$.z=he*Ye,x.push($.x,$.y,$.z),j.set(de,Q,Ye).normalize(),M.push(j.x,j.y,j.z),E.push(fe,1-ee),Y.push(D++)}k.push(Y)}for(let J=0;J<b;J++)for(let Y=0;Y<p;Y++){const he=k[Y+1][J],xe=k[Y+1][J+1],fe=k[Y][J+1];_.push(k[Y][J],he,fe),_.push(he,xe,fe),G+=6}f.addGroup(I,G,0),I+=G})(),!1===i&&(s>0&&B(!0),l>0&&B(!1)),this.setIndex(_),this.setAttribute("position",new oi(x,3)),this.setAttribute("normal",new oi(M,3)),this.setAttribute("uv",new oi(E,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new uh(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength)}}class xd extends uh{constructor(s=1,l=1,m=32,b=1,p=!1,i=0,o=2*Math.PI){super(0,s,l,m,b,p,i,o),this.type="ConeGeometry",this.parameters={radius:s,height:l,radialSegments:m,heightSegments:b,openEnded:p,thetaStart:i,thetaLength:o}}static fromJSON(s){return new xd(s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength)}}class zc extends ai{constructor(s=[],l=[],m=1,b=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:s,indices:l,radius:m,detail:b};const p=[],i=[];function u(U,B,j,$){const G=$+1,Q=[];for(let J=0;J<=G;J++){Q[J]=[];const Y=U.clone().lerp(j,J/G),ee=B.clone().lerp(j,J/G),he=G-J;for(let xe=0;xe<=he;xe++)Q[J][xe]=0===xe&&J===G?Y:Y.clone().lerp(ee,xe/he)}for(let J=0;J<G;J++)for(let Y=0;Y<2*(G-J)-1;Y++){const ee=Math.floor(Y/2);Y%2==0?(M(Q[J][ee+1]),M(Q[J+1][ee]),M(Q[J][ee])):(M(Q[J][ee+1]),M(Q[J+1][ee+1]),M(Q[J+1][ee]))}}function M(U){p.push(U.x,U.y,U.z)}function E(U,B){const j=3*U;B.x=s[j+0],B.y=s[j+1],B.z=s[j+2]}function k(U,B,j,$){$<0&&1===U.x&&(i[B]=U.x-1),0===j.x&&0===j.z&&(i[B]=$/2/Math.PI+.5)}function O(U){return Math.atan2(U.z,-U.x)}function I(U){return Math.atan2(-U.y,Math.sqrt(U.x*U.x+U.z*U.z))}(function o(U){const B=new Pe,j=new Pe,$=new Pe;for(let G=0;G<l.length;G+=3)E(l[G+0],B),E(l[G+1],j),E(l[G+2],$),u(B,j,$,U)})(b),function f(U){const B=new Pe;for(let j=0;j<p.length;j+=3)B.x=p[j+0],B.y=p[j+1],B.z=p[j+2],B.normalize().multiplyScalar(U),p[j+0]=B.x,p[j+1]=B.y,p[j+2]=B.z}(m),function _(){const U=new Pe;for(let B=0;B<p.length;B+=3){U.x=p[B+0],U.y=p[B+1],U.z=p[B+2];const j=O(U)/2/Math.PI+.5,$=I(U)/Math.PI+.5;i.push(j,1-$)}(function D(){const U=new Pe,B=new Pe,j=new Pe,$=new Pe,G=new Sn,Q=new Sn,J=new Sn;for(let Y=0,ee=0;Y<p.length;Y+=9,ee+=6){U.set(p[Y+0],p[Y+1],p[Y+2]),B.set(p[Y+3],p[Y+4],p[Y+5]),j.set(p[Y+6],p[Y+7],p[Y+8]),G.set(i[ee+0],i[ee+1]),Q.set(i[ee+2],i[ee+3]),J.set(i[ee+4],i[ee+5]),$.copy(U).add(B).add(j).divideScalar(3);const he=O($);k(G,ee+0,U,he),k(Q,ee+2,B,he),k(J,ee+4,j,he)}})(),function x(){for(let U=0;U<i.length;U+=6){const B=i[U+0],j=i[U+2],$=i[U+4],G=Math.max(B,j,$),Q=Math.min(B,j,$);G>.9&&Q<.1&&(B<.2&&(i[U+0]+=1),j<.2&&(i[U+2]+=1),$<.2&&(i[U+4]+=1))}}()}(),this.setAttribute("position",new oi(p,3)),this.setAttribute("normal",new oi(p.slice(),3)),this.setAttribute("uv",new oi(i,2)),0===b?this.computeVertexNormals():this.normalizeNormals()}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new zc(s.vertices,s.indices,s.radius,s.details)}}class Cu extends zc{constructor(s=1,l=0){const m=(1+Math.sqrt(5))/2,b=1/m;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-b,-m,0,-b,m,0,b,-m,0,b,m,-b,-m,0,-b,m,0,b,-m,0,b,m,0,-m,0,-b,m,0,-b,-m,0,b,m,0,b],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s,l),this.type="DodecahedronGeometry",this.parameters={radius:s,detail:l}}static fromJSON(s){return new Cu(s.radius,s.detail)}}const Tp=new Pe,Ap=new Pe,eg=new Pe,tg=new yo;class hf extends ai{constructor(s=null,l=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:s,thresholdAngle:l},null!==s){const b=Math.pow(10,4),p=Math.cos(Ra*l),i=s.getIndex(),o=s.getAttribute("position"),u=i?i.count:o.count,f=[0,0,0],_=["a","b","c"],x=new Array(3),M={},E=[];for(let D=0;D<u;D+=3){i?(f[0]=i.getX(D),f[1]=i.getX(D+1),f[2]=i.getX(D+2)):(f[0]=D,f[1]=D+1,f[2]=D+2);const{a:k,b:O,c:I}=tg;if(k.fromBufferAttribute(o,f[0]),O.fromBufferAttribute(o,f[1]),I.fromBufferAttribute(o,f[2]),tg.getNormal(eg),x[0]=`${Math.round(k.x*b)},${Math.round(k.y*b)},${Math.round(k.z*b)}`,x[1]=`${Math.round(O.x*b)},${Math.round(O.y*b)},${Math.round(O.z*b)}`,x[2]=`${Math.round(I.x*b)},${Math.round(I.y*b)},${Math.round(I.z*b)}`,x[0]!==x[1]&&x[1]!==x[2]&&x[2]!==x[0])for(let U=0;U<3;U++){const B=(U+1)%3,j=x[U],$=x[B],G=tg[_[U]],Q=tg[_[B]],J=`${j}_${$}`,Y=`${$}_${j}`;Y in M&&M[Y]?(eg.dot(M[Y].normal)<=p&&(E.push(G.x,G.y,G.z),E.push(Q.x,Q.y,Q.z)),M[Y]=null):J in M||(M[J]={index0:f[U],index1:f[B],normal:eg.clone()})}}for(const D in M)if(M[D]){const{index0:k,index1:O}=M[D];Tp.fromBufferAttribute(o,k),Ap.fromBufferAttribute(o,O),E.push(Tp.x,Tp.y,Tp.z),E.push(Ap.x,Ap.y,Ap.z)}this.setAttribute("position",new oi(E,3))}}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}}class Dp extends Qm{constructor(s){super(s),this.uuid=go(),this.type="Shape",this.holes=[]}getPointsHoles(s){const l=[];for(let m=0,b=this.holes.length;m<b;m++)l[m]=this.holes[m].getPoints(s);return l}extractPoints(s){return{shape:this.getPoints(s),holes:this.getPointsHoles(s)}}copy(s){super.copy(s),this.holes=[];for(let l=0,m=s.holes.length;l<m;l++)this.holes.push(s.holes[l].clone());return this}toJSON(){const s=super.toJSON();s.uuid=this.uuid,s.holes=[];for(let l=0,m=this.holes.length;l<m;l++)s.holes.push(this.holes[l].toJSON());return s}fromJSON(s){super.fromJSON(s),this.uuid=s.uuid,this.holes=[];for(let l=0,m=s.holes.length;l<m;l++){const b=s.holes[l];this.holes.push((new Qm).fromJSON(b))}return this}}function wx(S,s,l,m,b){let p,i;if(b===function h_(S,s,l,m){let b=0;for(let p=s,i=l-m;p<l;p+=m)b+=(S[i]-S[p])*(S[p+1]+S[i+1]),i=p;return b}(S,s,l,m)>0)for(p=s;p<l;p+=m)i=yy(p,S[p],S[p+1],i);else for(p=l-m;p>=s;p-=m)i=yy(p,S[p],S[p+1],i);return i&&ls(i,i.next)&&(Lp(i),i=i.next),i}function Au(S,s){if(!S)return S;s||(s=S);let m,l=S;do{if(m=!1,l.steiner||!ls(l,l.next)&&0!==Ls(l.prev,l,l.next))l=l.next;else{if(Lp(l),l=s=l.prev,l===l.next)break;m=!0}}while(m||l!==s);return s}function $l(S,s,l,m,b,p,i){if(!S)return;!i&&p&&function vw(S,s,l,m){let b=S;do{0===b.z&&(b.z=ng(b.x,b.y,s,l,m)),b.prevZ=b.prev,b.nextZ=b.next,b=b.next}while(b!==S);b.prevZ.nextZ=null,b.prevZ=null,function yw(S){let s,l,m,b,p,i,o,u,f=1;do{for(l=S,S=null,p=null,i=0;l;){for(i++,m=l,o=0,s=0;s<f&&(o++,m=m.nextZ,m);s++);for(u=f;o>0||u>0&&m;)0!==o&&(0===u||!m||l.z<=m.z)?(b=l,l=l.nextZ,o--):(b=m,m=m.nextZ,u--),p?p.nextZ=b:S=b,b.prevZ=p,p=b;l=m}p.nextZ=null,f*=2}while(i>1)}(b)}(S,m,b,p);let u,f,o=S;for(;S.prev!==S.next;)if(u=S.prev,f=S.next,p?gw(S,m,b,p):Rp(S))s.push(u.i/l|0),s.push(S.i/l|0),s.push(f.i/l|0),Lp(S),S=f.next,o=f.next;else if((S=f)===o){i?1===i?$l(S=ff(Au(S),s,l),s,l,m,b,p,2):2===i&&vy(S,s,l,m,b,p):$l(Au(S),s,l,m,b,p,1);break}}function Rp(S){const s=S.prev,l=S,m=S.next;if(Ls(s,l,m)>=0)return!1;const b=s.x,p=l.x,i=m.x,o=s.y,u=l.y,f=m.y,_=b<p?b<i?b:i:p<i?p:i,x=o<u?o<f?o:f:u<f?u:f,M=b>p?b>i?b:i:p>i?p:i,E=o>u?o>f?o:f:u>f?u:f;let D=m.next;for(;D!==s;){if(D.x>=_&&D.x<=M&&D.y>=x&&D.y<=E&&Du(b,o,p,u,i,f,D.x,D.y)&&Ls(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function gw(S,s,l,m){const b=S.prev,p=S,i=S.next;if(Ls(b,p,i)>=0)return!1;const o=b.x,u=p.x,f=i.x,_=b.y,x=p.y,M=i.y,E=o<u?o<f?o:f:u<f?u:f,D=_<x?_<M?_:M:x<M?x:M,k=o>u?o>f?o:f:u>f?u:f,O=_>x?_>M?_:M:x>M?x:M,I=ng(E,D,s,l,m),U=ng(k,O,s,l,m);let B=S.prevZ,j=S.nextZ;for(;B&&B.z>=I&&j&&j.z<=U;){if(B.x>=E&&B.x<=k&&B.y>=D&&B.y<=O&&B!==b&&B!==i&&Du(o,_,u,x,f,M,B.x,B.y)&&Ls(B.prev,B,B.next)>=0||(B=B.prevZ,j.x>=E&&j.x<=k&&j.y>=D&&j.y<=O&&j!==b&&j!==i&&Du(o,_,u,x,f,M,j.x,j.y)&&Ls(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;B&&B.z>=I;){if(B.x>=E&&B.x<=k&&B.y>=D&&B.y<=O&&B!==b&&B!==i&&Du(o,_,u,x,f,M,B.x,B.y)&&Ls(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;j&&j.z<=U;){if(j.x>=E&&j.x<=k&&j.y>=D&&j.y<=O&&j!==b&&j!==i&&Du(o,_,u,x,f,M,j.x,j.y)&&Ls(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function ff(S,s,l){let m=S;do{const b=m.prev,p=m.next.next;!ls(b,p)&&ig(b,m,m.next,p)&&mf(b,p)&&mf(p,b)&&(s.push(b.i/l|0),s.push(m.i/l|0),s.push(p.i/l|0),Lp(m),Lp(m.next),m=S=p),m=m.next}while(m!==S);return Au(m)}function vy(S,s,l,m,b,p){let i=S;do{let o=i.next.next;for(;o!==i.prev;){if(i.i!==o.i&&Ru(i,o)){let u=Cx(i,o);return i=Au(i,i.next),u=Au(u,u.next),$l(i,s,l,m,b,p,0),void $l(u,s,l,m,b,p,0)}o=o.next}i=i.next}while(i!==S)}function Be(S,s){return S.x-s.x}function Ip(S,s){const l=function _w(S,s){let b,l=s,m=-1/0;const p=S.x,i=S.y;do{if(i<=l.y&&i>=l.next.y&&l.next.y!==l.y){const M=l.x+(i-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(M<=p&&M>m&&(m=M,b=l.x<l.next.x?l:l.next,M===p))return b}l=l.next}while(l!==s);if(!b)return null;const o=b,u=b.x,f=b.y;let x,_=1/0;l=b;do{p>=l.x&&l.x>=u&&p!==l.x&&Du(i<f?p:m,i,u,f,i<f?m:p,i,l.x,l.y)&&(x=Math.abs(i-l.y)/(p-l.x),mf(l,S)&&(x<_||x===_&&(l.x>b.x||l.x===b.x&&Ex(b,l)))&&(b=l,_=x)),l=l.next}while(l!==o);return b}(S,s);if(!l)return s;const m=Cx(l,S);return Au(m,m.next),Au(l,l.next)}function Ex(S,s){return Ls(S.prev,S,s.prev)<0&&Ls(s.next,S,S.next)<0}function ng(S,s,l,m,b){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=(S-l)*b|0)|S<<8))|S<<4))|S<<2))|S<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*b|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function pf(S){let s=S,l=S;do{(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next}while(s!==S);return l}function Du(S,s,l,m,b,p,i,o){return(b-i)*(s-o)>=(S-i)*(p-o)&&(S-i)*(m-o)>=(l-i)*(s-o)&&(l-i)*(p-o)>=(b-i)*(m-o)}function Ru(S,s){return S.next.i!==s.i&&S.prev.i!==s.i&&!function rg(S,s){let l=S;do{if(l.i!==S.i&&l.next.i!==S.i&&l.i!==s.i&&l.next.i!==s.i&&ig(l,l.next,S,s))return!0;l=l.next}while(l!==S);return!1}(S,s)&&(mf(S,s)&&mf(s,S)&&function kp(S,s){let l=S,m=!1;const b=(S.x+s.x)/2,p=(S.y+s.y)/2;do{l.y>p!=l.next.y>p&&l.next.y!==l.y&&b<(l.next.x-l.x)*(p-l.y)/(l.next.y-l.y)+l.x&&(m=!m),l=l.next}while(l!==S);return m}(S,s)&&(Ls(S.prev,S,s.prev)||Ls(S,s.prev,s))||ls(S,s)&&Ls(S.prev,S,S.next)>0&&Ls(s.prev,s,s.next)>0)}function Ls(S,s,l){return(s.y-S.y)*(l.x-s.x)-(s.x-S.x)*(l.y-s.y)}function ls(S,s){return S.x===s.x&&S.y===s.y}function ig(S,s,l,m){const b=dh(Ls(S,s,l)),p=dh(Ls(S,s,m)),i=dh(Ls(l,m,S)),o=dh(Ls(l,m,s));return!!(b!==p&&i!==o||0===b&&Pp(S,l,s)||0===p&&Pp(S,m,s)||0===i&&Pp(l,S,m)||0===o&&Pp(l,s,m))}function Pp(S,s,l){return s.x<=Math.max(S.x,l.x)&&s.x>=Math.min(S.x,l.x)&&s.y<=Math.max(S.y,l.y)&&s.y>=Math.min(S.y,l.y)}function dh(S){return S>0?1:S<0?-1:0}function mf(S,s){return Ls(S.prev,S,S.next)<0?Ls(S,s,S.next)>=0&&Ls(S,S.prev,s)>=0:Ls(S,s,S.prev)<0||Ls(S,S.next,s)<0}function Cx(S,s){const l=new Op(S.i,S.x,S.y),m=new Op(s.i,s.x,s.y),b=S.next,p=s.prev;return S.next=s,s.prev=S,l.next=b,b.prev=l,m.next=l,l.prev=m,p.next=m,m.prev=p,m}function yy(S,s,l,m){const b=new Op(S,s,l);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function Lp(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function Op(S,s,l){this.i=S,this.x=s,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Iu{static area(s){const l=s.length;let m=0;for(let b=l-1,p=0;p<l;b=p++)m+=s[b].x*s[p].y-s[p].x*s[b].y;return.5*m}static isClockWise(s){return Iu.area(s)<0}static triangulateShape(s,l){const m=[],b=[],p=[];Md(s),by(m,s);let i=s.length;l.forEach(Md);for(let u=0;u<l.length;u++)b.push(i),i+=l[u].length,by(m,l[u]);const o=function(S,s,l=2){const m=s&&s.length,b=m?s[0]*l:S.length;let p=wx(S,0,b,l,!0);const i=[];if(!p||p.next===p.prev)return i;let o,u,f,_,x,M,E;if(m&&(p=function Sx(S,s,l,m){const b=[];let p,i,o,u,f;for(p=0,i=s.length;p<i;p++)o=s[p]*m,u=p<i-1?s[p+1]*m:S.length,f=wx(S,o,u,m,!1),f===f.next&&(f.steiner=!0),b.push(pf(f));for(b.sort(Be),p=0;p<b.length;p++)l=Ip(b[p],l);return l}(S,s,p,l)),S.length>80*l){o=f=S[0],u=_=S[1];for(let D=l;D<b;D+=l)x=S[D],M=S[D+1],x<o&&(o=x),M<u&&(u=M),x>f&&(f=x),M>_&&(_=M);E=Math.max(f-o,_-u),E=0!==E?32767/E:0}return $l(p,i,l,o,u,E,0),i}(m,b);for(let u=0;u<o.length;u+=3)p.push(o.slice(u,u+3));return p}}function Md(S){const s=S.length;s>2&&S[s-1].equals(S[0])&&S.pop()}function by(S,s){for(let l=0;l<s.length;l++)S.push(s[l].x),S.push(s[l].y)}class la extends ai{constructor(s=new Dp([new Sn(.5,.5),new Sn(-.5,.5),new Sn(-.5,-.5),new Sn(.5,-.5)]),l={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:s,options:l},s=Array.isArray(s)?s:[s];const m=this,b=[],p=[];for(let o=0,u=s.length;o<u;o++)i(s[o]);function i(o){const u=[],f=void 0!==l.curveSegments?l.curveSegments:12,_=void 0!==l.steps?l.steps:1,x=void 0!==l.depth?l.depth:1;let M=void 0===l.bevelEnabled||l.bevelEnabled,E=void 0!==l.bevelThickness?l.bevelThickness:.2,D=void 0!==l.bevelSize?l.bevelSize:E-.1,k=void 0!==l.bevelOffset?l.bevelOffset:0,O=void 0!==l.bevelSegments?l.bevelSegments:3;const I=l.extrudePath,U=void 0!==l.UVGenerator?l.UVGenerator:ya;let B,$,G,Q,J,j=!1;I&&(B=I.getSpacedPoints(_),j=!0,M=!1,$=I.computeFrenetFrames(_,!1),G=new Pe,Q=new Pe,J=new Pe),M||(O=0,E=0,D=0,k=0);const Y=o.extractPoints(f);let ee=Y.shape;const he=Y.holes;if(!Iu.isClockWise(ee)){ee=ee.reverse();for(let je=0,Tt=he.length;je<Tt;je++){const Ut=he[je];Iu.isClockWise(Ut)&&(he[je]=Ut.reverse())}}const fe=Iu.triangulateShape(ee,he),ce=ee;for(let je=0,Tt=he.length;je<Tt;je++)ee=ee.concat(he[je]);function de(je,Tt,Ut){return Tt||console.error("THREE.ExtrudeGeometry: vec does not exist"),je.clone().addScaledVector(Tt,Ut)}const Ye=ee.length,Qe=fe.length;function Ne(je,Tt,Ut){let Nt,en,tt;const wt=je.x-Tt.x,Bt=je.y-Tt.y,En=Ut.x-je.x,cn=Ut.y-je.y,Ae=wt*wt+Bt*Bt;if(Math.abs(wt*cn-Bt*En)>Number.EPSILON){const dt=Math.sqrt(Ae),Ot=Math.sqrt(En*En+cn*cn),hn=Tt.x-Bt/dt,we=Tt.y+wt/dt,nt=((Ut.x-cn/Ot-hn)*cn-(Ut.y+En/Ot-we)*En)/(wt*cn-Bt*En);Nt=hn+wt*nt-je.x,en=we+Bt*nt-je.y;const zt=Nt*Nt+en*en;if(zt<=2)return new Sn(Nt,en);tt=Math.sqrt(zt/2)}else{let dt=!1;wt>Number.EPSILON?En>Number.EPSILON&&(dt=!0):wt<-Number.EPSILON?En<-Number.EPSILON&&(dt=!0):Math.sign(Bt)===Math.sign(cn)&&(dt=!0),dt?(Nt=-Bt,en=wt,tt=Math.sqrt(Ae)):(Nt=wt,en=Bt,tt=Math.sqrt(Ae/2))}return new Sn(Nt/tt,en/tt)}const $e=[];for(let je=0,Tt=ce.length,Ut=Tt-1,Nt=je+1;je<Tt;je++,Ut++,Nt++)Ut===Tt&&(Ut=0),Nt===Tt&&(Nt=0),$e[je]=Ne(ce[je],ce[Ut],ce[Nt]);const et=[];let Pt,Dt=$e.concat();for(let je=0,Tt=he.length;je<Tt;je++){const Ut=he[je];Pt=[];for(let Nt=0,en=Ut.length,tt=en-1,wt=Nt+1;Nt<en;Nt++,tt++,wt++)tt===en&&(tt=0),wt===en&&(wt=0),Pt[Nt]=Ne(Ut[Nt],Ut[tt],Ut[wt]);et.push(Pt),Dt=Dt.concat(Pt)}for(let je=0;je<O;je++){const Tt=je/O,Ut=E*Math.cos(Tt*Math.PI/2),Nt=D*Math.sin(Tt*Math.PI/2)+k;for(let en=0,tt=ce.length;en<tt;en++){const wt=de(ce[en],$e[en],Nt);Ve(wt.x,wt.y,-Ut)}for(let en=0,tt=he.length;en<tt;en++){const wt=he[en];Pt=et[en];for(let Bt=0,En=wt.length;Bt<En;Bt++){const cn=de(wt[Bt],Pt[Bt],Nt);Ve(cn.x,cn.y,-Ut)}}}const Ze=D+k;for(let je=0;je<Ye;je++){const Tt=M?de(ee[je],Dt[je],Ze):ee[je];j?(Q.copy($.normals[0]).multiplyScalar(Tt.x),G.copy($.binormals[0]).multiplyScalar(Tt.y),J.copy(B[0]).add(Q).add(G),Ve(J.x,J.y,J.z)):Ve(Tt.x,Tt.y,0)}for(let je=1;je<=_;je++)for(let Tt=0;Tt<Ye;Tt++){const Ut=M?de(ee[Tt],Dt[Tt],Ze):ee[Tt];j?(Q.copy($.normals[je]).multiplyScalar(Ut.x),G.copy($.binormals[je]).multiplyScalar(Ut.y),J.copy(B[je]).add(Q).add(G),Ve(J.x,J.y,J.z)):Ve(Ut.x,Ut.y,x/_*je)}for(let je=O-1;je>=0;je--){const Tt=je/O,Ut=E*Math.cos(Tt*Math.PI/2),Nt=D*Math.sin(Tt*Math.PI/2)+k;for(let en=0,tt=ce.length;en<tt;en++){const wt=de(ce[en],$e[en],Nt);Ve(wt.x,wt.y,x+Ut)}for(let en=0,tt=he.length;en<tt;en++){const wt=he[en];Pt=et[en];for(let Bt=0,En=wt.length;Bt<En;Bt++){const cn=de(wt[Bt],Pt[Bt],Nt);j?Ve(cn.x,cn.y+B[_-1].y,B[_-1].x+Ut):Ve(cn.x,cn.y,x+Ut)}}}function tn(je,Tt){let Ut=je.length;for(;--Ut>=0;){const Nt=Ut;let en=Ut-1;en<0&&(en=je.length-1);for(let tt=0,wt=_+2*O;tt<wt;tt++){const Bt=Ye*tt,En=Ye*(tt+1);Ft(Tt+Nt+Bt,Tt+en+Bt,Tt+en+En,Tt+Nt+En)}}}function Ve(je,Tt,Ut){u.push(je),u.push(Tt),u.push(Ut)}function St(je,Tt,Ut){Et(je),Et(Tt),Et(Ut);const Nt=b.length/3,en=U.generateTopUV(m,b,Nt-3,Nt-2,Nt-1);an(en[0]),an(en[1]),an(en[2])}function Ft(je,Tt,Ut,Nt){Et(je),Et(Tt),Et(Nt),Et(Tt),Et(Ut),Et(Nt);const en=b.length/3,tt=U.generateSideWallUV(m,b,en-6,en-3,en-2,en-1);an(tt[0]),an(tt[1]),an(tt[3]),an(tt[1]),an(tt[2]),an(tt[3])}function Et(je){b.push(u[3*je+0]),b.push(u[3*je+1]),b.push(u[3*je+2])}function an(je){p.push(je.x),p.push(je.y)}(function at(){const je=b.length/3;if(M){let Tt=0,Ut=Ye*Tt;for(let Nt=0;Nt<Qe;Nt++){const en=fe[Nt];St(en[2]+Ut,en[1]+Ut,en[0]+Ut)}Tt=_+2*O,Ut=Ye*Tt;for(let Nt=0;Nt<Qe;Nt++){const en=fe[Nt];St(en[0]+Ut,en[1]+Ut,en[2]+Ut)}}else{for(let Tt=0;Tt<Qe;Tt++){const Ut=fe[Tt];St(Ut[2],Ut[1],Ut[0])}for(let Tt=0;Tt<Qe;Tt++){const Ut=fe[Tt];St(Ut[0]+Ye*_,Ut[1]+Ye*_,Ut[2]+Ye*_)}}m.addGroup(je,b.length/3-je,0)})(),function bt(){const je=b.length/3;let Tt=0;tn(ce,Tt),Tt+=ce.length;for(let Ut=0,Nt=he.length;Ut<Nt;Ut++){const en=he[Ut];tn(en,Tt),Tt+=en.length}m.addGroup(je,b.length/3-je,1)}()}this.setAttribute("position",new oi(b,3)),this.setAttribute("uv",new oi(p,2)),this.computeVertexNormals()}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}toJSON(){const s=super.toJSON();return function bw(S,s,l){if(l.shapes=[],Array.isArray(S))for(let m=0,b=S.length;m<b;m++)l.shapes.push(S[m].uuid);else l.shapes.push(S.uuid);return l.options=Object.assign({},s),void 0!==s.extrudePath&&(l.options.extrudePath=s.extrudePath.toJSON()),l}(this.parameters.shapes,this.parameters.options,s)}static fromJSON(s,l){const m=[];for(let p=0,i=s.shapes.length;p<i;p++)m.push(l[s.shapes[p]]);const b=s.options.extrudePath;return void 0!==b&&(s.options.extrudePath=(new _y[b.type]).fromJSON(b)),new la(m,s.options)}}const ya={generateTopUV:function(S,s,l,m,b){const o=s[3*m],u=s[3*m+1],f=s[3*b],_=s[3*b+1];return[new Sn(s[3*l],s[3*l+1]),new Sn(o,u),new Sn(f,_)]},generateSideWallUV:function(S,s,l,m,b,p){const i=s[3*l],o=s[3*l+1],u=s[3*l+2],f=s[3*m],_=s[3*m+1],x=s[3*m+2],M=s[3*b],E=s[3*b+1],D=s[3*b+2],k=s[3*p],O=s[3*p+1],I=s[3*p+2];return Math.abs(o-_)<Math.abs(i-f)?[new Sn(i,1-u),new Sn(f,1-x),new Sn(M,1-D),new Sn(k,1-I)]:[new Sn(o,1-u),new Sn(_,1-x),new Sn(E,1-D),new Sn(O,1-I)]}};class U0 extends zc{constructor(s=1,l=0){const m=(1+Math.sqrt(5))/2;super([-1,m,0,1,m,0,-1,-m,0,1,-m,0,0,-1,m,0,1,m,0,-1,-m,0,1,-m,m,0,-1,m,0,1,-m,0,-1,-m,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],s,l),this.type="IcosahedronGeometry",this.parameters={radius:s,detail:l}}static fromJSON(s){return new U0(s.radius,s.detail)}}class wd extends zc{constructor(s=1,l=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],s,l),this.type="OctahedronGeometry",this.parameters={radius:s,detail:l}}static fromJSON(s){return new wd(s.radius,s.detail)}}class hh extends ai{constructor(s=.5,l=1,m=32,b=1,p=0,i=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:s,outerRadius:l,thetaSegments:m,phiSegments:b,thetaStart:p,thetaLength:i},m=Math.max(3,m);const o=[],u=[],f=[],_=[];let x=s;const M=(l-s)/(b=Math.max(1,b)),E=new Pe,D=new Sn;for(let k=0;k<=b;k++){for(let O=0;O<=m;O++){const I=p+O/m*i;E.x=x*Math.cos(I),E.y=x*Math.sin(I),u.push(E.x,E.y,E.z),f.push(0,0,1),D.x=(E.x/l+1)/2,D.y=(E.y/l+1)/2,_.push(D.x,D.y)}x+=M}for(let k=0;k<b;k++){const O=k*(m+1);for(let I=0;I<m;I++){const U=I+O,j=U+m+1,$=U+m+2,G=U+1;o.push(U,j,G),o.push(j,$,G)}}this.setIndex(o),this.setAttribute("position",new oi(u,3)),this.setAttribute("normal",new oi(f,3)),this.setAttribute("uv",new oi(_,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new hh(s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength)}}class Fp extends ai{constructor(s=new Dp([new Sn(0,.5),new Sn(-.5,-.5),new Sn(.5,-.5)]),l=12){super(),this.type="ShapeGeometry",this.parameters={shapes:s,curveSegments:l};const m=[],b=[],p=[],i=[];let o=0,u=0;if(!1===Array.isArray(s))f(s);else for(let _=0;_<s.length;_++)f(s[_]),this.addGroup(o,u,_),o+=u,u=0;function f(_){const x=b.length/3,M=_.extractPoints(l);let E=M.shape;const D=M.holes;!1===Iu.isClockWise(E)&&(E=E.reverse());for(let O=0,I=D.length;O<I;O++){const U=D[O];!0===Iu.isClockWise(U)&&(D[O]=U.reverse())}const k=Iu.triangulateShape(E,D);for(let O=0,I=D.length;O<I;O++)E=E.concat(D[O]);for(let O=0,I=E.length;O<I;O++){const U=E[O];b.push(U.x,U.y,0),p.push(0,0,1),i.push(U.x,U.y)}for(let O=0,I=k.length;O<I;O++){const U=k[O];m.push(U[0]+x,U[1]+x,U[2]+x),u+=3}}this.setIndex(m),this.setAttribute("position",new oi(b,3)),this.setAttribute("normal",new oi(p,3)),this.setAttribute("uv",new oi(i,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}toJSON(){const s=super.toJSON();return function xy(S,s){if(s.shapes=[],Array.isArray(S))for(let l=0,m=S.length;l<m;l++)s.shapes.push(S[l].uuid);else s.shapes.push(S.uuid);return s}(this.parameters.shapes,s)}static fromJSON(s,l){const m=[];for(let b=0,p=s.shapes.length;b<p;b++)m.push(l[s.shapes[b]]);return new Fp(m,s.curveSegments)}}class sg extends ai{constructor(s=1,l=32,m=16,b=0,p=2*Math.PI,i=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:s,widthSegments:l,heightSegments:m,phiStart:b,phiLength:p,thetaStart:i,thetaLength:o},l=Math.max(3,Math.floor(l)),m=Math.max(2,Math.floor(m));const u=Math.min(i+o,Math.PI);let f=0;const _=[],x=new Pe,M=new Pe,E=[],D=[],k=[],O=[];for(let I=0;I<=m;I++){const U=[],B=I/m;let j=0;0===I&&0===i?j=.5/l:I===m&&u===Math.PI&&(j=-.5/l);for(let $=0;$<=l;$++){const G=$/l;x.x=-s*Math.cos(b+G*p)*Math.sin(i+B*o),x.y=s*Math.cos(i+B*o),x.z=s*Math.sin(b+G*p)*Math.sin(i+B*o),D.push(x.x,x.y,x.z),M.copy(x).normalize(),k.push(M.x,M.y,M.z),O.push(G+j,1-B),U.push(f++)}_.push(U)}for(let I=0;I<m;I++)for(let U=0;U<l;U++){const j=_[I][U],$=_[I+1][U],G=_[I+1][U+1];(0!==I||i>0)&&E.push(_[I][U+1],j,G),(I!==m-1||u<Math.PI)&&E.push(j,$,G)}this.setIndex(E),this.setAttribute("position",new oi(D,3)),this.setAttribute("normal",new oi(k,3)),this.setAttribute("uv",new oi(O,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new sg(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength)}}class fh extends zc{constructor(s=1,l=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],s,l),this.type="TetrahedronGeometry",this.parameters={radius:s,detail:l}}static fromJSON(s){return new fh(s.radius,s.detail)}}class Np extends ai{constructor(s=1,l=.4,m=12,b=48,p=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:s,tube:l,radialSegments:m,tubularSegments:b,arc:p},m=Math.floor(m),b=Math.floor(b);const i=[],o=[],u=[],f=[],_=new Pe,x=new Pe,M=new Pe;for(let E=0;E<=m;E++)for(let D=0;D<=b;D++){const k=D/b*p,O=E/m*Math.PI*2;x.x=(s+l*Math.cos(O))*Math.cos(k),x.y=(s+l*Math.cos(O))*Math.sin(k),x.z=l*Math.sin(O),o.push(x.x,x.y,x.z),_.x=s*Math.cos(k),_.y=s*Math.sin(k),M.subVectors(x,_).normalize(),u.push(M.x,M.y,M.z),f.push(D/b),f.push(E/m)}for(let E=1;E<=m;E++)for(let D=1;D<=b;D++){const O=(b+1)*(E-1)+D-1,I=(b+1)*(E-1)+D,U=(b+1)*E+D;i.push((b+1)*E+D-1,O,U),i.push(O,I,U)}this.setIndex(i),this.setAttribute("position",new oi(o,3)),this.setAttribute("normal",new oi(u,3)),this.setAttribute("uv",new oi(f,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new Np(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc)}}class Up extends ai{constructor(s=1,l=.4,m=64,b=8,p=2,i=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:s,tube:l,tubularSegments:m,radialSegments:b,p,q:i},m=Math.floor(m),b=Math.floor(b);const o=[],u=[],f=[],_=[],x=new Pe,M=new Pe,E=new Pe,D=new Pe,k=new Pe,O=new Pe,I=new Pe;for(let B=0;B<=m;++B){const j=B/m*p*Math.PI*2;U(j,p,i,s,E),U(j+.01,p,i,s,D),O.subVectors(D,E),I.addVectors(D,E),k.crossVectors(O,I),I.crossVectors(k,O),k.normalize(),I.normalize();for(let $=0;$<=b;++$){const G=$/b*Math.PI*2,Q=-l*Math.cos(G),J=l*Math.sin(G);x.x=E.x+(Q*I.x+J*k.x),x.y=E.y+(Q*I.y+J*k.y),x.z=E.z+(Q*I.z+J*k.z),u.push(x.x,x.y,x.z),M.subVectors(x,E).normalize(),f.push(M.x,M.y,M.z),_.push(B/m),_.push($/b)}}for(let B=1;B<=m;B++)for(let j=1;j<=b;j++){const G=(b+1)*B+(j-1),Q=(b+1)*B+j,J=(b+1)*(B-1)+j;o.push((b+1)*(B-1)+(j-1),G,J),o.push(G,Q,J)}function U(B,j,$,G,Q){const J=Math.cos(B),Y=Math.sin(B),ee=$/j*B,he=Math.cos(ee);Q.x=G*(2+he)*.5*J,Q.y=G*(2+he)*Y*.5,Q.z=G*Math.sin(ee)*.5}this.setIndex(o),this.setAttribute("position",new oi(u,3)),this.setAttribute("normal",new oi(f,3)),this.setAttribute("uv",new oi(_,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}static fromJSON(s){return new Up(s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q)}}class ph extends ai{constructor(s=new bd(new Pe(-1,-1,0),new Pe(-1,1,0),new Pe(1,1,0)),l=64,m=1,b=8,p=!1){super(),this.type="TubeGeometry",this.parameters={path:s,tubularSegments:l,radius:m,radialSegments:b,closed:p};const i=s.computeFrenetFrames(l,p);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals;const o=new Pe,u=new Pe,f=new Sn;let _=new Pe;const x=[],M=[],E=[],D=[];function O(B){_=s.getPointAt(B/l,_);const j=i.normals[B],$=i.binormals[B];for(let G=0;G<=b;G++){const Q=G/b*Math.PI*2,J=Math.sin(Q),Y=-Math.cos(Q);u.x=Y*j.x+J*$.x,u.y=Y*j.y+J*$.y,u.z=Y*j.z+J*$.z,u.normalize(),M.push(u.x,u.y,u.z),o.x=_.x+m*u.x,o.y=_.y+m*u.y,o.z=_.z+m*u.z,x.push(o.x,o.y,o.z)}}(function k(){for(let B=0;B<l;B++)O(B);O(!1===p?l:0),function U(){for(let B=0;B<=l;B++)for(let j=0;j<=b;j++)f.x=B/l,f.y=j/b,E.push(f.x,f.y)}(),function I(){for(let B=1;B<=l;B++)for(let j=1;j<=b;j++){const G=(b+1)*B+(j-1),Q=(b+1)*B+j,J=(b+1)*(B-1)+j;D.push((b+1)*(B-1)+(j-1),G,J),D.push(G,Q,J)}}()})(),this.setIndex(D),this.setAttribute("position",new oi(x,3)),this.setAttribute("normal",new oi(M,3)),this.setAttribute("uv",new oi(E,2))}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}toJSON(){const s=super.toJSON();return s.path=this.parameters.path.toJSON(),s}static fromJSON(s){return new ph((new _y[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed)}}class Bp extends ai{constructor(s=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:s},null!==s){const l=[],m=new Set,b=new Pe,p=new Pe;if(null!==s.index){const i=s.attributes.position,o=s.index;let u=s.groups;0===u.length&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,_=u.length;f<_;++f){const x=u[f],M=x.start;for(let D=M,k=M+x.count;D<k;D+=3)for(let O=0;O<3;O++){const I=o.getX(D+O),U=o.getX(D+(O+1)%3);b.fromBufferAttribute(i,I),p.fromBufferAttribute(i,U),!0===B0(b,p,m)&&(l.push(b.x,b.y,b.z),l.push(p.x,p.y,p.z))}}}else{const i=s.attributes.position;for(let o=0,u=i.count/3;o<u;o++)for(let f=0;f<3;f++){const x=3*o+(f+1)%3;b.fromBufferAttribute(i,3*o+f),p.fromBufferAttribute(i,x),!0===B0(b,p,m)&&(l.push(b.x,b.y,b.z),l.push(p.x,p.y,p.z))}}this.setAttribute("position",new oi(l,3))}}copy(s){return super.copy(s),this.parameters=Object.assign({},s.parameters),this}}function B0(S,s,l){const m=`${S.x},${S.y},${S.z}-${s.x},${s.y},${s.z}`,b=`${s.x},${s.y},${s.z}-${S.x},${S.y},${S.z}`;return!0!==l.has(m)&&!0!==l.has(b)&&(l.add(m),l.add(b),!0)}var V0=Object.freeze({__proto__:null,BoxGeometry:cl,CapsuleGeometry:lh,CircleGeometry:Vc,ConeGeometry:xd,CylinderGeometry:uh,DodecahedronGeometry:Cu,EdgesGeometry:hf,ExtrudeGeometry:la,IcosahedronGeometry:U0,LatheGeometry:df,OctahedronGeometry:wd,PlaneGeometry:Vg,PolyhedronGeometry:zc,RingGeometry:hh,ShapeGeometry:Fp,SphereGeometry:sg,TetrahedronGeometry:fh,TorusGeometry:Np,TorusKnotGeometry:Up,TubeGeometry:ph,WireframeGeometry:Bp});class ba extends La{constructor(s){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yn(0),this.transparent=!0,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.fog=s.fog,this}}class Io extends od{constructor(s){super(s),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jo extends La{constructor(s){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Yn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.defines={STANDARD:""},this.color.copy(s.color),this.roughness=s.roughness,this.metalness=s.metalness,this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.roughnessMap=s.roughnessMap,this.metalnessMap=s.metalnessMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.envMapIntensity=s.envMapIntensity,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.flatShading=s.flatShading,this.fog=s.fog,this}}class z0 extends jo{constructor(s){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Sn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(l){this.ior=(1+.4*l)/(1-.4*l)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(s)}get sheen(){return this._sheen}set sheen(s){this._sheen>0!=s>0&&this.version++,this._sheen=s}get clearcoat(){return this._clearcoat}set clearcoat(s){this._clearcoat>0!=s>0&&this.version++,this._clearcoat=s}get iridescence(){return this._iridescence}set iridescence(s){this._iridescence>0!=s>0&&this.version++,this._iridescence=s}get transmission(){return this._transmission}set transmission(s){this._transmission>0!=s>0&&this.version++,this._transmission=s}copy(s){return super.copy(s),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=s.clearcoat,this.clearcoatMap=s.clearcoatMap,this.clearcoatRoughness=s.clearcoatRoughness,this.clearcoatRoughnessMap=s.clearcoatRoughnessMap,this.clearcoatNormalMap=s.clearcoatNormalMap,this.clearcoatNormalScale.copy(s.clearcoatNormalScale),this.ior=s.ior,this.iridescence=s.iridescence,this.iridescenceMap=s.iridescenceMap,this.iridescenceIOR=s.iridescenceIOR,this.iridescenceThicknessRange=[...s.iridescenceThicknessRange],this.iridescenceThicknessMap=s.iridescenceThicknessMap,this.sheen=s.sheen,this.sheenColor.copy(s.sheenColor),this.sheenColorMap=s.sheenColorMap,this.sheenRoughness=s.sheenRoughness,this.sheenRoughnessMap=s.sheenRoughnessMap,this.transmission=s.transmission,this.transmissionMap=s.transmissionMap,this.thickness=s.thickness,this.thicknessMap=s.thicknessMap,this.attenuationDistance=s.attenuationDistance,this.attenuationColor.copy(s.attenuationColor),this.specularIntensity=s.specularIntensity,this.specularIntensityMap=s.specularIntensityMap,this.specularColor.copy(s.specularColor),this.specularColorMap=s.specularColorMap,this}}class Tx extends La{constructor(s){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yn(16777215),this.specular=new Yn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Uh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.specular.copy(s.specular),this.shininess=s.shininess,this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.specularMap=s.specularMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.combine=s.combine,this.reflectivity=s.reflectivity,this.refractionRatio=s.refractionRatio,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.flatShading=s.flatShading,this.fog=s.fog,this}}class Ax extends La{constructor(s){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.gradientMap=s.gradientMap,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.alphaMap=s.alphaMap,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.fog=s.fog,this}}class My extends La{constructor(s){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(s)}copy(s){return super.copy(s),this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.flatShading=s.flatShading,this}}class wy extends La{constructor(s){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Uh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.color.copy(s.color),this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.specularMap=s.specularMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.combine=s.combine,this.reflectivity=s.reflectivity,this.refractionRatio=s.refractionRatio,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.flatShading=s.flatShading,this.fog=s.fog,this}}class Dx extends La{constructor(s){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zd,this.normalScale=new Sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(s)}copy(s){return super.copy(s),this.defines={MATCAP:""},this.color.copy(s.color),this.matcap=s.matcap,this.map=s.map,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.alphaMap=s.alphaMap,this.flatShading=s.flatShading,this.fog=s.fog,this}}class Rx extends mc{constructor(s){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(s)}copy(s){return super.copy(s),this.scale=s.scale,this.dashSize=s.dashSize,this.gapSize=s.gapSize,this}}function Hc(S,s,l){return mh(S)?new S.constructor(S.subarray(s,void 0!==l?l:S.length)):S.slice(s,l)}function $o(S,s,l){return!S||!l&&S.constructor===s?S:"number"==typeof s.BYTES_PER_ELEMENT?new s(S):Array.prototype.slice.call(S)}function mh(S){return ArrayBuffer.isView(S)&&!(S instanceof DataView)}function Vp(S){const l=S.length,m=new Array(l);for(let b=0;b!==l;++b)m[b]=b;return m.sort(function s(b,p){return S[b]-S[p]}),m}function zp(S,s,l){const m=S.length,b=new S.constructor(m);for(let p=0,i=0;i!==m;++p){const o=l[p]*s;for(let u=0;u!==s;++u)b[i++]=S[o+u]}return b}function gf(S,s,l,m){let b=1,p=S[0];for(;void 0!==p&&void 0===p[m];)p=S[b++];if(void 0===p)return;let i=p[m];if(void 0!==i)if(Array.isArray(i))do{i=p[m],void 0!==i&&(s.push(p.time),l.push.apply(l,i)),p=S[b++]}while(void 0!==p);else if(void 0!==i.toArray)do{i=p[m],void 0!==i&&(s.push(p.time),i.toArray(l,l.length)),p=S[b++]}while(void 0!==p);else do{i=p[m],void 0!==i&&(s.push(p.time),l.push(i)),p=S[b++]}while(void 0!==p)}const tS={arraySlice:Hc,convertArray:$o,isTypedArray:mh,getKeyframeOrder:Vp,sortedArray:zp,flattenJSON:gf,subclip:function Ix(S,s,l,m,b=30){const p=S.clone();p.name=s;const i=[];for(let u=0;u<p.tracks.length;++u){const f=p.tracks[u],_=f.getValueSize(),x=[],M=[];for(let E=0;E<f.times.length;++E){const D=f.times[E]*b;if(!(D<l||D>=m)){x.push(f.times[E]);for(let k=0;k<_;++k)M.push(f.values[E*_+k])}}0!==x.length&&(f.times=$o(x,f.times.constructor),f.values=$o(M,f.values.constructor),i.push(f))}p.tracks=i;let o=1/0;for(let u=0;u<p.tracks.length;++u)o>p.tracks[u].times[0]&&(o=p.tracks[u].times[0]);for(let u=0;u<p.tracks.length;++u)p.tracks[u].shift(-1*o);return p.resetDuration(),p},makeClipAdditive:function Sy(S,s=0,l=S,m=30){m<=0&&(m=30);const b=l.tracks.length,p=s/m;for(let i=0;i<b;++i){const o=l.tracks[i],u=o.ValueTypeName;if("bool"===u||"string"===u)continue;const f=S.tracks.find(function(I){return I.name===o.name&&I.ValueTypeName===u});if(void 0===f)continue;let _=0;const x=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);let M=0;const E=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(M=E/3);const D=o.times.length-1;let k;if(p<=o.times[0])k=Hc(o.values,_,x-_);else if(p>=o.times[D]){const I=D*x+_;k=Hc(o.values,I,I+x-_)}else{const I=o.createInterpolant(),U=_,B=x-_;I.evaluate(p),k=Hc(I.resultBuffer,U,B)}"quaternion"===u&&(new fs).fromArray(k).normalize().conjugate().toArray(k);const O=f.times.length;for(let I=0;I<O;++I){const U=I*E+M;if("quaternion"===u)fs.multiplyQuaternionsFlat(f.values,U,k,0,f.values,U);else{const B=E-2*M;for(let j=0;j<B;++j)f.values[U+j]-=k[j]}}}return S.blendMode=2501,S}};class f_{constructor(s,l,m,b){this.parameterPositions=s,this._cachedIndex=0,this.resultBuffer=void 0!==b?b:new l.constructor(m),this.sampleValues=l,this.valueSize=m,this.settings=null,this.DefaultSettings_={}}evaluate(s){const l=this.parameterPositions;let m=this._cachedIndex,b=l[m],p=l[m-1];e:{t:{let i;n:{i:if(!(s<b)){for(let o=m+2;;){if(void 0===b){if(s<p)break i;return m=l.length,this._cachedIndex=m,this.copySampleValue_(m-1)}if(m===o)break;if(p=b,b=l[++m],s<b)break t}i=l.length;break n}if(s>=p)break e;{const o=l[1];s<o&&(m=2,p=o);for(let u=m-2;;){if(void 0===p)return this._cachedIndex=0,this.copySampleValue_(0);if(m===u)break;if(b=p,p=l[--m-1],s>=p)break t}i=m,m=0}}for(;m<i;){const o=m+i>>>1;s<l[o]?i=o:m=o+1}if(b=l[m],p=l[m-1],void 0===p)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===b)return m=l.length,this._cachedIndex=m,this.copySampleValue_(m-1)}this._cachedIndex=m,this.intervalChanged_(m,p,b)}return this.interpolate_(m,p,s,b)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(s){const l=this.resultBuffer,m=this.sampleValues,b=this.valueSize,p=s*b;for(let i=0;i!==b;++i)l[i]=m[p+i];return l}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class og extends f_{constructor(s,l,m,b){super(s,l,m,b),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dl,endingEnd:Dl}}intervalChanged_(s,l,m){const b=this.parameterPositions;let p=s-2,i=s+1,o=b[p],u=b[i];if(void 0===o)switch(this.getSettings_().endingStart){case Jt:p=s,o=2*l-m;break;case Da:p=b.length-2,o=l+b[p]-b[p+1];break;default:p=s,o=m}if(void 0===u)switch(this.getSettings_().endingEnd){case Jt:i=s,u=2*m-l;break;case Da:i=1,u=m+b[1]-b[0];break;default:i=s-1,u=l}const f=.5*(m-l),_=this.valueSize;this._weightPrev=f/(l-o),this._weightNext=f/(u-m),this._offsetPrev=p*_,this._offsetNext=i*_}interpolate_(s,l,m,b){const p=this.resultBuffer,i=this.sampleValues,o=this.valueSize,u=s*o,f=u-o,_=this._offsetPrev,x=this._offsetNext,M=this._weightPrev,E=this._weightNext,D=(m-l)/(b-l),k=D*D,O=k*D,I=-M*O+2*M*k-M*D,U=(1+M)*O+(-1.5-2*M)*k+(-.5+M)*D+1,B=(-1-E)*O+(1.5+E)*k+.5*D,j=E*O-E*k;for(let $=0;$!==o;++$)p[$]=I*i[_+$]+U*i[f+$]+B*i[u+$]+j*i[x+$];return p}}class H0 extends f_{constructor(s,l,m,b){super(s,l,m,b)}interpolate_(s,l,m,b){const p=this.resultBuffer,i=this.sampleValues,o=this.valueSize,u=s*o,f=u-o,_=(m-l)/(b-l),x=1-_;for(let M=0;M!==o;++M)p[M]=i[f+M]*x+i[u+M]*_;return p}}class G0 extends f_{constructor(s,l,m,b){super(s,l,m,b)}interpolate_(s){return this.copySampleValue_(s-1)}}class ja{constructor(s,l,m,b){if(void 0===s)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===l||0===l.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+s);this.name=s,this.times=$o(l,this.TimeBufferType),this.values=$o(m,this.ValueBufferType),this.setInterpolation(b||this.DefaultInterpolation)}static toJSON(s){const l=s.constructor;let m;if(l.toJSON!==this.toJSON)m=l.toJSON(s);else{m={name:s.name,times:$o(s.times,Array),values:$o(s.values,Array)};const b=s.getInterpolation();b!==s.DefaultInterpolation&&(m.interpolation=b)}return m.type=s.ValueTypeName,m}InterpolantFactoryMethodDiscrete(s){return new G0(this.times,this.values,this.getValueSize(),s)}InterpolantFactoryMethodLinear(s){return new H0(this.times,this.values,this.getValueSize(),s)}InterpolantFactoryMethodSmooth(s){return new og(this.times,this.values,this.getValueSize(),s)}setInterpolation(s){let l;switch(s){case Gf:l=this.InterpolantFactoryMethodDiscrete;break;case Yu:l=this.InterpolantFactoryMethodLinear;break;case 2302:l=this.InterpolantFactoryMethodSmooth}if(void 0===l){const m="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(s===this.DefaultInterpolation)throw new Error(m);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",m),this}return this.createInterpolant=l,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gf;case this.InterpolantFactoryMethodLinear:return Yu;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(s){if(0!==s){const l=this.times;for(let m=0,b=l.length;m!==b;++m)l[m]+=s}return this}scale(s){if(1!==s){const l=this.times;for(let m=0,b=l.length;m!==b;++m)l[m]*=s}return this}trim(s,l){const m=this.times,b=m.length;let p=0,i=b-1;for(;p!==b&&m[p]<s;)++p;for(;-1!==i&&m[i]>l;)--i;if(++i,0!==p||i!==b){p>=i&&(i=Math.max(i,1),p=i-1);const o=this.getValueSize();this.times=Hc(m,p,i),this.values=Hc(this.values,p*o,i*o)}return this}validate(){let s=!0;const l=this.getValueSize();l-Math.floor(l)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),s=!1);const m=this.times,b=this.values,p=m.length;0===p&&(console.error("THREE.KeyframeTrack: Track is empty.",this),s=!1);let i=null;for(let o=0;o!==p;o++){const u=m[o];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,u),s=!1;break}if(null!==i&&i>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,u,i),s=!1;break}i=u}if(void 0!==b&&mh(b))for(let o=0,u=b.length;o!==u;++o){const f=b[o];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,f),s=!1;break}}return s}optimize(){const s=Hc(this.times),l=Hc(this.values),m=this.getValueSize(),b=2302===this.getInterpolation(),p=s.length-1;let i=1;for(let o=1;o<p;++o){let u=!1;const f=s[o];if(f!==s[o+1]&&(1!==o||f!==s[0]))if(b)u=!0;else{const x=o*m,M=x-m,E=x+m;for(let D=0;D!==m;++D){const k=l[x+D];if(k!==l[M+D]||k!==l[E+D]){u=!0;break}}}if(u){if(o!==i){s[i]=s[o];const x=o*m,M=i*m;for(let E=0;E!==m;++E)l[M+E]=l[x+E]}++i}}if(p>0){s[i]=s[p];for(let o=p*m,u=i*m,f=0;f!==m;++f)l[u+f]=l[o+f];++i}return i!==s.length?(this.times=Hc(s,0,i),this.values=Hc(l,0,i*m)):(this.times=s,this.values=l),this}clone(){const s=Hc(this.times,0),l=Hc(this.values,0),b=new(0,this.constructor)(this.name,s,l);return b.createInterpolant=this.createInterpolant,b}}ja.prototype.TimeBufferType=Float32Array,ja.prototype.ValueBufferType=Float32Array,ja.prototype.DefaultInterpolation=Yu;class us extends ja{}us.prototype.ValueTypeName="bool",us.prototype.ValueBufferType=Array,us.prototype.DefaultInterpolation=Gf,us.prototype.InterpolantFactoryMethodLinear=void 0,us.prototype.InterpolantFactoryMethodSmooth=void 0;class Pu extends ja{}Pu.prototype.ValueTypeName="color";class gh extends ja{}gh.prototype.ValueTypeName="number";class _h extends f_{constructor(s,l,m,b){super(s,l,m,b)}interpolate_(s,l,m,b){const p=this.resultBuffer,i=this.sampleValues,o=this.valueSize,u=(m-l)/(b-l);let f=s*o;for(let _=f+o;f!==_;f+=4)fs.slerpFlat(p,0,i,f-o,i,f,u);return p}}class ku extends ja{InterpolantFactoryMethodLinear(s){return new _h(this.times,this.values,this.getValueSize(),s)}}ku.prototype.ValueTypeName="quaternion",ku.prototype.DefaultInterpolation=Yu,ku.prototype.InterpolantFactoryMethodSmooth=void 0;class gc extends ja{}gc.prototype.ValueTypeName="string",gc.prototype.ValueBufferType=Array,gc.prototype.DefaultInterpolation=Gf,gc.prototype.InterpolantFactoryMethodLinear=void 0,gc.prototype.InterpolantFactoryMethodSmooth=void 0;class Lu extends ja{}Lu.prototype.ValueTypeName="vector";class vh{constructor(s,l=-1,m,b=2500){this.name=s,this.tracks=m,this.duration=l,this.blendMode=b,this.uuid=go(),this.duration<0&&this.resetDuration()}static parse(s){const l=[],m=s.tracks,b=1/(s.fps||1);for(let i=0,o=m.length;i!==o;++i)l.push(ag(m[i]).scale(b));const p=new this(s.name,s.duration,l,s.blendMode);return p.uuid=s.uuid,p}static toJSON(s){const l=[],m=s.tracks,b={name:s.name,duration:s.duration,tracks:l,uuid:s.uuid,blendMode:s.blendMode};for(let p=0,i=m.length;p!==i;++p)l.push(ja.toJSON(m[p]));return b}static CreateFromMorphTargetSequence(s,l,m,b){const p=l.length,i=[];for(let o=0;o<p;o++){let u=[],f=[];u.push((o+p-1)%p,o,(o+1)%p),f.push(0,1,0);const _=Vp(u);u=zp(u,1,_),f=zp(f,1,_),!b&&0===u[0]&&(u.push(p),f.push(f[0])),i.push(new gh(".morphTargetInfluences["+l[o].name+"]",u,f).scale(1/m))}return new this(s,-1,i)}static findByName(s,l){let m=s;Array.isArray(s)||(m=s.geometry&&s.geometry.animations||s.animations);for(let b=0;b<m.length;b++)if(m[b].name===l)return m[b];return null}static CreateClipsFromMorphTargetSequences(s,l,m){const b={},p=/^([\w-]*?)([\d]+)$/;for(let o=0,u=s.length;o<u;o++){const f=s[o],_=f.name.match(p);if(_&&_.length>1){const x=_[1];let M=b[x];M||(b[x]=M=[]),M.push(f)}}const i=[];for(const o in b)i.push(this.CreateFromMorphTargetSequence(o,b[o],l,m));return i}static parseAnimation(s,l){if(!s)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const m=function(x,M,E,D,k){if(0!==E.length){const O=[],I=[];gf(E,O,I,D),0!==O.length&&k.push(new x(M,O,I))}},b=[],p=s.name||"default",i=s.fps||30,o=s.blendMode;let u=s.length||-1;const f=s.hierarchy||[];for(let x=0;x<f.length;x++){const M=f[x].keys;if(M&&0!==M.length)if(M[0].morphTargets){const E={};let D;for(D=0;D<M.length;D++)if(M[D].morphTargets)for(let k=0;k<M[D].morphTargets.length;k++)E[M[D].morphTargets[k]]=-1;for(const k in E){const O=[],I=[];for(let U=0;U!==M[D].morphTargets.length;++U){const B=M[D];O.push(B.time),I.push(B.morphTarget===k?1:0)}b.push(new gh(".morphTargetInfluence["+k+"]",O,I))}u=E.length*i}else{const E=".bones["+l[x].name+"]";m(Lu,E+".position",M,"pos",b),m(ku,E+".quaternion",M,"rot",b),m(Lu,E+".scale",M,"scl",b)}}return 0===b.length?null:new this(p,u,b,o)}resetDuration(){let l=0;for(let m=0,b=this.tracks.length;m!==b;++m){const p=this.tracks[m];l=Math.max(l,p.times[p.times.length-1])}return this.duration=l,this}trim(){for(let s=0;s<this.tracks.length;s++)this.tracks[s].trim(0,this.duration);return this}validate(){let s=!0;for(let l=0;l<this.tracks.length;l++)s=s&&this.tracks[l].validate();return s}optimize(){for(let s=0;s<this.tracks.length;s++)this.tracks[s].optimize();return this}clone(){const s=[];for(let l=0;l<this.tracks.length;l++)s.push(this.tracks[l].clone());return new this.constructor(this.name,this.duration,s,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ag(S){if(void 0===S.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const s=function W0(S){switch(S.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gh;case"vector":case"vector2":case"vector3":case"vector4":return Lu;case"color":return Pu;case"quaternion":return ku;case"bool":case"boolean":return us;case"string":return gc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+S)}(S.type);if(void 0===S.times){const l=[],m=[];gf(S.keys,l,m,"value"),S.times=l,S.values=m}return void 0!==s.parse?s.parse(S):new s(S.name,S.times,S.values,S.interpolation)}const _f={enabled:!1,files:{},add:function(S,s){!1!==this.enabled&&(this.files[S]=s)},get:function(S){if(!1!==this.enabled)return this.files[S]},remove:function(S){delete this.files[S]},clear:function(){this.files={}}};class vf{constructor(s,l,m){const b=this;let u,p=!1,i=0,o=0;const f=[];this.onStart=void 0,this.onLoad=s,this.onProgress=l,this.onError=m,this.itemStart=function(_){o++,!1===p&&void 0!==b.onStart&&b.onStart(_,i,o),p=!0},this.itemEnd=function(_){i++,void 0!==b.onProgress&&b.onProgress(_,i,o),i===o&&(p=!1,void 0!==b.onLoad&&b.onLoad())},this.itemError=function(_){void 0!==b.onError&&b.onError(_)},this.resolveURL=function(_){return u?u(_):_},this.setURLModifier=function(_){return u=_,this},this.addHandler=function(_,x){return f.push(_,x),this},this.removeHandler=function(_){const x=f.indexOf(_);return-1!==x&&f.splice(x,2),this},this.getHandler=function(_){for(let x=0,M=f.length;x<M;x+=2){const E=f[x],D=f[x+1];if(E.global&&(E.lastIndex=0),E.test(_))return D}return null}}}const j0=new vf;class Gc{constructor(s){this.manager=void 0!==s?s:j0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(s,l){const m=this;return new Promise(function(b,p){m.load(s,b,l,p)})}parse(){}setCrossOrigin(s){return this.crossOrigin=s,this}setWithCredentials(s){return this.withCredentials=s,this}setPath(s){return this.path=s,this}setResourcePath(s){return this.resourcePath=s,this}setRequestHeader(s){return this.requestHeader=s,this}}const yh={};class ql extends Error{constructor(s,l){super(s),this.response=l}}class Xl extends Gc{constructor(s){super(s)}load(s,l,m,b){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);const p=_f.get(s);if(void 0!==p)return this.manager.itemStart(s),setTimeout(()=>{l&&l(p),this.manager.itemEnd(s)},0),p;if(void 0!==yh[s])return void yh[s].push({onLoad:l,onProgress:m,onError:b});yh[s]=[],yh[s].push({onLoad:l,onProgress:m,onError:b});const i=new Request(s,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,u=this.responseType;fetch(i).then(f=>{if(200===f.status||0===f.status){if(0===f.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===f.body||void 0===f.body.getReader)return f;const _=yh[s],x=f.body.getReader(),M=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),E=M?parseInt(M):0,D=0!==E;let k=0;const O=new ReadableStream({start(I){!function U(){x.read().then(({done:B,value:j})=>{if(B)I.close();else{k+=j.byteLength;const $=new ProgressEvent("progress",{lengthComputable:D,loaded:k,total:E});for(let G=0,Q=_.length;G<Q;G++){const J=_[G];J.onProgress&&J.onProgress($)}I.enqueue(j),U()}})}()}});return new Response(O)}throw new ql(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(_=>(new DOMParser).parseFromString(_,o));case"json":return f.json();default:if(void 0===o)return f.text();{const x=/charset="?([^;"\s]*)"?/i.exec(o),M=x&&x[1]?x[1].toLowerCase():void 0,E=new TextDecoder(M);return f.arrayBuffer().then(D=>E.decode(D))}}}).then(f=>{_f.add(s,f);const _=yh[s];delete yh[s];for(let x=0,M=_.length;x<M;x++){const E=_[x];E.onLoad&&E.onLoad(f)}}).catch(f=>{const _=yh[s];if(void 0===_)throw this.manager.itemError(s),f;delete yh[s];for(let x=0,M=_.length;x<M;x++){const E=_[x];E.onError&&E.onError(f)}this.manager.itemError(s)}).finally(()=>{this.manager.itemEnd(s)}),this.manager.itemStart(s)}setResponseType(s){return this.responseType=s,this}setMimeType(s){return this.mimeType=s,this}}class cg extends Gc{constructor(s){super(s)}load(s,l,m,b){void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);const p=this,i=_f.get(s);if(void 0!==i)return p.manager.itemStart(s),setTimeout(function(){l&&l(i),p.manager.itemEnd(s)},0),i;const o=Ri("img");function u(){_(),_f.add(s,this),l&&l(this),p.manager.itemEnd(s)}function f(x){_(),b&&b(x),p.manager.itemError(s),p.manager.itemEnd(s)}function _(){o.removeEventListener("load",u,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",f,!1),"data:"!==s.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),p.manager.itemStart(s),o.src=s,o}}class Ou extends os{constructor(s,l=1){super(),this.isLight=!0,this.type="Light",this.color=new Yn(s),this.intensity=l}dispose(){}copy(s,l){return super.copy(s,l),this.color.copy(s.color),this.intensity=s.intensity,this}toJSON(s){const l=super.toJSON(s);return l.object.color=this.color.getHex(),l.object.intensity=this.intensity,void 0!==this.groundColor&&(l.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(l.object.distance=this.distance),void 0!==this.angle&&(l.object.angle=this.angle),void 0!==this.decay&&(l.object.decay=this.decay),void 0!==this.penumbra&&(l.object.penumbra=this.penumbra),void 0!==this.shadow&&(l.object.shadow=this.shadow.toJSON()),l}}class ur extends Ou{constructor(s,l,m){super(s,m),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(os.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yn(l)}copy(s,l){return super.copy(s,l),this.groundColor.copy(s.groundColor),this}}const $s=new zi,Hp=new Pe,xa=new Pe;class Qr{constructor(s){this.camera=s,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Sn(512,512),this.map=null,this.mapPass=null,this.matrix=new zi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ep,this._frameExtents=new Sn(1,1),this._viewportCount=1,this._viewports=[new tr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(s){const l=this.camera,m=this.matrix;Hp.setFromMatrixPosition(s.matrixWorld),l.position.copy(Hp),xa.setFromMatrixPosition(s.target.matrixWorld),l.lookAt(xa),l.updateMatrixWorld(),$s.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix($s),m.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),m.multiply($s)}getViewport(s){return this._viewports[s]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(s){return this.camera=s.camera.clone(),this.bias=s.bias,this.radius=s.radius,this.mapSize.copy(s.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const s={};return 0!==this.bias&&(s.bias=this.bias),0!==this.normalBias&&(s.normalBias=this.normalBias),1!==this.radius&&(s.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(s.mapSize=this.mapSize.toArray()),s.camera=this.camera.toJSON(!1).object,delete s.camera.matrix,s}}class Si extends Qr{constructor(){super(new ao(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(s){const l=this.camera,m=2*Cc*s.angle*this.focus,b=this.mapSize.width/this.mapSize.height,p=s.distance||l.far;(m!==l.fov||b!==l.aspect||p!==l.far)&&(l.fov=m,l.aspect=b,l.far=p,l.updateProjectionMatrix()),super.updateMatrices(s)}copy(s){return super.copy(s),this.focus=s.focus,this}}class dr extends Ou{constructor(s,l,m=0,b=Math.PI/3,p=0,i=2){super(s,l),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(os.DEFAULT_UP),this.updateMatrix(),this.target=new os,this.distance=m,this.angle=b,this.penumbra=p,this.decay=i,this.map=null,this.shadow=new Si}get power(){return this.intensity*Math.PI}set power(s){this.intensity=s/Math.PI}dispose(){this.shadow.dispose()}copy(s,l){return super.copy(s,l),this.distance=s.distance,this.angle=s.angle,this.penumbra=s.penumbra,this.decay=s.decay,this.target=s.target.clone(),this.shadow=s.shadow.clone(),this}}const yf=new zi,Po=new Pe,si=new Pe;class Gp extends Qr{constructor(){super(new ao(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Sn(4,2),this._viewportCount=6,this._viewports=[new tr(2,1,1,1),new tr(0,1,1,1),new tr(3,1,1,1),new tr(1,1,1,1),new tr(3,0,1,1),new tr(1,0,1,1)],this._cubeDirections=[new Pe(1,0,0),new Pe(-1,0,0),new Pe(0,0,1),new Pe(0,0,-1),new Pe(0,1,0),new Pe(0,-1,0)],this._cubeUps=[new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,0,1),new Pe(0,0,-1)]}updateMatrices(s,l=0){const m=this.camera,b=this.matrix,p=s.distance||m.far;p!==m.far&&(m.far=p,m.updateProjectionMatrix()),Po.setFromMatrixPosition(s.matrixWorld),m.position.copy(Po),si.copy(m.position),si.add(this._cubeDirections[l]),m.up.copy(this._cubeUps[l]),m.lookAt(si),m.updateMatrixWorld(),b.makeTranslation(-Po.x,-Po.y,-Po.z),yf.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yf)}}class Px extends Ou{constructor(s,l,m=0,b=2){super(s,l),this.isPointLight=!0,this.type="PointLight",this.distance=m,this.decay=b,this.shadow=new Gp}get power(){return 4*this.intensity*Math.PI}set power(s){this.intensity=s/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(s,l){return super.copy(s,l),this.distance=s.distance,this.decay=s.decay,this.shadow=s.shadow.clone(),this}}class Ey extends Qr{constructor(){super(new Jd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $0 extends Ou{constructor(s,l){super(s,l),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(os.DEFAULT_UP),this.updateMatrix(),this.target=new os,this.shadow=new Ey}dispose(){this.shadow.dispose()}copy(s){return super.copy(s),this.target=s.target.clone(),this.shadow=s.shadow.clone(),this}}class p_ extends Ou{constructor(s,l){super(s,l),this.isAmbientLight=!0,this.type="AmbientLight"}}class lg extends Ou{constructor(s,l,m=10,b=10){super(s,l),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=m,this.height=b}get power(){return this.intensity*this.width*this.height*Math.PI}set power(s){this.intensity=s/(this.width*this.height*Math.PI)}copy(s){return super.copy(s),this.width=s.width,this.height=s.height,this}toJSON(s){const l=super.toJSON(s);return l.object.width=this.width,l.object.height=this.height,l}}class Qn{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let s=0;s<9;s++)this.coefficients.push(new Pe)}set(s){for(let l=0;l<9;l++)this.coefficients[l].copy(s[l]);return this}zero(){for(let s=0;s<9;s++)this.coefficients[s].set(0,0,0);return this}getAt(s,l){const m=s.x,b=s.y,p=s.z,i=this.coefficients;return l.copy(i[0]).multiplyScalar(.282095),l.addScaledVector(i[1],.488603*b),l.addScaledVector(i[2],.488603*p),l.addScaledVector(i[3],.488603*m),l.addScaledVector(i[4],m*b*1.092548),l.addScaledVector(i[5],b*p*1.092548),l.addScaledVector(i[6],.315392*(3*p*p-1)),l.addScaledVector(i[7],m*p*1.092548),l.addScaledVector(i[8],.546274*(m*m-b*b)),l}getIrradianceAt(s,l){const m=s.x,b=s.y,p=s.z,i=this.coefficients;return l.copy(i[0]).multiplyScalar(.886227),l.addScaledVector(i[1],1.023328*b),l.addScaledVector(i[2],1.023328*p),l.addScaledVector(i[3],1.023328*m),l.addScaledVector(i[4],.858086*m*b),l.addScaledVector(i[5],.858086*b*p),l.addScaledVector(i[6],.743125*p*p-.247708),l.addScaledVector(i[7],.858086*m*p),l.addScaledVector(i[8],.429043*(m*m-b*b)),l}add(s){for(let l=0;l<9;l++)this.coefficients[l].add(s.coefficients[l]);return this}addScaledSH(s,l){for(let m=0;m<9;m++)this.coefficients[m].addScaledVector(s.coefficients[m],l);return this}scale(s){for(let l=0;l<9;l++)this.coefficients[l].multiplyScalar(s);return this}lerp(s,l){for(let m=0;m<9;m++)this.coefficients[m].lerp(s.coefficients[m],l);return this}equals(s){for(let l=0;l<9;l++)if(!this.coefficients[l].equals(s.coefficients[l]))return!1;return!0}copy(s){return this.set(s.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(s,l=0){const m=this.coefficients;for(let b=0;b<9;b++)m[b].fromArray(s,l+3*b);return this}toArray(s=[],l=0){const m=this.coefficients;for(let b=0;b<9;b++)m[b].toArray(s,l+3*b);return s}static getBasisAt(s,l){const m=s.x,b=s.y,p=s.z;l[0]=.282095,l[1]=.488603*b,l[2]=.488603*p,l[3]=.488603*m,l[4]=1.092548*m*b,l[5]=1.092548*b*p,l[6]=.315392*(3*p*p-1),l[7]=1.092548*m*p,l[8]=.546274*(m*m-b*b)}}class qs extends Ou{constructor(s=new Qn,l=1){super(void 0,l),this.isLightProbe=!0,this.sh=s}copy(s){return super.copy(s),this.sh.copy(s.sh),this}fromJSON(s){return this.intensity=s.intensity,this.sh.fromArray(s.sh),this}toJSON(s){const l=super.toJSON(s);return l.object.sh=this.sh.toArray(),l}}class Os extends Gc{constructor(s){super(s),this.textures={}}load(s,l,m,b){const p=this,i=new Xl(p.manager);i.setPath(p.path),i.setRequestHeader(p.requestHeader),i.setWithCredentials(p.withCredentials),i.load(s,function(o){try{l(p.parse(JSON.parse(o)))}catch(u){b?b(u):console.error(u),p.manager.itemError(s)}},m,b)}parse(s){const l=this.textures;function m(p){return void 0===l[p]&&console.warn("THREE.MaterialLoader: Undefined texture",p),l[p]}const b=Os.createMaterialFromType(s.type);if(void 0!==s.uuid&&(b.uuid=s.uuid),void 0!==s.name&&(b.name=s.name),void 0!==s.color&&void 0!==b.color&&b.color.setHex(s.color),void 0!==s.roughness&&(b.roughness=s.roughness),void 0!==s.metalness&&(b.metalness=s.metalness),void 0!==s.sheen&&(b.sheen=s.sheen),void 0!==s.sheenColor&&(b.sheenColor=(new Yn).setHex(s.sheenColor)),void 0!==s.sheenRoughness&&(b.sheenRoughness=s.sheenRoughness),void 0!==s.emissive&&void 0!==b.emissive&&b.emissive.setHex(s.emissive),void 0!==s.specular&&void 0!==b.specular&&b.specular.setHex(s.specular),void 0!==s.specularIntensity&&(b.specularIntensity=s.specularIntensity),void 0!==s.specularColor&&void 0!==b.specularColor&&b.specularColor.setHex(s.specularColor),void 0!==s.shininess&&(b.shininess=s.shininess),void 0!==s.clearcoat&&(b.clearcoat=s.clearcoat),void 0!==s.clearcoatRoughness&&(b.clearcoatRoughness=s.clearcoatRoughness),void 0!==s.iridescence&&(b.iridescence=s.iridescence),void 0!==s.iridescenceIOR&&(b.iridescenceIOR=s.iridescenceIOR),void 0!==s.iridescenceThicknessRange&&(b.iridescenceThicknessRange=s.iridescenceThicknessRange),void 0!==s.transmission&&(b.transmission=s.transmission),void 0!==s.thickness&&(b.thickness=s.thickness),void 0!==s.attenuationDistance&&(b.attenuationDistance=s.attenuationDistance),void 0!==s.attenuationColor&&void 0!==b.attenuationColor&&b.attenuationColor.setHex(s.attenuationColor),void 0!==s.fog&&(b.fog=s.fog),void 0!==s.flatShading&&(b.flatShading=s.flatShading),void 0!==s.blending&&(b.blending=s.blending),void 0!==s.combine&&(b.combine=s.combine),void 0!==s.side&&(b.side=s.side),void 0!==s.shadowSide&&(b.shadowSide=s.shadowSide),void 0!==s.opacity&&(b.opacity=s.opacity),void 0!==s.transparent&&(b.transparent=s.transparent),void 0!==s.alphaTest&&(b.alphaTest=s.alphaTest),void 0!==s.depthTest&&(b.depthTest=s.depthTest),void 0!==s.depthWrite&&(b.depthWrite=s.depthWrite),void 0!==s.colorWrite&&(b.colorWrite=s.colorWrite),void 0!==s.stencilWrite&&(b.stencilWrite=s.stencilWrite),void 0!==s.stencilWriteMask&&(b.stencilWriteMask=s.stencilWriteMask),void 0!==s.stencilFunc&&(b.stencilFunc=s.stencilFunc),void 0!==s.stencilRef&&(b.stencilRef=s.stencilRef),void 0!==s.stencilFuncMask&&(b.stencilFuncMask=s.stencilFuncMask),void 0!==s.stencilFail&&(b.stencilFail=s.stencilFail),void 0!==s.stencilZFail&&(b.stencilZFail=s.stencilZFail),void 0!==s.stencilZPass&&(b.stencilZPass=s.stencilZPass),void 0!==s.wireframe&&(b.wireframe=s.wireframe),void 0!==s.wireframeLinewidth&&(b.wireframeLinewidth=s.wireframeLinewidth),void 0!==s.wireframeLinecap&&(b.wireframeLinecap=s.wireframeLinecap),void 0!==s.wireframeLinejoin&&(b.wireframeLinejoin=s.wireframeLinejoin),void 0!==s.rotation&&(b.rotation=s.rotation),1!==s.linewidth&&(b.linewidth=s.linewidth),void 0!==s.dashSize&&(b.dashSize=s.dashSize),void 0!==s.gapSize&&(b.gapSize=s.gapSize),void 0!==s.scale&&(b.scale=s.scale),void 0!==s.polygonOffset&&(b.polygonOffset=s.polygonOffset),void 0!==s.polygonOffsetFactor&&(b.polygonOffsetFactor=s.polygonOffsetFactor),void 0!==s.polygonOffsetUnits&&(b.polygonOffsetUnits=s.polygonOffsetUnits),void 0!==s.dithering&&(b.dithering=s.dithering),void 0!==s.alphaToCoverage&&(b.alphaToCoverage=s.alphaToCoverage),void 0!==s.premultipliedAlpha&&(b.premultipliedAlpha=s.premultipliedAlpha),void 0!==s.forceSinglePass&&(b.forceSinglePass=s.forceSinglePass),void 0!==s.visible&&(b.visible=s.visible),void 0!==s.toneMapped&&(b.toneMapped=s.toneMapped),void 0!==s.userData&&(b.userData=s.userData),void 0!==s.vertexColors&&(b.vertexColors="number"==typeof s.vertexColors?s.vertexColors>0:s.vertexColors),void 0!==s.uniforms)for(const p in s.uniforms){const i=s.uniforms[p];switch(b.uniforms[p]={},i.type){case"t":b.uniforms[p].value=m(i.value);break;case"c":b.uniforms[p].value=(new Yn).setHex(i.value);break;case"v2":b.uniforms[p].value=(new Sn).fromArray(i.value);break;case"v3":b.uniforms[p].value=(new Pe).fromArray(i.value);break;case"v4":b.uniforms[p].value=(new tr).fromArray(i.value);break;case"m3":b.uniforms[p].value=(new Wt).fromArray(i.value);break;case"m4":b.uniforms[p].value=(new zi).fromArray(i.value);break;default:b.uniforms[p].value=i.value}}if(void 0!==s.defines&&(b.defines=s.defines),void 0!==s.vertexShader&&(b.vertexShader=s.vertexShader),void 0!==s.fragmentShader&&(b.fragmentShader=s.fragmentShader),void 0!==s.glslVersion&&(b.glslVersion=s.glslVersion),void 0!==s.extensions)for(const p in s.extensions)b.extensions[p]=s.extensions[p];if(void 0!==s.size&&(b.size=s.size),void 0!==s.sizeAttenuation&&(b.sizeAttenuation=s.sizeAttenuation),void 0!==s.map&&(b.map=m(s.map)),void 0!==s.matcap&&(b.matcap=m(s.matcap)),void 0!==s.alphaMap&&(b.alphaMap=m(s.alphaMap)),void 0!==s.bumpMap&&(b.bumpMap=m(s.bumpMap)),void 0!==s.bumpScale&&(b.bumpScale=s.bumpScale),void 0!==s.normalMap&&(b.normalMap=m(s.normalMap)),void 0!==s.normalMapType&&(b.normalMapType=s.normalMapType),void 0!==s.normalScale){let p=s.normalScale;!1===Array.isArray(p)&&(p=[p,p]),b.normalScale=(new Sn).fromArray(p)}return void 0!==s.displacementMap&&(b.displacementMap=m(s.displacementMap)),void 0!==s.displacementScale&&(b.displacementScale=s.displacementScale),void 0!==s.displacementBias&&(b.displacementBias=s.displacementBias),void 0!==s.roughnessMap&&(b.roughnessMap=m(s.roughnessMap)),void 0!==s.metalnessMap&&(b.metalnessMap=m(s.metalnessMap)),void 0!==s.emissiveMap&&(b.emissiveMap=m(s.emissiveMap)),void 0!==s.emissiveIntensity&&(b.emissiveIntensity=s.emissiveIntensity),void 0!==s.specularMap&&(b.specularMap=m(s.specularMap)),void 0!==s.specularIntensityMap&&(b.specularIntensityMap=m(s.specularIntensityMap)),void 0!==s.specularColorMap&&(b.specularColorMap=m(s.specularColorMap)),void 0!==s.envMap&&(b.envMap=m(s.envMap)),void 0!==s.envMapIntensity&&(b.envMapIntensity=s.envMapIntensity),void 0!==s.reflectivity&&(b.reflectivity=s.reflectivity),void 0!==s.refractionRatio&&(b.refractionRatio=s.refractionRatio),void 0!==s.lightMap&&(b.lightMap=m(s.lightMap)),void 0!==s.lightMapIntensity&&(b.lightMapIntensity=s.lightMapIntensity),void 0!==s.aoMap&&(b.aoMap=m(s.aoMap)),void 0!==s.aoMapIntensity&&(b.aoMapIntensity=s.aoMapIntensity),void 0!==s.gradientMap&&(b.gradientMap=m(s.gradientMap)),void 0!==s.clearcoatMap&&(b.clearcoatMap=m(s.clearcoatMap)),void 0!==s.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap=m(s.clearcoatRoughnessMap)),void 0!==s.clearcoatNormalMap&&(b.clearcoatNormalMap=m(s.clearcoatNormalMap)),void 0!==s.clearcoatNormalScale&&(b.clearcoatNormalScale=(new Sn).fromArray(s.clearcoatNormalScale)),void 0!==s.iridescenceMap&&(b.iridescenceMap=m(s.iridescenceMap)),void 0!==s.iridescenceThicknessMap&&(b.iridescenceThicknessMap=m(s.iridescenceThicknessMap)),void 0!==s.transmissionMap&&(b.transmissionMap=m(s.transmissionMap)),void 0!==s.thicknessMap&&(b.thicknessMap=m(s.thicknessMap)),void 0!==s.sheenColorMap&&(b.sheenColorMap=m(s.sheenColorMap)),void 0!==s.sheenRoughnessMap&&(b.sheenRoughnessMap=m(s.sheenRoughnessMap)),b}setTextures(s){return this.textures=s,this}static createMaterialFromType(s){return new{ShadowMaterial:ba,SpriteMaterial:nf,RawShaderMaterial:Io,ShaderMaterial:od,PointsMaterial:c_,MeshPhysicalMaterial:z0,MeshStandardMaterial:jo,MeshPhongMaterial:Tx,MeshToonMaterial:Ax,MeshNormalMaterial:My,MeshLambertMaterial:wy,MeshDepthMaterial:n_,MeshDistanceMaterial:Vm,MeshBasicMaterial:Gr,MeshMatcapMaterial:Dx,LineDashedMaterial:Rx,LineBasicMaterial:mc,Material:La}[s]}}class uo{static decodeText(s){if(typeof TextDecoder<"u")return(new TextDecoder).decode(s);let l="";for(let m=0,b=s.length;m<b;m++)l+=String.fromCharCode(s[m]);try{return decodeURIComponent(escape(l))}catch{return l}}static extractUrlBase(s){const l=s.lastIndexOf("/");return-1===l?"./":s.slice(0,l+1)}static resolveURL(s,l){return"string"!=typeof s||""===s?"":(/^https?:\/\//i.test(l)&&/^\//.test(s)&&(l=l.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(s)||/^data:.*,.*$/i.test(s)||/^blob:.*$/i.test(s)?s:l+s)}}class Ed extends ai{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(s){return super.copy(s),this.instanceCount=s.instanceCount,this}toJSON(){const s=super.toJSON();return s.instanceCount=this.instanceCount,s.isInstancedBufferGeometry=!0,s}}class qo extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=new Xl(p.manager);i.setPath(p.path),i.setRequestHeader(p.requestHeader),i.setWithCredentials(p.withCredentials),i.load(s,function(o){try{l(p.parse(JSON.parse(o)))}catch(u){b?b(u):console.error(u),p.manager.itemError(s)}},m,b)}parse(s){const l={},m={};function b(E,D){if(void 0!==l[D])return l[D];const O=E.interleavedBuffers[D],I=function p(E,D){if(void 0!==m[D])return m[D];const I=new Uint32Array(E.arrayBuffers[D]).buffer;return m[D]=I,I}(E,O.buffer),U=ym(O.type,I),B=new s_(U,O.stride);return B.uuid=O.uuid,l[D]=B,B}const i=s.isInstancedBufferGeometry?new Ed:new ai,o=s.data.index;if(void 0!==o){const E=ym(o.type,o.array);i.setIndex(new Zi(E,1))}const u=s.data.attributes;for(const E in u){const D=u[E];let k;if(D.isInterleavedBufferAttribute){const O=b(s.data,D.data);k=new ks(O,D.itemSize,D.offset,D.normalized)}else{const O=ym(D.type,D.array);k=new(D.isInstancedBufferAttribute?_d:Zi)(O,D.itemSize,D.normalized)}void 0!==D.name&&(k.name=D.name),void 0!==D.usage&&k.setUsage(D.usage),void 0!==D.updateRange&&(k.updateRange.offset=D.updateRange.offset,k.updateRange.count=D.updateRange.count),i.setAttribute(E,k)}const f=s.data.morphAttributes;if(f)for(const E in f){const D=f[E],k=[];for(let O=0,I=D.length;O<I;O++){const U=D[O];let B;if(U.isInterleavedBufferAttribute){const j=b(s.data,U.data);B=new ks(j,U.itemSize,U.offset,U.normalized)}else{const j=ym(U.type,U.array);B=new Zi(j,U.itemSize,U.normalized)}void 0!==U.name&&(B.name=U.name),k.push(B)}i.morphAttributes[E]=k}s.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const x=s.data.groups||s.data.drawcalls||s.data.offsets;if(void 0!==x)for(let E=0,D=x.length;E!==D;++E){const k=x[E];i.addGroup(k.start,k.count,k.materialIndex)}const M=s.data.boundingSphere;if(void 0!==M){const E=new Pe;void 0!==M.center&&E.fromArray(M.center),i.boundingSphere=new Js(E,M.radius)}return s.name&&(i.name=s.name),s.userData&&(i.userData=s.userData),i}}const di={UVMapping:300,CubeReflectionMapping:lu,CubeRefractionMapping:Ca,EquirectangularReflectionMapping:Wu,EquirectangularRefractionMapping:Tl,CubeUVReflectionMapping:ju},Cd={RepeatWrapping:Ud,ClampToEdgeWrapping:Oo,MirroredRepeatWrapping:io},bh={NearestFilter:gr,NearestMipmapNearestFilter:Xr,NearestMipmapLinearFilter:Ff,LinearFilter:mo,LinearMipmapNearestFilter:bs,LinearMipmapLinearFilter:$u};let Td;class Yl{static getContext(){return void 0===Td&&(Td=new(window.AudioContext||window.webkitAudioContext)),Td}static setContext(s){Td=s}}const Wp=new zi,m_=new zi,Fu=new zi;class q0{constructor(s=!0){this.autoStart=s,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Zl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let s=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const l=Zl();s=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=s}return s}}function Zl(){return(typeof performance>"u"?Date:performance).now()}const xh=new Pe,Mh=new fs,Cy=new Pe,wh=new Pe;class X0 extends os{constructor(s){super(),this.type="Audio",this.listener=s,this.context=s.context,this.gain=this.context.createGain(),this.gain.connect(s.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(s){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=s,this.connect(),this}setMediaElementSource(s){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(s),this.connect(),this}setMediaStreamSource(s){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(s),this.connect(),this}setBuffer(s){return this.buffer=s,this.sourceType="buffer",this.autoplay&&this.play(),this}play(s=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+s;const l=this.context.createBufferSource();return l.buffer=this.buffer,l.loop=this.loop,l.loopStart=this.loopStart,l.loopEnd=this.loopEnd,l.onended=this.onEnded.bind(this),l.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=l,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let s=1,l=this.filters.length;s<l;s++)this.filters[s-1].connect(this.filters[s]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let s=1,l=this.filters.length;s<l;s++)this.filters[s-1].disconnect(this.filters[s]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(s){return s||(s=[]),!0===this._connected?(this.disconnect(),this.filters=s.slice(),this.connect()):this.filters=s.slice(),this}setDetune(s){if(this.detune=s,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(s){return this.setFilters(s?[s]:[])}setPlaybackRate(s){if(!1!==this.hasPlaybackControl)return this.playbackRate=s,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(s){if(!1!==this.hasPlaybackControl)return this.loop=s,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(s){return this.loopStart=s,this}setLoopEnd(s){return this.loopEnd=s,this}getVolume(){return this.gain.gain.value}setVolume(s){return this.gain.gain.setTargetAtTime(s,this.context.currentTime,.01),this}}const Oi=new Pe,Nu=new fs,Ml=new Pe,Vn=new Pe;class on{constructor(s,l,m){let b,p,i;switch(this.binding=s,this.valueSize=m,l){case"quaternion":b=this._slerp,p=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*m),this._workIndex=5;break;case"string":case"bool":b=this._select,p=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(5*m);break;default:b=this._lerp,p=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*m)}this._mixBufferRegion=b,this._mixBufferRegionAdditive=p,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(s,l){const m=this.buffer,b=this.valueSize,p=s*b+b;let i=this.cumulativeWeight;if(0===i){for(let o=0;o!==b;++o)m[p+o]=m[o];i=l}else i+=l,this._mixBufferRegion(m,p,0,l/i,b);this.cumulativeWeight=i}accumulateAdditive(s){const l=this.buffer,m=this.valueSize,b=m*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(l,b,0,s,m),this.cumulativeWeightAdditive+=s}apply(s){const l=this.valueSize,m=this.buffer,b=s*l+l,p=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,p<1&&this._mixBufferRegion(m,b,l*this._origIndex,1-p,l),i>0&&this._mixBufferRegionAdditive(m,b,this._addIndex*l,1,l);for(let u=l,f=l+l;u!==f;++u)if(m[u]!==m[u+l]){o.setValue(m,b);break}}saveOriginalState(){const l=this.buffer,m=this.valueSize,b=m*this._origIndex;this.binding.getValue(l,b);for(let p=m,i=b;p!==i;++p)l[p]=l[b+p%m];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const s=this._addIndex*this.valueSize,l=s+this.valueSize;for(let m=s;m<l;m++)this.buffer[m]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const s=this._origIndex*this.valueSize,l=this._addIndex*this.valueSize;for(let m=0;m<this.valueSize;m++)this.buffer[l+m]=this.buffer[s+m]}_select(s,l,m,b,p){if(b>=.5)for(let i=0;i!==p;++i)s[l+i]=s[m+i]}_slerp(s,l,m,b){fs.slerpFlat(s,l,s,l,s,m,b)}_slerpAdditive(s,l,m,b,p){const i=this._workIndex*p;fs.multiplyQuaternionsFlat(s,i,s,l,s,m),fs.slerpFlat(s,l,s,l,s,i,b)}_lerp(s,l,m,b,p){const i=1-b;for(let o=0;o!==p;++o){const u=l+o;s[u]=s[u]*i+s[m+o]*b}}_lerpAdditive(s,l,m,b,p){for(let i=0;i!==p;++i){const o=l+i;s[o]=s[o]+s[m+i]*b}}}const gn="\\[\\]\\.:\\/",$n=new RegExp("["+gn+"]","g"),_c="[^"+gn+"]",Jl="[^"+gn.replace("\\.","")+"]",Eh=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",_c)+/(WCOD+)?/.source.replace("WCOD",Jl)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_c)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_c)+"$"),Uu=["material","materials","bones","map"];class Ei{constructor(s,l,m){const b=m||ds.parseTrackName(l);this._targetGroup=s,this._bindings=s.subscribe_(l,b)}getValue(s,l){this.bind();const b=this._bindings[this._targetGroup.nCachedObjects_];void 0!==b&&b.getValue(s,l)}setValue(s,l){const m=this._bindings;for(let b=this._targetGroup.nCachedObjects_,p=m.length;b!==p;++b)m[b].setValue(s,l)}bind(){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,m=s.length;l!==m;++l)s[l].bind()}unbind(){const s=this._bindings;for(let l=this._targetGroup.nCachedObjects_,m=s.length;l!==m;++l)s[l].unbind()}}let ds=(()=>{class S{constructor(l,m,b){this.path=m,this.parsedPath=b||S.parseTrackName(m),this.node=S.findNode(l,this.parsedPath.nodeName),this.rootNode=l,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(l,m,b){return l&&l.isAnimationObjectGroup?new S.Composite(l,m,b):new S(l,m,b)}static sanitizeNodeName(l){return l.replace(/\s/g,"_").replace($n,"")}static parseTrackName(l){const m=Eh.exec(l);if(null===m)throw new Error("PropertyBinding: Cannot parse trackName: "+l);const b={nodeName:m[2],objectName:m[3],objectIndex:m[4],propertyName:m[5],propertyIndex:m[6]},p=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==p&&-1!==p){const i=b.nodeName.substring(p+1);-1!==Uu.indexOf(i)&&(b.nodeName=b.nodeName.substring(0,p),b.objectName=i)}if(null===b.propertyName||0===b.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+l);return b}static findNode(l,m){if(void 0===m||""===m||"."===m||-1===m||m===l.name||m===l.uuid)return l;if(l.skeleton){const b=l.skeleton.getBoneByName(m);if(void 0!==b)return b}if(l.children){const b=function(i){for(let o=0;o<i.length;o++){const u=i[o];if(u.name===m||u.uuid===m)return u;const f=b(u.children);if(f)return f}return null},p=b(l.children);if(p)return p}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(l,m){l[m]=this.targetObject[this.propertyName]}_getValue_array(l,m){const b=this.resolvedProperty;for(let p=0,i=b.length;p!==i;++p)l[m++]=b[p]}_getValue_arrayElement(l,m){l[m]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(l,m){this.resolvedProperty.toArray(l,m)}_setValue_direct(l,m){this.targetObject[this.propertyName]=l[m]}_setValue_direct_setNeedsUpdate(l,m){this.targetObject[this.propertyName]=l[m],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(l,m){this.targetObject[this.propertyName]=l[m],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(l,m){const b=this.resolvedProperty;for(let p=0,i=b.length;p!==i;++p)b[p]=l[m++]}_setValue_array_setNeedsUpdate(l,m){const b=this.resolvedProperty;for(let p=0,i=b.length;p!==i;++p)b[p]=l[m++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(l,m){const b=this.resolvedProperty;for(let p=0,i=b.length;p!==i;++p)b[p]=l[m++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(l,m){this.resolvedProperty[this.propertyIndex]=l[m]}_setValue_arrayElement_setNeedsUpdate(l,m){this.resolvedProperty[this.propertyIndex]=l[m],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(l,m){this.resolvedProperty[this.propertyIndex]=l[m],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(l,m){this.resolvedProperty.fromArray(l,m)}_setValue_fromArray_setNeedsUpdate(l,m){this.resolvedProperty.fromArray(l,m),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(l,m){this.resolvedProperty.fromArray(l,m),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(l,m){this.bind(),this.getValue(l,m)}_setValue_unbound(l,m){this.bind(),this.setValue(l,m)}bind(){let l=this.node;const m=this.parsedPath,b=m.objectName,p=m.propertyName;let i=m.propertyIndex;if(l||(l=S.findNode(this.rootNode,m.nodeName),this.node=l),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!l)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(b){let _=m.objectIndex;switch(b){case"materials":if(!l.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!l.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);l=l.material.materials;break;case"bones":if(!l.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);l=l.skeleton.bones;for(let x=0;x<l.length;x++)if(l[x].name===_){_=x;break}break;case"map":if("map"in l){l=l.map;break}if(!l.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!l.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);l=l.material.map;break;default:if(void 0===l[b])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);l=l[b]}if(void 0!==_){if(void 0===l[_])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,l);l=l[_]}}const o=l[p];if(void 0===o)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+m.nodeName+"."+p+" but it wasn't found.",l);let u=this.Versioning.None;this.targetObject=l,void 0!==l.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==l.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===p){if(!l.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!l.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==l.morphTargetDictionary[i]&&(i=l.morphTargetDictionary[i])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=p;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return S.Composite=Ei,S})();ds.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ds.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ds.prototype.GetterByBindingType=[ds.prototype._getValue_direct,ds.prototype._getValue_array,ds.prototype._getValue_arrayElement,ds.prototype._getValue_toArray],ds.prototype.SetterByBindingTypeAndVersioning=[[ds.prototype._setValue_direct,ds.prototype._setValue_direct_setNeedsUpdate,ds.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_array,ds.prototype._setValue_array_setNeedsUpdate,ds.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_arrayElement,ds.prototype._setValue_arrayElement_setNeedsUpdate,ds.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ds.prototype._setValue_fromArray,ds.prototype._setValue_fromArray_setNeedsUpdate,ds.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ay{constructor(s,l,m=null,b=l.blendMode){this._mixer=s,this._clip=l,this._localRoot=m,this.blendMode=b;const p=l.tracks,i=p.length,o=new Array(i),u={endingStart:Dl,endingEnd:Dl};for(let f=0;f!==i;++f){const _=p[f].createInterpolant(null);o[f]=_,_.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(s){return this._startTime=s,this}setLoop(s,l){return this.loop=s,this.repetitions=l,this}setEffectiveWeight(s){return this.weight=s,this._effectiveWeight=this.enabled?s:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(s){return this._scheduleFading(s,0,1)}fadeOut(s){return this._scheduleFading(s,1,0)}crossFadeFrom(s,l,m){if(s.fadeOut(l),this.fadeIn(l),m){const b=this._clip.duration,p=s._clip.duration,o=b/p;s.warp(1,p/b,l),this.warp(o,1,l)}return this}crossFadeTo(s,l,m){return s.crossFadeFrom(this,l,m)}stopFading(){const s=this._weightInterpolant;return null!==s&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(s)),this}setEffectiveTimeScale(s){return this.timeScale=s,this._effectiveTimeScale=this.paused?0:s,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(s){return this.timeScale=this._clip.duration/s,this.stopWarping()}syncWith(s){return this.time=s.time,this.timeScale=s.timeScale,this.stopWarping()}halt(s){return this.warp(this._effectiveTimeScale,0,s)}warp(s,l,m){const b=this._mixer,p=b.time,i=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=b._lendControlInterpolant(),this._timeScaleInterpolant=o);const u=o.parameterPositions,f=o.sampleValues;return u[0]=p,u[1]=p+m,f[0]=s/i,f[1]=l/i,this}stopWarping(){const s=this._timeScaleInterpolant;return null!==s&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(s)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(s,l,m,b){if(!this.enabled)return void this._updateWeight(s);const p=this._startTime;if(null!==p){const u=(s-p)*m;u<0||0===m?l=0:(this._startTime=null,l=m*u)}l*=this._updateTimeScale(s);const i=this._updateTime(l),o=this._updateWeight(s);if(o>0){const u=this._interpolants,f=this._propertyBindings;if(2501===this.blendMode)for(let _=0,x=u.length;_!==x;++_)u[_].evaluate(i),f[_].accumulateAdditive(o);else for(let _=0,x=u.length;_!==x;++_)u[_].evaluate(i),f[_].accumulate(b,o)}}_updateWeight(s){let l=0;if(this.enabled){l=this.weight;const m=this._weightInterpolant;if(null!==m){const b=m.evaluate(s)[0];l*=b,s>m.parameterPositions[1]&&(this.stopFading(),0===b&&(this.enabled=!1))}}return this._effectiveWeight=l,l}_updateTimeScale(s){let l=0;if(!this.paused){l=this.timeScale;const m=this._timeScaleInterpolant;null!==m&&(l*=m.evaluate(s)[0],s>m.parameterPositions[1]&&(this.stopWarping(),0===l?this.paused=!0:this.timeScale=l))}return this._effectiveTimeScale=l,l}_updateTime(s){const l=this._clip.duration,m=this.loop;let b=this.time+s,p=this._loopCount;const i=2202===m;if(0===s)return-1===p?b:i&&1==(1&p)?l-b:b;if(2200===m){-1===p&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(b>=l)b=l;else{if(!(b<0)){this.time=b;break e}b=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=b,this._mixer.dispatchEvent({type:"finished",action:this,direction:s<0?-1:1})}}else{if(-1===p&&(s>=0?(p=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),b>=l||b<0){const o=Math.floor(b/l);b-=l*o,p+=Math.abs(o);const u=this.repetitions-p;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=s>0?l:0,this.time=b,this._mixer.dispatchEvent({type:"finished",action:this,direction:s>0?1:-1});else{if(1===u){const f=s<0;this._setEndings(f,!f,i)}else this._setEndings(!1,!1,i);this._loopCount=p,this.time=b,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=b;if(i&&1==(1&p))return l-b}return b}_setEndings(s,l,m){const b=this._interpolantSettings;m?(b.endingStart=Jt,b.endingEnd=Jt):(b.endingStart=s?this.zeroSlopeAtStart?Jt:Dl:Da,b.endingEnd=l?this.zeroSlopeAtEnd?Jt:Dl:Da)}_scheduleFading(s,l,m){const b=this._mixer,p=b.time;let i=this._weightInterpolant;null===i&&(i=b._lendControlInterpolant(),this._weightInterpolant=i);const o=i.parameterPositions,u=i.sampleValues;return o[0]=p,u[0]=l,o[1]=p+s,u[1]=m,this}}const Dy=new Float32Array(1);class ps{constructor(s){this.value=s}clone(){return new ps(void 0===this.value.clone?this.value:this.value.clone())}}let kx=0;function dg(S,s){return S.distance-s.distance}function wf(S,s,l,m){if(S.layers.test(s.layers)&&S.raycast(s,l),!0===m){const b=S.children;for(let p=0,i=b.length;p<i;p++)wf(b[p],s,l,!0)}}const __=new Sn,v_=new Pe,Ch=new Pe,Dd=new Pe,Sf=new Pe,Wc=new zi,Is=new zi;function vc(S){const s=[];!0===S.isBone&&s.push(S);for(let l=0;l<S.children.length;l++)s.push.apply(s,vc(S.children[l]));return s}const ww=new Pe,y_=new Yn,Z0=new Yn,Yo=new Pe,pg=new Pe,b_=new Pe,K0=new Pe,ts=new _u;function to(S,s,l,m,b,p,i){K0.set(b,p,i).unproject(m);const o=s[S];if(void 0!==o){const u=l.getAttribute("position");for(let f=0,_=o.length;f<_;f++)u.setXYZ(o[f],K0.x,K0.y,K0.z)}}const Wr=new Ac,Ux=new Pe;let qp,mg;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Un}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Un),re.ACESFilmicToneMapping=Sv,re.AddEquation=Jc,re.AddOperation=hb,re.AdditiveAnimationBlendMode=2501,re.AdditiveBlending=$r,re.AlphaFormat=Bh,re.AlwaysDepth=Nh,re.AlwaysStencilFunc=519,re.AmbientLight=p_,re.AmbientLightProbe=class Mf extends qs{constructor(s,l=1){super(void 0,l),this.isAmbientLightProbe=!0;const m=(new Yn).set(s);this.sh.coefficients[0].set(m.r,m.g,m.b).multiplyScalar(2*Math.sqrt(Math.PI))}},re.AnimationAction=Ay,re.AnimationClip=vh,re.AnimationLoader=class Sd extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=new Xl(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(s,function(o){try{l(p.parse(JSON.parse(o)))}catch(u){b?b(u):console.error(u),p.manager.itemError(s)}},m,b)}parse(s){const l=[];for(let m=0;m<s.length;m++){const b=vh.parse(s[m]);l.push(b)}return l}},re.AnimationMixer=class Ry extends Zu{constructor(s){super(),this._root=s,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(s,l){const m=s._localRoot||this._root,b=s._clip.tracks,p=b.length,i=s._propertyBindings,o=s._interpolants,u=m.uuid,f=this._bindingsByRootAndName;let _=f[u];void 0===_&&(_={},f[u]=_);for(let x=0;x!==p;++x){const M=b[x],E=M.name;let D=_[E];if(void 0!==D)++D.referenceCount,i[x]=D;else{if(D=i[x],void 0!==D){null===D._cacheIndex&&(++D.referenceCount,this._addInactiveBinding(D,u,E));continue}D=new on(ds.create(m,E,l&&l._propertyBindings[x].binding.parsedPath),M.ValueTypeName,M.getValueSize()),++D.referenceCount,this._addInactiveBinding(D,u,E),i[x]=D}o[x].resultBuffer=D.buffer}}_activateAction(s){if(!this._isActiveAction(s)){if(null===s._cacheIndex){const m=(s._localRoot||this._root).uuid,b=s._clip.uuid,p=this._actionsByClip[b];this._bindAction(s,p&&p.knownActions[0]),this._addInactiveAction(s,b,m)}const l=s._propertyBindings;for(let m=0,b=l.length;m!==b;++m){const p=l[m];0==p.useCount++&&(this._lendBinding(p),p.saveOriginalState())}this._lendAction(s)}}_deactivateAction(s){if(this._isActiveAction(s)){const l=s._propertyBindings;for(let m=0,b=l.length;m!==b;++m){const p=l[m];0==--p.useCount&&(p.restoreOriginalState(),this._takeBackBinding(p))}this._takeBackAction(s)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const s=this;this.stats={actions:{get total(){return s._actions.length},get inUse(){return s._nActiveActions}},bindings:{get total(){return s._bindings.length},get inUse(){return s._nActiveBindings}},controlInterpolants:{get total(){return s._controlInterpolants.length},get inUse(){return s._nActiveControlInterpolants}}}}_isActiveAction(s){const l=s._cacheIndex;return null!==l&&l<this._nActiveActions}_addInactiveAction(s,l,m){const b=this._actions,p=this._actionsByClip;let i=p[l];if(void 0===i)i={knownActions:[s],actionByRoot:{}},s._byClipCacheIndex=0,p[l]=i;else{const o=i.knownActions;s._byClipCacheIndex=o.length,o.push(s)}s._cacheIndex=b.length,b.push(s),i.actionByRoot[m]=s}_removeInactiveAction(s){const l=this._actions,m=l[l.length-1],b=s._cacheIndex;m._cacheIndex=b,l[b]=m,l.pop(),s._cacheIndex=null;const p=s._clip.uuid,i=this._actionsByClip,o=i[p],u=o.knownActions,f=u[u.length-1],_=s._byClipCacheIndex;f._byClipCacheIndex=_,u[_]=f,u.pop(),s._byClipCacheIndex=null,delete o.actionByRoot[(s._localRoot||this._root).uuid],0===u.length&&delete i[p],this._removeInactiveBindingsForAction(s)}_removeInactiveBindingsForAction(s){const l=s._propertyBindings;for(let m=0,b=l.length;m!==b;++m){const p=l[m];0==--p.referenceCount&&this._removeInactiveBinding(p)}}_lendAction(s){const l=this._actions,m=s._cacheIndex,b=this._nActiveActions++,p=l[b];s._cacheIndex=b,l[b]=s,p._cacheIndex=m,l[m]=p}_takeBackAction(s){const l=this._actions,m=s._cacheIndex,b=--this._nActiveActions,p=l[b];s._cacheIndex=b,l[b]=s,p._cacheIndex=m,l[m]=p}_addInactiveBinding(s,l,m){const b=this._bindingsByRootAndName,p=this._bindings;let i=b[l];void 0===i&&(i={},b[l]=i),i[m]=s,s._cacheIndex=p.length,p.push(s)}_removeInactiveBinding(s){const l=this._bindings,m=s.binding,b=m.rootNode.uuid,p=m.path,i=this._bindingsByRootAndName,o=i[b],u=l[l.length-1],f=s._cacheIndex;u._cacheIndex=f,l[f]=u,l.pop(),delete o[p],0===Object.keys(o).length&&delete i[b]}_lendBinding(s){const l=this._bindings,m=s._cacheIndex,b=this._nActiveBindings++,p=l[b];s._cacheIndex=b,l[b]=s,p._cacheIndex=m,l[m]=p}_takeBackBinding(s){const l=this._bindings,m=s._cacheIndex,b=--this._nActiveBindings,p=l[b];s._cacheIndex=b,l[b]=s,p._cacheIndex=m,l[m]=p}_lendControlInterpolant(){const s=this._controlInterpolants,l=this._nActiveControlInterpolants++;let m=s[l];return void 0===m&&(m=new H0(new Float32Array(2),new Float32Array(2),1,Dy),m.__cacheIndex=l,s[l]=m),m}_takeBackControlInterpolant(s){const l=this._controlInterpolants,m=s.__cacheIndex,b=--this._nActiveControlInterpolants,p=l[b];s.__cacheIndex=b,l[b]=s,p.__cacheIndex=m,l[m]=p}clipAction(s,l,m){const b=l||this._root,p=b.uuid;let i="string"==typeof s?vh.findByName(b,s):s;const o=null!==i?i.uuid:s,u=this._actionsByClip[o];let f=null;if(void 0===m&&(m=null!==i?i.blendMode:2500),void 0!==u){const x=u.actionByRoot[p];if(void 0!==x&&x.blendMode===m)return x;f=u.knownActions[0],null===i&&(i=f._clip)}if(null===i)return null;const _=new Ay(this,i,l,m);return this._bindAction(_,f),this._addInactiveAction(_,o,p),_}existingAction(s,l){const m=l||this._root,b=m.uuid,p="string"==typeof s?vh.findByName(m,s):s,o=this._actionsByClip[p?p.uuid:s];return void 0!==o&&o.actionByRoot[b]||null}stopAllAction(){const s=this._actions;for(let m=this._nActiveActions-1;m>=0;--m)s[m].stop();return this}update(s){const l=this._actions,m=this._nActiveActions,b=this.time+=s*=this.timeScale,p=Math.sign(s),i=this._accuIndex^=1;for(let f=0;f!==m;++f)l[f]._update(b,s,p,i);const o=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)o[f].apply(i);return this}setTime(s){this.time=0;for(let l=0;l<this._actions.length;l++)this._actions[l].time=0;return this.update(s)}getRoot(){return this._root}uncacheClip(s){const l=this._actions,m=s.uuid,b=this._actionsByClip,p=b[m];if(void 0!==p){const i=p.knownActions;for(let o=0,u=i.length;o!==u;++o){const f=i[o];this._deactivateAction(f);const _=f._cacheIndex,x=l[l.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,x._cacheIndex=_,l[_]=x,l.pop(),this._removeInactiveBindingsForAction(f)}delete b[m]}}uncacheRoot(s){const l=s.uuid,m=this._actionsByClip;for(const i in m){const u=m[i].actionByRoot[l];void 0!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}const p=this._bindingsByRootAndName[l];if(void 0!==p)for(const i in p){const o=p[i];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(s,l){const m=this.existingAction(s,l);null!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}},re.AnimationObjectGroup=class Rs{constructor(){this.isAnimationObjectGroup=!0,this.uuid=go(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const s={};this._indicesByUUID=s;for(let m=0,b=arguments.length;m!==b;++m)s[arguments[m].uuid]=m;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const l=this;this.stats={objects:{get total(){return l._objects.length},get inUse(){return this.total-l.nCachedObjects_}},get bindingsPerObject(){return l._bindings.length}}}add(){const s=this._objects,l=this._indicesByUUID,m=this._paths,b=this._parsedPaths,p=this._bindings,i=p.length;let o,u=s.length,f=this.nCachedObjects_;for(let _=0,x=arguments.length;_!==x;++_){const M=arguments[_],E=M.uuid;let D=l[E];if(void 0===D){D=u++,l[E]=D,s.push(M);for(let k=0,O=i;k!==O;++k)p[k].push(new ds(M,m[k],b[k]))}else if(D<f){o=s[D];const k=--f,O=s[k];l[O.uuid]=D,s[D]=O,l[E]=k,s[k]=M;for(let I=0,U=i;I!==U;++I){const B=p[I];let $=B[D];B[D]=B[k],void 0===$&&($=new ds(M,m[I],b[I])),B[k]=$}}else s[D]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const s=this._objects,l=this._indicesByUUID,m=this._bindings,b=m.length;let p=this.nCachedObjects_;for(let i=0,o=arguments.length;i!==o;++i){const u=arguments[i],f=u.uuid,_=l[f];if(void 0!==_&&_>=p){const x=p++,M=s[x];l[M.uuid]=_,s[_]=M,l[f]=x,s[x]=u;for(let E=0,D=b;E!==D;++E){const k=m[E],I=k[_];k[_]=k[x],k[x]=I}}}this.nCachedObjects_=p}uncache(){const s=this._objects,l=this._indicesByUUID,m=this._bindings,b=m.length;let p=this.nCachedObjects_,i=s.length;for(let o=0,u=arguments.length;o!==u;++o){const _=arguments[o].uuid,x=l[_];if(void 0!==x)if(delete l[_],x<p){const M=--p,E=s[M],D=--i,k=s[D];l[E.uuid]=x,s[x]=E,l[k.uuid]=M,s[M]=k,s.pop();for(let O=0,I=b;O!==I;++O){const U=m[O],j=U[D];U[x]=U[M],U[M]=j,U.pop()}}else{const M=--i,E=s[M];M>0&&(l[E.uuid]=x),s[x]=E,s.pop();for(let D=0,k=b;D!==k;++D){const O=m[D];O[x]=O[M],O.pop()}}}this.nCachedObjects_=p}subscribe_(s,l){const m=this._bindingsIndicesByPath;let b=m[s];const p=this._bindings;if(void 0!==b)return p[b];const i=this._paths,o=this._parsedPaths,u=this._objects,_=this.nCachedObjects_,x=new Array(u.length);b=p.length,m[s]=b,i.push(s),o.push(l),p.push(x);for(let M=_,E=u.length;M!==E;++M)x[M]=new ds(u[M],s,l);return x}unsubscribe_(s){const l=this._bindingsIndicesByPath,m=l[s];if(void 0!==m){const b=this._paths,p=this._parsedPaths,i=this._bindings,o=i.length-1,u=i[o];l[s[o]]=m,i[m]=u,i.pop(),p[m]=p[o],p.pop(),b[m]=b[o],b.pop()}}},re.AnimationUtils=tS,re.ArcCurve=l_,re.ArrayCamera=D0,re.ArrowHelper=class Bu extends os{constructor(s=new Pe(0,0,1),l=new Pe(0,0,0),m=1,b=16776960,p=.2*m,i=.2*p){super(),this.type="ArrowHelper",void 0===qp&&(qp=new ai,qp.setAttribute("position",new oi([0,0,0,0,1,0],3)),mg=new uh(0,.5,1,5,1),mg.translate(0,-.5,0)),this.position.copy(l),this.line=new vl(qp,new mc({color:b,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _s(mg,new Gr({color:b,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(s),this.setLength(m,p,i)}setDirection(s){if(s.y>.99999)this.quaternion.set(0,0,0,1);else if(s.y<-.99999)this.quaternion.set(1,0,0,0);else{Ux.set(s.z,0,-s.x).normalize();const l=Math.acos(s.y);this.quaternion.setFromAxisAngle(Ux,l)}}setLength(s,l=.2*s,m=.2*l){this.line.scale.set(1,Math.max(1e-4,s-l),1),this.line.updateMatrix(),this.cone.scale.set(m,l,m),this.cone.position.y=s,this.cone.updateMatrix()}setColor(s){this.line.material.color.set(s),this.cone.material.color.set(s)}copy(s){return super.copy(s,!1),this.line.copy(s.line),this.cone.copy(s.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},re.Audio=X0,re.AudioAnalyser=class Ty{constructor(s,l=2048){this.analyser=s.context.createAnalyser(),this.analyser.fftSize=l,this.data=new Uint8Array(this.analyser.frequencyBinCount),s.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let s=0;const l=this.getFrequencyData();for(let m=0;m<l.length;m++)s+=l[m];return s/l.length}},re.AudioContext=Yl,re.AudioListener=class jp extends os{constructor(){super(),this.type="AudioListener",this.context=Yl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new q0}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(s){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=s,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(s){return this.gain.gain.setTargetAtTime(s,this.context.currentTime,.01),this}updateMatrixWorld(s){super.updateMatrixWorld(s);const l=this.context.listener,m=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xh,Mh,Cy),wh.set(0,0,-1).applyQuaternion(Mh),l.positionX){const b=this.context.currentTime+this.timeDelta;l.positionX.linearRampToValueAtTime(xh.x,b),l.positionY.linearRampToValueAtTime(xh.y,b),l.positionZ.linearRampToValueAtTime(xh.z,b),l.forwardX.linearRampToValueAtTime(wh.x,b),l.forwardY.linearRampToValueAtTime(wh.y,b),l.forwardZ.linearRampToValueAtTime(wh.z,b),l.upX.linearRampToValueAtTime(m.x,b),l.upY.linearRampToValueAtTime(m.y,b),l.upZ.linearRampToValueAtTime(m.z,b)}else l.setPosition(xh.x,xh.y,xh.z),l.setOrientation(wh.x,wh.y,wh.z,m.x,m.y,m.z)}},re.AudioLoader=class Ma extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=new Xl(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(s,function(o){try{const u=o.slice(0);Yl.getContext().decodeAudioData(u,function(_){l(_)})}catch(u){b?b(u):console.error(u),p.manager.itemError(s)}},m,b)}},re.AxesHelper=class Ir extends yl{constructor(s=1){const l=[0,0,0,s,0,0,0,0,0,0,s,0,0,0,0,0,0,s],b=new ai;b.setAttribute("position",new oi(l,3)),b.setAttribute("color",new oi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(b,new mc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(s,l,m){const b=new Yn,p=this.geometry.attributes.color.array;return b.set(s),b.toArray(p,0),b.toArray(p,3),b.set(l),b.toArray(p,6),b.toArray(p,9),b.set(m),b.toArray(p,12),b.toArray(p,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},re.BackSide=Mt,re.BasicDepthPacking=3200,re.BasicShadowMap=0,re.Bone=ml,re.BooleanKeyframeTrack=us,re.Box2=class fg{constructor(s=new Sn(1/0,1/0),l=new Sn(-1/0,-1/0)){this.isBox2=!0,this.min=s,this.max=l}set(s,l){return this.min.copy(s),this.max.copy(l),this}setFromPoints(s){this.makeEmpty();for(let l=0,m=s.length;l<m;l++)this.expandByPoint(s[l]);return this}setFromCenterAndSize(s,l){const m=__.copy(l).multiplyScalar(.5);return this.min.copy(s).sub(m),this.max.copy(s).add(m),this}clone(){return(new this.constructor).copy(this)}copy(s){return this.min.copy(s.min),this.max.copy(s.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(s){return this.isEmpty()?s.set(0,0):s.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(s){return this.isEmpty()?s.set(0,0):s.subVectors(this.max,this.min)}expandByPoint(s){return this.min.min(s),this.max.max(s),this}expandByVector(s){return this.min.sub(s),this.max.add(s),this}expandByScalar(s){return this.min.addScalar(-s),this.max.addScalar(s),this}containsPoint(s){return!(s.x<this.min.x||s.x>this.max.x||s.y<this.min.y||s.y>this.max.y)}containsBox(s){return this.min.x<=s.min.x&&s.max.x<=this.max.x&&this.min.y<=s.min.y&&s.max.y<=this.max.y}getParameter(s,l){return l.set((s.x-this.min.x)/(this.max.x-this.min.x),(s.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(s){return!(s.max.x<this.min.x||s.min.x>this.max.x||s.max.y<this.min.y||s.min.y>this.max.y)}clampPoint(s,l){return l.copy(s).clamp(this.min,this.max)}distanceToPoint(s){return this.clampPoint(s,__).distanceTo(s)}intersect(s){return this.min.max(s.min),this.max.min(s.max),this.isEmpty()&&this.makeEmpty(),this}union(s){return this.min.min(s.min),this.max.max(s.max),this}translate(s){return this.min.add(s),this.max.add(s),this}equals(s){return s.min.equals(this.min)&&s.max.equals(this.max)}},re.Box3=Ac,re.Box3Helper=class Cw extends yl{constructor(s,l=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),p=new ai;p.setIndex(new Zi(m,1)),p.setAttribute("position",new oi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(p,new mc({color:l,toneMapped:!1})),this.box=s,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(s){const l=this.box;l.isEmpty()||(l.getCenter(this.position),l.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(s))}dispose(){this.geometry.dispose(),this.material.dispose()}},re.BoxBufferGeometry=class Py extends cl{constructor(s,l,m,b,p,i){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(s,l,m,b,p,i)}},re.BoxGeometry=cl,re.BoxHelper=class x_ extends yl{constructor(s,l=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),b=new Float32Array(24),p=new ai;p.setIndex(new Zi(m,1)),p.setAttribute("position",new Zi(b,3)),super(p,new mc({color:l,toneMapped:!1})),this.object=s,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(s){if(void 0!==s&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Wr.setFromObject(this.object),Wr.isEmpty())return;const l=Wr.min,m=Wr.max,b=this.geometry.attributes.position,p=b.array;p[0]=m.x,p[1]=m.y,p[2]=m.z,p[3]=l.x,p[4]=m.y,p[5]=m.z,p[6]=l.x,p[7]=l.y,p[8]=m.z,p[9]=m.x,p[10]=l.y,p[11]=m.z,p[12]=m.x,p[13]=m.y,p[14]=l.z,p[15]=l.x,p[16]=m.y,p[17]=l.z,p[18]=l.x,p[19]=l.y,p[20]=l.z,p[21]=m.x,p[22]=l.y,p[23]=l.z,b.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(s){return this.object=s,this.update(),this}copy(s,l){return super.copy(s,l),this.object=s.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},re.BufferAttribute=Zi,re.BufferGeometry=ai,re.BufferGeometryLoader=qo,re.ByteType=Al,re.Cache=_f,re.Camera=_u,re.CameraHelper=class Fs extends yl{constructor(s){const l=new ai,m=new mc({color:16777215,vertexColors:!0,toneMapped:!1}),b=[],p=[],i={};function o(D,k){u(D),u(k)}function u(D){b.push(0,0,0),p.push(0,0,0),void 0===i[D]&&(i[D]=[]),i[D].push(b.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),l.setAttribute("position",new oi(b,3)),l.setAttribute("color",new oi(p,3)),super(l,m),this.type="CameraHelper",this.camera=s,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=s.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=i,this.update();const f=new Yn(16755200),_=new Yn(16711680),x=new Yn(43775),M=new Yn(16777215),E=new Yn(3355443);this.setColors(f,_,x,M,E)}setColors(s,l,m,b,p){const o=this.geometry.getAttribute("color");o.setXYZ(0,s.r,s.g,s.b),o.setXYZ(1,s.r,s.g,s.b),o.setXYZ(2,s.r,s.g,s.b),o.setXYZ(3,s.r,s.g,s.b),o.setXYZ(4,s.r,s.g,s.b),o.setXYZ(5,s.r,s.g,s.b),o.setXYZ(6,s.r,s.g,s.b),o.setXYZ(7,s.r,s.g,s.b),o.setXYZ(8,s.r,s.g,s.b),o.setXYZ(9,s.r,s.g,s.b),o.setXYZ(10,s.r,s.g,s.b),o.setXYZ(11,s.r,s.g,s.b),o.setXYZ(12,s.r,s.g,s.b),o.setXYZ(13,s.r,s.g,s.b),o.setXYZ(14,s.r,s.g,s.b),o.setXYZ(15,s.r,s.g,s.b),o.setXYZ(16,s.r,s.g,s.b),o.setXYZ(17,s.r,s.g,s.b),o.setXYZ(18,s.r,s.g,s.b),o.setXYZ(19,s.r,s.g,s.b),o.setXYZ(20,s.r,s.g,s.b),o.setXYZ(21,s.r,s.g,s.b),o.setXYZ(22,s.r,s.g,s.b),o.setXYZ(23,s.r,s.g,s.b),o.setXYZ(24,l.r,l.g,l.b),o.setXYZ(25,l.r,l.g,l.b),o.setXYZ(26,l.r,l.g,l.b),o.setXYZ(27,l.r,l.g,l.b),o.setXYZ(28,l.r,l.g,l.b),o.setXYZ(29,l.r,l.g,l.b),o.setXYZ(30,l.r,l.g,l.b),o.setXYZ(31,l.r,l.g,l.b),o.setXYZ(32,m.r,m.g,m.b),o.setXYZ(33,m.r,m.g,m.b),o.setXYZ(34,m.r,m.g,m.b),o.setXYZ(35,m.r,m.g,m.b),o.setXYZ(36,m.r,m.g,m.b),o.setXYZ(37,m.r,m.g,m.b),o.setXYZ(38,b.r,b.g,b.b),o.setXYZ(39,b.r,b.g,b.b),o.setXYZ(40,p.r,p.g,p.b),o.setXYZ(41,p.r,p.g,p.b),o.setXYZ(42,p.r,p.g,p.b),o.setXYZ(43,p.r,p.g,p.b),o.setXYZ(44,p.r,p.g,p.b),o.setXYZ(45,p.r,p.g,p.b),o.setXYZ(46,p.r,p.g,p.b),o.setXYZ(47,p.r,p.g,p.b),o.setXYZ(48,p.r,p.g,p.b),o.setXYZ(49,p.r,p.g,p.b),o.needsUpdate=!0}update(){const s=this.geometry,l=this.pointMap;ts.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),to("c",l,s,ts,0,0,-1),to("t",l,s,ts,0,0,1),to("n1",l,s,ts,-1,-1,-1),to("n2",l,s,ts,1,-1,-1),to("n3",l,s,ts,-1,1,-1),to("n4",l,s,ts,1,1,-1),to("f1",l,s,ts,-1,-1,1),to("f2",l,s,ts,1,-1,1),to("f3",l,s,ts,-1,1,1),to("f4",l,s,ts,1,1,1),to("u1",l,s,ts,.7,1.1,-1),to("u2",l,s,ts,-.7,1.1,-1),to("u3",l,s,ts,0,2,-1),to("cf1",l,s,ts,-1,0,1),to("cf2",l,s,ts,1,0,1),to("cf3",l,s,ts,0,-1,1),to("cf4",l,s,ts,0,1,1),to("cn1",l,s,ts,-1,0,-1),to("cn2",l,s,ts,1,0,-1),to("cn3",l,s,ts,0,-1,-1),to("cn4",l,s,ts,0,1,-1),s.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},re.CanvasTexture=class Q1 extends rc{constructor(s,l,m,b,p,i,o,u,f){super(s,l,m,b,p,i,o,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}},re.CapsuleBufferGeometry=class Bx extends lh{constructor(s,l,m,b){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(s,l,m,b)}},re.CapsuleGeometry=lh,re.CatmullRomCurve3=u_,re.CineonToneMapping=wv,re.CircleBufferGeometry=class Rd extends Vc{constructor(s,l,m,b){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(s,l,m,b)}},re.CircleGeometry=Vc,re.ClampToEdgeWrapping=Oo,re.Clock=q0,re.Color=Yn,re.ColorKeyframeTrack=Pu,re.ColorManagement=$i,re.CompressedArrayTexture=class pw extends vx{constructor(s,l,m,b,p,i){super(s,l,m,p,i),this.isCompressedArrayTexture=!0,this.image.depth=b,this.wrapR=Oo}},re.CompressedTexture=vx,re.CompressedTextureLoader=class xw extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=[],o=new vx,u=new Xl(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(p.withCredentials);let f=0;function _(x){u.load(s[x],function(M){const E=p.parse(M,!0);i[x]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},f+=1,6===f&&(1===E.mipmapCount&&(o.minFilter=mo),o.image=i,o.format=E.format,o.needsUpdate=!0,l&&l(o))},m,b)}if(Array.isArray(s))for(let x=0,M=s.length;x<M;++x)_(x);else u.load(s,function(x){const M=p.parse(x,!0);if(M.isCubemap){const E=M.mipmaps.length/M.mipmapCount;for(let D=0;D<E;D++){i[D]={mipmaps:[]};for(let k=0;k<M.mipmapCount;k++)i[D].mipmaps.push(M.mipmaps[D*M.mipmapCount+k]),i[D].format=M.format,i[D].width=M.width,i[D].height=M.height}o.image=i}else o.image.width=M.width,o.image.height=M.height,o.mipmaps=M.mipmaps;1===M.mipmapCount&&(o.minFilter=mo),o.format=M.format,o.needsUpdate=!0,l&&l(o)},m,b);return o}},re.ConeBufferGeometry=class eu extends xd{constructor(s,l,m,b,p,i,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(s,l,m,b,p,i,o)}},re.ConeGeometry=xd,re.CubeCamera=Xd,re.CubeReflectionMapping=lu,re.CubeRefractionMapping=Ca,re.CubeTexture=Em,re.CubeTextureLoader=class ci extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=new Em,i=new cg(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);let o=0;function u(f){i.load(s[f],function(_){p.images[f]=_,o++,6===o&&(p.needsUpdate=!0,l&&l(p))},void 0,b)}for(let f=0;f<s.length;++f)u(f);return p}},re.CubeUVReflectionMapping=ju,re.CubicBezierCurve=js,re.CubicBezierCurve3=F0,re.CubicInterpolant=og,re.CullFaceBack=Je,re.CullFaceFront=Zt,re.CullFaceFrontBack=3,re.CullFaceNone=nn,re.Curve=yd,re.CurvePath=d_,re.CustomBlending=Mc,re.CustomToneMapping=Of,re.CylinderBufferGeometry=class Vu extends uh{constructor(s,l,m,b,p,i,o,u){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(s,l,m,b,p,i,o,u)}},re.CylinderGeometry=uh,re.Cylindrical=class hg{constructor(s=1,l=0,m=0){return this.radius=s,this.theta=l,this.y=m,this}set(s,l,m){return this.radius=s,this.theta=l,this.y=m,this}copy(s){return this.radius=s.radius,this.theta=s.theta,this.y=s.y,this}setFromVector3(s){return this.setFromCartesianCoords(s.x,s.y,s.z)}setFromCartesianCoords(s,l,m){return this.radius=Math.sqrt(s*s+m*m),this.theta=Math.atan2(s,m),this.y=l,this}clone(){return(new this.constructor).copy(this)}},re.Data3DTexture=Zs,re.DataArrayTexture=Gn,re.DataTexture=sf,re.DataTextureLoader=class Mw extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=new sf,o=new Xl(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(p.withCredentials),o.load(s,function(u){const f=p.parse(u);f&&(void 0!==f.image?i.image=f.image:void 0!==f.data&&(i.image.width=f.width,i.image.height=f.height,i.image.data=f.data),i.wrapS=void 0!==f.wrapS?f.wrapS:Oo,i.wrapT=void 0!==f.wrapT?f.wrapT:Oo,i.magFilter=void 0!==f.magFilter?f.magFilter:mo,i.minFilter=void 0!==f.minFilter?f.minFilter:mo,i.anisotropy=void 0!==f.anisotropy?f.anisotropy:1,void 0!==f.encoding&&(i.encoding=f.encoding),void 0!==f.flipY&&(i.flipY=f.flipY),void 0!==f.format&&(i.format=f.format),void 0!==f.type&&(i.type=f.type),void 0!==f.mipmaps&&(i.mipmaps=f.mipmaps,i.minFilter=$u),1===f.mipmapCount&&(i.minFilter=mo),void 0!==f.generateMipmaps&&(i.generateMipmaps=f.generateMipmaps),i.needsUpdate=!0,l&&l(i,f))},m,b),i}},re.DataUtils=Sm,re.DecrementStencilOp=7683,re.DecrementWrapStencilOp=34056,re.DefaultLoadingManager=j0,re.DepthFormat=xs,re.DepthStencilFormat=So,re.DepthTexture=Hm,re.DirectionalLight=$0,re.DirectionalLightHelper=class Iy extends os{constructor(s,l,m){super(),this.light=s,this.matrix=s.matrixWorld,this.matrixAutoUpdate=!1,this.color=m,this.type="DirectionalLightHelper",void 0===l&&(l=1);let b=new ai;b.setAttribute("position",new oi([-l,l,0,l,l,0,l,-l,0,-l,-l,0,-l,l,0],3));const p=new mc({fog:!1,toneMapped:!1});this.lightPlane=new vl(b,p),this.add(this.lightPlane),b=new ai,b.setAttribute("position",new oi([0,0,0,0,0,1],3)),this.targetLine=new vl(b,p),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Yo.setFromMatrixPosition(this.light.matrixWorld),pg.setFromMatrixPosition(this.light.target.matrixWorld),b_.subVectors(pg,Yo),this.lightPlane.lookAt(pg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pg),this.targetLine.scale.z=b_.length()}},re.DiscreteInterpolant=G0,re.DisplayP3ColorSpace=gm,re.DodecahedronBufferGeometry=class Vx extends Cu{constructor(s,l){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(s,l)}},re.DodecahedronGeometry=Cu,re.DoubleSide=At,re.DstAlphaFactor=Oh,re.DstColorFactor=k_,re.DynamicCopyUsage=35050,re.DynamicDrawUsage=35048,re.DynamicReadUsage=35049,re.EdgesGeometry=hf,re.EllipseCurve=Ro,re.EqualDepth=lm,re.EqualStencilFunc=514,re.EquirectangularReflectionMapping=Wu,re.EquirectangularRefractionMapping=Tl,re.Euler=Lg,re.EventDispatcher=Zu,re.ExtrudeBufferGeometry=class Tw extends la{constructor(s,l){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(s,l)}},re.ExtrudeGeometry=la,re.FileLoader=Xl,re.Float16BufferAttribute=class Gs extends Zi{constructor(s,l,m){super(new Uint16Array(s),l,m),this.isFloat16BufferAttribute=!0}getX(s){let l=Bo(this.array[s*this.itemSize]);return this.normalized&&(l=ro(l,this.array)),l}setX(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize]=fi(l),this}getY(s){let l=Bo(this.array[s*this.itemSize+1]);return this.normalized&&(l=ro(l,this.array)),l}setY(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+1]=fi(l),this}getZ(s){let l=Bo(this.array[s*this.itemSize+2]);return this.normalized&&(l=ro(l,this.array)),l}setZ(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+2]=fi(l),this}getW(s){let l=Bo(this.array[s*this.itemSize+3]);return this.normalized&&(l=ro(l,this.array)),l}setW(s,l){return this.normalized&&(l=Bn(l,this.array)),this.array[s*this.itemSize+3]=fi(l),this}setXY(s,l,m){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array)),this.array[s+0]=fi(l),this.array[s+1]=fi(m),this}setXYZ(s,l,m,b){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array)),this.array[s+0]=fi(l),this.array[s+1]=fi(m),this.array[s+2]=fi(b),this}setXYZW(s,l,m,b,p){return s*=this.itemSize,this.normalized&&(l=Bn(l,this.array),m=Bn(m,this.array),b=Bn(b,this.array),p=Bn(p,this.array)),this.array[s+0]=fi(l),this.array[s+1]=fi(m),this.array[s+2]=fi(b),this.array[s+3]=fi(p),this}},re.Float32BufferAttribute=oi,re.Float64BufferAttribute=class Jn extends Zi{constructor(s,l,m){super(new Float64Array(s),l,m)}},re.FloatType=Ta,re.Fog=gd,re.FogExp2=yp,re.FramebufferTexture=class fw extends rc{constructor(s,l,m){super({width:s,height:l}),this.isFramebufferTexture=!0,this.format=m,this.magFilter=gr,this.minFilter=gr,this.generateMipmaps=!1,this.needsUpdate=!0}},re.FrontSide=ct,re.Frustum=ep,re.GLBufferAttribute=class Lx{constructor(s,l,m,b,p){this.isGLBufferAttribute=!0,this.name="",this.buffer=s,this.type=l,this.itemSize=m,this.elementSize=b,this.count=p,this.version=0}set needsUpdate(s){!0===s&&this.version++}setBuffer(s){return this.buffer=s,this}setType(s,l){return this.type=s,this.elementSize=l,this}setItemSize(s){return this.itemSize=s,this}setCount(s){return this.count=s,this}},re.GLSL1="100",re.GLSL3=CM,re.GreaterDepth=O_,re.GreaterEqualDepth=ri,re.GreaterEqualStencilFunc=518,re.GreaterStencilFunc=516,re.GridHelper=class Sw extends yl{constructor(s=10,l=10,m=4473924,b=8947848){m=new Yn(m),b=new Yn(b);const p=l/2,i=s/l,o=s/2,u=[],f=[];for(let M=0,E=0,D=-o;M<=l;M++,D+=i){u.push(-o,0,D,o,0,D),u.push(D,0,-o,D,0,o);const k=M===p?m:b;k.toArray(f,E),E+=3,k.toArray(f,E),E+=3,k.toArray(f,E),E+=3,k.toArray(f,E),E+=3}const _=new ai;_.setAttribute("position",new oi(u,3)),_.setAttribute("color",new oi(f,3)),super(_,new mc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},re.Group=rh,re.HalfFloatType=Sc,re.HemisphereLight=ur,re.HemisphereLightHelper=class Fx extends os{constructor(s,l,m){super(),this.light=s,this.matrix=s.matrixWorld,this.matrixAutoUpdate=!1,this.color=m,this.type="HemisphereLightHelper";const b=new wd(l);b.rotateY(.5*Math.PI),this.material=new Gr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const p=b.getAttribute("position"),i=new Float32Array(3*p.count);b.setAttribute("color",new Zi(i,3)),this.add(new _s(b,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const s=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const l=s.geometry.getAttribute("color");y_.copy(this.light.color),Z0.copy(this.light.groundColor);for(let m=0,b=l.count;m<b;m++){const p=m<b/2?y_:Z0;l.setXYZ(m,p.r,p.g,p.b)}l.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),s.lookAt(ww.setFromMatrixPosition(this.light.matrixWorld).negate())}},re.HemisphereLightProbe=class xf extends qs{constructor(s,l,m=1){super(void 0,m),this.isHemisphereLightProbe=!0;const b=(new Yn).set(s),p=(new Yn).set(l),i=new Pe(b.r,b.g,b.b),o=new Pe(p.r,p.g,p.b),u=Math.sqrt(Math.PI),f=u*Math.sqrt(.75);this.sh.coefficients[0].copy(i).add(o).multiplyScalar(u),this.sh.coefficients[1].copy(i).sub(o).multiplyScalar(f)}},re.IcosahedronBufferGeometry=class nS extends U0{constructor(s,l){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(s,l)}},re.IcosahedronGeometry=U0,re.ImageBitmapLoader=class bf extends Gc{constructor(s){super(s),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(s){return this.options=s,this}load(s,l,m,b){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);const p=this,i=_f.get(s);if(void 0!==i)return p.manager.itemStart(s),setTimeout(function(){l&&l(i),p.manager.itemEnd(s)},0),i;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(s,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(p.options,{colorSpaceConversion:"none"}))}).then(function(u){_f.add(s,u),l&&l(u),p.manager.itemEnd(s)}).catch(function(u){b&&b(u),p.manager.itemError(s),p.manager.itemEnd(s)}),p.manager.itemStart(s)}},re.ImageLoader=cg,re.ImageUtils=_o,re.IncrementStencilOp=7682,re.IncrementWrapStencilOp=34055,re.InstancedBufferAttribute=_d,re.InstancedBufferGeometry=Ed,re.InstancedInterleavedBuffer=class Rr extends s_{constructor(s,l,m=1){super(s,l),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=m}copy(s){return super.copy(s),this.meshPerAttribute=s.meshPerAttribute,this}clone(s){const l=super.clone(s);return l.meshPerAttribute=this.meshPerAttribute,l}toJSON(s){const l=super.toJSON(s);return l.isInstancedInterleavedBuffer=!0,l.meshPerAttribute=this.meshPerAttribute,l}},re.InstancedMesh=$m,re.Int16BufferAttribute=class Mn extends Zi{constructor(s,l,m){super(new Int16Array(s),l,m)}},re.Int32BufferAttribute=class Oa extends Zi{constructor(s,l,m){super(new Int32Array(s),l,m)}},re.Int8BufferAttribute=class Hs extends Zi{constructor(s,l,m){super(new Int8Array(s),l,m)}},re.IntType=Cv,re.InterleavedBuffer=s_,re.InterleavedBufferAttribute=ks,re.Interpolant=f_,re.InterpolateDiscrete=Gf,re.InterpolateLinear=Yu,re.InterpolateSmooth=2302,re.InvertStencilOp=5386,re.KeepStencilOp=7680,re.KeyframeTrack=ja,re.LOD=fx,re.LatheBufferGeometry=class zx extends df{constructor(s,l,m,b){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(s,l,m,b)}},re.LatheGeometry=df,re.Layers=Og,re.LessDepth=qr,re.LessEqualDepth=mr,re.LessEqualStencilFunc=515,re.LessStencilFunc=513,re.Light=Ou,re.LightProbe=qs,re.Line=vl,re.Line3=class Th{constructor(s=new Pe,l=new Pe){this.start=s,this.end=l}set(s,l){return this.start.copy(s),this.end.copy(l),this}copy(s){return this.start.copy(s.start),this.end.copy(s.end),this}getCenter(s){return s.addVectors(this.start,this.end).multiplyScalar(.5)}delta(s){return s.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(s,l){return this.delta(l).multiplyScalar(s).add(this.start)}closestPointToPointParameter(s,l){v_.subVectors(s,this.start),Ch.subVectors(this.end,this.start);const m=Ch.dot(Ch);let p=Ch.dot(v_)/m;return l&&(p=kr(p,0,1)),p}closestPointToPoint(s,l,m){const b=this.closestPointToPointParameter(s,l);return this.delta(m).multiplyScalar(b).add(this.start)}applyMatrix4(s){return this.start.applyMatrix4(s),this.end.applyMatrix4(s),this}equals(s){return s.start.equals(this.start)&&s.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},re.LineBasicMaterial=mc,re.LineCurve=Km,re.LineCurve3=Jm,re.LineDashedMaterial=Rx,re.LineLoop=gx,re.LineSegments=yl,re.LinearEncoding=Qc,re.LinearFilter=mo,re.LinearInterpolant=H0,re.LinearMipMapLinearFilter=1008,re.LinearMipMapNearestFilter=1007,re.LinearMipmapLinearFilter=$u,re.LinearMipmapNearestFilter=bs,re.LinearSRGBColorSpace=ic,re.LinearToneMapping=wc,re.Loader=Gc,re.LoaderUtils=uo,re.LoadingManager=vf,re.LoopOnce=2200,re.LoopPingPong=2202,re.LoopRepeat=2201,re.LuminanceAlphaFormat=Av,re.LuminanceFormat=Ec,re.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},re.Material=La,re.MaterialLoader=Os,re.MathUtils=ji,re.Matrix3=Wt,re.Matrix4=zi,re.MaxEquation=au,re.Mesh=_s,re.MeshBasicMaterial=Gr,re.MeshDepthMaterial=n_,re.MeshDistanceMaterial=Vm,re.MeshLambertMaterial=wy,re.MeshMatcapMaterial=Dx,re.MeshNormalMaterial=My,re.MeshPhongMaterial=Tx,re.MeshPhysicalMaterial=z0,re.MeshStandardMaterial=jo,re.MeshToonMaterial=Ax,re.MinEquation=cm,re.MirroredRepeatWrapping=io,re.MixOperation=Eg,re.MultiplyBlending=xo,re.MultiplyOperation=Uh,re.NearestFilter=gr,re.NearestMipMapLinearFilter=1005,re.NearestMipMapNearestFilter=1004,re.NearestMipmapLinearFilter=Ff,re.NearestMipmapNearestFilter=Xr,re.NeverDepth=L_,re.NeverStencilFunc=512,re.NoBlending=mn,re.NoColorSpace="",re.NoToneMapping=cu,re.NormalAnimationBlendMode=2500,re.NormalBlending=Kn,re.NotEqualDepth=Mv,re.NotEqualStencilFunc=517,re.NumberKeyframeTrack=gh,re.Object3D=os,re.ObjectLoader=class xl extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=this,i=""===this.path?uo.extractUrlBase(s):this.path;this.resourcePath=this.resourcePath||i;const o=new Xl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(s,function(u){let f=null;try{f=JSON.parse(u)}catch(x){return void 0!==b&&b(x),void console.error("THREE:ObjectLoader: Can't parse "+s+".",x.message)}const _=f.metadata;if(void 0===_||void 0===_.type||"geometry"===_.type.toLowerCase())return void 0!==b&&b(new Error("THREE.ObjectLoader: Can't load "+s)),void console.error("THREE.ObjectLoader: Can't load "+s);p.parse(f,l)},m,b)}loadAsync(s,l){var m=this;return rn(function*(){const b=m,p=""===m.path?uo.extractUrlBase(s):m.path;m.resourcePath=m.resourcePath||p;const i=new Xl(m.manager);i.setPath(m.path),i.setRequestHeader(m.requestHeader),i.setWithCredentials(m.withCredentials);const o=yield i.loadAsync(s,l),u=JSON.parse(o),f=u.metadata;if(void 0===f||void 0===f.type||"geometry"===f.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+s);return yield b.parseAsync(u)})()}parse(s,l){const m=this.parseAnimations(s.animations),b=this.parseShapes(s.shapes),p=this.parseGeometries(s.geometries,b),i=this.parseImages(s.images,function(){void 0!==l&&l(f)}),o=this.parseTextures(s.textures,i),u=this.parseMaterials(s.materials,o),f=this.parseObject(s.object,p,u,o,m),_=this.parseSkeletons(s.skeletons,f);if(this.bindSkeletons(f,_),void 0!==l){let x=!1;for(const M in i)if(i[M].data instanceof HTMLImageElement){x=!0;break}!1===x&&l(f)}return f}parseAsync(s){var l=this;return rn(function*(){const m=l.parseAnimations(s.animations),b=l.parseShapes(s.shapes),p=l.parseGeometries(s.geometries,b),i=yield l.parseImagesAsync(s.images),o=l.parseTextures(s.textures,i),u=l.parseMaterials(s.materials,o),f=l.parseObject(s.object,p,u,o,m),_=l.parseSkeletons(s.skeletons,f);return l.bindSkeletons(f,_),f})()}parseShapes(s){const l={};if(void 0!==s)for(let m=0,b=s.length;m<b;m++){const p=(new Dp).fromJSON(s[m]);l[p.uuid]=p}return l}parseSkeletons(s,l){const m={},b={};if(l.traverse(function(p){p.isBone&&(b[p.uuid]=p)}),void 0!==s)for(let p=0,i=s.length;p<i;p++){const o=(new k0).fromJSON(s[p],b);m[o.uuid]=o}return m}parseGeometries(s,l){const m={};if(void 0!==s){const b=new qo;for(let p=0,i=s.length;p<i;p++){let o;const u=s[p];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":o=b.parse(u);break;default:u.type in V0?o=V0[u.type].fromJSON(u,l):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}o.uuid=u.uuid,void 0!==u.name&&(o.name=u.name),void 0!==u.userData&&(o.userData=u.userData),m[u.uuid]=o}}return m}parseMaterials(s,l){const m={},b={};if(void 0!==s){const p=new Os;p.setTextures(l);for(let i=0,o=s.length;i<o;i++){const u=s[i];void 0===m[u.uuid]&&(m[u.uuid]=p.parse(u)),b[u.uuid]=m[u.uuid]}}return b}parseAnimations(s){const l={};if(void 0!==s)for(let m=0;m<s.length;m++){const p=vh.parse(s[m]);l[p.uuid]=p}return l}parseImages(s,l){const m=this,b={};let p;function o(u){if("string"==typeof u){const f=u;return function i(u){return m.manager.itemStart(u),p.load(u,function(){m.manager.itemEnd(u)},void 0,function(){m.manager.itemError(u),m.manager.itemEnd(u)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:m.resourcePath+f)}return u.data?{data:ym(u.type,u.data),width:u.width,height:u.height}:null}if(void 0!==s&&s.length>0){const u=new vf(l);p=new cg(u),p.setCrossOrigin(this.crossOrigin);for(let f=0,_=s.length;f<_;f++){const x=s[f],M=x.url;if(Array.isArray(M)){const E=[];for(let D=0,k=M.length;D<k;D++){const I=o(M[D]);null!==I&&(I instanceof HTMLImageElement?E.push(I):E.push(new sf(I.data,I.width,I.height)))}b[x.uuid]=new nl(E)}else{const E=o(x.url);b[x.uuid]=new nl(E)}}}return b}parseImagesAsync(s){var l=this;return rn(function*(){const m=l,b={};let p;function i(u){return o.apply(this,arguments)}function o(){return(o=rn(function*(u){if("string"==typeof u){const f=u,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:m.resourcePath+f;return yield p.loadAsync(_)}return u.data?{data:ym(u.type,u.data),width:u.width,height:u.height}:null})).apply(this,arguments)}if(void 0!==s&&s.length>0){p=new cg(l.manager),p.setCrossOrigin(l.crossOrigin);for(let u=0,f=s.length;u<f;u++){const _=s[u],x=_.url;if(Array.isArray(x)){const M=[];for(let E=0,D=x.length;E<D;E++){const k=x[E],O=yield i(k);null!==O&&(O instanceof HTMLImageElement?M.push(O):M.push(new sf(O.data,O.width,O.height)))}b[_.uuid]=new nl(M)}else{const M=yield i(_.url);b[_.uuid]=new nl(M)}}}return b})()}parseTextures(s,l){function m(p,i){return"number"==typeof p?p:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",p),i[p])}const b={};if(void 0!==s)for(let p=0,i=s.length;p<i;p++){const o=s[p];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===l[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const u=l[o.image],f=u.data;let _;Array.isArray(f)?(_=new Em,6===f.length&&(_.needsUpdate=!0)):(_=f&&f.data?new sf:new rc,f&&(_.needsUpdate=!0)),_.source=u,_.uuid=o.uuid,void 0!==o.name&&(_.name=o.name),void 0!==o.mapping&&(_.mapping=m(o.mapping,di)),void 0!==o.channel&&(_.channel=o.channel),void 0!==o.offset&&_.offset.fromArray(o.offset),void 0!==o.repeat&&_.repeat.fromArray(o.repeat),void 0!==o.center&&_.center.fromArray(o.center),void 0!==o.rotation&&(_.rotation=o.rotation),void 0!==o.wrap&&(_.wrapS=m(o.wrap[0],Cd),_.wrapT=m(o.wrap[1],Cd)),void 0!==o.format&&(_.format=o.format),void 0!==o.internalFormat&&(_.internalFormat=o.internalFormat),void 0!==o.type&&(_.type=o.type),void 0!==o.encoding&&(_.encoding=o.encoding),void 0!==o.minFilter&&(_.minFilter=m(o.minFilter,bh)),void 0!==o.magFilter&&(_.magFilter=m(o.magFilter,bh)),void 0!==o.anisotropy&&(_.anisotropy=o.anisotropy),void 0!==o.flipY&&(_.flipY=o.flipY),void 0!==o.generateMipmaps&&(_.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(_.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(_.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(_.userData=o.userData),b[o.uuid]=_}return b}parseObject(s,l,m,b,p){let i,_,x;function o(M){return void 0===l[M]&&console.warn("THREE.ObjectLoader: Undefined geometry",M),l[M]}function u(M){if(void 0!==M){if(Array.isArray(M)){const E=[];for(let D=0,k=M.length;D<k;D++){const O=M[D];void 0===m[O]&&console.warn("THREE.ObjectLoader: Undefined material",O),E.push(m[O])}return E}return void 0===m[M]&&console.warn("THREE.ObjectLoader: Undefined material",M),m[M]}}function f(M){return void 0===b[M]&&console.warn("THREE.ObjectLoader: Undefined texture",M),b[M]}switch(s.type){case"Scene":i=new Wa,void 0!==s.background&&(i.background=Number.isInteger(s.background)?new Yn(s.background):f(s.background)),void 0!==s.environment&&(i.environment=f(s.environment)),void 0!==s.fog&&("Fog"===s.fog.type?i.fog=new gd(s.fog.color,s.fog.near,s.fog.far):"FogExp2"===s.fog.type&&(i.fog=new yp(s.fog.color,s.fog.density))),void 0!==s.backgroundBlurriness&&(i.backgroundBlurriness=s.backgroundBlurriness),void 0!==s.backgroundIntensity&&(i.backgroundIntensity=s.backgroundIntensity);break;case"PerspectiveCamera":i=new ao(s.fov,s.aspect,s.near,s.far),void 0!==s.focus&&(i.focus=s.focus),void 0!==s.zoom&&(i.zoom=s.zoom),void 0!==s.filmGauge&&(i.filmGauge=s.filmGauge),void 0!==s.filmOffset&&(i.filmOffset=s.filmOffset),void 0!==s.view&&(i.view=Object.assign({},s.view));break;case"OrthographicCamera":i=new Jd(s.left,s.right,s.top,s.bottom,s.near,s.far),void 0!==s.zoom&&(i.zoom=s.zoom),void 0!==s.view&&(i.view=Object.assign({},s.view));break;case"AmbientLight":i=new p_(s.color,s.intensity);break;case"DirectionalLight":i=new $0(s.color,s.intensity);break;case"PointLight":i=new Px(s.color,s.intensity,s.distance,s.decay);break;case"RectAreaLight":i=new lg(s.color,s.intensity,s.width,s.height);break;case"SpotLight":i=new dr(s.color,s.intensity,s.distance,s.angle,s.penumbra,s.decay);break;case"HemisphereLight":i=new ur(s.color,s.groundColor,s.intensity);break;case"LightProbe":i=(new qs).fromJSON(s);break;case"SkinnedMesh":_=o(s.geometry),x=u(s.material),i=new _a(_,x),void 0!==s.bindMode&&(i.bindMode=s.bindMode),void 0!==s.bindMatrix&&i.bindMatrix.fromArray(s.bindMatrix),void 0!==s.skeleton&&(i.skeleton=s.skeleton);break;case"Mesh":_=o(s.geometry),x=u(s.material),i=new _s(_,x);break;case"InstancedMesh":_=o(s.geometry),x=u(s.material);const E=s.instanceMatrix,D=s.instanceColor;i=new $m(_,x,s.count),i.instanceMatrix=new _d(new Float32Array(E.array),16),void 0!==D&&(i.instanceColor=new _d(new Float32Array(D.array),D.itemSize));break;case"LOD":i=new fx;break;case"Line":i=new vl(o(s.geometry),u(s.material));break;case"LineLoop":i=new gx(o(s.geometry),u(s.material));break;case"LineSegments":i=new yl(o(s.geometry),u(s.material));break;case"PointCloud":case"Points":i=new Eu(o(s.geometry),u(s.material));break;case"Sprite":i=new Gm(u(s.material));break;case"Group":i=new rh;break;case"Bone":i=new ml;break;default:i=new os}if(i.uuid=s.uuid,void 0!==s.name&&(i.name=s.name),void 0!==s.matrix?(i.matrix.fromArray(s.matrix),void 0!==s.matrixAutoUpdate&&(i.matrixAutoUpdate=s.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==s.position&&i.position.fromArray(s.position),void 0!==s.rotation&&i.rotation.fromArray(s.rotation),void 0!==s.quaternion&&i.quaternion.fromArray(s.quaternion),void 0!==s.scale&&i.scale.fromArray(s.scale)),void 0!==s.up&&i.up.fromArray(s.up),void 0!==s.castShadow&&(i.castShadow=s.castShadow),void 0!==s.receiveShadow&&(i.receiveShadow=s.receiveShadow),s.shadow&&(void 0!==s.shadow.bias&&(i.shadow.bias=s.shadow.bias),void 0!==s.shadow.normalBias&&(i.shadow.normalBias=s.shadow.normalBias),void 0!==s.shadow.radius&&(i.shadow.radius=s.shadow.radius),void 0!==s.shadow.mapSize&&i.shadow.mapSize.fromArray(s.shadow.mapSize),void 0!==s.shadow.camera&&(i.shadow.camera=this.parseObject(s.shadow.camera))),void 0!==s.visible&&(i.visible=s.visible),void 0!==s.frustumCulled&&(i.frustumCulled=s.frustumCulled),void 0!==s.renderOrder&&(i.renderOrder=s.renderOrder),void 0!==s.userData&&(i.userData=s.userData),void 0!==s.layers&&(i.layers.mask=s.layers),void 0!==s.children){const M=s.children;for(let E=0;E<M.length;E++)i.add(this.parseObject(M[E],l,m,b,p))}if(void 0!==s.animations){const M=s.animations;for(let E=0;E<M.length;E++)i.animations.push(p[M[E]])}if("LOD"===s.type){void 0!==s.autoUpdate&&(i.autoUpdate=s.autoUpdate);const M=s.levels;for(let E=0;E<M.length;E++){const D=M[E],k=i.getObjectByProperty("uuid",D.object);void 0!==k&&i.addLevel(k,D.distance,D.hysteresis)}}return i}bindSkeletons(s,l){0!==Object.keys(l).length&&s.traverse(function(m){if(!0===m.isSkinnedMesh&&void 0!==m.skeleton){const b=l[m.skeleton];void 0===b?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",m.skeleton):m.bind(b,m.bindMatrix)}})}},re.ObjectSpaceNormalMap=nc,re.OctahedronBufferGeometry=class iS extends wd{constructor(s,l){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(s,l)}},re.OctahedronGeometry=wd,re.OneFactor=Lh,re.OneMinusDstAlphaFactor=Fh,re.OneMinusDstColorFactor=xv,re.OneMinusSrcAlphaFactor=pr,re.OneMinusSrcColorFactor=wo,re.OrthographicCamera=Jd,re.PCFShadowMap=be,re.PCFSoftShadowMap=He,re.PMREMGenerator=d0,re.Path=Qm,re.PerspectiveCamera=ao,re.Plane=Qf,re.PlaneBufferGeometry=class rS extends Vg{constructor(s,l,m,b){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(s,l,m,b)}},re.PlaneGeometry=Vg,re.PlaneHelper=class Nx extends vl{constructor(s,l=1,m=16776960){const b=m,i=new ai;i.setAttribute("position",new oi([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new mc({color:b,toneMapped:!1})),this.type="PlaneHelper",this.plane=s,this.size=l;const u=new ai;u.setAttribute("position",new oi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),u.computeBoundingSphere(),this.add(new _s(u,new Gr({color:b,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(s){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(s)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},re.PointLight=Px,re.PointLightHelper=class jc extends _s{constructor(s,l,m){super(new sg(l,4,2),new Gr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=s,this.color=m,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},re.Points=Eu,re.PointsMaterial=c_,re.PolarGridHelper=class Ew extends yl{constructor(s=10,l=16,m=8,b=64,p=4473924,i=8947848){p=new Yn(p),i=new Yn(i);const o=[],u=[];if(l>1)for(let x=0;x<l;x++){const M=x/l*(2*Math.PI),E=Math.sin(M)*s,D=Math.cos(M)*s;o.push(0,0,0),o.push(E,0,D);const k=1&x?p:i;u.push(k.r,k.g,k.b),u.push(k.r,k.g,k.b)}for(let x=0;x<m;x++){const M=1&x?p:i,E=s-s/m*x;for(let D=0;D<b;D++){let k=D/b*(2*Math.PI),O=Math.sin(k)*E,I=Math.cos(k)*E;o.push(O,0,I),u.push(M.r,M.g,M.b),k=(D+1)/b*(2*Math.PI),O=Math.sin(k)*E,I=Math.cos(k)*E,o.push(O,0,I),u.push(M.r,M.g,M.b)}}const f=new ai;f.setAttribute("position",new oi(o,3)),f.setAttribute("color",new oi(u,3)),super(f,new mc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},re.PolyhedronBufferGeometry=class Hx extends zc{constructor(s,l,m,b){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(s,l,m,b)}},re.PolyhedronGeometry=zc,re.PositionalAudio=class Kl extends X0{constructor(s){super(s),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(s){return this.panner.refDistance=s,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(s){return this.panner.rolloffFactor=s,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(s){return this.panner.distanceModel=s,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(s){return this.panner.maxDistance=s,this}setDirectionalCone(s,l,m){return this.panner.coneInnerAngle=s,this.panner.coneOuterAngle=l,this.panner.coneOuterGain=m,this}updateMatrixWorld(s){if(super.updateMatrixWorld(s),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Oi,Nu,Ml),Vn.set(0,0,1).applyQuaternion(Nu);const l=this.panner;if(l.positionX){const m=this.context.currentTime+this.listener.timeDelta;l.positionX.linearRampToValueAtTime(Oi.x,m),l.positionY.linearRampToValueAtTime(Oi.y,m),l.positionZ.linearRampToValueAtTime(Oi.z,m),l.orientationX.linearRampToValueAtTime(Vn.x,m),l.orientationY.linearRampToValueAtTime(Vn.y,m),l.orientationZ.linearRampToValueAtTime(Vn.z,m)}else l.setPosition(Oi.x,Oi.y,Oi.z),l.setOrientation(Vn.x,Vn.y,Vn.z)}},re.PropertyBinding=ds,re.PropertyMixer=on,re.QuadraticBezierCurve=N0,re.QuadraticBezierCurve3=bd,re.Quaternion=fs,re.QuaternionKeyframeTrack=ku,re.QuaternionLinearInterpolant=_h,re.RED_GREEN_RGTC2_Format=is,re.RED_RGTC1_Format=Yr,re.REVISION=Un,re.RGBADepthPacking=gb,re.RGBAFormat=Aa,re.RGBAIntegerFormat=mb,re.RGBA_ASTC_10x10_Format=Ms,re.RGBA_ASTC_10x5_Format=Ig,re.RGBA_ASTC_10x6_Format=G_,re.RGBA_ASTC_10x8_Format=Hf,re.RGBA_ASTC_12x10_Format=tc,re.RGBA_ASTC_12x12_Format=Vd,re.RGBA_ASTC_4x4_Format=Vh,re.RGBA_ASTC_5x4_Format=V_,re.RGBA_ASTC_5x5_Format=fm,re.RGBA_ASTC_6x5_Format=Ag,re.RGBA_ASTC_6x6_Format=z_,re.RGBA_ASTC_8x5_Format=Dg,re.RGBA_ASTC_8x6_Format=Rg,re.RGBA_ASTC_8x8_Format=H_,re.RGBA_BPTC_Format=zh,re.RGBA_ETC2_EAC_Format=zf,re.RGBA_PVRTC_2BPPV1_Format=U_,re.RGBA_PVRTC_4BPPV1_Format=Iv,re.RGBA_S3TC_DXT1_Format=ec,re.RGBA_S3TC_DXT3_Format=hm,re.RGBA_S3TC_DXT5_Format=ns,re.RGB_ETC1_Format=B_,re.RGB_ETC2_Format=Tg,re.RGB_PVRTC_2BPPV1_Format=ua,re.RGB_PVRTC_4BPPV1_Format=Xu,re.RGB_S3TC_DXT1_Format=N_,re.RGFormat=Dv,re.RGIntegerFormat=Rv,re.RawShaderMaterial=Io,re.Ray=fa,re.Raycaster=class Ox{constructor(s,l,m=0,b=1/0){this.ray=new fa(s,l),this.near=m,this.far=b,this.camera=null,this.layers=new Og,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(s,l){this.ray.set(s,l)}setFromCamera(s,l){l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(s.x,s.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l.isOrthographicCamera?(this.ray.origin.set(s.x,s.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):console.error("THREE.Raycaster: Unsupported camera type: "+l.type)}intersectObject(s,l=!0,m=[]){return wf(s,this,m,l),m.sort(dg),m}intersectObjects(s,l=!0,m=[]){for(let b=0,p=s.length;b<p;b++)wf(s[b],this,m,l);return m.sort(dg),m}},re.RectAreaLight=lg,re.RedFormat=Vf,re.RedIntegerFormat=pb,re.ReinhardToneMapping=fb,re.RepeatWrapping=Ud,re.ReplaceStencilOp=7681,re.ReverseSubtractEquation=ou,re.RingBufferGeometry=class M_ extends hh{constructor(s,l,m,b,p,i){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(s,l,m,b,p,i)}},re.RingGeometry=hh,re.SIGNED_RED_GREEN_RGTC2_Format=pm,re.SIGNED_RED_RGTC1_Format=Pg,re.SRGBColorSpace=du,re.Scene=Wa,re.ShaderChunk=Ki,re.ShaderLib=On,re.ShaderMaterial=od,re.ShadowMaterial=ba,re.Shape=Dp,re.ShapeBufferGeometry=class sS extends Fp{constructor(s,l){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(s,l)}},re.ShapeGeometry=Fp,re.ShapePath=class Ql{constructor(){this.type="ShapePath",this.color=new Yn,this.subPaths=[],this.currentPath=null}moveTo(s,l){return this.currentPath=new Qm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(s,l),this}lineTo(s,l){return this.currentPath.lineTo(s,l),this}quadraticCurveTo(s,l,m,b){return this.currentPath.quadraticCurveTo(s,l,m,b),this}bezierCurveTo(s,l,m,b,p,i){return this.currentPath.bezierCurveTo(s,l,m,b,p,i),this}splineThru(s){return this.currentPath.splineThru(s),this}toShapes(s){function m(I,U){const B=U.length;let j=!1;for(let $=B-1,G=0;G<B;$=G++){let Q=U[$],J=U[G],Y=J.x-Q.x,ee=J.y-Q.y;if(Math.abs(ee)>Number.EPSILON){if(ee<0&&(Q=U[G],Y=-Y,J=U[$],ee=-ee),I.y<Q.y||I.y>J.y)continue;if(I.y===Q.y){if(I.x===Q.x)return!0}else{const he=ee*(I.x-Q.x)-Y*(I.y-Q.y);if(0===he)return!0;if(he<0)continue;j=!j}}else{if(I.y!==Q.y)continue;if(J.x<=I.x&&I.x<=Q.x||Q.x<=I.x&&I.x<=J.x)return!0}}return j}const b=Iu.isClockWise,p=this.subPaths;if(0===p.length)return[];let i,o,u;const f=[];if(1===p.length)return o=p[0],u=new Dp,u.curves=o.curves,f.push(u),f;let _=!b(p[0].getPoints());_=s?!_:_;const x=[],M=[];let k,O,E=[],D=0;M[D]=void 0,E[D]=[];for(let I=0,U=p.length;I<U;I++)o=p[I],k=o.getPoints(),i=b(k),i=s?!i:i,i?(!_&&M[D]&&D++,M[D]={s:new Dp,p:k},M[D].s.curves=o.curves,_&&D++,E[D]=[]):E[D].push({h:o,p:k[0]});if(!M[0])return function l(I){const U=[];for(let B=0,j=I.length;B<j;B++){const $=I[B],G=new Dp;G.curves=$.curves,U.push(G)}return U}(p);if(M.length>1){let I=!1,U=0;for(let B=0,j=M.length;B<j;B++)x[B]=[];for(let B=0,j=M.length;B<j;B++){const $=E[B];for(let G=0;G<$.length;G++){const Q=$[G];let J=!0;for(let Y=0;Y<M.length;Y++)m(Q.p,M[Y].p)&&(B!==Y&&U++,J?(J=!1,x[Y].push(Q)):I=!0);J&&x[B].push(Q)}}U>0&&!1===I&&(E=x)}for(let I=0,U=M.length;I<U;I++){u=M[I].s,f.push(u),O=E[I];for(let B=0,j=O.length;B<j;B++)u.holes.push(O[B].h)}return f}},re.ShapeUtils=Iu,re.ShortType=Ev,re.Skeleton=k0,re.SkeletonHelper=class Xo extends yl{constructor(s){const l=vc(s),m=new ai,b=[],p=[],i=new Yn(0,0,1),o=new Yn(0,1,0);for(let f=0;f<l.length;f++){const _=l[f];_.parent&&_.parent.isBone&&(b.push(0,0,0),b.push(0,0,0),p.push(i.r,i.g,i.b),p.push(o.r,o.g,o.b))}m.setAttribute("position",new oi(b,3)),m.setAttribute("color",new oi(p,3)),super(m,new mc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=s,this.bones=l,this.matrix=s.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(s){const l=this.bones,m=this.geometry,b=m.getAttribute("position");Is.copy(this.root.matrixWorld).invert();for(let p=0,i=0;p<l.length;p++){const o=l[p];o.parent&&o.parent.isBone&&(Wc.multiplyMatrices(Is,o.matrixWorld),Sf.setFromMatrixPosition(Wc),b.setXYZ(i,Sf.x,Sf.y,Sf.z),Wc.multiplyMatrices(Is,o.parent.matrixWorld),Sf.setFromMatrixPosition(Wc),b.setXYZ(i+1,Sf.x,Sf.y,Sf.z),i+=2)}m.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(s)}dispose(){this.geometry.dispose(),this.material.dispose()}},re.SkinnedMesh=_a,re.Source=nl,re.Sphere=Js,re.SphereBufferGeometry=class w_ extends sg{constructor(s,l,m,b,p,i,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(s,l,m,b,p,i,o)}},re.SphereGeometry=sg,re.Spherical=class $p{constructor(s=1,l=0,m=0){return this.radius=s,this.phi=l,this.theta=m,this}set(s,l,m){return this.radius=s,this.phi=l,this.theta=m,this}copy(s){return this.radius=s.radius,this.phi=s.phi,this.theta=s.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(s){return this.setFromCartesianCoords(s.x,s.y,s.z)}setFromCartesianCoords(s,l,m){return this.radius=Math.sqrt(s*s+l*l+m*m),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(s,m),this.phi=Math.acos(kr(l/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},re.SphericalHarmonics3=Qn,re.SplineCurve=gy,re.SpotLight=dr,re.SpotLightHelper=class Y0 extends os{constructor(s,l){super(),this.light=s,this.matrix=s.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,this.type="SpotLightHelper";const m=new ai,b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,o=1,u=32;i<u;i++,o++){const f=i/u*Math.PI*2,_=o/u*Math.PI*2;b.push(Math.cos(f),Math.sin(f),1,Math.cos(_),Math.sin(_),1)}m.setAttribute("position",new oi(b,3));const p=new mc({fog:!1,toneMapped:!1});this.cone=new yl(m,p),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const s=this.light.distance?this.light.distance:1e3,l=s*Math.tan(this.light.angle);this.cone.scale.set(l,l,s),Dd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Dd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},re.Sprite=Gm,re.SpriteMaterial=nf,re.SrcAlphaFactor=P_,re.SrcAlphaSaturateFactor=Ci,re.SrcColorFactor=Mo,re.StaticCopyUsage=35046,re.StaticDrawUsage=_m,re.StaticReadUsage=35045,re.StereoCamera=class Ad{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ao,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ao,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(s){const l=this._cache;if(l.focus!==s.focus||l.fov!==s.fov||l.aspect!==s.aspect*this.aspect||l.near!==s.near||l.far!==s.far||l.zoom!==s.zoom||l.eyeSep!==this.eyeSep){l.focus=s.focus,l.fov=s.fov,l.aspect=s.aspect*this.aspect,l.near=s.near,l.far=s.far,l.zoom=s.zoom,l.eyeSep=this.eyeSep,Fu.copy(s.projectionMatrix);const b=l.eyeSep/2,p=b*l.near/l.focus,i=l.near*Math.tan(Ra*l.fov*.5)/l.zoom;let o,u;m_.elements[12]=-b,Wp.elements[12]=b,o=-i*l.aspect+p,u=i*l.aspect+p,Fu.elements[0]=2*l.near/(u-o),Fu.elements[8]=(u+o)/(u-o),this.cameraL.projectionMatrix.copy(Fu),o=-i*l.aspect-p,u=i*l.aspect-p,Fu.elements[0]=2*l.near/(u-o),Fu.elements[8]=(u+o)/(u-o),this.cameraR.projectionMatrix.copy(Fu)}this.cameraL.matrixWorld.copy(s.matrixWorld).multiply(m_),this.cameraR.matrixWorld.copy(s.matrixWorld).multiply(Wp)}},re.StreamCopyUsage=35042,re.StreamDrawUsage=35040,re.StreamReadUsage=35041,re.StringKeyframeTrack=gc,re.SubtractEquation=Bs,re.SubtractiveBlending=po,re.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},re.TangentSpaceNormalMap=zd,re.TetrahedronBufferGeometry=class ky extends fh{constructor(s,l){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(s,l)}},re.TetrahedronGeometry=fh,re.Texture=rc,re.TextureLoader=class bi extends Gc{constructor(s){super(s)}load(s,l,m,b){const p=new rc,i=new cg(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(s,function(o){p.image=o,p.needsUpdate=!0,void 0!==l&&l(p)},m,b),p}},re.TorusBufferGeometry=class Ly extends Np{constructor(s,l,m,b,p){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(s,l,m,b,p)}},re.TorusGeometry=Np,re.TorusKnotBufferGeometry=class Aw extends Up{constructor(s,l,m,b,p,i){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(s,l,m,b,p,i)}},re.TorusKnotGeometry=Up,re.Triangle=yo,re.TriangleFanDrawMode=2,re.TriangleStripDrawMode=1,re.TrianglesDrawMode=0,re.TubeBufferGeometry=class Oy extends ph{constructor(s,l,m,b,p){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(s,l,m,b,p)}},re.TubeGeometry=ph,re.TwoPassDoubleSide=2,re.UVMapping=300,re.Uint16BufferAttribute=lr,re.Uint32BufferAttribute=oc,re.Uint8BufferAttribute=class X_ extends Zi{constructor(s,l,m){super(new Uint8Array(s),l,m)}},re.Uint8ClampedBufferAttribute=class Y_ extends Zi{constructor(s,l,m){super(new Uint8ClampedArray(s),l,m)}},re.Uniform=ps,re.UniformsGroup=class es extends Zu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kx++}),this.name="",this.usage=_m,this.uniforms=[]}add(s){return this.uniforms.push(s),this}remove(s){const l=this.uniforms.indexOf(s);return-1!==l&&this.uniforms.splice(l,1),this}setName(s){return this.name=s,this}setUsage(s){return this.usage=s,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(s){this.name=s.name,this.usage=s.usage;const l=s.uniforms;this.uniforms.length=0;for(let m=0,b=l.length;m<b;m++)this.uniforms.push(l[m].clone());return this}clone(){return(new this.constructor).copy(this)}},re.UniformsLib=un,re.UniformsUtils=Z_,re.UnsignedByteType=qu,re.UnsignedInt248Type=Bf,re.UnsignedIntType=uu,re.UnsignedShort4444Type=Uf,re.UnsignedShort5551Type=Tv,re.UnsignedShortType=Nf,re.VSMShadowMap=ze,re.Vector2=Sn,re.Vector3=Pe,re.Vector4=tr,re.VectorKeyframeTrack=Lu,re.VideoTexture=class _x extends rc{constructor(s,l,m,b,p,i,o,u,f){super(s,l,m,b,p,i,o,u,f),this.isVideoTexture=!0,this.minFilter=void 0!==i?i:mo,this.magFilter=void 0!==p?p:mo,this.generateMipmaps=!1;const _=this;"requestVideoFrameCallback"in s&&s.requestVideoFrameCallback(function x(){_.needsUpdate=!0,s.requestVideoFrameCallback(x)})}clone(){return new this.constructor(this.image).copy(this)}update(){const s=this.image;"requestVideoFrameCallback"in s==0&&s.readyState>=s.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},re.WebGL1Renderer=Mu,re.WebGL3DRenderTarget=class Pl extends Vi{constructor(s=1,l=1,m=1){super(s,l),this.isWebGL3DRenderTarget=!0,this.depth=m,this.texture=new Zs(null,s,l,m),this.texture.isRenderTargetTexture=!0}},re.WebGLArrayRenderTarget=class qi extends Vi{constructor(s=1,l=1,m=1){super(s,l),this.isWebGLArrayRenderTarget=!0,this.depth=m,this.texture=new Gn(null,s,l,m),this.texture.isRenderTargetTexture=!0}},re.WebGLCubeRenderTarget=Bg,re.WebGLMultipleRenderTargets=class bm extends Vi{constructor(s=1,l=1,m=1,b={}){super(s,l,b),this.isWebGLMultipleRenderTargets=!0;const p=this.texture;this.texture=[];for(let i=0;i<m;i++)this.texture[i]=p.clone(),this.texture[i].isRenderTargetTexture=!0}setSize(s,l,m=1){if(this.width!==s||this.height!==l||this.depth!==m){this.width=s,this.height=l,this.depth=m;for(let b=0,p=this.texture.length;b<p;b++)this.texture[b].image.width=s,this.texture[b].image.height=l,this.texture[b].image.depth=m;this.dispose()}return this.viewport.set(0,0,s,l),this.scissor.set(0,0,s,l),this}copy(s){this.dispose(),this.width=s.width,this.height=s.height,this.depth=s.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,null!==s.depthTexture&&(this.depthTexture=s.depthTexture.clone()),this.texture.length=0;for(let l=0,m=s.texture.length;l<m;l++)this.texture[l]=s.texture[l].clone(),this.texture[l].isRenderTargetTexture=!0;return this}},re.WebGLRenderTarget=Vi,re.WebGLRenderer=r_,re.WebGLUtils=zm,re.WireframeGeometry=Bp,re.WrapAroundEnding=Da,re.ZeroCurvatureEnding=Dl,re.ZeroFactor=Gu,re.ZeroSlopeEnding=Jt,re.ZeroStencilOp=0,re._SRGBAFormat=ss,re.sRGBEncoding=Wi},156:Fr=>{function re(rn,Un,Pn,Qt,nn,Je,Zt){try{var Ue=rn[Je](Zt),Ie=Ue.value}catch(be){return void Pn(be)}Ue.done?Un(Ie):Promise.resolve(Ie).then(Qt,nn)}Fr.exports=function Rn(rn){return function(){var Un=this,Pn=arguments;return new Promise(function(Qt,nn){var Je=rn.apply(Un,Pn);function Zt(Ie){re(Je,Qt,nn,Zt,Ue,"next",Ie)}function Ue(Ie){re(Je,Qt,nn,Zt,Ue,"throw",Ie)}Zt(void 0)})}},Fr.exports.__esModule=!0,Fr.exports.default=Fr.exports},898:(Fr,re,Rn)=>{"use strict";function rn(a,d){return null==a||null==d?NaN:a<d?-1:a>d?1:a>=d?0:NaN}function Un(a,d){return null==a||null==d?NaN:d<a?-1:d>a?1:d>=a?0:NaN}function Pn(a){let d,g,v;function w(P,N,F=0,V=P.length){if(F<V){if(0!==d(N,N))return V;do{const W=F+V>>>1;g(P[W],N)<0?F=W+1:V=W}while(F<V)}return F}return 2!==a.length?(d=rn,g=(P,N)=>rn(a(P),N),v=(P,N)=>a(P)-N):(d=a===rn||a===Un?a:Qt,g=a,v=a),{left:w,center:function R(P,N,F=0,V=P.length){const W=w(P,N,F,V-1);return W>F&&v(P[W-1],N)>-v(P[W],N)?W-1:W},right:function C(P,N,F=0,V=P.length){if(F<V){if(0!==d(N,N))return V;do{const W=F+V>>>1;g(P[W],N)<=0?F=W+1:V=W}while(F<V)}return F}}}function Qt(){return 0}function nn(a){return null===a?NaN:+a}Rn.r(re),Rn.d(re,{Adder:()=>wo,Delaunay:()=>ch,FormatSpecifier:()=>gc,InternMap:()=>Oh,InternSet:()=>Fh,Node:()=>Ny,Path:()=>c0,Voronoi:()=>sf,ZoomTransform:()=>vg,active:()=>V1,arc:()=>iR,area:()=>rR,areaRadial:()=>Xk,ascending:()=>rn,autoType:()=>yx,axisBottom:()=>Yu,axisLeft:()=>mm,axisRight:()=>Gf,axisTop:()=>Ti,bin:()=>mo,bisect:()=>He,bisectCenter:()=>be,bisectLeft:()=>Ie,bisectRight:()=>Ue,bisector:()=>Pn,blob:()=>vw,blur:()=>ze,blur2:()=>ct,blurImage:()=>Mt,brush:()=>YM,brushSelection:()=>$M,brushX:()=>qM,brushY:()=>XM,buffer:()=>ng,chord:()=>a0,chordDirected:()=>ZM,chordTranspose:()=>Yb,cluster:()=>DA,color:()=>To,contourDensity:()=>Qv,contours:()=>Xg,count:()=>xo,create:()=>Fk,creator:()=>Mr,cross:()=>cm,csv:()=>ls,csvFormat:()=>fw,csvFormatBody:()=>vx,csvFormatRow:()=>Q1,csvFormatRows:()=>pw,csvFormatValue:()=>yd,csvParse:()=>bl,csvParseRows:()=>_x,cubehelix:()=>aa,cumsum:()=>au,curveBasis:()=>Z3,curveBasisClosed:()=>K3,curveBasisOpen:()=>hL,curveBumpX:()=>cR,curveBumpY:()=>Zk,curveBundle:()=>J3,curveCardinal:()=>Q3,curveCardinalClosed:()=>eN,curveCardinalOpen:()=>tN,curveCatmullRom:()=>vT,curveCatmullRomClosed:()=>pL,curveCatmullRomOpen:()=>mL,curveLinear:()=>qS,curveLinearClosed:()=>gL,curveMonotoneX:()=>u1,curveMonotoneY:()=>MT,curveNatural:()=>SR,curveStep:()=>_L,curveStepAfter:()=>ER,curveStepBefore:()=>vL,descending:()=>Un,deviation:()=>Lh,difference:()=>V_,disjoint:()=>fm,dispatch:()=>W_,drag:()=>cf,dragDisable:()=>kl,dragEnable:()=>Dc,dsv:()=>Ls,dsvFormat:()=>vd,easeBack:()=>gw,easeBackIn:()=>$l,easeBackInOut:()=>gw,easeBackOut:()=>Rp,easeBounce:()=>Tu,easeBounceIn:()=>Dp,easeBounceInOut:()=>wx,easeBounceOut:()=>Tu,easeCircle:()=>lh,easeCircleIn:()=>Qm,easeCircleInOut:()=>lh,easeCircleOut:()=>df,easeCubic:()=>Hg,easeCubicIn:()=>Am,easeCubicInOut:()=>Hg,easeCubicOut:()=>Vb,easeElastic:()=>Ip,easeElasticIn:()=>Be,easeElasticInOut:()=>_w,easeElasticOut:()=>Ip,easeExp:()=>d_,easeExpIn:()=>gy,easeExpInOut:()=>d_,easeExpOut:()=>_y,easeLinear:()=>xx,easePoly:()=>Cp,easePolyIn:()=>eS,easePolyInOut:()=>Cp,easePolyOut:()=>Mx,easeQuad:()=>Zm,easeQuadIn:()=>mw,easeQuadInOut:()=>Zm,easeQuadOut:()=>Ym,easeSin:()=>N0,easeSinIn:()=>Km,easeSinInOut:()=>N0,easeSinOut:()=>Jm,every:()=>Iv,extent:()=>Mo,fcumsum:()=>pr,filter:()=>B_,flatGroup:()=>ri,flatRollup:()=>O_,forceCenter:()=>Lp,forceCollide:()=>Ax,forceLink:()=>Dx,forceManyBody:()=>tS,forceRadial:()=>f_,forceSimulation:()=>Sy,forceX:()=>og,forceY:()=>H0,format:()=>Xl,formatDefaultLocale:()=>xw,formatLocale:()=>yh,formatPrefix:()=>Sd,formatSpecifier:()=>ku,fsum:()=>P_,geoAlbers:()=>$c,geoAlbersUsa:()=>hr,geoArea:()=>jp,geoAzimuthalEqualArea:()=>J0,geoAzimuthalEqualAreaRaw:()=>qa,geoAzimuthalEquidistant:()=>S_,geoAzimuthalEquidistantRaw:()=>Lo,geoBounds:()=>Ox,geoCentroid:()=>K0,geoCircle:()=>Bu,geoClipAntimeridian:()=>zx,geoClipCircle:()=>M_,geoClipExtent:()=>Aw,geoClipRectangle:()=>Ly,geoConicConformal:()=>UE,geoConicConformalRaw:()=>Gx,geoConicEqualArea:()=>jr,geoConicEqualAreaRaw:()=>Zo,geoConicEquidistant:()=>EA,geoConicEquidistantRaw:()=>SA,geoContains:()=>j,geoDistance:()=>x,geoEqualEarth:()=>M2,geoEqualEarthRaw:()=>VE,geoEquirectangular:()=>BE,geoEquirectangularRaw:()=>Q0,geoGnomonic:()=>CA,geoGnomonicRaw:()=>aS,geoGraticule:()=>Q,geoGraticule10:()=>J,geoIdentity:()=>w2,geoInterpolate:()=>Y,geoLength:()=>u,geoMercator:()=>Ef,geoMercatorRaw:()=>bo,geoNaturalEarth1:()=>TA,geoNaturalEarth1Raw:()=>zE,geoOrthographic:()=>S2,geoOrthographicRaw:()=>HE,geoPath:()=>Id,geoProjection:()=>_i,geoProjectionMutator:()=>Gi,geoRotation:()=>Ux,geoStereographic:()=>WE,geoStereographicRaw:()=>GE,geoStream:()=>Ma,geoTransform:()=>ho,geoTransverseMercator:()=>AA,geoTransverseMercatorRaw:()=>kw,gray:()=>X1,greatest:()=>Ev,greatestIndex:()=>Rv,group:()=>qr,groupSort:()=>Cg,groups:()=>mr,hcl:()=>Ki,hierarchy:()=>ZE,histogram:()=>mo,hsl:()=>Mm,html:()=>Cx,image:()=>Pp,index:()=>Eg,indexes:()=>hb,interpolate:()=>Ts,interpolateArray:()=>gs,interpolateBasis:()=>rl,interpolateBasisClosed:()=>Ul,interpolateBlues:()=>wk,interpolateBrBG:()=>jC,interpolateBuGn:()=>mk,interpolateBuPu:()=>gk,interpolateCividis:()=>V3,interpolateCool:()=>Ck,interpolateCubehelix:()=>uC,interpolateCubehelixDefault:()=>Qp,interpolateCubehelixLong:()=>mS,interpolateDate:()=>Yn,interpolateDiscrete:()=>X2,interpolateGnBu:()=>_k,interpolateGreens:()=>nT,interpolateGreys:()=>ZD,interpolateHcl:()=>lC,interpolateHclLong:()=>Uw,interpolateHsl:()=>Z2,interpolateHslLong:()=>f3,interpolateHue:()=>ZA,interpolateInferno:()=>Lk,interpolateLab:()=>p3,interpolateMagma:()=>kk,interpolateNumber:()=>Ln,interpolateNumberArray:()=>jd,interpolateObject:()=>Gr,interpolateOrRd:()=>vk,interpolateOranges:()=>rT,interpolatePRGn:()=>VD,interpolatePiYG:()=>uk,interpolatePlasma:()=>Ok,interpolatePuBu:()=>yk,interpolatePuBuGn:()=>ZC,interpolatePuOr:()=>dk,interpolatePuRd:()=>$D,interpolatePurples:()=>B3,interpolateRainbow:()=>Tk,interpolateRdBu:()=>hk,interpolateRdGy:()=>US,interpolateRdPu:()=>qD,interpolateRdYlBu:()=>fk,interpolateRdYlGn:()=>XC,interpolateReds:()=>Sk,interpolateRgb:()=>id,interpolateRgbBasis:()=>Cs,interpolateRgbBasisClosed:()=>La,interpolateRound:()=>Nw,interpolateSinebow:()=>Rk,interpolateSpectral:()=>pk,interpolateString:()=>Sm,interpolateTransformCss:()=>Ug,interpolateTransformSvg:()=>Cb,interpolateTurbo:()=>Ik,interpolateViridis:()=>Pk,interpolateWarm:()=>Ek,interpolateYlGn:()=>XD,interpolateYlGnBu:()=>xk,interpolateYlOrBr:()=>t1,interpolateYlOrRd:()=>Mk,interpolateZoom:()=>Vy,interrupt:()=>_s,intersection:()=>Ag,interval:()=>wL,isoFormat:()=>iN,isoParse:()=>ML,json:()=>rg,lab:()=>Kv,lch:()=>NE,least:()=>pb,leastIndex:()=>Dv,line:()=>iM,lineRadial:()=>oR,link:()=>YS,linkHorizontal:()=>W3,linkRadial:()=>Sa,linkVertical:()=>eL,local:()=>QD,map:()=>Tg,matcher:()=>du,max:()=>bs,maxIndex:()=>F_,mean:()=>Uf,median:()=>Tv,medianIndex:()=>Bf,merge:()=>Aa,min:()=>$u,minIndex:()=>Bd,mode:()=>Ec,namespace:()=>Ra,namespaces:()=>Qo,nice:()=>Ff,now:()=>ra,pack:()=>Lw,packEnclose:()=>U2,packSiblings:()=>z2,pairs:()=>Av,partition:()=>Cf,path:()=>Zb,pathRound:()=>AE,permute:()=>fb,pie:()=>$k,piecewise:()=>dC,pointRadial:()=>a1,pointer:()=>Zi,pointers:()=>Uk,polygonArea:()=>J2,polygonCentroid:()=>Q2,polygonContains:()=>pC,polygonHull:()=>gS,polygonLength:()=>m3,precisionFixed:()=>cg,precisionPrefix:()=>ci,precisionRound:()=>Mw,quadtree:()=>Bp,quantile:()=>Nf,quantileIndex:()=>uu,quantileSorted:()=>Cv,quantize:()=>K2,quickselect:()=>qu,radialArea:()=>Xk,radialLine:()=>oR,randomBates:()=>gC,randomBernoulli:()=>_3,randomBeta:()=>nD,randomBinomial:()=>vC,randomCauchy:()=>iP,randomExponential:()=>g3,randomGamma:()=>_C,randomGeometric:()=>tD,randomInt:()=>eD,randomIrwinHall:()=>mC,randomLcg:()=>oP,randomLogNormal:()=>tP,randomLogistic:()=>rD,randomNormal:()=>tv,randomPareto:()=>nP,randomPoisson:()=>sD,randomUniform:()=>eP,randomWeibull:()=>iD,range:()=>So,rank:()=>Vf,reduce:()=>zf,reverse:()=>Vh,rgb:()=>qf,ribbon:()=>QM,ribbonArrow:()=>wA,rollup:()=>Mv,rollups:()=>Uh,scaleBand:()=>bC,scaleDiverging:()=>fr,scaleDivergingLog:()=>ND,scaleDivergingPow:()=>Jp,scaleDivergingSqrt:()=>OS,scaleDivergingSymlog:()=>Qw,scaleIdentity:()=>MC,scaleImplicit:()=>_S,scaleLinear:()=>Xx,scaleLog:()=>dP,scaleOrdinal:()=>vS,scalePoint:()=>v3,scalePow:()=>wS,scaleQuantile:()=>dD,scaleQuantize:()=>gP,scaleRadial:()=>SS,scaleSequential:()=>LD,scaleSequentialLog:()=>OD,scaleSequentialPow:()=>Xy,scaleSequentialQuantile:()=>Za,scaleSequentialSqrt:()=>rk,scaleSequentialSymlog:()=>FD,scaleSqrt:()=>S3,scaleSymlog:()=>CC,scaleThreshold:()=>xi,scaleTime:()=>U3,scaleUtc:()=>If,scan:()=>mb,schemeAccent:()=>Ka,schemeBlues:()=>cv,schemeBrBG:()=>e1,schemeBuGn:()=>BS,schemeBuPu:()=>WD,schemeCategory10:()=>sk,schemeDark2:()=>ok,schemeGnBu:()=>VS,schemeGreens:()=>tT,schemeGreys:()=>n1,schemeOrRd:()=>jD,schemeOranges:()=>JD,schemePRGn:()=>BD,schemePaired:()=>fo,schemePastel1:()=>ak,schemePastel2:()=>FS,schemePiYG:()=>zD,schemePuBu:()=>KC,schemePuBuGn:()=>zS,schemePuOr:()=>HD,schemePuRd:()=>bk,schemePurples:()=>KD,schemeRdBu:()=>$C,schemeRdGy:()=>qC,schemeRdPu:()=>HS,schemeRdYlBu:()=>tM,schemeRdYlGn:()=>GD,schemeReds:()=>iT,schemeSet1:()=>ck,schemeSet2:()=>NS,schemeSet3:()=>lk,schemeSpectral:()=>YC,schemeTableau10:()=>UD,schemeYlGn:()=>QC,schemeYlGnBu:()=>JC,schemeYlOrBr:()=>YD,schemeYlOrRd:()=>eT,select:()=>Tr,selectAll:()=>eR,selection:()=>so,selector:()=>Qc,selectorAll:()=>zd,shuffle:()=>N_,shuffler:()=>ec,some:()=>U_,sort:()=>wv,stack:()=>QS,stackOffsetDiverging:()=>yL,stackOffsetExpand:()=>ST,stackOffsetNone:()=>oM,stackOffsetSilhouette:()=>AR,stackOffsetWiggle:()=>DR,stackOrderAppearance:()=>RR,stackOrderAscending:()=>CT,stackOrderDescending:()=>PR,stackOrderInsideOut:()=>bL,stackOrderNone:()=>aM,stackOrderReverse:()=>xL,stratify:()=>W2,style:()=>Ku,subset:()=>H_,sum:()=>hm,superset:()=>Dg,svg:()=>yy,symbol:()=>Y3,symbolAsterisk:()=>tL,symbolCircle:()=>dT,symbolCross:()=>nL,symbolDiamond:()=>lR,symbolDiamond2:()=>rL,symbolPlus:()=>sL,symbolSquare:()=>oL,symbolSquare2:()=>hT,symbolStar:()=>cL,symbolTimes:()=>fR,symbolTriangle:()=>pT,symbolTriangle2:()=>lL,symbolWye:()=>uL,symbolX:()=>fR,symbols:()=>dL,symbolsFill:()=>dL,symbolsStroke:()=>X3,text:()=>Du,thresholdFreedmanDiaconis:()=>Ta,thresholdScott:()=>Sc,thresholdSturges:()=>dm,tickFormat:()=>Bw,tickIncrement:()=>Xr,tickStep:()=>um,ticks:()=>gr,timeDay:()=>Hy,timeDays:()=>yP,timeFormat:()=>ID,timeFormatDefaultLocale:()=>PD,timeFormatLocale:()=>_D,timeFriday:()=>PC,timeFridays:()=>xP,timeHour:()=>Hw,timeHours:()=>_P,timeInterval:()=>Ko,timeMillisecond:()=>nv,timeMilliseconds:()=>TS,timeMinute:()=>Af,timeMinutes:()=>iv,timeMonday:()=>DS,timeMondays:()=>Yx,timeMonth:()=>jw,timeMonths:()=>$y,timeParse:()=>nk,timeSaturday:()=>kC,timeSaturdays:()=>E3,timeSecond:()=>A_,timeSeconds:()=>AS,timeSunday:()=>Wy,timeSundays:()=>LC,timeThursday:()=>rv,timeThursdays:()=>bP,timeTickInterval:()=>PP,timeTicks:()=>IP,timeTuesday:()=>RS,timeTuesdays:()=>IS,timeWednesday:()=>IC,timeWednesdays:()=>mD,timeWeek:()=>Wy,timeWeeks:()=>LC,timeYear:()=>Df,timeYears:()=>AP,timeout:()=>eo,timer:()=>Ao,timerFlush:()=>Vo,transition:()=>Zd,transpose:()=>ns,tree:()=>q2,treemap:()=>rr,treemapBinary:()=>no,treemapDice:()=>Yp,treemapResquarify:()=>sr,treemapSlice:()=>fS,treemapSliceDice:()=>El,treemapSquarify:()=>pS,tsv:()=>ig,tsvFormat:()=>qm,tsvFormatBody:()=>Pi,tsvFormatRow:()=>Xm,tsvFormatRows:()=>zn,tsvFormatValue:()=>u_,tsvParse:()=>l_,tsvParseRows:()=>py,union:()=>Ig,unixDay:()=>fD,unixDays:()=>pD,utcDay:()=>Gw,utcDays:()=>hD,utcFormat:()=>HC,utcFriday:()=>MP,utcFridays:()=>CP,utcHour:()=>RC,utcHours:()=>vP,utcMillisecond:()=>nv,utcMilliseconds:()=>TS,utcMinute:()=>zw,utcMinutes:()=>DC,utcMonday:()=>Kx,utcMondays:()=>C3,utcMonth:()=>$w,utcMonths:()=>OC,utcParse:()=>GC,utcSaturday:()=>wP,utcSaturdays:()=>TP,utcSecond:()=>A_,utcSeconds:()=>AS,utcSunday:()=>Ww,utcSundays:()=>SP,utcThursday:()=>jy,utcThursdays:()=>PS,utcTickInterval:()=>RP,utcTicks:()=>DP,utcTuesday:()=>Xa,utcTuesdays:()=>T3,utcWednesday:()=>gD,utcWednesdays:()=>EP,utcWeek:()=>Ww,utcWeeks:()=>SP,utcYear:()=>Rf,utcYears:()=>FC,variance:()=>Gu,window:()=>Rl,xml:()=>kp,zip:()=>ua,zoom:()=>dv,zoomIdentity:()=>d1,zoomTransform:()=>AT});const Zt=Pn(rn),Ue=Zt.right,Ie=Zt.left,be=Pn(nn).center,He=Ue;function ze(a,d){if(!((d=+d)>=0))throw new RangeError("invalid r");let g=a.length;if(!((g=Math.floor(g))>=0))throw new RangeError("invalid length");if(!g||!d)return a;const v=$r(d),w=a.slice();return v(a,w,0,g,1),v(w,a,0,g,1),v(a,w,0,g,1),a}const ct=At($r),Mt=At(function Kn(a){const d=$r(a);return(g,v,w,C,R)=>{d(g,v,0+(w<<=2),0+(C<<=2),R<<=2),d(g,v,w+1,C+1,R),d(g,v,w+2,C+2,R),d(g,v,w+3,C+3,R)}});function At(a){return function(d,g,v=g){if(!((g=+g)>=0))throw new RangeError("invalid rx");if(!((v=+v)>=0))throw new RangeError("invalid ry");let{data:w,width:C,height:R}=d;if(!((C=Math.floor(C))>=0))throw new RangeError("invalid width");if(!((R=Math.floor(void 0!==R?R:w.length/C))>=0))throw new RangeError("invalid height");if(!C||!R||!g&&!v)return d;const P=g&&a(g),N=v&&a(v),F=w.slice();return P&&N?(yt(P,F,w,C,R),yt(P,w,F,C,R),yt(P,F,w,C,R),mn(N,w,F,C,R),mn(N,F,w,C,R),mn(N,w,F,C,R)):P?(yt(P,w,F,C,R),yt(P,F,w,C,R),yt(P,w,F,C,R)):N&&(mn(N,w,F,C,R),mn(N,F,w,C,R),mn(N,w,F,C,R)),d}}function yt(a,d,g,v,w){for(let C=0,R=v*w;C<R;)a(d,g,C,C+=v,1)}function mn(a,d,g,v,w){for(let C=0,R=v*w;C<v;++C)a(d,g,C,C+R,v)}function $r(a){const d=Math.floor(a);if(d===a)return function po(a){const d=2*a+1;return(g,v,w,C,R)=>{if(!((C-=R)>=w))return;let P=a*v[w];const N=R*a;for(let F=w,V=w+N;F<V;F+=R)P+=v[Math.min(C,F)];for(let F=w,V=C;F<=V;F+=R)P+=v[Math.min(C,F+N)],g[F]=P/d,P-=v[Math.max(w,F-N)]}}(a);const g=a-d,v=2*a+1;return(w,C,R,P,N)=>{if(!((P-=N)>=R))return;let F=d*C[R];const V=N*d,W=V+N;for(let H=R,q=R+V;H<q;H+=N)F+=C[Math.min(P,H)];for(let H=R,q=P;H<=q;H+=N)F+=C[Math.min(P,H+V)],w[H]=(F+g*(C[Math.max(R,H-W)]+C[Math.min(P,H+W)]))/v,F-=C[Math.max(R,H-V)]}}function xo(a,d){let g=0;if(void 0===d)for(let v of a)null!=v&&(v=+v)>=v&&++g;else{let v=-1;for(let w of a)null!=(w=d(w,++v,a))&&(w=+w)>=w&&++g}return g}function Mc(a){return 0|a.length}function Jc(a){return!(a>0)}function Bs(a){return"object"!=typeof a||"length"in a?a:Array.from(a)}function cm(...a){const d="function"==typeof a[a.length-1]&&function ou(a){return d=>a(...d)}(a.pop()),g=(a=a.map(Bs)).map(Mc),v=a.length-1,w=new Array(v+1).fill(0),C=[];if(v<0||g.some(Jc))return C;for(;;){C.push(w.map((P,N)=>a[N][P]));let R=v;for(;++w[R]===g[R];){if(0===R)return d?C.map(d):C;w[R--]=0}}}function au(a,d){var g=0,v=0;return Float64Array.from(a,void 0===d?w=>g+=+w||0:w=>g+=+d(w,v++,a)||0)}function Gu(a,d){let v,g=0,w=0,C=0;if(void 0===d)for(let R of a)null!=R&&(R=+R)>=R&&(v=R-w,w+=v/++g,C+=v*(R-w));else{let R=-1;for(let P of a)null!=(P=d(P,++R,a))&&(P=+P)>=P&&(v=P-w,w+=v/++g,C+=v*(P-w))}if(g>1)return C/(g-1)}function Lh(a,d){const g=Gu(a,d);return g&&Math.sqrt(g)}function Mo(a,d){let g,v;if(void 0===d)for(const w of a)null!=w&&(void 0===g?w>=w&&(g=v=w):(g>w&&(g=w),v<w&&(v=w)));else{let w=-1;for(let C of a)null!=(C=d(C,++w,a))&&(void 0===g?C>=C&&(g=v=C):(g>C&&(g=C),v<C&&(v=C)))}return[g,v]}class wo{constructor(){this._partials=new Float64Array(32),this._n=0}add(d){const g=this._partials;let v=0;for(let w=0;w<this._n&&w<32;w++){const C=g[w],R=d+C,P=Math.abs(d)<Math.abs(C)?d-(R-C):C-(R-d);P&&(g[v++]=P),d=R}return g[v]=d,this._n=v+1,this}valueOf(){const d=this._partials;let v,w,C,g=this._n,R=0;if(g>0){for(R=d[--g];g>0&&(v=R,w=d[--g],R=v+w,C=w-(R-v),!C););g>0&&(C<0&&d[g-1]<0||C>0&&d[g-1]>0)&&(w=2*C,v=R+w,w==v-R&&(R=v))}return R}}function P_(a,d){const g=new wo;if(void 0===d)for(let v of a)(v=+v)&&g.add(v);else{let v=-1;for(let w of a)(w=+d(w,++v,a))&&g.add(w)}return+g}function pr(a,d){const g=new wo;let v=-1;return Float64Array.from(a,void 0===d?w=>g.add(+w||0):w=>g.add(+d(w,++v,a)||0))}class Oh extends Map{constructor(d,g=L_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:g}}),null!=d)for(const[v,w]of d)this.set(v,w)}get(d){return super.get(k_(this,d))}has(d){return super.has(k_(this,d))}set(d,g){return super.set(xv(this,d),g)}delete(d){return super.delete(Ci(this,d))}}class Fh extends Set{constructor(d,g=L_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:g}}),null!=d)for(const v of d)this.add(v)}has(d){return super.has(k_(this,d))}add(d){return super.add(xv(this,d))}delete(d){return super.delete(Ci(this,d))}}function k_({_intern:a,_key:d},g){const v=d(g);return a.has(v)?a.get(v):g}function xv({_intern:a,_key:d},g){const v=d(g);return a.has(v)?a.get(v):(a.set(v,g),g)}function Ci({_intern:a,_key:d},g){const v=d(g);return a.has(v)&&(g=a.get(v),a.delete(v)),g}function L_(a){return null!==a&&"object"==typeof a?a.valueOf():a}function Nh(a){return a}function qr(a,...d){return wc(a,Nh,Nh,d)}function mr(a,...d){return wc(a,Array.from,Nh,d)}function lm(a,d){for(let g=1,v=d.length;g<v;++g)a=a.flatMap(w=>w.pop().map(([C,R])=>[...w,C,R]));return a}function ri(a,...d){return lm(mr(a,...d),d)}function O_(a,d,...g){return lm(Uh(a,d,...g),g)}function Mv(a,d,...g){return wc(a,Nh,d,g)}function Uh(a,d,...g){return wc(a,Array.from,d,g)}function Eg(a,...d){return wc(a,Nh,cu,d)}function hb(a,...d){return wc(a,Array.from,cu,d)}function cu(a){if(1!==a.length)throw new Error("duplicate key");return a[0]}function wc(a,d,g,v){return function w(C,R){if(R>=v.length)return g(C);const P=new Oh,N=v[R++];let F=-1;for(const V of C){const W=N(V,++F,C),H=P.get(W);H?H.push(V):P.set(W,[V])}for(const[V,W]of P)P.set(V,w(W,R));return d(P)}(a,0)}function fb(a,d){return Array.from(d,g=>a[g])}function wv(a,...d){if("function"!=typeof a[Symbol.iterator])throw new TypeError("values is not iterable");a=Array.from(a);let[g]=d;if(g&&2!==g.length||d.length>1){const v=Uint32Array.from(a,(w,C)=>C);return d.length>1?(d=d.map(w=>a.map(w)),v.sort((w,C)=>{for(const R of d){const P=Of(R[w],R[C]);if(P)return P}})):(g=a.map(g),v.sort((w,C)=>Of(g[w],g[C]))),fb(a,v)}return a.sort(Sv(g))}function Sv(a=rn){if(a===rn)return Of;if("function"!=typeof a)throw new TypeError("compare is not a function");return(d,g)=>{const v=a(d,g);return v||0===v?v:(0===a(g,g))-(0===a(d,d))}}function Of(a,d){return(null==a||!(a>=a))-(null==d||!(d>=d))||(a<d?-1:a>d?1:0)}function Cg(a,d,g){return(2!==d.length?wv(Mv(a,d,g),([v,w],[C,R])=>rn(w,R)||rn(v,C)):wv(qr(a,g),([v,w],[C,R])=>d(w,R)||rn(v,C))).map(([v])=>v)}var Ca=Array.prototype.slice;function Tl(a){return()=>a}const ju=Math.sqrt(50),Ud=Math.sqrt(10),Oo=Math.sqrt(2);function io(a,d,g){const v=(d-a)/Math.max(0,g),w=Math.floor(Math.log10(v)),C=v/Math.pow(10,w),R=C>=ju?10:C>=Ud?5:C>=Oo?2:1;let P,N,F;return w<0?(F=Math.pow(10,-w)/R,P=Math.round(a*F),N=Math.round(d*F),P/F<a&&++P,N/F>d&&--N,F=-F):(F=Math.pow(10,w)*R,P=Math.round(a/F),N=Math.round(d/F),P*F<a&&++P,N*F>d&&--N),N<P&&.5<=g&&g<2?io(a,d,2*g):[P,N,F]}function gr(a,d,g){if(!((g=+g)>0))return[];if((a=+a)==(d=+d))return[a];const v=d<a,[w,C,R]=v?io(d,a,g):io(a,d,g);if(!(C>=w))return[];const P=C-w+1,N=new Array(P);if(v)if(R<0)for(let F=0;F<P;++F)N[F]=(C-F)/-R;else for(let F=0;F<P;++F)N[F]=(C-F)*R;else if(R<0)for(let F=0;F<P;++F)N[F]=(w+F)/-R;else for(let F=0;F<P;++F)N[F]=(w+F)*R;return N}function Xr(a,d,g){return io(a=+a,d=+d,g=+g)[2]}function um(a,d,g){g=+g;const v=(d=+d)<(a=+a),w=v?Xr(d,a,g):Xr(a,d,g);return(v?-1:1)*(w<0?1/-w:w)}function Ff(a,d,g){let v;for(;;){const w=Xr(a,d,g);if(w===v||0===w||!isFinite(w))return[a,d];w>0?(a=Math.floor(a/w)*w,d=Math.ceil(d/w)*w):w<0&&(a=Math.ceil(a*w)/w,d=Math.floor(d*w)/w),v=w}}function dm(a){return Math.max(1,Math.ceil(Math.log(xo(a))/Math.LN2)+1)}function mo(){var a=Nh,d=Mo,g=dm;function v(w){Array.isArray(w)||(w=Array.from(w));var C,P,N,R=w.length,F=new Array(R);for(C=0;C<R;++C)F[C]=a(w[C],C,w);var V=d(F),W=V[0],H=V[1],q=g(F,W,H);if(!Array.isArray(q)){const oe=H,se=+q;if(d===Mo&&([W,H]=Ff(W,H,se)),(q=gr(W,H,se))[0]<=W&&(N=Xr(W,H,se)),q[q.length-1]>=H)if(oe>=H&&d===Mo){const ue=Xr(W,H,se);isFinite(ue)&&(ue>0?H=(Math.floor(H/ue)+1)*ue:ue<0&&(H=(Math.ceil(H*-ue)+1)/-ue))}else q.pop()}for(var ne=q.length,Z=0,K=ne;q[Z]<=W;)++Z;for(;q[K-1]>H;)--K;(Z||K<ne)&&(q=q.slice(Z,K),ne=K-Z);var ae,te=new Array(ne+1);for(C=0;C<=ne;++C)(ae=te[C]=[]).x0=C>0?q[C-1]:W,ae.x1=C<ne?q[C]:H;if(isFinite(N)){if(N>0)for(C=0;C<R;++C)null!=(P=F[C])&&W<=P&&P<=H&&te[Math.min(ne,Math.floor((P-W)/N))].push(w[C]);else if(N<0)for(C=0;C<R;++C)if(null!=(P=F[C])&&W<=P&&P<=H){const oe=Math.floor((W-P)*N);te[Math.min(ne,oe+(q[oe]<=P))].push(w[C])}}else for(C=0;C<R;++C)null!=(P=F[C])&&W<=P&&P<=H&&te[He(q,P,0,ne)].push(w[C]);return te}return v.value=function(w){return arguments.length?(a="function"==typeof w?w:Tl(w),v):a},v.domain=function(w){return arguments.length?(d="function"==typeof w?w:Tl([w[0],w[1]]),v):d},v.thresholds=function(w){return arguments.length?(g="function"==typeof w?w:Tl(Array.isArray(w)?Ca.call(w):w),v):g},v}function bs(a,d){let g;if(void 0===d)for(const v of a)null!=v&&(g<v||void 0===g&&v>=v)&&(g=v);else{let v=-1;for(let w of a)null!=(w=d(w,++v,a))&&(g<w||void 0===g&&w>=w)&&(g=w)}return g}function F_(a,d){let g,v=-1,w=-1;if(void 0===d)for(const C of a)++w,null!=C&&(g<C||void 0===g&&C>=C)&&(g=C,v=w);else for(let C of a)null!=(C=d(C,++w,a))&&(g<C||void 0===g&&C>=C)&&(g=C,v=w);return v}function $u(a,d){let g;if(void 0===d)for(const v of a)null!=v&&(g>v||void 0===g&&v>=v)&&(g=v);else{let v=-1;for(let w of a)null!=(w=d(w,++v,a))&&(g>w||void 0===g&&w>=w)&&(g=w)}return g}function Bd(a,d){let g,v=-1,w=-1;if(void 0===d)for(const C of a)++w,null!=C&&(g>C||void 0===g&&C>=C)&&(g=C,v=w);else for(let C of a)null!=(C=d(C,++w,a))&&(g>C||void 0===g&&C>=C)&&(g=C,v=w);return v}function qu(a,d,g=0,v=1/0,w){if(d=Math.floor(d),g=Math.floor(Math.max(0,g)),v=Math.floor(Math.min(a.length-1,v)),!(g<=d&&d<=v))return a;for(w=void 0===w?Of:Sv(w);v>g;){if(v-g>600){const N=v-g+1,F=d-g+1,V=Math.log(N),W=.5*Math.exp(2*V/3),H=.5*Math.sqrt(V*W*(N-W)/N)*(F-N/2<0?-1:1);qu(a,d,Math.max(g,Math.floor(d-F*W/N+H)),Math.min(v,Math.floor(d+(N-F)*W/N+H)),w)}const C=a[d];let R=g,P=v;for(Al(a,g,d),w(a[v],C)>0&&Al(a,g,v);R<P;){for(Al(a,R,P),++R,--P;w(a[R],C)<0;)++R;for(;w(a[P],C)>0;)--P}0===w(a[g],C)?Al(a,g,P):(++P,Al(a,P,v)),P<=d&&(g=P+1),d<=P&&(v=P-1)}return a}function Al(a,d,g){const v=a[d];a[d]=a[g],a[g]=v}function Ev(a,d=rn){let g,v=!1;if(1===d.length){let w;for(const C of a){const R=d(C);(v?rn(R,w)>0:0===rn(R,R))&&(g=C,w=R,v=!0)}}else for(const w of a)(v?d(w,g)>0:0===d(w,w))&&(g=w,v=!0);return g}function Nf(a,d,g){if(a=Float64Array.from(function*Je(a,d){if(void 0===d)for(let g of a)null!=g&&(g=+g)>=g&&(yield g);else{let g=-1;for(let v of a)null!=(v=d(v,++g,a))&&(v=+v)>=v&&(yield v)}}(a,g)),(v=a.length)&&!isNaN(d=+d)){if(d<=0||v<2)return $u(a);if(d>=1)return bs(a);var v,w=(v-1)*d,C=Math.floor(w),R=bs(qu(a,C).subarray(0,C+1));return R+($u(a.subarray(C+1))-R)*(w-C)}}function Cv(a,d,g=nn){if((v=a.length)&&!isNaN(d=+d)){if(d<=0||v<2)return+g(a[0],0,a);if(d>=1)return+g(a[v-1],v-1,a);var v,w=(v-1)*d,C=Math.floor(w),R=+g(a[C],C,a);return R+(+g(a[C+1],C+1,a)-R)*(w-C)}}function uu(a,d,g=nn){if(!isNaN(d=+d)){if(v=Float64Array.from(a,(P,N)=>nn(g(a[N],N,a))),d<=0)return Bd(v);if(d>=1)return F_(v);var v,w=Uint32Array.from(a,(P,N)=>N),C=v.length-1,R=Math.floor(C*d);return qu(w,R,0,C,(P,N)=>Of(v[P],v[N])),(R=Ev(w.subarray(0,R+1),P=>v[P]))>=0?R:-1}}function Ta(a,d,g){const v=xo(a),w=Nf(a,.75)-Nf(a,.25);return v&&w?Math.ceil((g-d)/(2*w*Math.pow(v,-1/3))):1}function Sc(a,d,g){const v=xo(a),w=Lh(a);return v&&w?Math.ceil((g-d)*Math.cbrt(v)/(3.49*w)):1}function Uf(a,d){let g=0,v=0;if(void 0===d)for(let w of a)null!=w&&(w=+w)>=w&&(++g,v+=w);else{let w=-1;for(let C of a)null!=(C=d(C,++w,a))&&(C=+C)>=C&&(++g,v+=C)}if(g)return v/g}function Tv(a,d){return Nf(a,.5,d)}function Bf(a,d){return uu(a,.5,d)}function Aa(a){return Array.from(function*Bh(a){for(const d of a)yield*d}(a))}function Ec(a,d){const g=new Oh;if(void 0===d)for(let C of a)null!=C&&C>=C&&g.set(C,(g.get(C)||0)+1);else{let C=-1;for(let R of a)null!=(R=d(R,++C,a))&&R>=R&&g.set(R,(g.get(R)||0)+1)}let v,w=0;for(const[C,R]of g)R>w&&(w=R,v=C);return v}function Av(a,d=xs){const g=[];let v,w=!1;for(const C of a)w&&g.push(d(v,C)),v=C,w=!0;return g}function xs(a,d){return[a,d]}function So(a,d,g){a=+a,d=+d,g=(w=arguments.length)<2?(d=a,a=0,1):w<3?1:+g;for(var v=-1,w=0|Math.max(0,Math.ceil((d-a)/g)),C=new Array(w);++v<w;)C[v]=a+v*g;return C}function Vf(a,d=rn){if("function"!=typeof a[Symbol.iterator])throw new TypeError("values is not iterable");let g=Array.from(a);const v=new Float64Array(g.length);2!==d.length&&(g=g.map(d),d=rn);const w=(P,N)=>d(g[P],g[N]);let C,R;return(a=Uint32Array.from(g,(P,N)=>N)).sort(d===rn?(P,N)=>Of(g[P],g[N]):Sv(w)),a.forEach((P,N)=>{const F=w(P,void 0===C?P:C);F>=0?((void 0===C||F>0)&&(C=P,R=N),v[P]=R):v[P]=NaN}),v}function pb(a,d=rn){let g,v=!1;if(1===d.length){let w;for(const C of a){const R=d(C);(v?rn(R,w)<0:0===rn(R,R))&&(g=C,w=R,v=!0)}}else for(const w of a)(v?d(w,g)<0:0===d(w,w))&&(g=w,v=!0);return g}function Dv(a,d=rn){if(1===d.length)return Bd(a,d);let g,v=-1,w=-1;for(const C of a)++w,(v<0?0===d(C,C):d(C,g)<0)&&(g=C,v=w);return v}function Rv(a,d=rn){if(1===d.length)return F_(a,d);let g,v=-1,w=-1;for(const C of a)++w,(v<0?0===d(C,C):d(C,g)>0)&&(g=C,v=w);return v}function mb(a,d){const g=Dv(a,d);return g<0?void 0:g}const N_=ec(Math.random);function ec(a){return function(g,v=0,w=g.length){let C=w-(v=+v);for(;C;){const R=a()*C--|0,P=g[C+v];g[C+v]=g[R+v],g[R+v]=P}return g}}function hm(a,d){let g=0;if(void 0===d)for(let v of a)(v=+v)&&(g+=v);else{let v=-1;for(let w of a)(w=+d(w,++v,a))&&(g+=w)}return g}function ns(a){if(!(C=a.length))return[];for(var d=-1,g=$u(a,Xu),v=new Array(g);++d<g;)for(var C,w=-1,R=v[d]=new Array(C);++w<C;)R[w]=a[w][d];return v}function Xu(a){return a.length}function ua(){return ns(arguments)}function Iv(a,d){if("function"!=typeof d)throw new TypeError("test is not a function");let g=-1;for(const v of a)if(!d(v,++g,a))return!1;return!0}function U_(a,d){if("function"!=typeof d)throw new TypeError("test is not a function");let g=-1;for(const v of a)if(d(v,++g,a))return!0;return!1}function B_(a,d){if("function"!=typeof d)throw new TypeError("test is not a function");const g=[];let v=-1;for(const w of a)d(w,++v,a)&&g.push(w);return g}function Tg(a,d){if("function"!=typeof a[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof d)throw new TypeError("mapper is not a function");return Array.from(a,(g,v)=>d(g,v,a))}function zf(a,d,g){if("function"!=typeof d)throw new TypeError("reducer is not a function");const v=a[Symbol.iterator]();let w,C,R=-1;if(arguments.length<3){if(({done:w,value:g}=v.next()),w)return;++R}for(;({done:w,value:C}=v.next()),!w;)g=d(g,C,++R,a);return g}function Vh(a){if("function"!=typeof a[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(a).reverse()}function V_(a,...d){a=new Fh(a);for(const g of d)for(const v of g)a.delete(v);return a}function fm(a,d){const g=d[Symbol.iterator](),v=new Fh;for(const w of a){if(v.has(w))return!1;let C,R;for(;({value:C,done:R}=g.next())&&!R;){if(Object.is(w,C))return!1;v.add(C)}}return!0}function Ag(a,...d){a=new Fh(a),d=d.map(z_);e:for(const g of a)for(const v of d)if(!v.has(g)){a.delete(g);continue e}return a}function z_(a){return a instanceof Fh?a:new Fh(a)}function Dg(a,d){const g=a[Symbol.iterator](),v=new Set;for(const w of d){const C=Rg(w);if(v.has(C))continue;let R,P;for(;({value:R,done:P}=g.next());){if(P)return!1;const N=Rg(R);if(v.add(N),Object.is(C,N))break}}return!0}function Rg(a){return null!==a&&"object"==typeof a?a.valueOf():a}function H_(a,d){return Dg(d,a)}function Ig(...a){const d=new Fh;for(const g of a)for(const v of g)d.add(v);return d}function G_(a){return a}var Hf=1,Ms=2,tc=3,Vd=4,zh=1e-6;function Yr(a){return"translate("+a+",0)"}function Pg(a){return"translate(0,"+a+")"}function is(a){return d=>+a(d)}function pm(a,d){return d=Math.max(0,a.bandwidth()-2*d)/2,a.round()&&(d=Math.round(d)),g=>+a(g)+d}function Pv(){return!this.__axis}function xr(a,d){var g=[],v=null,w=null,C=6,R=6,P=3,N=typeof window<"u"&&window.devicePixelRatio>1?0:.5,F=a===Hf||a===Vd?-1:1,V=a===Vd||a===Ms?"x":"y",W=a===Hf||a===tc?Yr:Pg;function H(q){var ne=v??(d.ticks?d.ticks.apply(d,g):d.domain()),Z=w??(d.tickFormat?d.tickFormat.apply(d,g):G_),K=Math.max(C,0)+P,te=d.range(),ae=+te[0]+N,oe=+te[te.length-1]+N,se=(d.bandwidth?pm:is)(d.copy(),N),ue=q.selection?q.selection():q,_e=ue.selectAll(".domain").data([null]),Ce=ue.selectAll(".tick").data(ne,d).order(),ye=Ce.exit(),Ke=Ce.enter().append("g").attr("class","tick"),ke=Ce.select("line"),Oe=Ce.select("text");_e=_e.merge(_e.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ce=Ce.merge(Ke),ke=ke.merge(Ke.append("line").attr("stroke","currentColor").attr(V+"2",F*C)),Oe=Oe.merge(Ke.append("text").attr("fill","currentColor").attr(V,F*K).attr("dy",a===Hf?"0em":a===tc?"0.71em":"0.32em")),q!==ue&&(_e=_e.transition(q),Ce=Ce.transition(q),ke=ke.transition(q),Oe=Oe.transition(q),ye=ye.transition(q).attr("opacity",zh).attr("transform",function(ft){return isFinite(ft=se(ft))?W(ft+N):this.getAttribute("transform")}),Ke.attr("opacity",zh).attr("transform",function(ft){var it=this.parentNode.__axis;return W((it&&isFinite(it=it(ft))?it:se(ft))+N)})),ye.remove(),_e.attr("d",a===Vd||a===Ms?R?"M"+F*R+","+ae+"H"+N+"V"+oe+"H"+F*R:"M"+N+","+ae+"V"+oe:R?"M"+ae+","+F*R+"V"+N+"H"+oe+"V"+F*R:"M"+ae+","+N+"H"+oe),Ce.attr("opacity",1).attr("transform",function(ft){return W(se(ft)+N)}),ke.attr(V+"2",F*C),Oe.attr(V,F*K).text(Z),ue.filter(Pv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===Ms?"start":a===Vd?"end":"middle"),ue.each(function(){this.__axis=se})}return H.scale=function(q){return arguments.length?(d=q,H):d},H.ticks=function(){return g=Array.from(arguments),H},H.tickArguments=function(q){return arguments.length?(g=null==q?[]:Array.from(q),H):g.slice()},H.tickValues=function(q){return arguments.length?(v=null==q?null:Array.from(q),H):v&&v.slice()},H.tickFormat=function(q){return arguments.length?(w=q,H):w},H.tickSize=function(q){return arguments.length?(C=R=+q,H):C},H.tickSizeInner=function(q){return arguments.length?(C=+q,H):C},H.tickSizeOuter=function(q){return arguments.length?(R=+q,H):R},H.tickPadding=function(q){return arguments.length?(P=+q,H):P},H.offset=function(q){return arguments.length?(N=+q,H):N},H}function Ti(a){return xr(Hf,a)}function Gf(a){return xr(Ms,a)}function Yu(a){return xr(tc,a)}function mm(a){return xr(Vd,a)}var Dl={value:()=>{}};function Jt(){for(var v,a=0,d=arguments.length,g={};a<d;++a){if(!(v=arguments[a]+"")||v in g||/[\s.]/.test(v))throw new Error("illegal type: "+v);g[v]=[]}return new Da(g)}function Da(a){this._=a}function Pr(a,d){for(var w,g=0,v=a.length;g<v;++g)if((w=a[g]).name===d)return w.value}function kv(a,d,g){for(var v=0,w=a.length;v<w;++v)if(a[v].name===d){a[v]=Dl,a=a.slice(0,v).concat(a.slice(v+1));break}return null!=g&&a.push({name:d,value:g}),a}Da.prototype=Jt.prototype={constructor:Da,on:function(a,d){var w,g=this._,v=function Di(a,d){return a.trim().split(/^|\s+/).map(function(g){var v="",w=g.indexOf(".");if(w>=0&&(v=g.slice(w+1),g=g.slice(0,w)),g&&!d.hasOwnProperty(g))throw new Error("unknown type: "+g);return{type:g,name:v}})}(a+"",g),C=-1,R=v.length;if(!(arguments.length<2)){if(null!=d&&"function"!=typeof d)throw new Error("invalid callback: "+d);for(;++C<R;)if(w=(a=v[C]).type)g[w]=kv(g[w],a.name,d);else if(null==d)for(w in g)g[w]=kv(g[w],a.name,null);return this}for(;++C<R;)if((w=(a=v[C]).type)&&(w=Pr(g[w],a.name)))return w},copy:function(){var a={},d=this._;for(var g in d)a[g]=d[g].slice();return new Da(a)},call:function(a,d){if((w=arguments.length-2)>0)for(var w,C,g=new Array(w),v=0;v<w;++v)g[v]=arguments[v+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(v=0,w=(C=this._[a]).length;v<w;++v)C[v].value.apply(d,g)},apply:function(a,d,g){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var v=this._[a],w=0,C=v.length;w<C;++w)v[w].value.apply(d,g)}};const W_=Jt;function P1(){}function Qc(a){return null==a?P1:function(){return this.querySelector(a)}}function ws(a){return null==a?[]:Array.isArray(a)?a:Array.from(a)}function gb(){return[]}function zd(a){return null==a?gb:function(){return this.querySelectorAll(a)}}function du(a){return function(){return this.matches(a)}}function ic(a){return function(d){return d.matches(a)}}var gm=Array.prototype.find;function vb(){return this.firstElementChild}var EE=Array.prototype.filter;function hu(){return Array.from(this.children)}function L1(a){return new Array(a.length)}function yb(a,d){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=d}function Ov(a,d,g,v,w,C){for(var P,R=0,N=d.length,F=C.length;R<F;++R)(P=d[R])?(P.__data__=C[R],v[R]=P):g[R]=new yb(a,C[R]);for(;R<N;++R)(P=d[R])&&(w[R]=P)}function O1(a,d,g,v,w,C,R){var P,N,q,F=new Map,V=d.length,W=C.length,H=new Array(V);for(P=0;P<V;++P)(N=d[P])&&(H[P]=q=R.call(N,N.__data__,P,d)+"",F.has(q)?w[P]=N:F.set(q,N));for(P=0;P<W;++P)q=R.call(a,C[P],P,C)+"",(N=F.get(q))?(v[P]=N,N.__data__=C[P],F.delete(q)):g[P]=new yb(a,C[P]);for(P=0;P<V;++P)(N=d[P])&&F.get(H[P])===N&&(w[P]=N)}function MM(a){return a.__data__}function _m(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}function xb(a,d){return a<d?-1:a>d?1:a>=d?0:NaN}yb.prototype={constructor:yb,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,d){return this._parent.insertBefore(a,d)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var Ys="http://www.w3.org/1999/xhtml";const Qo={svg:"http://www.w3.org/2000/svg",xhtml:Ys,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ra(a){var d=a+="",g=d.indexOf(":");return g>=0&&"xmlns"!==(d=a.slice(0,g))&&(a=a.slice(g+1)),Qo.hasOwnProperty(d)?{space:Qo[d],local:a}:a}function Cc(a){return function(){this.removeAttribute(a)}}function go(a){return function(){this.removeAttributeNS(a.space,a.local)}}function kr(a,d){return function(){this.setAttribute(a,d)}}function Vs(a,d){return function(){this.setAttributeNS(a.space,a.local,d)}}function Fv(a,d){return function(){var g=d.apply(this,arguments);null==g?this.removeAttribute(a):this.setAttribute(a,g)}}function Mb(a,d){return function(){var g=d.apply(this,arguments);null==g?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,g)}}function Rl(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function TM(a){return function(){this.style.removeProperty(a)}}function ut(a,d,g){return function(){this.style.setProperty(a,d,g)}}function wb(a,d,g){return function(){var v=d.apply(this,arguments);null==v?this.style.removeProperty(a):this.style.setProperty(a,v,g)}}function Ku(a,d){return a.style.getPropertyValue(d)||Rl(a).getComputedStyle(a,null).getPropertyValue(d)}function Nv(a){return function(){delete this[a]}}function kg(a,d){return function(){this[a]=d}}function AM(a,d){return function(){var g=d.apply(this,arguments);null==g?delete this[a]:this[a]=g}}function j_(a){return a.trim().split(/^|\s+/)}function Tc(a){return a.classList||new el(a)}function el(a){this._node=a,this._names=j_(a.getAttribute("class")||"")}function tl(a,d){for(var g=Tc(a),v=-1,w=d.length;++v<w;)g.add(d[v])}function ro(a,d){for(var g=Tc(a),v=-1,w=d.length;++v<w;)g.remove(d[v])}function Bn(a){return function(){tl(this,a)}}function ji(a){return function(){ro(this,a)}}function Sn(a,d){return function(){(d.apply(this,arguments)?tl:ro)(this,a)}}function er(){this.textContent=""}function Il(a){return function(){this.textContent=a}}function vm(a){return function(){var d=a.apply(this,arguments);this.textContent=d??""}}function Ri(){this.innerHTML=""}function Ju(a){return function(){this.innerHTML=a}}function Hh(a){return function(){var d=a.apply(this,arguments);this.innerHTML=d??""}}function mi(){this.nextSibling&&this.parentNode.appendChild(this)}function Sb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ia(a){return function(){var d=this.ownerDocument,g=this.namespaceURI;return g===Ys&&d.documentElement.namespaceURI===Ys?d.createElement(a):d.createElementNS(g,a)}}function $i(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function Mr(a){var d=Ra(a);return(d.local?$i:Ia)(d)}function nl(){return null}function $_(){var a=this.parentNode;a&&a.removeChild(this)}function tr(){var a=this.cloneNode(!1),d=this.parentNode;return d?d.insertBefore(a,this.nextSibling):a}function Vi(){var a=this.cloneNode(!0),d=this.parentNode;return d?d.insertBefore(a,this.nextSibling):a}function bm(a){return function(){var d=this.__on;if(d){for(var C,g=0,v=-1,w=d.length;g<w;++g)C=d[g],a.type&&C.type!==a.type||C.name!==a.name?d[++v]=C:this.removeEventListener(C.type,C.listener,C.options);++v?d.length=v:delete this.__on}}}function fs(a,d,g){return function(){var w,v=this.__on,C=function Zs(a){return function(d){a.call(this,d,this.__data__)}}(d);if(v)for(var R=0,P=v.length;R<P;++R)if((w=v[R]).type===a.type&&w.name===a.name)return this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=C,w.options=g),void(w.value=d);this.addEventListener(a.type,C,g),w={type:a.type,name:a.name,value:d,listener:C,options:g},v?v.push(w):this.__on=[w]}}function Re(a,d,g){var v=Rl(a),w=v.CustomEvent;"function"==typeof w?w=new w(d,g):(w=v.document.createEvent("Event"),g?(w.initEvent(d,g.bubbles,g.cancelable),w.detail=g.detail):w.initEvent(d,!1,!1)),a.dispatchEvent(w)}function jf(a,d){return function(){return Re(this,a,d)}}function Ac(a,d){return function(){return Re(this,a,d.apply(this,arguments))}}el.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var d=this._names.indexOf(a);d>=0&&(this._names.splice(d,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var Co=[null];function Ss(a,d){this._groups=a,this._parents=d}function da(){return new Ss([[document.documentElement]],Co)}Ss.prototype=da.prototype={constructor:Ss,select:function Wi(a){"function"!=typeof a&&(a=Qc(a));for(var d=this._groups,g=d.length,v=new Array(g),w=0;w<g;++w)for(var N,F,C=d[w],R=C.length,P=v[w]=new Array(R),V=0;V<R;++V)(N=C[V])&&(F=a.call(N,N.__data__,V,C))&&("__data__"in N&&(F.__data__=N.__data__),P[V]=F);return new Ss(v,this._parents)},selectAll:function k1(a){a="function"==typeof a?function nc(a){return function(){return ws(a.apply(this,arguments))}}(a):zd(a);for(var d=this._groups,g=d.length,v=[],w=[],C=0;C<g;++C)for(var N,R=d[C],P=R.length,F=0;F<P;++F)(N=R[F])&&(v.push(a.call(N,N.__data__,F,R)),w.push(N));return new Ss(v,w)},selectChild:function Lv(a){return this.select(null==a?vb:function _b(a){return function(){return gm.call(this.children,a)}}("function"==typeof a?a:ic(a)))},selectChildren:function CE(a){return this.selectAll(null==a?hu:function rs(a){return function(){return EE.call(this.children,a)}}("function"==typeof a?a:ic(a)))},filter:function TE(a){"function"!=typeof a&&(a=du(a));for(var d=this._groups,g=d.length,v=new Array(g),w=0;w<g;++w)for(var N,C=d[w],R=C.length,P=v[w]=[],F=0;F<R;++F)(N=C[F])&&a.call(N,N.__data__,F,C)&&P.push(N);return new Ss(v,this._parents)},data:function wM(a,d){if(!arguments.length)return Array.from(this,MM);var g=d?O1:Ov,v=this._parents,w=this._groups;"function"!=typeof a&&(a=function pi(a){return function(){return a}}(a));for(var C=w.length,R=new Array(C),P=new Array(C),N=new Array(C),F=0;F<C;++F){var V=v[F],W=w[F],H=W.length,q=_m(a.call(V,V&&V.__data__,F,v)),ne=q.length,Z=P[F]=new Array(ne),K=R[F]=new Array(ne);g(V,W,Z,K,N[F]=new Array(H),q,d);for(var se,ue,ae=0,oe=0;ae<ne;++ae)if(se=Z[ae]){for(ae>=oe&&(oe=ae+1);!(ue=K[oe])&&++oe<ne;);se._next=ue||null}}return(R=new Ss(R,v))._enter=P,R._exit=N,R},enter:function Tn(){return new Ss(this._enter||this._groups.map(L1),this._parents)},exit:function Wf(){return new Ss(this._exit||this._groups.map(L1),this._parents)},join:function bb(a,d,g){var v=this.enter(),w=this,C=this.exit();return"function"==typeof a?(v=a(v))&&(v=v.selection()):v=v.append(a+""),null!=d&&(w=d(w))&&(w=w.selection()),null==g?C.remove():g(C),v&&w?v.merge(w).order():w},merge:function SM(a){for(var d=a.selection?a.selection():a,g=this._groups,v=d._groups,w=g.length,R=Math.min(w,v.length),P=new Array(w),N=0;N<R;++N)for(var q,F=g[N],V=v[N],W=F.length,H=P[N]=new Array(W),ne=0;ne<W;++ne)(q=F[ne]||V[ne])&&(H[ne]=q);for(;N<w;++N)P[N]=g[N];return new Ss(P,this._parents)},selection:function Es(){return this},order:function F1(){for(var a=this._groups,d=-1,g=a.length;++d<g;)for(var R,v=a[d],w=v.length-1,C=v[w];--w>=0;)(R=v[w])&&(C&&4^R.compareDocumentPosition(C)&&C.parentNode.insertBefore(R,C),C=R);return this},sort:function Ii(a){function d(W,H){return W&&H?a(W.__data__,H.__data__):!W-!H}a||(a=xb);for(var g=this._groups,v=g.length,w=new Array(v),C=0;C<v;++C){for(var F,R=g[C],P=R.length,N=w[C]=new Array(P),V=0;V<P;++V)(F=R[V])&&(N[V]=F);N.sort(d)}return new Ss(w,this._parents).order()},call:function N1(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function fu(){return Array.from(this)},node:function EM(){for(var a=this._groups,d=0,g=a.length;d<g;++d)for(var v=a[d],w=0,C=v.length;w<C;++w){var R=v[w];if(R)return R}return null},size:function CM(){let a=0;for(const d of this)++a;return a},empty:function ss(){return!this.node()},each:function Zu(a){for(var d=this._groups,g=0,v=d.length;g<v;++g)for(var P,w=d[g],C=0,R=w.length;C<R;++C)(P=w[C])&&a.call(P,P.__data__,C,w);return this},attr:function Hd(a,d){var g=Ra(a);if(arguments.length<2){var v=this.node();return g.local?v.getAttributeNS(g.space,g.local):v.getAttribute(g)}return this.each((null==d?g.local?go:Cc:"function"==typeof d?g.local?Mb:Fv:g.local?Vs:kr)(g,d))},style:function ei(a,d,g){return arguments.length>1?this.each((null==d?TM:"function"==typeof d?wb:ut)(a,d,g??"")):Ku(this.node(),a)},property:function DM(a,d){return arguments.length>1?this.each((null==d?Nv:"function"==typeof d?AM:kg)(a,d)):this.node()[a]},classed:function Wt(a,d){var g=j_(a+"");if(arguments.length<2){for(var v=Tc(this.node()),w=-1,C=g.length;++w<C;)if(!v.contains(g[w]))return!1;return!0}return this.each(("function"==typeof d?Sn:d?Bn:ji)(g,d))},text:function ym(a){return arguments.length?this.each(null==a?er:("function"==typeof a?vm:Il)(a)):this.node().textContent},html:function Uv(a){return arguments.length?this.each(null==a?Ri:("function"==typeof a?Hh:Ju)(a)):this.node().innerHTML},raise:function RM(){return this.each(mi)},lower:function Xn(){return this.each(Sb)},append:function _o(a){var d="function"==typeof a?a:Mr(a);return this.select(function(){return this.appendChild(d.apply(this,arguments))})},insert:function Eo(a,d){var g="function"==typeof a?a:Mr(a),v=null==d?nl:"function"==typeof d?d:Qc(d);return this.select(function(){return this.insertBefore(g.apply(this,arguments),v.apply(this,arguments)||null)})},remove:function rc(){return this.each($_)},clone:function Gn(a){return this.select(a?Vi:tr)},datum:function qi(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function Pe(a,d,g){var w,R,v=function Pl(a){return a.trim().split(/^|\s+/).map(function(d){var g="",v=d.indexOf(".");return v>=0&&(g=d.slice(v+1),d=d.slice(0,v)),{type:d,name:g}})}(a+""),C=v.length;if(!(arguments.length<2)){for(P=d?fs:bm,w=0;w<C;++w)this.each(P(v[w],d,g));return this}var P=this.node().__on;if(P)for(var V,N=0,F=P.length;N<F;++N)for(w=0,V=P[N];w<C;++w)if((R=v[w]).type===V.type&&R.name===V.name)return V.value},dispatch:function gi(a,d){return this.each(("function"==typeof d?Ac:jf)(a,d))},[Symbol.iterator]:function*Fo(){for(var a=this._groups,d=0,g=a.length;d<g;++d)for(var R,v=a[d],w=0,C=v.length;w<C;++w)(R=v[w])&&(yield R)}};const so=da;function Tr(a){return"string"==typeof a?new Ss([[document.querySelector(a)]],[document.documentElement]):new Ss([[a]],Co)}const Ks={passive:!1},No={capture:!0,passive:!1};function pu(a){a.stopImmediatePropagation()}function wr(a){a.preventDefault(),a.stopImmediatePropagation()}function kl(a){var d=a.document.documentElement,g=Tr(a).on("dragstart.drag",wr,No);"onselectstart"in d?g.on("selectstart.drag",wr,No):(d.__noselect=d.style.MozUserSelect,d.style.MozUserSelect="none")}function Dc(a,d){var g=a.document.documentElement,v=Tr(a).on("dragstart.drag",null);d&&(v.on("click.drag",wr,No),setTimeout(function(){v.on("click.drag",null)},0)),"onselectstart"in g?v.on("selectstart.drag",null):(g.style.MozUserSelect=g.__noselect,delete g.__noselect)}function Gd(a,d,g){a.prototype=d.prototype=g,g.constructor=a}function Ll(a,d){var g=Object.create(a.prototype);for(var v in d)g[v]=d[v];return g}function ha(){}var Sr=1/.7,sc="\\s*([+-]?\\d+)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ol=/^#([0-9a-f]{3,8})$/,Qu=new RegExp(`^rgb\\(${sc},${sc},${sc}\\)$`),Wd=new RegExp(`^rgb\\(${Zr},${Zr},${Zr}\\)$`),fa=new RegExp(`^rgba\\(${sc},${sc},${sc},${oo}\\)$`),zi=new RegExp(`^rgba\\(${Zr},${Zr},${Zr},${oo}\\)$`),Hi=new RegExp(`^hsl\\(${oo},${Zr},${Zr}\\)$`),Pa=new RegExp(`^hsla\\(${oo},${Zr},${Zr},${oo}\\)$`),Fl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function IM(){return this.rgb().formatHex()}function ka(){return this.rgb().formatRgb()}function To(a){var d,g;return a=(a+"").trim().toLowerCase(),(d=Ol.exec(a))?(g=d[1].length,d=parseInt(d[1],16),6===g?Bv(d):3===g?new ea(d>>8&15|d>>4&240,d>>4&15|240&d,(15&d)<<4|15&d,1):8===g?Lg(d>>24&255,d>>16&255,d>>8&255,(255&d)/255):4===g?Lg(d>>12&15|d>>8&240,d>>8&15|d>>4&240,d>>4&15|240&d,((15&d)<<4|15&d)/255):null):(d=Qu.exec(a))?new ea(d[1],d[2],d[3],1):(d=Wd.exec(a))?new ea(255*d[1]/100,255*d[2]/100,255*d[3]/100,1):(d=fa.exec(a))?Lg(d[1],d[2],d[3],d[4]):(d=zi.exec(a))?Lg(255*d[1]/100,255*d[2]/100,255*d[3]/100,d[4]):(d=Hi.exec(a))?Eb(d[1],d[2]/100,d[3]/100,1):(d=Pa.exec(a))?Eb(d[1],d[2]/100,d[3]/100,d[4]):Fl.hasOwnProperty(a)?Bv(Fl[a]):"transparent"===a?new ea(NaN,NaN,NaN,0):null}function Bv(a){return new ea(a>>16&255,a>>8&255,255&a,1)}function Lg(a,d,g,v){return v<=0&&(a=d=g=NaN),new ea(a,d,g,v)}function Og(a){return a instanceof ha||(a=To(a)),a?new ea((a=a.rgb()).r,a.g,a.b,a.opacity):new ea}function qf(a,d,g,v){return 1===arguments.length?Og(a):new ea(a,d,g,v??1)}function ea(a,d,g,v){this.r=+a,this.g=+d,this.b=+g,this.opacity=+v}function Xf(){return`#${xm(this.r)}${xm(this.g)}${xm(this.b)}`}function Rc(){const a=Nl(this.opacity);return`${1===a?"rgb(":"rgba("}${td(this.r)}, ${td(this.g)}, ${td(this.b)}${1===a?")":`, ${a})`}`}function Nl(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function td(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function xm(a){return((a=td(a))<16?"0":"")+a.toString(16)}function Eb(a,d,g,v){return v<=0?a=d=g=NaN:g<=0||g>=1?a=d=NaN:d<=0&&(a=NaN),new Hr(a,d,g,v)}function nd(a){if(a instanceof Hr)return new Hr(a.h,a.s,a.l,a.opacity);if(a instanceof ha||(a=To(a)),!a)return new Hr;if(a instanceof Hr)return a;var d=(a=a.rgb()).r/255,g=a.g/255,v=a.b/255,w=Math.min(d,g,v),C=Math.max(d,g,v),R=NaN,P=C-w,N=(C+w)/2;return P?(R=d===C?(g-v)/P+6*(g<v):g===C?(v-d)/P+2:(d-g)/P+4,P/=N<.5?C+w:2-C-w,R*=60):P=N>0&&N<1?0:R,new Hr(R,P,N,a.opacity)}function Mm(a,d,g,v){return 1===arguments.length?nd(a):new Hr(a,d,g,v??1)}function Hr(a,d,g,v){this.h=+a,this.s=+d,this.l=+g,this.opacity=+v}function q_(a){return(a=(a||0)%360)<0?a+360:a}function os(a){return Math.max(0,Math.min(1,a||0))}function Qs(a,d,g){return 255*(a<60?d+(g-d)*a/60:a<180?g:a<240?d+(g-d)*(240-a)/60:d)}function vo(a,d,g,v,w){var C=a*a,R=C*a;return((1-3*a+3*C-R)*d+(4-6*C+3*R)*g+(1+3*a+3*C-3*R)*v+R*w)/6}function rl(a){var d=a.length-1;return function(g){var v=g<=0?g=0:g>=1?(g=1,d-1):Math.floor(g*d),w=a[v],C=a[v+1];return vo((g-v/d)*d,v>0?a[v-1]:2*w-C,w,C,v<d-1?a[v+2]:2*C-w)}}function Ul(a){var d=a.length;return function(g){var v=Math.floor(((g%=1)<0?++g:g)*d);return vo((g-v/d)*d,a[(v+d-1)%d],a[v%d],a[(v+1)%d],a[(v+2)%d])}}Gd(ha,To,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:IM,formatHex:IM,formatHex8:function $f(){return this.rgb().formatHex8()},formatHsl:function ed(){return nd(this).formatHsl()},formatRgb:ka,toString:ka}),Gd(ea,qf,Ll(ha,{brighter(a){return a=null==a?Sr:Math.pow(Sr,a),new ea(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new ea(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new ea(td(this.r),td(this.g),td(this.b),Nl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xf,formatHex:Xf,formatHex8:function il(){return`#${xm(this.r)}${xm(this.g)}${xm(this.b)}${xm(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rc,toString:Rc})),Gd(Hr,Mm,Ll(ha,{brighter(a){return a=null==a?Sr:Math.pow(Sr,a),new Hr(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new Hr(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+360*(this.h<0),d=isNaN(a)||isNaN(this.s)?0:this.s,g=this.l,v=g+(g<.5?g:1-g)*d,w=2*g-v;return new ea(Qs(a>=240?a-240:a+120,w,v),Qs(a,w,v),Qs(a<120?a+240:a-120,w,v),this.opacity)},clamp(){return new Hr(q_(this.h),os(this.s),os(this.l),Nl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=Nl(this.opacity);return`${1===a?"hsl(":"hsla("}${q_(this.h)}, ${100*os(this.s)}%, ${100*os(this.l)}%${1===a?")":`, ${a})`}`}}));const Uo=a=>()=>a;function Bl(a,d){return function(g){return a+g*d}}function Gh(a,d){var g=d-a;return g?Bl(a,g>180||g<-180?g-360*Math.round(g/360):g):Uo(isNaN(a)?d:a)}function cr(a,d){var g=d-a;return g?Bl(a,g):Uo(isNaN(a)?d:a)}const id=function a(d){var g=function wm(a){return 1==(a=+a)?cr:function(d,g){return g-d?function ta(a,d,g){return a=Math.pow(a,g),d=Math.pow(d,g)-a,g=1/g,function(v){return Math.pow(a+v*d,g)}}(d,g,a):Uo(isNaN(d)?g:d)}}(d);function v(w,C){var R=g((w=qf(w)).r,(C=qf(C)).r),P=g(w.g,C.g),N=g(w.b,C.b),F=cr(w.opacity,C.opacity);return function(V){return w.r=R(V),w.g=P(V),w.b=N(V),w.opacity=F(V),w+""}}return v.gamma=a,v}(1);function yo(a){return function(d){var R,P,g=d.length,v=new Array(g),w=new Array(g),C=new Array(g);for(R=0;R<g;++R)P=qf(d[R]),v[R]=P.r||0,w[R]=P.g||0,C[R]=P.b||0;return v=a(v),w=a(w),C=a(C),P.opacity=1,function(N){return P.r=v(N),P.g=w(N),P.b=C(N),P+""}}}var Cs=yo(rl),La=yo(Ul);function jd(a,d){d||(d=[]);var w,g=a?Math.min(d.length,a.length):0,v=d.slice();return function(C){for(w=0;w<g;++w)v[w]=a[w]*(1-C)+d[w]*C;return v}}function na(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function gs(a,d){return(na(d)?jd:Yf)(a,d)}function Yf(a,d){var R,g=d?d.length:0,v=a?Math.min(g,a.length):0,w=new Array(v),C=new Array(g);for(R=0;R<v;++R)w[R]=Ts(a[R],d[R]);for(;R<g;++R)C[R]=d[R];return function(P){for(R=0;R<v;++R)C[R]=w[R](P);return C}}function Yn(a,d){var g=new Date;return a=+a,d=+d,function(v){return g.setTime(a*(1-v)+d*v),g}}function Ln(a,d){return a=+a,d=+d,function(g){return a*(1-g)+d*g}}function Gr(a,d){var w,g={},v={};for(w in(null===a||"object"!=typeof a)&&(a={}),(null===d||"object"!=typeof d)&&(d={}),d)w in a?g[w]=Ts(a[w],d[w]):v[w]=d[w];return function(C){for(w in g)v[w]=g[w](C);return v}}var ia=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(ia.source,"g");function Sm(a,d){var v,w,C,g=ia.lastIndex=sl.lastIndex=0,R=-1,P=[],N=[];for(a+="",d+="";(v=ia.exec(a))&&(w=sl.exec(d));)(C=w.index)>g&&(C=d.slice(g,C),P[R]?P[R]+=C:P[++R]=C),(v=v[0])===(w=w[0])?P[R]?P[R]+=w:P[++R]=w:(P[++R]=null,N.push({i:R,x:Ln(v,w)})),g=sl.lastIndex;return g<d.length&&(C=d.slice(g),P[R]?P[R]+=C:P[++R]=C),P.length<2?N[0]?function Bo(a){return function(d){return a(d)+""}}(N[0].x):function fi(a){return function(){return a}}(d):(d=N.length,function(F){for(var W,V=0;V<d;++V)P[(W=N[V]).i]=W.x(F);return P.join("")})}function Ts(a,d){var v,g=typeof d;return null==d||"boolean"===g?Uo(d):("number"===g?Ln:"string"===g?(v=To(d))?(d=v,id):Sm:d instanceof To?id:d instanceof Date?Yn:na(d)?jd:Array.isArray(d)?Yf:"function"!=typeof d.valueOf&&"function"!=typeof d.toString||isNaN(d)?Gr:Ln)(a,d)}function zs(a){let d;for(;d=a.sourceEvent;)a=d;return a}function Zi(a,d){if(a=zs(a),void 0===d&&(d=a.currentTarget),d){var g=d.ownerSVGElement||d;if(g.createSVGPoint){var v=g.createSVGPoint();return v.x=a.clientX,v.y=a.clientY,[(v=v.matrixTransform(d.getScreenCTM().inverse())).x,v.y]}if(d.getBoundingClientRect){var w=d.getBoundingClientRect();return[a.clientX-w.left-d.clientLeft,a.clientY-w.top-d.clientTop]}}return[a.pageX,a.pageY]}var lr,Oa,Hs=0,X_=0,Y_=0,Mn=1e3,oc=0,Gs=0,oi=0,Jn="object"==typeof performance&&performance.now?performance:Date,rd="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function ra(){return Gs||(rd(Fa),Gs=Jn.now()+oi)}function Fa(){Gs=0}function Vl(){this._call=this._time=this._next=null}function Ao(a,d,g){var v=new Vl;return v.restart(a,d,g),v}function Vo(){ra(),++Hs;for(var d,a=lr;a;)(d=Gs-a._time)>=0&&a._call.call(void 0,d),a=a._next;--Hs}function _r(){Gs=(oc=Jn.now())+oi,Hs=X_=0;try{Vo()}finally{Hs=0,function nr(){for(var a,g,d=lr,v=1/0;d;)d._call?(v>d._time&&(v=d._time),a=d,d=d._next):(g=d._next,d._next=null,d=a?a._next=g:lr=g);Oa=a,sa(v)}(),Gs=0}}function ai(){var a=Jn.now(),d=a-oc;d>Mn&&(oi-=d,oc=a)}function sa(a){Hs||(X_&&(X_=clearTimeout(X_)),a-Gs>24?(a<1/0&&(X_=setTimeout(_r,a-Jn.now()-oi)),Y_&&(Y_=clearInterval(Y_))):(Y_||(oc=Jn.now(),Y_=setInterval(ai,Mn)),Hs=1,rd(_r)))}function eo(a,d,g){var v=new Vl;return v.restart(w=>{v.stop(),a(w+d)},d=null==d?0:+d,g),v}Vl.prototype=Ao.prototype={constructor:Vl,restart:function(a,d,g){if("function"!=typeof a)throw new TypeError("callback is not a function");g=(null==g?ra():+g)+(null==d?0:+d),!this._next&&Oa!==this&&(Oa?Oa._next=this:lr=this,Oa=this),this._call=a,this._time=g,sa()},stop:function(){this._call&&(this._call=null,this._time=1/0,sa())}};var Fg=W_("start","end","cancel","interrupt"),Wh=[],zl=0,ol=1,Hl=2,mu=3,$d=4,gu=5,sd=6;function qd(a,d,g,v,w,C){var R=a.__transition;if(R){if(g in R)return}else a.__transition={};!function jh(a,d,g){var w,v=a.__transition;function R(F){var V,W,H,q;if(g.state!==ol)return N();for(V in v)if((q=v[V]).name===g.name){if(q.state===mu)return eo(R);q.state===$d?(q.state=sd,q.timer.stop(),q.on.call("interrupt",a,a.__data__,q.index,q.group),delete v[V]):+V<d&&(q.state=sd,q.timer.stop(),q.on.call("cancel",a,a.__data__,q.index,q.group),delete v[V])}if(eo(function(){g.state===mu&&(g.state=$d,g.timer.restart(P,g.delay,g.time),P(F))}),g.state=Hl,g.on.call("start",a,a.__data__,g.index,g.group),g.state===Hl){for(g.state=mu,w=new Array(H=g.tween.length),V=0,W=-1;V<H;++V)(q=g.tween[V].value.call(a,a.__data__,g.index,g.group))&&(w[++W]=q);w.length=W+1}}function P(F){for(var V=F<g.duration?g.ease.call(null,F/g.duration):(g.timer.restart(N),g.state=gu,1),W=-1,H=w.length;++W<H;)w[W].call(a,V);g.state===gu&&(g.on.call("end",a,a.__data__,g.index,g.group),N())}function N(){for(var F in g.state=sd,g.timer.stop(),delete v[d],v)return;delete a.__transition}v[d]=g,g.timer=Ao(function C(F){g.state=ol,g.timer.restart(R,g.delay,g.time),g.delay<=F&&R(F-g.delay)},0,g.time)}(a,g,{name:d,index:v,group:w,on:Fg,tween:Wh,time:C.time,delay:C.delay,duration:C.duration,ease:C.ease,timer:null,state:zl})}function Zf(a,d){var g=Na(a,d);if(g.state>zl)throw new Error("too late; already scheduled");return g}function al(a,d){var g=Na(a,d);if(g.state>mu)throw new Error("too late; already running");return g}function Na(a,d){var g=a.__transition;if(!g||!(g=g[d]))throw new Error("transition not found");return g}function _s(a,d){var v,w,R,g=a.__transition,C=!0;if(g){for(R in d=null==d?null:d+"",g)(v=g[R]).name===d?(w=v.state>Hl&&v.state<gu,v.state=sd,v.timer.stop(),v.on.call(w?"interrupt":"cancel",a,a.__data__,v.index,v.group),delete g[R]):C=!1;C&&delete a.__transition}}var as,Ng=180/Math.PI,cl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function As(a,d,g,v,w,C){var R,P,N;return(R=Math.sqrt(a*a+d*d))&&(a/=R,d/=R),(N=a*g+d*v)&&(g-=a*N,v-=d*N),(P=Math.sqrt(g*g+v*v))&&(g/=P,v/=P,N/=P),a*v<d*g&&(a=-a,d=-d,N=-N,R=-R),{translateX:w,translateY:C,rotate:Math.atan2(d,a)*Ng,skewX:Math.atan(N)*Ng,scaleX:R,scaleY:P}}function Z_(a,d,g,v){function w(F){return F.length?F.pop()+" ":""}return function(F,V){var W=[],H=[];return F=a(F),V=a(V),function C(F,V,W,H,q,ne){if(F!==W||V!==H){var Z=q.push("translate(",null,d,null,g);ne.push({i:Z-4,x:Ln(F,W)},{i:Z-2,x:Ln(V,H)})}else(W||H)&&q.push("translate("+W+d+H+g)}(F.translateX,F.translateY,V.translateX,V.translateY,W,H),function R(F,V,W,H){F!==V?(F-V>180?V+=360:V-F>180&&(F+=360),H.push({i:W.push(w(W)+"rotate(",null,v)-2,x:Ln(F,V)})):V&&W.push(w(W)+"rotate("+V+v)}(F.rotate,V.rotate,W,H),function P(F,V,W,H){F!==V?H.push({i:W.push(w(W)+"skewX(",null,v)-2,x:Ln(F,V)}):V&&W.push(w(W)+"skewX("+V+v)}(F.skewX,V.skewX,W,H),function N(F,V,W,H,q,ne){if(F!==W||V!==H){var Z=q.push(w(q)+"scale(",null,",",null,")");ne.push({i:Z-4,x:Ln(F,W)},{i:Z-2,x:Ln(V,H)})}else(1!==W||1!==H)&&q.push(w(q)+"scale("+W+","+H+")")}(F.scaleX,F.scaleY,V.scaleX,V.scaleY,W,H),F=V=null,function(q){for(var K,ne=-1,Z=H.length;++ne<Z;)W[(K=H[ne]).i]=K.x(q);return W.join("")}}}var Ug=Z_(function vr(a){const d=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return d.isIdentity?cl:As(d.a,d.b,d.c,d.d,d.e,d.f)},"px, ","px)","deg)"),Cb=Z_(function Kf(a){return null!=a&&(as||(as=document.createElementNS("http://www.w3.org/2000/svg","g")),as.setAttribute("transform",a),a=as.transform.baseVal.consolidate())?As((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):cl},", ",")",")");function od(a,d){var g,v;return function(){var w=al(this,a),C=w.tween;if(C!==g)for(var R=0,P=(v=g=C).length;R<P;++R)if(v[R].name===d){(v=v.slice()).splice(R,1);break}w.tween=v}}function _u(a,d,g){var v,w;if("function"!=typeof g)throw new Error;return function(){var C=al(this,a),R=C.tween;if(R!==v){w=(v=R).slice();for(var P={name:d,value:g},N=0,F=w.length;N<F;++N)if(w[N].name===d){w[N]=P;break}N===F&&w.push(P)}C.tween=w}}function Ds(a,d,g){var v=a._id;return a.each(function(){var w=al(this,v);(w.value||(w.value={}))[d]=g.apply(this,arguments)}),function(w){return Na(w,v).value[d]}}function cc(a,d){var g;return("number"==typeof d?Ln:d instanceof To?id:(g=To(d))?(d=g,id):Sm)(a,d)}function Xd(a){return function(){this.removeAttribute(a)}}function Em(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Bg(a,d,g){var v,C,w=g+"";return function(){var R=this.getAttribute(a);return R===w?null:R===v?C:C=d(v=R,g)}}function $h(a,d,g){var v,C,w=g+"";return function(){var R=this.getAttributeNS(a.space,a.local);return R===w?null:R===v?C:C=d(v=R,g)}}function Jf(a,d,g){var v,w,C;return function(){var R,N,P=g(this);return null==P?void this.removeAttribute(a):(R=this.getAttribute(a))===(N=P+"")?null:R===v&&N===w?C:(w=N,C=d(v=R,P))}}function PM(a,d,g){var v,w,C;return function(){var R,N,P=g(this);return null==P?void this.removeAttributeNS(a.space,a.local):(R=this.getAttributeNS(a.space,a.local))===(N=P+"")?null:R===v&&N===w?C:(w=N,C=d(v=R,P))}}function ep(a,d){var g,v;function w(){var C=d.apply(this,arguments);return C!==v&&(g=(v=C)&&function Yd(a,d){return function(g){this.setAttributeNS(a.space,a.local,d.call(this,g))}}(a,C)),g}return w._value=d,w}function K_(a,d){var g,v;function w(){var C=d.apply(this,arguments);return C!==v&&(g=(v=C)&&function lc(a,d){return function(g){this.setAttribute(a,d.call(this,g))}}(a,C)),g}return w._value=d,w}function Vg(a,d){return function(){Zf(this,a).delay=+d.apply(this,arguments)}}function Cm(a,d){return d=+d,function(){Zf(this,a).delay=d}}function Ab(a,d){return function(){al(this,a).duration=+d.apply(this,arguments)}}function zg(a,d){return d=+d,function(){al(this,a).duration=d}}var zv=so.prototype.constructor;function n0(a){return function(){this.style.removeProperty(a)}}var zM=0;function vu(a,d,g,v){this._groups=a,this._parents=d,this._name=g,this._id=v}function Zd(a){return so().transition(a)}function np(){return++zM}var Ic=so.prototype;function Am(a){return a*a*a}function Vb(a){return--a*a*a+1}function Hg(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}vu.prototype=Zd.prototype={constructor:vu,select:function FM(a){var d=this._name,g=this._id;"function"!=typeof a&&(a=Qc(a));for(var v=this._groups,w=v.length,C=new Array(w),R=0;R<w;++R)for(var V,W,P=v[R],N=P.length,F=C[R]=new Array(N),H=0;H<N;++H)(V=P[H])&&(W=a.call(V,V.__data__,H,P))&&("__data__"in V&&(W.__data__=V.__data__),F[H]=W,qd(F[H],d,g,H,F,Na(V,g)));return new vu(C,this._parents,d,g)},selectAll:function t0(a){var d=this._name,g=this._id;"function"!=typeof a&&(a=zd(a));for(var v=this._groups,w=v.length,C=[],R=[],P=0;P<w;++P)for(var V,N=v[P],F=N.length,W=0;W<F;++W)if(V=N[W]){for(var q,H=a.call(V,V.__data__,W,N),ne=Na(V,g),Z=0,K=H.length;Z<K;++Z)(q=H[Z])&&qd(q,d,g,Z,H,ne);C.push(H),R.push(V)}return new vu(C,R,d,g)},selectChild:Ic.selectChild,selectChildren:Ic.selectChildren,filter:function Vv(a){"function"!=typeof a&&(a=du(a));for(var d=this._groups,g=d.length,v=new Array(g),w=0;w<g;++w)for(var N,C=d[w],R=C.length,P=v[w]=[],F=0;F<R;++F)(N=C[F])&&a.call(N,N.__data__,F,C)&&P.push(N);return new vu(v,this._parents,this._name,this._id)},merge:function e0(a){if(a._id!==this._id)throw new Error;for(var d=this._groups,g=a._groups,v=d.length,C=Math.min(v,g.length),R=new Array(v),P=0;P<C;++P)for(var H,N=d[P],F=g[P],V=N.length,W=R[P]=new Array(V),q=0;q<V;++q)(H=N[q]||F[q])&&(W[q]=H);for(;P<v;++P)R[P]=d[P];return new vu(R,this._parents,this._name,this._id)},selection:function kb(){return new zv(this._groups,this._parents)},transition:function co(){for(var a=this._name,d=this._id,g=np(),v=this._groups,w=v.length,C=0;C<w;++C)for(var N,R=v[C],P=R.length,F=0;F<P;++F)if(N=R[F]){var V=Na(N,d);qd(N,a,g,F,R,{time:V.time+V.delay+V.duration,delay:0,duration:V.duration,ease:V.ease})}return new vu(v,this._parents,a,g)},call:Ic.call,nodes:Ic.nodes,node:Ic.node,size:Ic.size,empty:Ic.empty,each:Ic.each,on:function Pb(a,d){var g=this._id;return arguments.length<2?Na(this.node(),g).on.on(a):this.each(function Ib(a,d,g){var v,w,C=function U1(a){return(a+"").trim().split(/^|\s+/).every(function(d){var g=d.indexOf(".");return g>=0&&(d=d.slice(0,g)),!d||"start"===d})}(d)?Zf:al;return function(){var R=C(this,a),P=R.on;P!==v&&(w=(v=P).copy()).on(d,g),R.on=w}}(g,a,d))},attr:function Qf(a,d){var g=Ra(a),v="transform"===g?Cb:cc;return this.attrTween(a,"function"==typeof d?(g.local?PM:Jf)(g,v,Ds(this,"attr."+a,d)):null==d?(g.local?Em:Xd)(g):(g.local?$h:Bg)(g,v,d))},attrTween:function kM(a,d){var g="attr."+a;if(arguments.length<2)return(g=this.tween(g))&&g._value;if(null==d)return this.tween(g,null);if("function"!=typeof d)throw new Error;var v=Ra(a);return this.tween(g,(v.local?ep:K_)(v,d))},style:function Fb(a,d,g){var v="transform"==(a+="")?Ug:cc;return null==d?this.styleTween(a,function Hv(a,d){var g,v,w;return function(){var C=Ku(this,a),R=(this.style.removeProperty(a),Ku(this,a));return C===R?null:C===g&&R===v?w:w=d(g=C,v=R)}}(a,v)).on("end.style."+a,n0(a)):"function"==typeof d?this.styleTween(a,function Lb(a,d,g){var v,w,C;return function(){var R=Ku(this,a),P=g(this),N=P+"";return null==P&&(this.style.removeProperty(a),N=P=Ku(this,a)),R===N?null:R===v&&N===w?C:(w=N,C=d(v=R,P))}}(a,v,Ds(this,"style."+a,d))).each(function Ob(a,d){var g,v,w,P,C="style."+d,R="end."+C;return function(){var N=al(this,a),F=N.on,V=null==N.value[C]?P||(P=n0(d)):void 0;(F!==g||w!==V)&&(v=(g=F).copy()).on(R,w=V),N.on=v}}(this._id,a)):this.styleTween(a,function NM(a,d,g){var v,C,w=g+"";return function(){var R=Ku(this,a);return R===w?null:R===v?C:C=d(v=R,g)}}(a,v,d),g).on("end.style."+a,null)},styleTween:function r0(a,d,g){var v="style."+(a+="");if(arguments.length<2)return(v=this.tween(v))&&v._value;if(null==d)return this.tween(v,null);if("function"!=typeof d)throw new Error;return this.tween(v,function UM(a,d,g){var v,w;function C(){var R=d.apply(this,arguments);return R!==w&&(v=(w=R)&&function Nb(a,d,g){return function(v){this.style.setProperty(a,d.call(this,v),g)}}(a,R,g)),v}return C._value=d,C}(a,d,g??""))},text:function Ub(a){return this.tween("text","function"==typeof a?function BM(a){return function(){var d=a(this);this.textContent=d??""}}(Ds(this,"text",a)):function tp(a){return function(){this.textContent=a}}(null==a?"":a+""))},textTween:function VM(a){var d="text";if(arguments.length<1)return(d=this.tween(d))&&d._value;if(null==a)return this.tween(d,null);if("function"!=typeof a)throw new Error;return this.tween(d,function Tm(a){var d,g;function v(){var w=a.apply(this,arguments);return w!==g&&(d=(g=w)&&function Bb(a){return function(d){this.textContent=a.call(this,d)}}(w)),d}return v._value=a,v}(a))},remove:function ad(){return this.on("end.remove",function OM(a){return function(){var d=this.parentNode;for(var g in this.__transition)if(+g!==a)return;d&&d.removeChild(this)}}(this._id))},tween:function ao(a,d){var g=this._id;if(a+="",arguments.length<2){for(var R,v=Na(this.node(),g).tween,w=0,C=v.length;w<C;++w)if((R=v[w]).name===a)return R.value;return null}return this.each((null==d?od:_u)(g,a,d))},delay:function Tb(a){var d=this._id;return arguments.length?this.each(("function"==typeof a?Vg:Cm)(d,a)):Na(this.node(),d).delay},duration:function Db(a){var d=this._id;return arguments.length?this.each(("function"==typeof a?Ab:zg)(d,a)):Na(this.node(),d).duration},ease:function J_(a){var d=this._id;return arguments.length?this.each(function Rb(a,d){if("function"!=typeof d)throw new Error;return function(){al(this,a).ease=d}}(d,a)):Na(this.node(),d).ease},easeVarying:function Q_(a){if("function"!=typeof a)throw new Error;return this.each(function LM(a,d){return function(){var g=d.apply(this,arguments);if("function"!=typeof g)throw new Error;al(this,a).ease=g}}(this._id,a))},end:function Gv(){var a,d,g=this,v=g._id,w=g.size();return new Promise(function(C,R){var P={value:R},N={value:function(){0==--w&&C()}};g.each(function(){var F=al(this,v),V=F.on;V!==a&&((d=(a=V).copy())._.cancel.push(P),d._.interrupt.push(P),d._.end.push(N)),F.on=d}),0===w&&C()})},[Symbol.iterator]:Ic[Symbol.iterator]};var Dm={time:null,delay:0,duration:250,ease:Hg};function B1(a,d){for(var g;!(g=a.__transition)||!(g=g[d]);)if(!(a=a.parentNode))throw new Error(`transition ${d} not found`);return g}so.prototype.interrupt=function ac(a){return this.each(function(){_s(this,a)})},so.prototype.transition=function HM(a){var d,g;a instanceof vu?(d=a._id,a=a._name):(d=np(),(g=Dm).time=ra(),a=null==a?null:a+"");for(var v=this._groups,w=v.length,C=0;C<w;++C)for(var N,R=v[C],P=R.length,F=0;F<P;++F)(N=R[F])&&qd(N,a,d,F,R,g||B1(N,d));return new vu(v,this._parents,a,d)};var jt=[null];function V1(a,d){var v,w,g=a.__transition;if(g)for(w in d=null==d?null:d+"",g)if((v=g[w]).state>ol&&v.name===d)return new vu([[a]],jt,d,+w);return null}const zb=a=>()=>a;function z1(a,{sourceEvent:d,target:g,selection:v,mode:w,dispatch:C}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:d,enumerable:!0,configurable:!0},target:{value:g,enumerable:!0,configurable:!0},selection:{value:v,enumerable:!0,configurable:!0},mode:{value:w,enumerable:!0,configurable:!0},_:{value:C}})}function Hb(a){a.preventDefault(),a.stopImmediatePropagation()}var GM={name:"drag"},Gb={name:"space"},cd={name:"handle"},Gg={name:"center"};const{abs:WM,max:Lr,min:oa}=Math;function Rm(a){return[+a[0],+a[1]]}function Wv(a){return[Rm(a[0]),Rm(a[1])]}var uc={name:"x",handles:["w","e"].map(s0),input:function(a,d){return null==a?null:[[+a[0],d[0][1]],[+a[1],d[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},ld={name:"y",handles:["n","s"].map(s0),input:function(a,d){return null==a?null:[[d[0][0],+a[0]],[d[1][0],+a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},Wb={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(s0),input:function(a){return null==a?null:Wv(a)},output:function(a){return a}},Gl={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Im={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},jb={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},G1={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jM={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function s0(a){return{type:a}}function ll(a){return!a.ctrlKey&&!a.button}function jv(){var a=this.ownerSVGElement||this;return a.hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function Pm(){return navigator.maxTouchPoints||"ontouchstart"in this}function $b(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function $M(a){var d=a.__brush;return d?d.dim.output(d.selection):null}function qM(){return $v(uc)}function XM(){return $v(ld)}function YM(){return $v(Wb)}function $v(a){var P,d=jv,g=ll,v=Pm,w=!0,C=W_("start","brush","end"),R=6;function N(K){var te=K.property("__brush",Z).selectAll(".overlay").data([s0("overlay")]);te.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gl.overlay).merge(te).each(function(){var oe=$b(this).extent;Tr(this).attr("x",oe[0][0]).attr("y",oe[0][1]).attr("width",oe[1][0]-oe[0][0]).attr("height",oe[1][1]-oe[0][1])}),K.selectAll(".selection").data([s0("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gl.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ae=K.selectAll(".handle").data(a.handles,function(oe){return oe.type});ae.exit().remove(),ae.enter().append("rect").attr("class",function(oe){return"handle handle--"+oe.type}).attr("cursor",function(oe){return Gl[oe.type]}),K.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",H).filter(v).on("touchstart.brush",H).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",ne).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var K=Tr(this),te=$b(this).selection;te?(K.selectAll(".selection").style("display",null).attr("x",te[0][0]).attr("y",te[0][1]).attr("width",te[1][0]-te[0][0]).attr("height",te[1][1]-te[0][1]),K.selectAll(".handle").style("display",null).attr("x",function(ae){return"e"===ae.type[ae.type.length-1]?te[1][0]-R/2:te[0][0]-R/2}).attr("y",function(ae){return"s"===ae.type[0]?te[1][1]-R/2:te[0][1]-R/2}).attr("width",function(ae){return"n"===ae.type||"s"===ae.type?te[1][0]-te[0][0]+R:R}).attr("height",function(ae){return"e"===ae.type||"w"===ae.type?te[1][1]-te[0][1]+R:R})):K.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function V(K,te,ae){var oe=K.__brush.emitter;return!oe||ae&&oe.clean?new W(K,te,ae):oe}function W(K,te,ae){this.that=K,this.args=te,this.state=K.__brush,this.active=0,this.clean=ae}function H(K){if((!P||K.touches)&&g.apply(this,arguments)){var ke,Oe,it,le,Me,We,Ge,De,It,Vt,bn,te=this,ae=K.target.__data__.type,oe="selection"===(w&&K.metaKey?ae="overlay":ae)?GM:w&&K.altKey?Gg:cd,se=a===ld?null:G1[ae],ue=a===uc?null:jM[ae],_e=$b(te),Ce=_e.extent,ye=_e.selection,Ke=Ce[0][0],ft=Ce[0][1],me=Ce[1][0],Se=Ce[1][1],rt=0,gt=0,xt=se&&ue&&w&&K.shiftKey,$t=Array.from(K.touches||[K],An=>{const wi=An.identifier;return(An=Zi(An,te)).point0=An.slice(),An.identifier=wi,An});_s(te);var kn=V(te,arguments,!0).beforestart();if("overlay"===ae){ye&&(It=!0);const An=[$t[0],$t[1]||$t[0]];_e.selection=ye=[[ke=a===ld?Ke:oa(An[0][0],An[1][0]),it=a===uc?ft:oa(An[0][1],An[1][1])],[Me=a===ld?me:Lr(An[0][0],An[1][0]),Ge=a===uc?Se:Lr(An[0][1],An[1][1])]],$t.length>1&&xn(K)}else ke=ye[0][0],it=ye[0][1],Me=ye[1][0],Ge=ye[1][1];Oe=ke,le=it,We=Me,De=Ge;var Xt=Tr(te).attr("pointer-events","none"),pn=Xt.selectAll(".overlay").attr("cursor",Gl[ae]);if(K.touches)kn.moved=Rt,kn.ended=ti;else{var dn=Tr(K.view).on("mousemove.brush",Rt,!0).on("mouseup.brush",ti,!0);w&&dn.on("keydown.brush",function Ui(An){switch(An.keyCode){case 16:xt=se&&ue;break;case 18:oe===cd&&(se&&(Me=We-rt*se,ke=Oe+rt*se),ue&&(Ge=De-gt*ue,it=le+gt*ue),oe=Gg,xn(An));break;case 32:(oe===cd||oe===Gg)&&(se<0?Me=We-rt:se>0&&(ke=Oe-rt),ue<0?Ge=De-gt:ue>0&&(it=le-gt),oe=Gb,pn.attr("cursor",Gl.selection),xn(An));break;default:return}Hb(An)},!0).on("keyup.brush",function hi(An){switch(An.keyCode){case 16:xt&&(Vt=bn=xt=!1,xn(An));break;case 18:oe===Gg&&(se<0?Me=We:se>0&&(ke=Oe),ue<0?Ge=De:ue>0&&(it=le),oe=cd,xn(An));break;case 32:oe===Gb&&(An.altKey?(se&&(Me=We-rt*se,ke=Oe+rt*se),ue&&(Ge=De-gt*ue,it=le+gt*ue),oe=Gg):(se<0?Me=We:se>0&&(ke=Oe),ue<0?Ge=De:ue>0&&(it=le),oe=cd),pn.attr("cursor",Gl[ae]),xn(An));break;default:return}Hb(An)},!0),kl(K.view)}F.call(te),kn.start(K,oe.name)}function Rt(An){for(const wi of An.changedTouches||[An])for(const ar of $t)ar.identifier===wi.identifier&&(ar.cur=Zi(wi,te));if(xt&&!Vt&&!bn&&1===$t.length){const wi=$t[0];WM(wi.cur[0]-wi[0])>WM(wi.cur[1]-wi[1])?bn=!0:Vt=!0}for(const wi of $t)wi.cur&&(wi[0]=wi.cur[0],wi[1]=wi.cur[1]);It=!0,Hb(An),xn(An)}function xn(An){const wi=$t[0],ar=wi.point0;var Vr;switch(rt=wi[0]-ar[0],gt=wi[1]-ar[1],oe){case Gb:case GM:se&&(rt=Lr(Ke-ke,oa(me-Me,rt)),Oe=ke+rt,We=Me+rt),ue&&(gt=Lr(ft-it,oa(Se-Ge,gt)),le=it+gt,De=Ge+gt);break;case cd:$t[1]?(se&&(Oe=Lr(Ke,oa(me,$t[0][0])),We=Lr(Ke,oa(me,$t[1][0])),se=1),ue&&(le=Lr(ft,oa(Se,$t[0][1])),De=Lr(ft,oa(Se,$t[1][1])),ue=1)):(se<0?(rt=Lr(Ke-ke,oa(me-ke,rt)),Oe=ke+rt,We=Me):se>0&&(rt=Lr(Ke-Me,oa(me-Me,rt)),Oe=ke,We=Me+rt),ue<0?(gt=Lr(ft-it,oa(Se-it,gt)),le=it+gt,De=Ge):ue>0&&(gt=Lr(ft-Ge,oa(Se-Ge,gt)),le=it,De=Ge+gt));break;case Gg:se&&(Oe=Lr(Ke,oa(me,ke-rt*se)),We=Lr(Ke,oa(me,Me+rt*se))),ue&&(le=Lr(ft,oa(Se,it-gt*ue)),De=Lr(ft,oa(Se,Ge+gt*ue)))}We<Oe&&(se*=-1,Vr=ke,ke=Me,Me=Vr,Vr=Oe,Oe=We,We=Vr,ae in Im&&pn.attr("cursor",Gl[ae=Im[ae]])),De<le&&(ue*=-1,Vr=it,it=Ge,Ge=Vr,Vr=le,le=De,De=Vr,ae in jb&&pn.attr("cursor",Gl[ae=jb[ae]])),_e.selection&&(ye=_e.selection),Vt&&(Oe=ye[0][0],We=ye[1][0]),bn&&(le=ye[0][1],De=ye[1][1]),(ye[0][0]!==Oe||ye[0][1]!==le||ye[1][0]!==We||ye[1][1]!==De)&&(_e.selection=[[Oe,le],[We,De]],F.call(te),kn.brush(An,oe.name))}function ti(An){if(function H1(a){a.stopImmediatePropagation()}(An),An.touches){if(An.touches.length)return;P&&clearTimeout(P),P=setTimeout(function(){P=null},500)}else Dc(An.view,It),dn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Xt.attr("pointer-events","all"),pn.attr("cursor",Gl.overlay),_e.selection&&(ye=_e.selection),function qb(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}(ye)&&(_e.selection=null,F.call(te)),kn.end(An,oe.name)}}function q(K){V(this,arguments).moved(K)}function ne(K){V(this,arguments).ended(K)}function Z(){var K=this.__brush||{selection:null};return K.extent=Wv(d.apply(this,arguments)),K.dim=a,K}return N.move=function(K,te,ae){K.tween?K.on("start.brush",function(oe){V(this,arguments).beforestart().start(oe)}).on("interrupt.brush end.brush",function(oe){V(this,arguments).end(oe)}).tween("brush",function(){var oe=this,se=oe.__brush,ue=V(oe,arguments),_e=se.selection,Ce=a.input("function"==typeof te?te.apply(this,arguments):te,se.extent),ye=Ts(_e,Ce);function Ke(ke){se.selection=1===ke&&null===Ce?null:ye(ke),F.call(oe),ue.brush()}return null!==_e&&null!==Ce?Ke:Ke(1)}):K.each(function(){var oe=this,se=arguments,ue=oe.__brush,_e=a.input("function"==typeof te?te.apply(oe,se):te,ue.extent),Ce=V(oe,se).beforestart();_s(oe),ue.selection=null===_e?null:_e,F.call(oe),Ce.start(ae).brush(ae).end(ae)})},N.clear=function(K,te){N.move(K,null,te)},W.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(K,te){return this.starting?(this.starting=!1,this.emit("start",K,te)):this.emit("brush",K),this},brush:function(K,te){return this.emit("brush",K,te),this},end:function(K,te){return 0==--this.active&&(delete this.state.emitter,this.emit("end",K,te)),this},emit:function(K,te,ae){var oe=Tr(this.that).datum();C.call(K,this.that,new z1(K,{sourceEvent:te,target:N,selection:a.output(this.state.selection),mode:ae,dispatch:C}),oe)}},N.extent=function(K){return arguments.length?(d="function"==typeof K?K:zb(Wv(K)),N):d},N.filter=function(K){return arguments.length?(g="function"==typeof K?K:zb(!!K),N):g},N.touchable=function(K){return arguments.length?(v="function"==typeof K?K:zb(!!K),N):v},N.handleSize=function(K){return arguments.length?(R=+K,N):R},N.keyModifiers=function(K){return arguments.length?(w=!!K,N):w},N.on=function(){var K=C.on.apply(C,arguments);return K===C?N:K},N}var Xb=Math.abs,qh=Math.cos,Kd=Math.sin,ip=Math.PI,Wl=ip/2,qv=2*ip,rp=Math.max,Xv=1e-12;function o0(a,d){return Array.from({length:d-a},(g,v)=>a+v)}function a0(){return Yv(!1,!1)}function Yb(){return Yv(!1,!0)}function ZM(){return Yv(!0,!1)}function Yv(a,d){var g=0,v=null,w=null,C=null;function R(P){var ne,N=P.length,F=new Array(N),V=o0(0,N),W=new Array(N*N),H=new Array(N),q=0;P=Float64Array.from({length:N*N},d?(Z,K)=>P[K%N][K/N|0]:(Z,K)=>P[K/N|0][K%N]);for(let Z=0;Z<N;++Z){let K=0;for(let te=0;te<N;++te)K+=P[Z*N+te]+a*P[te*N+Z];q+=F[Z]=K}ne=(q=rp(0,qv-g*N)/q)?g:qv/N;{let Z=0;v&&V.sort((K,te)=>v(F[K],F[te]));for(const K of V){const te=Z;if(a){const ae=o0(1+~N,N).filter(oe=>oe<0?P[~oe*N+K]:P[K*N+oe]);w&&ae.sort((oe,se)=>w(oe<0?-P[~oe*N+K]:P[K*N+oe],se<0?-P[~se*N+K]:P[K*N+se]));for(const oe of ae)oe<0?(W[~oe*N+K]||(W[~oe*N+K]={source:null,target:null})).target={index:K,startAngle:Z,endAngle:Z+=P[~oe*N+K]*q,value:P[~oe*N+K]}:(W[K*N+oe]||(W[K*N+oe]={source:null,target:null})).source={index:K,startAngle:Z,endAngle:Z+=P[K*N+oe]*q,value:P[K*N+oe]};H[K]={index:K,startAngle:te,endAngle:Z,value:F[K]}}else{const ae=o0(0,N).filter(oe=>P[K*N+oe]||P[oe*N+K]);w&&ae.sort((oe,se)=>w(P[K*N+oe],P[K*N+se]));for(const oe of ae){let se;if(K<oe?(se=W[K*N+oe]||(W[K*N+oe]={source:null,target:null}),se.source={index:K,startAngle:Z,endAngle:Z+=P[K*N+oe]*q,value:P[K*N+oe]}):(se=W[oe*N+K]||(W[oe*N+K]={source:null,target:null}),se.target={index:K,startAngle:Z,endAngle:Z+=P[K*N+oe]*q,value:P[K*N+oe]},K===oe&&(se.source=se.target)),se.source&&se.target&&se.source.value<se.target.value){const ue=se.source;se.source=se.target,se.target=ue}}H[K]={index:K,startAngle:te,endAngle:Z,value:F[K]}}Z+=ne}}return(W=Object.values(W)).groups=H,C?W.sort(C):W}return R.padAngle=function(P){return arguments.length?(g=rp(0,P),R):g},R.sortGroups=function(P){return arguments.length?(v=P,R):v},R.sortSubgroups=function(P){return arguments.length?(w=P,R):w},R.sortChords=function(P){return arguments.length?(null==P?C=null:(C=function Wg(a){return function(d,g){return a(d.source.value+d.target.value,g.source.value+g.target.value)}}(P))._=P,R):C&&C._},R}const Xh=Math.PI,sp=2*Xh,op=1e-6,W1=sp-op;function Zv(a){this._+=a[0];for(let d=1,g=a.length;d<g;++d)this._+=arguments[d]+a[d]}class c0{constructor(d){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==d?Zv:function KM(a){let d=Math.floor(a);if(!(d>=0))throw new Error(`invalid digits: ${a}`);if(d>15)return Zv;const g=10**d;return function(v){this._+=v[0];for(let w=1,C=v.length;w<C;++w)this._+=Math.round(arguments[w]*g)/g+v[w]}}(d)}moveTo(d,g){this._append`M${this._x0=this._x1=+d},${this._y0=this._y1=+g}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(d,g){this._append`L${this._x1=+d},${this._y1=+g}`}quadraticCurveTo(d,g,v,w){this._append`Q${+d},${+g},${this._x1=+v},${this._y1=+w}`}bezierCurveTo(d,g,v,w,C,R){this._append`C${+d},${+g},${+v},${+w},${this._x1=+C},${this._y1=+R}`}arcTo(d,g,v,w,C){if(d=+d,g=+g,v=+v,w=+w,(C=+C)<0)throw new Error(`negative radius: ${C}`);let R=this._x1,P=this._y1,N=v-d,F=w-g,V=R-d,W=P-g,H=V*V+W*W;if(null===this._x1)this._append`M${this._x1=d},${this._y1=g}`;else if(H>op)if(Math.abs(W*N-F*V)>op&&C){let q=v-R,ne=w-P,Z=N*N+F*F,K=q*q+ne*ne,te=Math.sqrt(Z),ae=Math.sqrt(H),oe=C*Math.tan((Xh-Math.acos((Z+H-K)/(2*te*ae)))/2),se=oe/ae,ue=oe/te;Math.abs(se-1)>op&&this._append`L${d+se*V},${g+se*W}`,this._append`A${C},${C},0,0,${+(W*q>V*ne)},${this._x1=d+ue*N},${this._y1=g+ue*F}`}else this._append`L${this._x1=d},${this._y1=g}`}arc(d,g,v,w,C,R){if(d=+d,g=+g,R=!!R,(v=+v)<0)throw new Error(`negative radius: ${v}`);let P=v*Math.cos(w),N=v*Math.sin(w),F=d+P,V=g+N,W=1^R,H=R?w-C:C-w;null===this._x1?this._append`M${F},${V}`:(Math.abs(this._x1-F)>op||Math.abs(this._y1-V)>op)&&this._append`L${F},${V}`,v&&(H<0&&(H=H%sp+sp),H>W1?this._append`A${v},${v},0,1,${W},${d-P},${g-N}A${v},${v},0,1,${W},${this._x1=F},${this._y1=V}`:H>op&&this._append`A${v},${v},0,${+(H>=Xh)},${W},${this._x1=d+v*Math.cos(C)},${this._y1=g+v*Math.sin(C)}`)}rect(d,g,v,w){this._append`M${this._x0=this._x1=+d},${this._y0=this._y1=+g}h${v=+v}v${+w}h${-v}Z`}toString(){return this._}}function Zb(){return new c0}function AE(a=3){return new c0(+a)}Zb.prototype=c0.prototype;var DE=Array.prototype.slice;function Yh(a){return function(){return a}}function j1(a){return a.source}function RE(a){return a.target}function JM(a){return a.radius}function xA(a){return a.startAngle}function $1(a){return a.endAngle}function MA(){return 0}function IE(){return 10}function q1(a){var d=j1,g=RE,v=JM,w=JM,C=xA,R=$1,P=MA,N=null;function F(){var V,W=d.apply(this,arguments),H=g.apply(this,arguments),q=P.apply(this,arguments)/2,ne=DE.call(arguments),Z=+v.apply(this,(ne[0]=W,ne)),K=C.apply(this,ne)-Wl,te=R.apply(this,ne)-Wl,ae=+w.apply(this,(ne[0]=H,ne)),oe=C.apply(this,ne)-Wl,se=R.apply(this,ne)-Wl;if(N||(N=V=Zb()),q>Xv&&(Xb(te-K)>2*q+Xv?te>K?(K+=q,te-=q):(K-=q,te+=q):K=te=(K+te)/2,Xb(se-oe)>2*q+Xv?se>oe?(oe+=q,se-=q):(oe-=q,se+=q):oe=se=(oe+se)/2),N.moveTo(Z*qh(K),Z*Kd(K)),N.arc(0,0,Z,K,te),K!==oe||te!==se)if(a){var _e=ae-+a.apply(this,arguments),Ce=(oe+se)/2;N.quadraticCurveTo(0,0,_e*qh(oe),_e*Kd(oe)),N.lineTo(ae*qh(Ce),ae*Kd(Ce)),N.lineTo(_e*qh(se),_e*Kd(se))}else N.quadraticCurveTo(0,0,ae*qh(oe),ae*Kd(oe)),N.arc(0,0,ae,oe,se);if(N.quadraticCurveTo(0,0,Z*qh(K),Z*Kd(K)),N.closePath(),V)return N=null,V+""||null}return a&&(F.headRadius=function(V){return arguments.length?(a="function"==typeof V?V:Yh(+V),F):a}),F.radius=function(V){return arguments.length?(v=w="function"==typeof V?V:Yh(+V),F):v},F.sourceRadius=function(V){return arguments.length?(v="function"==typeof V?V:Yh(+V),F):v},F.targetRadius=function(V){return arguments.length?(w="function"==typeof V?V:Yh(+V),F):w},F.startAngle=function(V){return arguments.length?(C="function"==typeof V?V:Yh(+V),F):C},F.endAngle=function(V){return arguments.length?(R="function"==typeof V?V:Yh(+V),F):R},F.padAngle=function(V){return arguments.length?(P="function"==typeof V?V:Yh(+V),F):P},F.source=function(V){return arguments.length?(d=V,F):d},F.target=function(V){return arguments.length?(g=V,F):g},F.context=function(V){return arguments.length?(N=V??null,F):N},F}function QM(){return q1()}function wA(){return q1(IE)}const PE=Math.PI/180,Kb=180/Math.PI,kE=.96422,LE=1,OE=.82521,FE=4/29,l0=6/29,tw=3*l0*l0,nw=l0*l0*l0;function iw(a){if(a instanceof lo)return new lo(a.l,a.a,a.b,a.opacity);if(a instanceof un)return On(a);a instanceof ea||(a=Og(a));var C,R,d=Jb(a.r),g=Jb(a.g),v=Jb(a.b),w=rw((.2225045*d+.7168786*g+.0606169*v)/LE);return d===g&&g===v?C=R=w:(C=rw((.4360747*d+.3850649*g+.1430804*v)/kE),R=rw((.0139322*d+.0971045*g+.7141733*v)/OE)),new lo(116*w-16,500*(C-w),200*(w-R),a.opacity)}function X1(a,d){return new lo(a,0,0,d??1)}function Kv(a,d,g,v){return 1===arguments.length?iw(a):new lo(a,d,g,v??1)}function lo(a,d,g,v){this.l=+a,this.a=+d,this.b=+g,this.opacity=+v}function rw(a){return a>nw?Math.pow(a,1/3):a/tw+FE}function sw(a){return a>l0?a*a*a:tw*(a-FE)}function ow(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Jb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Qb(a){if(a instanceof un)return new un(a.h,a.c,a.l,a.opacity);if(a instanceof lo||(a=iw(a)),0===a.a&&0===a.b)return new un(NaN,0<a.l&&a.l<100?0:NaN,a.l,a.opacity);var d=Math.atan2(a.b,a.a)*Kb;return new un(d<0?d+360:d,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function NE(a,d,g,v){return 1===arguments.length?Qb(a):new un(g,d,a,v??1)}function Ki(a,d,g,v){return 1===arguments.length?Qb(a):new un(a,d,g,v??1)}function un(a,d,g,v){this.h=+a,this.c=+d,this.l=+g,this.opacity=+v}function On(a){if(isNaN(a.h))return new lo(a.l,0,0,a.opacity);var d=a.h*PE;return new lo(a.l,Math.cos(d)*a.c,Math.sin(d)*a.c,a.opacity)}Gd(lo,Kv,Ll(ha,{brighter(a){return new lo(this.l+18*(a??1),this.a,this.b,this.opacity)},darker(a){return new lo(this.l-18*(a??1),this.a,this.b,this.opacity)},rgb(){var a=(this.l+16)/116,d=isNaN(this.a)?a:a+this.a/500,g=isNaN(this.b)?a:a-this.b/200;return new ea(ow(3.1338561*(d=kE*sw(d))-1.6168667*(a=LE*sw(a))-.4906146*(g=OE*sw(g))),ow(-.9787684*d+1.9161415*a+.033454*g),ow(.0719453*d-.2289914*a+1.4052427*g),this.opacity)}})),Gd(un,Ki,Ll(ha,{brighter(a){return new un(this.h,this.c,this.l+18*(a??1),this.opacity)},darker(a){return new un(this.h,this.c,this.l-18*(a??1),this.opacity)},rgb(){return On(this).rgb()}}));var km=1.78277,Ua=-.29227,Lm=-.90649,Om=1.97294,u0=Om*Lm,pa=Om*km,Jd=km*Ua- -.14861*Lm;function aa(a,d,g,v){return 1===arguments.length?function Qd(a){if(a instanceof kc)return new kc(a.h,a.s,a.l,a.opacity);a instanceof ea||(a=Og(a));var g=a.g/255,v=a.b/255,w=(Jd*v+u0*(a.r/255)-pa*g)/(Jd+u0-pa),C=v-w,R=(Om*(g-w)-Ua*C)/Lm,P=Math.sqrt(R*R+C*C)/(Om*w*(1-w)),N=P?Math.atan2(R,C)*Kb-120:NaN;return new kc(N<0?N+360:N,P,w,a.opacity)}(a):new kc(a,d,g,v??1)}function kc(a,d,g,v){this.h=+a,this.s=+d,this.l=+g,this.opacity=+v}Gd(kc,aa,Ll(ha,{brighter(a){return a=null==a?Sr:Math.pow(Sr,a),new kc(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new kc(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=isNaN(this.h)?0:(this.h+120)*PE,d=+this.l,g=isNaN(this.s)?0:this.s*d*(1-d),v=Math.cos(a),w=Math.sin(a);return new ea(255*(d+g*(-.14861*v+km*w)),255*(d+g*(Ua*v+Lm*w)),255*(d+g*(Om*v)),this.opacity)}}));var jg=Array.prototype.slice;function $g(a,d){return a-d}const Do=a=>()=>a;function ap(a,d){for(var w,g=-1,v=d.length;++g<v;)if(w=d0(a,d[g]))return w;return 0}function d0(a,d){for(var g=d[0],v=d[1],w=-1,C=0,R=a.length,P=R-1;C<R;P=C++){var N=a[C],F=N[0],V=N[1],W=a[P],H=W[0],q=W[1];if(h0(N,W,d))return 0;V>v!=q>v&&g<(H-F)*(v-V)/(q-V)+F&&(w=-w)}return w}function h0(a,d,g){var v;return function f0(a,d,g){return(d[0]-a[0])*(g[1]-a[1])==(g[0]-a[0])*(d[1]-a[1])}(a,d,g)&&function qg(a,d,g){return a<=d&&d<=g||g<=d&&d<=a}(a[v=+(a[0]===d[0])],g[v],d[v])}function Zh(){}var dd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Xg(){var a=1,d=1,g=dm,v=N;function w(F){var V=g(F);if(Array.isArray(V))V=V.slice().sort($g);else{const W=Mo(F,Fm);for(V=gr(...Ff(W[0],W[1],V),V);V[V.length-1]>=W[1];)V.pop();for(;V[1]<W[0];)V.shift()}return V.map(W=>C(F,W))}function C(F,V){const W=null==V?NaN:+V;if(isNaN(W))throw new Error(`invalid value: ${V}`);var H=[],q=[];return function R(F,V,W){var ne,Z,K,te,ae,oe,H=new Array,q=new Array;for(ne=Z=-1,te=yu(F[0],V),dd[te<<1].forEach(se);++ne<a-1;)K=te,te=yu(F[ne+1],V),dd[K|te<<1].forEach(se);for(dd[te<<0].forEach(se);++Z<d-1;){for(ne=-1,te=yu(F[Z*a+a],V),ae=yu(F[Z*a],V),dd[te<<1|ae<<2].forEach(se);++ne<a-1;)K=te,te=yu(F[Z*a+a+ne+1],V),oe=ae,ae=yu(F[Z*a+ne+1],V),dd[K|te<<1|ae<<2|oe<<3].forEach(se);dd[te|ae<<3].forEach(se)}for(ne=-1,dd[(ae=F[Z*a]>=V)<<2].forEach(se);++ne<a-1;)oe=ae,ae=yu(F[Z*a+ne+1],V),dd[ae<<2|oe<<3].forEach(se);function se(ue){var ke,Oe,_e=[ue[0][0]+ne,ue[0][1]+Z],Ce=[ue[1][0]+ne,ue[1][1]+Z],ye=P(_e),Ke=P(Ce);(ke=q[ye])?(Oe=H[Ke])?(delete q[ke.end],delete H[Oe.start],ke===Oe?(ke.ring.push(Ce),W(ke.ring)):H[ke.start]=q[Oe.end]={start:ke.start,end:Oe.end,ring:ke.ring.concat(Oe.ring)}):(delete q[ke.end],ke.ring.push(Ce),q[ke.end=Ke]=ke):(ke=H[Ke])?(Oe=q[ye])?(delete H[ke.start],delete q[Oe.end],ke===Oe?(ke.ring.push(Ce),W(ke.ring)):H[Oe.start]=q[ke.end]={start:Oe.start,end:ke.end,ring:Oe.ring.concat(ke.ring)}):(delete H[ke.start],ke.ring.unshift(_e),H[ke.start=ye]=ke):H[ye]=q[Ke]={start:ye,end:Ke,ring:[_e,Ce]}}dd[ae<<3].forEach(se)}(F,W,function(ne){v(ne,F,W),function eh(a){for(var d=0,g=a.length,v=a[g-1][1]*a[0][0]-a[g-1][0]*a[0][1];++d<g;)v+=a[d-1][1]*a[d][0]-a[d-1][0]*a[d][1];return v}(ne)>0?H.push([ne]):q.push(ne)}),q.forEach(function(ne){for(var te,Z=0,K=H.length;Z<K;++Z)if(-1!==ap((te=H[Z])[0],ne))return void te.push(ne)}),{type:"MultiPolygon",value:V,coordinates:H}}function P(F){return 2*F[0]+F[1]*(a+1)*4}function N(F,V,W){F.forEach(function(H){var q=H[0],ne=H[1],Z=0|q,K=0|ne,te=p0(V[K*a+Z]);q>0&&q<a&&Z===q&&(H[0]=cp(q,p0(V[K*a+Z-1]),te,W)),ne>0&&ne<d&&K===ne&&(H[1]=cp(ne,p0(V[(K-1)*a+Z]),te,W))})}return w.contour=C,w.size=function(F){if(!arguments.length)return[a,d];var V=Math.floor(F[0]),W=Math.floor(F[1]);if(!(V>=0&&W>=0))throw new Error("invalid size");return a=V,d=W,w},w.thresholds=function(F){return arguments.length?(g="function"==typeof F?F:Array.isArray(F)?Do(jg.call(F)):Do(F),w):g},w.smooth=function(F){return arguments.length?(v=F?N:Zh,w):v===N},w}function Fm(a){return isFinite(a)?a:NaN}function yu(a,d){return null!=a&&+a>=d}function p0(a){return null==a||isNaN(a=+a)?-1/0:a}function cp(a,d,g,v){const w=v-d,C=g-d,R=isFinite(w)||isFinite(C)?w/C:Math.sign(w)/Math.sign(C);return isNaN(R)?a:a+R-.5}function Jv(a){return a[0]}function ex(a){return a[1]}function aw(){return 1}function Qv(){var a=Jv,d=ex,g=aw,v=960,w=500,C=20,R=2,P=3*C,N=v+2*P>>R,F=w+2*P>>R,V=Do(20);function W(ae){var oe=new Float32Array(N*F),se=Math.pow(2,-R),ue=-1;for(const it of ae){var _e=(a(it,++ue,ae)+P)*se,Ce=(d(it,ue,ae)+P)*se,ye=+g(it,ue,ae);if(ye&&_e>=0&&_e<N&&Ce>=0&&Ce<F){var Ke=Math.floor(_e),ke=Math.floor(Ce),Oe=_e-Ke-.5,ft=Ce-ke-.5;oe[Ke+ke*N]+=(1-Oe)*(1-ft)*ye,oe[Ke+1+ke*N]+=Oe*(1-ft)*ye,oe[Ke+1+(ke+1)*N]+=Oe*ft*ye,oe[Ke+(ke+1)*N]+=(1-Oe)*ft*ye}}return ct({data:oe,width:N,height:F},C*se),oe}function H(ae){var oe=W(ae),se=V(oe),ue=Math.pow(2,2*R);return Array.isArray(se)||(se=gr(Number.MIN_VALUE,bs(oe)/ue,se)),Xg().size([N,F]).thresholds(se.map(_e=>_e*ue))(oe).map((_e,Ce)=>(_e.value=+se[Ce],q(_e)))}function q(ae){return ae.coordinates.forEach(ne),ae}function ne(ae){ae.forEach(Z)}function Z(ae){ae.forEach(K)}function K(ae){ae[0]=ae[0]*Math.pow(2,R)-P,ae[1]=ae[1]*Math.pow(2,R)-P}function te(){return N=v+2*(P=3*C)>>R,F=w+2*P>>R,H}return H.contours=function(ae){var oe=W(ae),se=Xg().size([N,F]),ue=Math.pow(2,2*R),_e=Ce=>{var ye=q(se.contour(oe,(Ce=+Ce)*ue));return ye.value=Ce,ye};return Object.defineProperty(_e,"max",{get:()=>bs(oe)/ue}),_e},H.x=function(ae){return arguments.length?(a="function"==typeof ae?ae:Do(+ae),H):a},H.y=function(ae){return arguments.length?(d="function"==typeof ae?ae:Do(+ae),H):d},H.weight=function(ae){return arguments.length?(g="function"==typeof ae?ae:Do(+ae),H):g},H.size=function(ae){if(!arguments.length)return[v,w];var oe=+ae[0],se=+ae[1];if(!(oe>=0&&se>=0))throw new Error("invalid size");return v=oe,w=se,te()},H.cellSize=function(ae){if(!arguments.length)return 1<<R;if(!((ae=+ae)>=1))throw new Error("invalid cell size");return R=Math.floor(Math.log(ae)/Math.LN2),te()},H.thresholds=function(ae){return arguments.length?(V="function"==typeof ae?ae:Array.isArray(ae)?Do(jg.call(ae)):Do(ae),H):V},H.bandwidth=function(ae){if(!arguments.length)return Math.sqrt(C*(C+1));if(!((ae=+ae)>=0))throw new Error("invalid bandwidth");return C=(Math.sqrt(4*ae*ae+1)-1)/2,te()},H}const Kr=11102230246251565e-32,zo=134217729,tx=(3+8*Kr)*Kr;function lp(a,d,g,v,w){let C,R,P,N,F=d[0],V=v[0],W=0,H=0;V>F==V>-F?(C=F,F=d[++W]):(C=V,V=v[++H]);let q=0;if(W<a&&H<g)for(V>F==V>-F?(R=F+C,P=C-(R-F),F=d[++W]):(R=V+C,P=C-(R-V),V=v[++H]),C=R,0!==P&&(w[q++]=P);W<a&&H<g;)V>F==V>-F?(R=C+F,N=R-C,P=C-(R-N)+(F-N),F=d[++W]):(R=C+V,N=R-C,P=C-(R-N)+(V-N),V=v[++H]),C=R,0!==P&&(w[q++]=P);for(;W<a;)R=C+F,N=R-C,P=C-(R-N)+(F-N),F=d[++W],C=R,0!==P&&(w[q++]=P);for(;H<g;)R=C+V,N=R-C,P=C-(R-N)+(V-N),V=v[++H],C=R,0!==P&&(w[q++]=P);return(0!==C||0===q)&&(w[q++]=C),q}function Cn(a){return new Float64Array(a)}const Zg=(3+16*Kr)*Kr,ty=(2+12*Kr)*Kr,up=(9+64*Kr)*Kr*Kr,Jr=Cn(4),ir=Cn(8),cs=Cn(12),Nm=Cn(16),Ba=Cn(4);function ny(a,d,g,v,w,C){const R=(d-C)*(g-w),P=(a-w)*(v-C),N=R-P,F=Math.abs(R+P);return Math.abs(N)>=Zg*F?N:-function cw(a,d,g,v,w,C,R){let P,N,F,V,W,H,q,ne,Z,K,te,ae,oe,se,ue,_e,Ce,ye;const Ke=a-w,ke=g-w,Oe=d-C,ft=v-C;se=Ke*ft,H=zo*Ke,q=H-(H-Ke),ne=Ke-q,H=zo*ft,Z=H-(H-ft),K=ft-Z,ue=ne*K-(se-q*Z-ne*Z-q*K),_e=Oe*ke,H=zo*Oe,q=H-(H-Oe),ne=Oe-q,H=zo*ke,Z=H-(H-ke),K=ke-Z,Ce=ne*K-(_e-q*Z-ne*Z-q*K),te=ue-Ce,W=ue-te,Jr[0]=ue-(te+W)+(W-Ce),ae=se+te,W=ae-se,oe=se-(ae-W)+(te-W),te=oe-_e,W=oe-te,Jr[1]=oe-(te+W)+(W-_e),ye=ae+te,W=ye-ae,Jr[2]=ae-(ye-W)+(te-W),Jr[3]=ye;let it=function Yg(a,d){let g=d[0];for(let v=1;v<a;v++)g+=d[v];return g}(4,Jr),le=ty*R;if(it>=le||-it>=le||(W=a-Ke,P=a-(Ke+W)+(W-w),W=g-ke,F=g-(ke+W)+(W-w),W=d-Oe,N=d-(Oe+W)+(W-C),W=v-ft,V=v-(ft+W)+(W-C),0===P&&0===N&&0===F&&0===V)||(le=up*R+tx*Math.abs(it),it+=Ke*V+ft*P-(Oe*F+ke*N),it>=le||-it>=le))return it;se=P*ft,H=zo*P,q=H-(H-P),ne=P-q,H=zo*ft,Z=H-(H-ft),K=ft-Z,ue=ne*K-(se-q*Z-ne*Z-q*K),_e=N*ke,H=zo*N,q=H-(H-N),ne=N-q,H=zo*ke,Z=H-(H-ke),K=ke-Z,Ce=ne*K-(_e-q*Z-ne*Z-q*K),te=ue-Ce,W=ue-te,Ba[0]=ue-(te+W)+(W-Ce),ae=se+te,W=ae-se,oe=se-(ae-W)+(te-W),te=oe-_e,W=oe-te,Ba[1]=oe-(te+W)+(W-_e),ye=ae+te,W=ye-ae,Ba[2]=ae-(ye-W)+(te-W),Ba[3]=ye;const me=lp(4,Jr,4,Ba,ir);se=Ke*V,H=zo*Ke,q=H-(H-Ke),ne=Ke-q,H=zo*V,Z=H-(H-V),K=V-Z,ue=ne*K-(se-q*Z-ne*Z-q*K),_e=Oe*F,H=zo*Oe,q=H-(H-Oe),ne=Oe-q,H=zo*F,Z=H-(H-F),K=F-Z,Ce=ne*K-(_e-q*Z-ne*Z-q*K),te=ue-Ce,W=ue-te,Ba[0]=ue-(te+W)+(W-Ce),ae=se+te,W=ae-se,oe=se-(ae-W)+(te-W),te=oe-_e,W=oe-te,Ba[1]=oe-(te+W)+(W-_e),ye=ae+te,W=ye-ae,Ba[2]=ae-(ye-W)+(te-W),Ba[3]=ye;const Me=lp(me,ir,4,Ba,cs);se=P*V,H=zo*P,q=H-(H-P),ne=P-q,H=zo*V,Z=H-(H-V),K=V-Z,ue=ne*K-(se-q*Z-ne*Z-q*K),_e=N*F,H=zo*N,q=H-(H-N),ne=N-q,H=zo*F,Z=H-(H-F),K=F-Z,Ce=ne*K-(_e-q*Z-ne*Z-q*K),te=ue-Ce,W=ue-te,Ba[0]=ue-(te+W)+(W-Ce),ae=se+te,W=ae-se,oe=se-(ae-W)+(te-W),te=oe-_e,W=oe-te,Ba[1]=oe-(te+W)+(W-_e),ye=ae+te,W=ye-ae,Ba[2]=ae-(ye-W)+(te-W),Ba[3]=ye;const We=lp(Me,cs,4,Ba,Nm);return Nm[We-1]}(a,d,g,v,w,C,F)}Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(8),Cn(8),Cn(8),Cn(4),Cn(8),Cn(8),Cn(8),Cn(12),Cn(192),Cn(192),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(8),Cn(8),Cn(8),Cn(8),Cn(8),Cn(8),Cn(8),Cn(8),Cn(8),Cn(4),Cn(4),Cn(4),Cn(8),Cn(16),Cn(16),Cn(16),Cn(32),Cn(32),Cn(48),Cn(64),Cn(1152),Cn(1152),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(4),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(24),Cn(1152),Cn(1152),Cn(1152),Cn(1152),Cn(1152),Cn(2304),Cn(2304),Cn(3456),Cn(5760),Cn(8),Cn(8),Cn(8),Cn(16),Cn(24),Cn(48),Cn(48),Cn(96),Cn(192),Cn(384),Cn(384),Cn(384),Cn(768),Cn(96),Cn(96),Cn(96),Cn(1152);const o_=Math.pow(2,-52),oh=new Uint32Array(512);class Gm{static from(d,g=wp,v=Li){const w=d.length,C=new Float64Array(2*w);for(let R=0;R<w;R++){const P=d[R];C[2*R]=g(P),C[2*R+1]=v(P)}return new Gm(C)}constructor(d){const g=d.length>>1;if(g>0&&"number"!=typeof d[0])throw new Error("Expected coords to contain numbers.");this.coords=d;const v=Math.max(2*g-5,0);this._triangles=new Uint32Array(3*v),this._halfedges=new Int32Array(3*v),this._hashSize=Math.ceil(Math.sqrt(g)),this._hullPrev=new Uint32Array(g),this._hullNext=new Uint32Array(g),this._hullTri=new Uint32Array(g),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(g),this._dists=new Float64Array(g),this.update()}update(){const{coords:d,_hullPrev:g,_hullNext:v,_hullTri:w,_hullHash:C}=this,R=d.length>>1;let P=1/0,N=1/0,F=-1/0,V=-1/0;for(let ke=0;ke<R;ke++){const Oe=d[2*ke],ft=d[2*ke+1];Oe<P&&(P=Oe),ft<N&&(N=ft),Oe>F&&(F=Oe),ft>V&&(V=ft),this._ids[ke]=ke}const W=(P+F)/2,H=(N+V)/2;let ne,Z,K,q=1/0;for(let ke=0;ke<R;ke++){const Oe=ah(W,H,d[2*ke],d[2*ke+1]);Oe<q&&(ne=ke,q=Oe)}const te=d[2*ne],ae=d[2*ne+1];q=1/0;for(let ke=0;ke<R;ke++){if(ke===ne)continue;const Oe=ah(te,ae,d[2*ke],d[2*ke+1]);Oe<q&&Oe>0&&(Z=ke,q=Oe)}let oe=d[2*Z],se=d[2*Z+1],ue=1/0;for(let ke=0;ke<R;ke++){if(ke===ne||ke===Z)continue;const Oe=fx(te,ae,oe,se,d[2*ke],d[2*ke+1]);Oe<ue&&(K=ke,ue=Oe)}let _e=d[2*K],Ce=d[2*K+1];if(ue===1/0){for(let ft=0;ft<R;ft++)this._dists[ft]=d[2*ft]-d[0]||d[2*ft+1]-d[1];Nc(this._ids,this._dists,0,R-1);const ke=new Uint32Array(R);let Oe=0;for(let ft=0,it=-1/0;ft<R;ft++){const le=this._ids[ft];this._dists[le]>it&&(ke[Oe++]=le,it=this._dists[le])}return this.hull=ke.subarray(0,Oe),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ny(te,ae,oe,se,_e,Ce)<0){const ke=Z,Oe=oe,ft=se;Z=K,oe=_e,se=Ce,K=ke,_e=Oe,Ce=ft}const ye=function px(a,d,g,v,w,C){const R=g-a,P=v-d,N=w-a,F=C-d,V=R*R+P*P,W=N*N+F*F,H=.5/(R*F-P*N);return{x:a+(F*V-P*W)*H,y:d+(R*W-N*V)*H}}(te,ae,oe,se,_e,Ce);this._cx=ye.x,this._cy=ye.y;for(let ke=0;ke<R;ke++)this._dists[ke]=ah(d[2*ke],d[2*ke+1],ye.x,ye.y);Nc(this._ids,this._dists,0,R-1),this._hullStart=ne;let Ke=3;v[ne]=g[K]=Z,v[Z]=g[ne]=K,v[K]=g[Z]=ne,w[ne]=0,w[Z]=1,w[K]=2,C.fill(-1),C[this._hashKey(te,ae)]=ne,C[this._hashKey(oe,se)]=Z,C[this._hashKey(_e,Ce)]=K,this.trianglesLen=0,this._addTriangle(ne,Z,K,-1,-1,-1);for(let Oe,ft,ke=0;ke<this._ids.length;ke++){const it=this._ids[ke],le=d[2*it],me=d[2*it+1];if(ke>0&&Math.abs(le-Oe)<=o_&&Math.abs(me-ft)<=o_||(Oe=le,ft=me,it===ne||it===Z||it===K))continue;let Me=0;for(let rt=0,gt=this._hashKey(le,me);rt<this._hashSize&&(Me=C[(gt+rt)%this._hashSize],-1===Me||Me===v[Me]);rt++);Me=g[Me];let Se,We=Me;for(;Se=v[We],ny(le,me,d[2*We],d[2*We+1],d[2*Se],d[2*Se+1])>=0;)if(We=Se,We===Me){We=-1;break}if(-1===We)continue;let Ge=this._addTriangle(We,it,v[We],-1,-1,w[We]);w[it]=this._legalize(Ge+2),w[We]=Ge,Ke++;let De=v[We];for(;Se=v[De],ny(le,me,d[2*De],d[2*De+1],d[2*Se],d[2*Se+1])<0;)Ge=this._addTriangle(De,it,Se,w[it],-1,w[De]),w[it]=this._legalize(Ge+2),v[De]=De,Ke--,De=Se;if(We===Me)for(;Se=g[We],ny(le,me,d[2*Se],d[2*Se+1],d[2*We],d[2*We+1])<0;)Ge=this._addTriangle(Se,it,We,-1,w[We],w[Se]),this._legalize(Ge+2),w[Se]=Ge,v[We]=We,Ke--,We=Se;this._hullStart=g[it]=We,v[We]=g[De]=it,v[it]=De,C[this._hashKey(le,me)]=it,C[this._hashKey(d[2*We],d[2*We+1])]=We}this.hull=new Uint32Array(Ke);for(let ke=0,Oe=this._hullStart;ke<Ke;ke++)this.hull[ke]=Oe,Oe=v[Oe];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(d,g){return Math.floor(function a_(a,d){const g=a/(Math.abs(a)+Math.abs(d));return(d>0?3-g:1+g)/4}(d-this._cx,g-this._cy)*this._hashSize)%this._hashSize}_legalize(d){const{_triangles:g,_halfedges:v,coords:w}=this;let C=0,R=0;for(;;){const P=v[d],N=d-d%3;if(R=N+(d+2)%3,-1===P){if(0===C)break;d=oh[--C];continue}const F=P-P%3,W=F+(P+2)%3,H=g[R],q=g[d],ne=g[N+(d+1)%3],Z=g[W];if(Wm(w[2*H],w[2*H+1],w[2*q],w[2*q+1],w[2*ne],w[2*ne+1],w[2*Z],w[2*Z+1])){g[d]=Z,g[P]=H;const te=v[W];if(-1===te){let oe=this._hullStart;do{if(this._hullTri[oe]===W){this._hullTri[oe]=d;break}oe=this._hullPrev[oe]}while(oe!==this._hullStart)}this._link(d,te),this._link(P,v[R]),this._link(R,W),C<oh.length&&(oh[C++]=F+(P+1)%3)}else{if(0===C)break;d=oh[--C]}}return R}_link(d,g){this._halfedges[d]=g,-1!==g&&(this._halfedges[g]=d)}_addTriangle(d,g,v,w,C,R){const P=this.trianglesLen;return this._triangles[P]=d,this._triangles[P+1]=g,this._triangles[P+2]=v,this._link(P,w),this._link(P+1,C),this._link(P+2,R),this.trianglesLen+=3,P}}function ah(a,d,g,v){const w=a-g,C=d-v;return w*w+C*C}function Wm(a,d,g,v,w,C,R,P){const N=a-R,F=d-P,V=g-R,W=v-P,H=w-R,q=C-P,Z=V*V+W*W,K=H*H+q*q;return N*(W*K-Z*q)-F*(V*K-Z*H)+(N*N+F*F)*(V*q-W*H)<0}function fx(a,d,g,v,w,C){const R=g-a,P=v-d,N=w-a,F=C-d,V=R*R+P*P,W=N*N+F*F,H=.5/(R*F-P*N),q=(F*V-P*W)*H,ne=(R*W-N*V)*H;return q*q+ne*ne}function Nc(a,d,g,v){if(v-g<=20)for(let w=g+1;w<=v;w++){const C=a[w],R=d[C];let P=w-1;for(;P>=g&&d[a[P]]>R;)a[P+1]=a[P--];a[P+1]=C}else{let C=g+1,R=v;Mp(a,g+v>>1,C),d[a[g]]>d[a[v]]&&Mp(a,g,v),d[a[C]]>d[a[v]]&&Mp(a,C,v),d[a[g]]>d[a[C]]&&Mp(a,g,C);const P=a[C],N=d[P];for(;;){do{C++}while(d[a[C]]<N);do{R--}while(d[a[R]]>N);if(R<C)break;Mp(a,C,R)}a[g+1]=a[R],a[R]=P,v-C+1>=R-g?(Nc(a,d,C,v),Nc(a,d,g,R-1)):(Nc(a,d,g,R-1),Nc(a,d,C,v))}}function Mp(a,d,g){const v=a[d];a[d]=a[g],a[g]=v}function wp(a){return a[0]}function Li(a){return a[1]}class _a{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(d,g){this._+=`M${this._x0=this._x1=+d},${this._y0=this._y1=+g}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(d,g){this._+=`L${this._x1=+d},${this._y1=+g}`}arc(d,g,v){const w=(d=+d)+(v=+v),C=g=+g;if(v<0)throw new Error("negative radius");null===this._x1?this._+=`M${w},${C}`:(Math.abs(this._x1-w)>1e-6||Math.abs(this._y1-C)>1e-6)&&(this._+="L"+w+","+C),v&&(this._+=`A${v},${v},0,1,1,${d-v},${g}A${v},${v},0,1,1,${this._x1=w},${this._y1=C}`)}rect(d,g,v,w){this._+=`M${this._x0=this._x1=+d},${this._y0=this._y1=+g}h${+v}v${+w}h${-v}Z`}value(){return this._||null}}class ml{constructor(){this._=[]}moveTo(d,g){this._.push([d,g])}closePath(){this._.push(this._[0].slice())}lineTo(d,g){this._.push([d,g])}value(){return this._.length?this._:null}}class sf{constructor(d,[g,v,w,C]=[0,0,960,500]){if(!((w=+w)>=(g=+g)&&(C=+C)>=(v=+v)))throw new Error("invalid bounds");this.delaunay=d,this._circumcenters=new Float64Array(2*d.points.length),this.vectors=new Float64Array(2*d.points.length),this.xmax=w,this.xmin=g,this.ymax=C,this.ymin=v,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:d,hull:g,triangles:v},vectors:w}=this;let C,R;const P=this.circumcenters=this._circumcenters.subarray(0,v.length/3*2);for(let ae,oe,Z=0,K=0,te=v.length;Z<te;Z+=3,K+=2){const se=2*v[Z],ue=2*v[Z+1],_e=2*v[Z+2],Ce=d[se],ye=d[se+1],Oe=d[_e],ft=d[_e+1],it=d[ue]-Ce,le=d[ue+1]-ye,me=Oe-Ce,Me=ft-ye,We=2*(it*Me-le*me);if(Math.abs(We)<1e-9){if(void 0===C){C=R=0;for(const Ge of g)C+=d[2*Ge],R+=d[2*Ge+1];C/=g.length,R/=g.length}const Se=1e9*Math.sign((C-Ce)*Me-(R-ye)*me);ae=(Ce+Oe)/2-Se*Me,oe=(ye+ft)/2+Se*me}else{const Se=1/We,Ge=it*it+le*le,De=me*me+Me*Me;ae=Ce+(Me*Ge-le*De)*Se,oe=ye+(it*De-me*Ge)*Se}P[K]=ae,P[K+1]=oe}let F,W,q,N=g[g.length-1],V=4*N,H=d[2*N],ne=d[2*N+1];w.fill(0);for(let Z=0;Z<g.length;++Z)N=g[Z],F=V,W=H,q=ne,V=4*N,H=d[2*N],ne=d[2*N+1],w[F+2]=w[V]=q-ne,w[F+3]=w[V+1]=H-W}render(d){const g=null==d?d=new _a:void 0,{delaunay:{halfedges:v,inedges:w,hull:C},circumcenters:R,vectors:P}=this;if(C.length<=1)return null;for(let V=0,W=v.length;V<W;++V){const H=v[V];if(H<V)continue;const q=2*Math.floor(V/3),ne=2*Math.floor(H/3);this._renderSegment(R[q],R[q+1],R[ne],R[ne+1],d)}let N,F=C[C.length-1];for(let V=0;V<C.length;++V){N=F,F=C[V];const W=2*Math.floor(w[F]/3),H=R[W],q=R[W+1],ne=4*N,Z=this._project(H,q,P[ne+2],P[ne+3]);Z&&this._renderSegment(H,q,Z[0],Z[1],d)}return g&&g.value()}renderBounds(d){const g=null==d?d=new _a:void 0;return d.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),g&&g.value()}renderCell(d,g){const v=null==g?g=new _a:void 0,w=this._clip(d);if(null===w||!w.length)return;g.moveTo(w[0],w[1]);let C=w.length;for(;w[0]===w[C-2]&&w[1]===w[C-1]&&C>1;)C-=2;for(let R=2;R<C;R+=2)(w[R]!==w[R-2]||w[R+1]!==w[R-1])&&g.lineTo(w[R],w[R+1]);return g.closePath(),v&&v.value()}*cellPolygons(){const{delaunay:{points:d}}=this;for(let g=0,v=d.length/2;g<v;++g){const w=this.cellPolygon(g);w&&(w.index=g,yield w)}}cellPolygon(d){const g=new ml;return this.renderCell(d,g),g.value()}_renderSegment(d,g,v,w,C){let R;const P=this._regioncode(d,g),N=this._regioncode(v,w);0===P&&0===N?(C.moveTo(d,g),C.lineTo(v,w)):(R=this._clipSegment(d,g,v,w,P,N))&&(C.moveTo(R[0],R[1]),C.lineTo(R[2],R[3]))}contains(d,g,v){return(g=+g)==g&&(v=+v)==v&&this.delaunay._step(d,g,v)===d}*neighbors(d){const g=this._clip(d);if(g)for(const v of this.delaunay.neighbors(d)){const w=this._clip(v);if(w)e:for(let C=0,R=g.length;C<R;C+=2)for(let P=0,N=w.length;P<N;P+=2)if(g[C]===w[P]&&g[C+1]===w[P+1]&&g[(C+2)%R]===w[(P+N-2)%N]&&g[(C+3)%R]===w[(P+N-1)%N]){yield v;break e}}}_cell(d){const{circumcenters:g,delaunay:{inedges:v,halfedges:w,triangles:C}}=this,R=v[d];if(-1===R)return null;const P=[];let N=R;do{const F=Math.floor(N/3);if(P.push(g[2*F],g[2*F+1]),N=N%3==2?N-2:N+1,C[N]!==d)break;N=w[N]}while(N!==R&&-1!==N);return P}_clip(d){if(0===d&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const g=this._cell(d);if(null===g)return null;const{vectors:v}=this,w=4*d;return this._simplify(v[w]||v[w+1]?this._clipInfinite(d,g,v[w],v[w+1],v[w+2],v[w+3]):this._clipFinite(d,g))}_clipFinite(d,g){const v=g.length;let C,R,F,W,w=null,P=g[v-2],N=g[v-1],V=this._regioncode(P,N),H=0;for(let q=0;q<v;q+=2)if(C=P,R=N,P=g[q],N=g[q+1],F=V,V=this._regioncode(P,N),0===F&&0===V)W=H,H=0,w?w.push(P,N):w=[P,N];else{let ne,Z,K,te,ae;if(0===F){if(null===(ne=this._clipSegment(C,R,P,N,F,V)))continue;[Z,K,te,ae]=ne}else{if(null===(ne=this._clipSegment(P,N,C,R,V,F)))continue;[te,ae,Z,K]=ne,W=H,H=this._edgecode(Z,K),W&&H&&this._edge(d,W,H,w,w.length),w?w.push(Z,K):w=[Z,K]}W=H,H=this._edgecode(te,ae),W&&H&&this._edge(d,W,H,w,w.length),w?w.push(te,ae):w=[te,ae]}if(w)W=H,H=this._edgecode(w[0],w[1]),W&&H&&this._edge(d,W,H,w,w.length);else if(this.contains(d,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return w}_clipSegment(d,g,v,w,C,R){const P=C<R;for(P&&([d,g,v,w,C,R]=[v,w,d,g,R,C]);;){if(0===C&&0===R)return P?[v,w,d,g]:[d,g,v,w];if(C&R)return null;let N,F,V=C||R;8&V?(N=d+(v-d)*(this.ymax-g)/(w-g),F=this.ymax):4&V?(N=d+(v-d)*(this.ymin-g)/(w-g),F=this.ymin):2&V?(F=g+(w-g)*(this.xmax-d)/(v-d),N=this.xmax):(F=g+(w-g)*(this.xmin-d)/(v-d),N=this.xmin),C?C=this._regioncode(d=N,g=F):R=this._regioncode(v=N,w=F)}}_clipInfinite(d,g,v,w,C,R){let N,P=Array.from(g);if((N=this._project(P[0],P[1],v,w))&&P.unshift(N[0],N[1]),(N=this._project(P[P.length-2],P[P.length-1],C,R))&&P.push(N[0],N[1]),P=this._clipFinite(d,P))for(let W,F=0,V=P.length,H=this._edgecode(P[V-2],P[V-1]);F<V;F+=2)W=H,H=this._edgecode(P[F],P[F+1]),W&&H&&(F=this._edge(d,W,H,P,F),V=P.length);else this.contains(d,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return P}_edge(d,g,v,w,C){for(;g!==v;){let R,P;switch(g){case 5:g=4;continue;case 4:g=6,R=this.xmax,P=this.ymin;break;case 6:g=2;continue;case 2:g=10,R=this.xmax,P=this.ymax;break;case 10:g=8;continue;case 8:g=9,R=this.xmin,P=this.ymax;break;case 9:g=1;continue;case 1:g=5,R=this.xmin,P=this.ymin}(w[C]!==R||w[C+1]!==P)&&this.contains(d,R,P)&&(w.splice(C,0,R,P),C+=2)}return C}_project(d,g,v,w){let R,P,N,C=1/0;if(w<0){if(g<=this.ymin)return null;(R=(this.ymin-g)/w)<C&&(N=this.ymin,P=d+(C=R)*v)}else if(w>0){if(g>=this.ymax)return null;(R=(this.ymax-g)/w)<C&&(N=this.ymax,P=d+(C=R)*v)}if(v>0){if(d>=this.xmax)return null;(R=(this.xmax-d)/v)<C&&(P=this.xmax,N=g+(C=R)*w)}else if(v<0){if(d<=this.xmin)return null;(R=(this.xmin-d)/v)<C&&(P=this.xmin,N=g+(C=R)*w)}return[P,N]}_edgecode(d,g){return(d===this.xmin?1:d===this.xmax?2:0)|(g===this.ymin?4:g===this.ymax?8:0)}_regioncode(d,g){return(d<this.xmin?1:d>this.xmax?2:0)|(g<this.ymin?4:g>this.ymax?8:0)}_simplify(d){if(d&&d.length>4){for(let g=0;g<d.length;g+=2){const v=(g+2)%d.length,w=(g+4)%d.length;(d[g]===d[v]&&d[v]===d[w]||d[g+1]===d[v+1]&&d[v+1]===d[w+1])&&(d.splice(v,2),g-=2)}d.length||(d=null)}return d}}const jm=2*Math.PI,gl=Math.pow;function k0(a){return a[0]}function _d(a){return a[1]}function Sp(a,d,g){return[a+Math.sin(a+d)*g,d+Math.cos(a-d)*g]}class ch{static from(d,g=k0,v=_d,w){return new ch("length"in d?function Uc(a,d,g,v){const w=a.length,C=new Float64Array(2*w);for(let R=0;R<w;++R){const P=a[R];C[2*R]=d.call(v,P,R,a),C[2*R+1]=g.call(v,P,R,a)}return C}(d,g,v,w):Float64Array.from(function*mx(a,d,g,v){let w=0;for(const C of a)yield d.call(v,C,w,a),yield g.call(v,C,w,a),++w}(d,g,v,w)))}constructor(d){this._delaunator=new Gm(d),this.inedges=new Int32Array(d.length/2),this._hullIndex=new Int32Array(d.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const d=this._delaunator,g=this.points;if(d.hull&&d.hull.length>2&&function jl(a){const{triangles:d,coords:g}=a;for(let v=0;v<d.length;v+=3){const w=2*d[v],C=2*d[v+1],R=2*d[v+2];if((g[R]-g[w])*(g[C+1]-g[w+1])-(g[C]-g[w])*(g[R+1]-g[w+1])>1e-10)return!1}return!0}(d)){this.collinear=Int32Array.from({length:g.length/2},(H,q)=>q).sort((H,q)=>g[2*H]-g[2*q]||g[2*H+1]-g[2*q+1]);const N=this.collinear[0],F=this.collinear[this.collinear.length-1],V=[g[2*N],g[2*N+1],g[2*F],g[2*F+1]],W=1e-8*Math.hypot(V[3]-V[1],V[2]-V[0]);for(let H=0,q=g.length/2;H<q;++H){const ne=Sp(g[2*H],g[2*H+1],W);g[2*H]=ne[0],g[2*H+1]=ne[1]}this._delaunator=new Gm(g)}else delete this.collinear;const v=this.halfedges=this._delaunator.halfedges,w=this.hull=this._delaunator.hull,C=this.triangles=this._delaunator.triangles,R=this.inedges.fill(-1),P=this._hullIndex.fill(-1);for(let N=0,F=v.length;N<F;++N){const V=C[N%3==2?N-2:N+1];(-1===v[N]||-1===R[V])&&(R[V]=N)}for(let N=0,F=w.length;N<F;++N)P[w[N]]=N;w.length<=2&&w.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=w[0],R[w[0]]=1,2===w.length&&(R[w[1]]=0,this.triangles[1]=w[1],this.triangles[2]=w[1]))}voronoi(d){return new sf(this,d)}*neighbors(d){const{inedges:g,hull:v,_hullIndex:w,halfedges:C,triangles:R,collinear:P}=this;if(P){const W=P.indexOf(d);return W>0&&(yield P[W-1]),void(W<P.length-1&&(yield P[W+1]))}const N=g[d];if(-1===N)return;let F=N,V=-1;do{if(yield V=R[F],F=F%3==2?F-2:F+1,R[F]!==d)return;if(F=C[F],-1===F){const W=v[(w[d]+1)%v.length];return void(W!==V&&(yield W))}}while(F!==N)}find(d,g,v=0){if((d=+d)!=d||(g=+g)!=g)return-1;const w=v;let C;for(;(C=this._step(v,d,g))>=0&&C!==v&&C!==w;)v=C;return C}_step(d,g,v){const{inedges:w,hull:C,_hullIndex:R,halfedges:P,triangles:N,points:F}=this;if(-1===w[d]||!F.length)return(d+1)%(F.length>>1);let V=d,W=gl(g-F[2*d],2)+gl(v-F[2*d+1],2);const H=w[d];let q=H;do{let ne=N[q];const Z=gl(g-F[2*ne],2)+gl(v-F[2*ne+1],2);if(Z<W&&(W=Z,V=ne),q=q%3==2?q-2:q+1,N[q]!==d)break;if(q=P[q],-1===q){if(q=C[(R[d]+1)%C.length],q!==ne&&gl(g-F[2*q],2)+gl(v-F[2*q+1],2)<W)return q;break}}while(q!==H);return V}render(d){const g=null==d?d=new _a:void 0,{points:v,halfedges:w,triangles:C}=this;for(let R=0,P=w.length;R<P;++R){const N=w[R];if(N<R)continue;const F=2*C[R],V=2*C[N];d.moveTo(v[F],v[F+1]),d.lineTo(v[V],v[V+1])}return this.renderHull(d),g&&g.value()}renderPoints(d,g){void 0===g&&(!d||"function"!=typeof d.moveTo)&&(g=d,d=null),g=null==g?2:+g;const v=null==d?d=new _a:void 0,{points:w}=this;for(let C=0,R=w.length;C<R;C+=2){const P=w[C],N=w[C+1];d.moveTo(P+g,N),d.arc(P,N,g,0,jm)}return v&&v.value()}renderHull(d){const g=null==d?d=new _a:void 0,{hull:v,points:w}=this,C=2*v[0],R=v.length;d.moveTo(w[C],w[C+1]);for(let P=1;P<R;++P){const N=2*v[P];d.lineTo(w[N],w[N+1])}return d.closePath(),g&&g.value()}hullPolygon(){const d=new ml;return this.renderHull(d),d.value()}renderTriangle(d,g){const v=null==g?g=new _a:void 0,{points:w,triangles:C}=this,R=2*C[d*=3],P=2*C[d+1],N=2*C[d+2];return g.moveTo(w[R],w[R+1]),g.lineTo(w[P],w[P+1]),g.lineTo(w[N],w[N+1]),g.closePath(),v&&v.value()}*trianglePolygons(){const{triangles:d}=this;for(let g=0,v=d.length/3;g<v;++g)yield this.trianglePolygon(g)}trianglePolygon(d){const g=new ml;return this.renderTriangle(d,g),g.value()}}const af=a=>()=>a;function Su(a,{sourceEvent:d,subject:g,target:v,identifier:w,active:C,x:R,y:P,dx:N,dy:F,dispatch:V}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:d,enumerable:!0,configurable:!0},subject:{value:g,enumerable:!0,configurable:!0},target:{value:v,enumerable:!0,configurable:!0},identifier:{value:w,enumerable:!0,configurable:!0},active:{value:C,enumerable:!0,configurable:!0},x:{value:R,enumerable:!0,configurable:!0},y:{value:P,enumerable:!0,configurable:!0},dx:{value:N,enumerable:!0,configurable:!0},dy:{value:F,enumerable:!0,configurable:!0},_:{value:V}})}function $m(a){return!a.ctrlKey&&!a.button}function mc(){return this.parentNode}function Bc(a,d){return d??{x:a.x,y:a.y}}function fy(){return navigator.maxTouchPoints||"ontouchstart"in this}function cf(){var P,N,F,V,a=$m,d=mc,g=Bc,v=fy,w={},C=W_("start","drag","end"),R=0,W=0;function H(se){se.on("mousedown.drag",q).filter(v).on("touchstart.drag",K).on("touchmove.drag",te,Ks).on("touchend.drag touchcancel.drag",ae).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(se,ue){if(!V&&a.call(this,se,ue)){var _e=oe(this,d.call(this,se,ue),se,ue,"mouse");_e&&(Tr(se.view).on("mousemove.drag",ne,No).on("mouseup.drag",Z,No),kl(se.view),pu(se),F=!1,P=se.clientX,N=se.clientY,_e("start",se))}}function ne(se){if(wr(se),!F){var ue=se.clientX-P,_e=se.clientY-N;F=ue*ue+_e*_e>W}w.mouse("drag",se)}function Z(se){Tr(se.view).on("mousemove.drag mouseup.drag",null),Dc(se.view,F),wr(se),w.mouse("end",se)}function K(se,ue){if(a.call(this,se,ue)){var Ke,ke,_e=se.changedTouches,Ce=d.call(this,se,ue),ye=_e.length;for(Ke=0;Ke<ye;++Ke)(ke=oe(this,Ce,se,ue,_e[Ke].identifier,_e[Ke]))&&(pu(se),ke("start",se,_e[Ke]))}}function te(se){var Ce,ye,ue=se.changedTouches,_e=ue.length;for(Ce=0;Ce<_e;++Ce)(ye=w[ue[Ce].identifier])&&(wr(se),ye("drag",se,ue[Ce]))}function ae(se){var Ce,ye,ue=se.changedTouches,_e=ue.length;for(V&&clearTimeout(V),V=setTimeout(function(){V=null},500),Ce=0;Ce<_e;++Ce)(ye=w[ue[Ce].identifier])&&(pu(se),ye("end",se,ue[Ce]))}function oe(se,ue,_e,Ce,ye,Ke){var ft,it,le,ke=C.copy(),Oe=Zi(Ke||_e,ue);if(null!=(le=g.call(se,new Su("beforestart",{sourceEvent:_e,target:H,identifier:ye,active:R,x:Oe[0],y:Oe[1],dx:0,dy:0,dispatch:ke}),Ce)))return ft=le.x-Oe[0]||0,it=le.y-Oe[1]||0,function me(Me,We,Se){var De,Ge=Oe;switch(Me){case"start":w[ye]=me,De=R++;break;case"end":delete w[ye],--R;case"drag":Oe=Zi(Se||We,ue),De=R}ke.call(Me,se,new Su(Me,{sourceEvent:We,subject:le,target:H,identifier:ye,active:De,x:Oe[0]+ft,y:Oe[1]+it,dx:Oe[0]-Ge[0],dy:Oe[1]-Ge[1],dispatch:ke}),Ce)}}return H.filter=function(se){return arguments.length?(a="function"==typeof se?se:af(!!se),H):a},H.container=function(se){return arguments.length?(d="function"==typeof se?se:af(se),H):d},H.subject=function(se){return arguments.length?(g="function"==typeof se?se:af(se),H):g},H.touchable=function(se){return arguments.length?(v="function"==typeof se?se:af(!!se),H):v},H.on=function(){var se=C.on.apply(C,arguments);return se===C?H:se},H.clickDistance=function(se){return arguments.length?(W=(se=+se)*se,H):Math.sqrt(W)},H}Su.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var _l={},lf={},vl=34,uf=10,L0=13;function yl(a){return new Function("d","return {"+a.map(function(d,g){return JSON.stringify(d)+": d["+g+'] || ""'}).join(",")+"}")}function c_(a){var d=Object.create(null),g=[];return a.forEach(function(v){for(var w in v)w in d||g.push(d[w]=w)}),g}function va(a,d){var g=a+"",v=g.length;return v<d?new Array(d-v+1).join(0)+g:g}function vd(a){var d=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);function w(W,H){var te,q=[],ne=W.length,Z=0,K=0,ae=ne<=0,oe=!1;function se(){if(ae)return lf;if(oe)return oe=!1,_l;var _e,ye,Ce=Z;if(W.charCodeAt(Ce)===vl){for(;Z++<ne&&W.charCodeAt(Z)!==vl||W.charCodeAt(++Z)===vl;);return(_e=Z)>=ne?ae=!0:(ye=W.charCodeAt(Z++))===uf?oe=!0:ye===L0&&(oe=!0,W.charCodeAt(Z)===uf&&++Z),W.slice(Ce+1,_e-1).replace(/""/g,'"')}for(;Z<ne;){if((ye=W.charCodeAt(_e=Z++))===uf)oe=!0;else if(ye===L0)oe=!0,W.charCodeAt(Z)===uf&&++Z;else if(ye!==g)continue;return W.slice(Ce,_e)}return ae=!0,W.slice(Ce,ne)}for(W.charCodeAt(ne-1)===uf&&--ne,W.charCodeAt(ne-1)===L0&&--ne;(te=se())!==lf;){for(var ue=[];te!==_l&&te!==lf;)ue.push(te),te=se();H&&null==(ue=H(ue,K++))||q.push(ue)}return q}function C(W,H){return W.map(function(q){return H.map(function(ne){return V(q[ne])}).join(a)})}function F(W){return W.map(V).join(a)}function V(W){return null==W?"":W instanceof Date?function Ep(a){var d=a.getUTCHours(),g=a.getUTCMinutes(),v=a.getUTCSeconds(),w=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":function O0(a){return a<0?"-"+va(-a,6):a>9999?"+"+va(a,6):va(a,4)}(a.getUTCFullYear())+"-"+va(a.getUTCMonth()+1,2)+"-"+va(a.getUTCDate(),2)+(w?"T"+va(d,2)+":"+va(g,2)+":"+va(v,2)+"."+va(w,3)+"Z":v?"T"+va(d,2)+":"+va(g,2)+":"+va(v,2)+"Z":g||d?"T"+va(d,2)+":"+va(g,2)+"Z":"")}(W):d.test(W+="")?'"'+W.replace(/"/g,'""')+'"':W}return{parse:function v(W,H){var q,ne,Z=w(W,function(K,te){if(q)return q(K,te-1);ne=K,q=H?function gx(a,d){var g=yl(a);return function(v,w){return d(g(v),w,a)}}(K,H):yl(K)});return Z.columns=ne||[],Z},parseRows:w,format:function R(W,H){return null==H&&(H=c_(W)),[H.map(V).join(a)].concat(C(W,H)).join("\n")},formatBody:function P(W,H){return null==H&&(H=c_(W)),C(W,H).join("\n")},formatRows:function N(W){return W.map(F).join("\n")},formatRow:F,formatValue:V}}var Eu=vd(","),bl=Eu.parse,_x=Eu.parseRows,fw=Eu.format,vx=Eu.formatBody,pw=Eu.formatRows,Q1=Eu.formatRow,yd=Eu.formatValue,Ro=vd("\t"),l_=Ro.parse,py=Ro.parseRows,qm=Ro.format,Pi=Ro.formatBody,zn=Ro.formatRows,Xm=Ro.formatRow,u_=Ro.formatValue;function yx(a){for(var d in a){var v,w,g=a[d].trim();if(g)if("true"===g)g=!0;else if("false"===g)g=!1;else if("NaN"===g)g=NaN;else if(isNaN(v=+g)){if(!(w=g.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;bx&&w[4]&&!w[7]&&(g=g.replace(/-/g,"/").replace(/T/," ")),g=new Date(g)}else g=v;else g=null;a[d]=g}return a}const bx=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),xx=a=>+a;function mw(a){return a*a}function Ym(a){return a*(2-a)}function Zm(a){return((a*=2)<=1?a*a:--a*(2-a)+1)/2}var eS=function a(d){function g(v){return Math.pow(v,d)}return d=+d,g.exponent=a,g}(3),Mx=function a(d){function g(v){return 1-Math.pow(1-v,d)}return d=+d,g.exponent=a,g}(3),Cp=function a(d){function g(v){return((v*=2)<=1?Math.pow(v,d):2-Math.pow(2-v,d))/2}return d=+d,g.exponent=a,g}(3),js=Math.PI,F0=js/2;function Km(a){return 1==+a?1:1-Math.cos(a*F0)}function Jm(a){return Math.sin(a*F0)}function N0(a){return(1-Math.cos(js*a))/2}function bd(a){return 1.0009775171065494*(Math.pow(2,-10*a)-.0009765625)}function gy(a){return bd(1-+a)}function _y(a){return 1-bd(a)}function d_(a){return((a*=2)<=1?bd(1-a):2-bd(a-1))/2}function Qm(a){return 1-Math.sqrt(1-a*a)}function df(a){return Math.sqrt(1- --a*a)}function lh(a){return((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}var Vc=4/11,uh=6/11,xd=8/11,zc=3/4,Cu=9/11,Tp=10/11,Ap=15/16,eg=21/22,tg=63/64,hf=1/Vc/Vc;function Dp(a){return 1-Tu(1-a)}function Tu(a){return(a=+a)<Vc?hf*a*a:a<xd?hf*(a-=uh)*a+zc:a<Tp?hf*(a-=Cu)*a+Ap:hf*(a-=eg)*a+tg}function wx(a){return((a*=2)<=1?1-Tu(1-a):Tu(a-1)+1)/2}var Au=1.70158,$l=function a(d){function g(v){return(v=+v)*v*(d*(v-1)+v)}return d=+d,g.overshoot=a,g}(Au),Rp=function a(d){function g(v){return--v*v*((v+1)*d+v)+1}return d=+d,g.overshoot=a,g}(Au),gw=function a(d){function g(v){return((v*=2)<1?v*v*((d+1)*v-d):(v-=2)*v*((d+1)*v+d)+2)/2}return d=+d,g.overshoot=a,g}(Au),ff=2*Math.PI,Be=function a(d,g){var v=Math.asin(1/(d=Math.max(1,d)))*(g/=ff);function w(C){return d*bd(- --C)*Math.sin((v-C)/g)}return w.amplitude=function(C){return a(C,g*ff)},w.period=function(C){return a(d,C)},w}(1,.3),Ip=function a(d,g){var v=Math.asin(1/(d=Math.max(1,d)))*(g/=ff);function w(C){return 1-d*bd(C=+C)*Math.sin((C+v)/g)}return w.amplitude=function(C){return a(C,g*ff)},w.period=function(C){return a(d,C)},w}(1,.3),_w=function a(d,g){var v=Math.asin(1/(d=Math.max(1,d)))*(g/=ff);function w(C){return((C=2*C-1)<0?d*bd(-C)*Math.sin((v-C)/g):2-d*bd(C)*Math.sin((v+C)/g))/2}return w.amplitude=function(C){return a(C,g*ff)},w.period=function(C){return a(d,C)},w}(1,.3);function Ex(a){if(!a.ok)throw new Error(a.status+" "+a.statusText);return a.blob()}function vw(a,d){return fetch(a,d).then(Ex)}function yw(a){if(!a.ok)throw new Error(a.status+" "+a.statusText);return a.arrayBuffer()}function ng(a,d){return fetch(a,d).then(yw)}function pf(a){if(!a.ok)throw new Error(a.status+" "+a.statusText);return a.text()}function Du(a,d){return fetch(a,d).then(pf)}function Ru(a){return function(d,g,v){return 2===arguments.length&&"function"==typeof g&&(v=g,g=void 0),Du(d,g).then(function(w){return a(w,v)})}}function Ls(a,d,g,v){3===arguments.length&&"function"==typeof g&&(v=g,g=void 0);var w=vd(a);return Du(d,g).then(function(C){return w.parse(C,v)})}var ls=Ru(bl),ig=Ru(l_);function Pp(a,d){return new Promise(function(g,v){var w=new Image;for(var C in d)w[C]=d[C];w.onerror=v,w.onload=function(){g(w)},w.src=a})}function dh(a){if(!a.ok)throw new Error(a.status+" "+a.statusText);if(204!==a.status&&205!==a.status)return a.json()}function rg(a,d){return fetch(a,d).then(dh)}function mf(a){return(d,g)=>Du(d,g).then(v=>(new DOMParser).parseFromString(v,a))}const kp=mf("application/xml");var Cx=mf("text/html"),yy=mf("image/svg+xml");function Lp(a,d){var g,v=1;function w(){var C,P,R=g.length,N=0,F=0;for(C=0;C<R;++C)N+=(P=g[C]).x,F+=P.y;for(N=(N/R-a)*v,F=(F/R-d)*v,C=0;C<R;++C)(P=g[C]).x-=N,P.y-=F}return null==a&&(a=0),null==d&&(d=0),w.initialize=function(C){g=C},w.x=function(C){return arguments.length?(a=+C,w):a},w.y=function(C){return arguments.length?(d=+C,w):d},w.strength=function(C){return arguments.length?(v=+C,w):v},w}function h_(a,d,g,v){if(isNaN(d)||isNaN(g))return a;var w,W,H,q,ne,Z,K,te,ae,C=a._root,R={data:v},P=a._x0,N=a._y0,F=a._x1,V=a._y1;if(!C)return a._root=R,a;for(;C.length;)if((Z=d>=(W=(P+F)/2))?P=W:F=W,(K=g>=(H=(N+V)/2))?N=H:V=H,w=C,!(C=C[te=K<<1|Z]))return w[te]=R,a;if(q=+a._x.call(null,C.data),ne=+a._y.call(null,C.data),d===q&&g===ne)return R.next=C,w?w[te]=R:a._root=R,a;do{w=w?w[te]=new Array(4):a._root=new Array(4),(Z=d>=(W=(P+F)/2))?P=W:F=W,(K=g>=(H=(N+V)/2))?N=H:V=H}while((te=K<<1|Z)==(ae=(ne>=H)<<1|q>=W));return w[ae]=C,w[te]=R,a}function ya(a,d,g,v,w){this.node=a,this.x0=d,this.y0=g,this.x1=v,this.y1=w}function fh(a){return a[0]}function Up(a){return a[1]}function Bp(a,d,g){var v=new B0(d??fh,g??Up,NaN,NaN,NaN,NaN);return null==a?v:v.addAll(a)}function B0(a,d,g,v,w,C){this._x=a,this._y=d,this._x0=g,this._y0=v,this._x1=w,this._y1=C,this._root=void 0}function V0(a){for(var d={data:a.data},g=d;a=a.next;)g=g.next={data:a.data};return d}var ba=Bp.prototype=B0.prototype;function Io(a){return function(){return a}}function jo(a){return 1e-6*(a()-.5)}function z0(a){return a.x+a.vx}function Tx(a){return a.y+a.vy}function Ax(a){var d,g,v,w=1,C=1;function R(){for(var F,W,H,q,ne,Z,K,V=d.length,te=0;te<C;++te)for(W=Bp(d,z0,Tx).visitAfter(P),F=0;F<V;++F)K=(Z=g[(H=d[F]).index])*Z,q=H.x+H.vx,ne=H.y+H.vy,W.visit(ae);function ae(oe,se,ue,_e,Ce){var ye=oe.data,Ke=oe.r,ke=Z+Ke;if(!ye)return se>q+ke||_e<q-ke||ue>ne+ke||Ce<ne-ke;if(ye.index>H.index){var Oe=q-ye.x-ye.vx,ft=ne-ye.y-ye.vy,it=Oe*Oe+ft*ft;it<ke*ke&&(0===Oe&&(it+=(Oe=jo(v))*Oe),0===ft&&(it+=(ft=jo(v))*ft),it=(ke-(it=Math.sqrt(it)))/it*w,H.vx+=(Oe*=it)*(ke=(Ke*=Ke)/(K+Ke)),H.vy+=(ft*=it)*ke,ye.vx-=Oe*(ke=1-ke),ye.vy-=ft*ke)}}}function P(F){if(F.data)return F.r=g[F.data.index];for(var V=F.r=0;V<4;++V)F[V]&&F[V].r>F.r&&(F.r=F[V].r)}function N(){if(d){var F,W,V=d.length;for(g=new Array(V),F=0;F<V;++F)g[(W=d[F]).index]=+a(W,F,d)}}return"function"!=typeof a&&(a=Io(null==a?1:+a)),R.initialize=function(F,V){d=F,v=V,N()},R.iterations=function(F){return arguments.length?(C=+F,R):C},R.strength=function(F){return arguments.length?(w=+F,R):w},R.radius=function(F){return arguments.length?(a="function"==typeof F?F:Io(+F),N(),R):a},R}function My(a){return a.index}function wy(a,d){var g=a.get(d);if(!g)throw new Error("node not found: "+d);return g}function Dx(a){var v,C,R,P,N,F,d=My,g=function W(K){return 1/Math.min(P[K.source.index],P[K.target.index])},w=Io(30),V=1;function H(K){for(var te=0,ae=a.length;te<V;++te)for(var se,ue,_e,Ce,ye,Ke,ke,oe=0;oe<ae;++oe)Ce=(_e=(se=a[oe]).target).x+_e.vx-(ue=se.source).x-ue.vx||jo(F),ye=_e.y+_e.vy-ue.y-ue.vy||jo(F),ye*=Ke=((Ke=Math.sqrt(Ce*Ce+ye*ye))-C[oe])/Ke*K*v[oe],_e.vx-=(Ce*=Ke)*(ke=N[oe]),_e.vy-=ye*ke,ue.vx+=Ce*(ke=1-ke),ue.vy+=ye*ke}function q(){if(R){var K,se,te=R.length,ae=a.length,oe=new Map(R.map((ue,_e)=>[d(ue,_e,R),ue]));for(K=0,P=new Array(te);K<ae;++K)(se=a[K]).index=K,"object"!=typeof se.source&&(se.source=wy(oe,se.source)),"object"!=typeof se.target&&(se.target=wy(oe,se.target)),P[se.source.index]=(P[se.source.index]||0)+1,P[se.target.index]=(P[se.target.index]||0)+1;for(K=0,N=new Array(ae);K<ae;++K)N[K]=P[(se=a[K]).source.index]/(P[se.source.index]+P[se.target.index]);v=new Array(ae),ne(),C=new Array(ae),Z()}}function ne(){if(R)for(var K=0,te=a.length;K<te;++K)v[K]=+g(a[K],K,a)}function Z(){if(R)for(var K=0,te=a.length;K<te;++K)C[K]=+w(a[K],K,a)}return null==a&&(a=[]),H.initialize=function(K,te){R=K,F=te,q()},H.links=function(K){return arguments.length?(a=K,q(),H):a},H.id=function(K){return arguments.length?(d=K,H):d},H.iterations=function(K){return arguments.length?(V=+K,H):V},H.strength=function(K){return arguments.length?(g="function"==typeof K?K:Io(+K),ne(),H):g},H.distance=function(K){return arguments.length?(w="function"==typeof K?K:Io(+K),Z(),H):w},H}ba.copy=function(){var g,v,a=new B0(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return a;if(!d.length)return a._root=V0(d),a;for(g=[{source:d,target:a._root=new Array(4)}];d=g.pop();)for(var w=0;w<4;++w)(v=d.source[w])&&(v.length?g.push({source:v,target:d.target[w]=new Array(4)}):d.target[w]=V0(v));return a},ba.add=function Op(a){const d=+this._x.call(null,a),g=+this._y.call(null,a);return h_(this.cover(d,g),d,g,a)},ba.addAll=function Iu(a){var d,g,w,C,v=a.length,R=new Array(v),P=new Array(v),N=1/0,F=1/0,V=-1/0,W=-1/0;for(g=0;g<v;++g)isNaN(w=+this._x.call(null,d=a[g]))||isNaN(C=+this._y.call(null,d))||(R[g]=w,P[g]=C,w<N&&(N=w),w>V&&(V=w),C<F&&(F=C),C>W&&(W=C));if(N>V||F>W)return this;for(this.cover(N,F).cover(V,W),g=0;g<v;++g)h_(this,R[g],P[g],a[g]);return this},ba.cover=function Md(a,d){if(isNaN(a=+a)||isNaN(d=+d))return this;var g=this._x0,v=this._y0,w=this._x1,C=this._y1;if(isNaN(g))w=(g=Math.floor(a))+1,C=(v=Math.floor(d))+1;else{for(var N,F,R=w-g||1,P=this._root;g>a||a>=w||v>d||d>=C;)switch(F=(d<v)<<1|a<g,N=new Array(4),N[F]=P,P=N,R*=2,F){case 0:w=g+R,C=v+R;break;case 1:g=w-R,C=v+R;break;case 2:w=g+R,v=C-R;break;case 3:g=w-R,v=C-R}this._root&&this._root.length&&(this._root=P)}return this._x0=g,this._y0=v,this._x1=w,this._y1=C,this},ba.data=function by(){var a=[];return this.visit(function(d){if(!d.length)do{a.push(d.data)}while(d=d.next)}),a},ba.extent=function la(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ba.find=function bw(a,d,g){var v,R,P,N,F,ne,Z,w=this._x0,C=this._y0,V=this._x1,W=this._y1,H=[],q=this._root;for(q&&H.push(new ya(q,w,C,V,W)),null==g?g=1/0:(w=a-g,C=d-g,V=a+g,W=d+g,g*=g);ne=H.pop();)if(!(!(q=ne.node)||(R=ne.x0)>V||(P=ne.y0)>W||(N=ne.x1)<w||(F=ne.y1)<C))if(q.length){var K=(R+N)/2,te=(P+F)/2;H.push(new ya(q[3],K,te,N,F),new ya(q[2],R,te,K,F),new ya(q[1],K,P,N,te),new ya(q[0],R,P,K,te)),(Z=(d>=te)<<1|a>=K)&&(ne=H[H.length-1],H[H.length-1]=H[H.length-1-Z],H[H.length-1-Z]=ne)}else{var ae=a-+this._x.call(null,q.data),oe=d-+this._y.call(null,q.data),se=ae*ae+oe*oe;if(se<g){var ue=Math.sqrt(g=se);w=a-ue,C=d-ue,V=a+ue,W=d+ue,v=q.data}}return v},ba.remove=function U0(a){if(isNaN(V=+this._x.call(null,a))||isNaN(W=+this._y.call(null,a)))return this;var d,v,w,C,V,W,H,q,ne,Z,K,te,g=this._root,R=this._x0,P=this._y0,N=this._x1,F=this._y1;if(!g)return this;if(g.length)for(;;){if((ne=V>=(H=(R+N)/2))?R=H:N=H,(Z=W>=(q=(P+F)/2))?P=q:F=q,d=g,!(g=g[K=Z<<1|ne]))return this;if(!g.length)break;(d[K+1&3]||d[K+2&3]||d[K+3&3])&&(v=d,te=K)}for(;g.data!==a;)if(w=g,!(g=g.next))return this;return(C=g.next)&&delete g.next,w?(C?w.next=C:delete w.next,this):d?(C?d[K]=C:delete d[K],(g=d[0]||d[1]||d[2]||d[3])&&g===(d[3]||d[2]||d[1]||d[0])&&!g.length&&(v?v[te]=g:this._root=g),this):(this._root=C,this)},ba.removeAll=function wd(a){for(var d=0,g=a.length;d<g;++d)this.remove(a[d]);return this},ba.root=function hh(){return this._root},ba.size=function Fp(){var a=0;return this.visit(function(d){if(!d.length)do{++a}while(d=d.next)}),a},ba.visit=function xy(a){var g,w,C,R,P,N,d=[],v=this._root;for(v&&d.push(new ya(v,this._x0,this._y0,this._x1,this._y1));g=d.pop();)if(!a(v=g.node,C=g.x0,R=g.y0,P=g.x1,N=g.y1)&&v.length){var F=(C+P)/2,V=(R+N)/2;(w=v[3])&&d.push(new ya(w,F,V,P,N)),(w=v[2])&&d.push(new ya(w,C,V,F,N)),(w=v[1])&&d.push(new ya(w,F,R,P,V)),(w=v[0])&&d.push(new ya(w,C,R,F,V))}return this},ba.visitAfter=function sg(a){var v,d=[],g=[];for(this._root&&d.push(new ya(this._root,this._x0,this._y0,this._x1,this._y1));v=d.pop();){var w=v.node;if(w.length){var C,R=v.x0,P=v.y0,N=v.x1,F=v.y1,V=(R+N)/2,W=(P+F)/2;(C=w[0])&&d.push(new ya(C,R,P,V,W)),(C=w[1])&&d.push(new ya(C,V,P,N,W)),(C=w[2])&&d.push(new ya(C,R,W,V,F)),(C=w[3])&&d.push(new ya(C,V,W,N,F))}g.push(v)}for(;v=g.pop();)a(v.node,v.x0,v.y0,v.x1,v.y1);return this},ba.x=function Np(a){return arguments.length?(this._x=a,this):this._x},ba.y=function ph(a){return arguments.length?(this._y=a,this):this._y};const Rx=1664525,Hc=1013904223,$o=4294967296;function Vp(a){return a.x}function zp(a){return a.y}var gf=10,Ix=Math.PI*(3-Math.sqrt(5));function Sy(a){var d,g=1,v=.001,w=1-Math.pow(v,1/300),C=0,R=.6,P=new Map,N=Ao(W),F=W_("tick","end"),V=function mh(){let a=1;return()=>(a=(Rx*a+Hc)%$o)/$o}();function W(){H(),F.call("tick",d),g<v&&(N.stop(),F.call("end",d))}function H(Z){var K,ae,te=a.length;void 0===Z&&(Z=1);for(var oe=0;oe<Z;++oe)for(g+=(C-g)*w,P.forEach(function(se){se(g)}),K=0;K<te;++K)null==(ae=a[K]).fx?ae.x+=ae.vx*=R:(ae.x=ae.fx,ae.vx=0),null==ae.fy?ae.y+=ae.vy*=R:(ae.y=ae.fy,ae.vy=0);return d}function q(){for(var te,Z=0,K=a.length;Z<K;++Z){if((te=a[Z]).index=Z,null!=te.fx&&(te.x=te.fx),null!=te.fy&&(te.y=te.fy),isNaN(te.x)||isNaN(te.y)){var ae=gf*Math.sqrt(.5+Z),oe=Z*Ix;te.x=ae*Math.cos(oe),te.y=ae*Math.sin(oe)}(isNaN(te.vx)||isNaN(te.vy))&&(te.vx=te.vy=0)}}function ne(Z){return Z.initialize&&Z.initialize(a,V),Z}return null==a&&(a=[]),q(),d={tick:H,restart:function(){return N.restart(W),d},stop:function(){return N.stop(),d},nodes:function(Z){return arguments.length?(a=Z,q(),P.forEach(ne),d):a},alpha:function(Z){return arguments.length?(g=+Z,d):g},alphaMin:function(Z){return arguments.length?(v=+Z,d):v},alphaDecay:function(Z){return arguments.length?(w=+Z,d):+w},alphaTarget:function(Z){return arguments.length?(C=+Z,d):C},velocityDecay:function(Z){return arguments.length?(R=1-Z,d):1-R},randomSource:function(Z){return arguments.length?(V=Z,P.forEach(ne),d):V},force:function(Z,K){return arguments.length>1?(null==K?P.delete(Z):P.set(Z,ne(K)),d):P.get(Z)},find:function(Z,K,te){var se,ue,_e,Ce,ye,ae=0,oe=a.length;for(null==te?te=1/0:te*=te,ae=0;ae<oe;++ae)(_e=(se=Z-(Ce=a[ae]).x)*se+(ue=K-Ce.y)*ue)<te&&(ye=Ce,te=_e);return ye},on:function(Z,K){return arguments.length>1?(F.on(Z,K),d):F.on(Z)}}}function tS(){var a,d,g,v,C,w=Io(-30),R=1,P=1/0,N=.81;function F(q){var ne,Z=a.length,K=Bp(a,Vp,zp).visitAfter(W);for(v=q,ne=0;ne<Z;++ne)d=a[ne],K.visit(H)}function V(){if(a){var q,Z,ne=a.length;for(C=new Array(ne),q=0;q<ne;++q)C[(Z=a[q]).index]=+w(Z,q,a)}}function W(q){var Z,K,ae,oe,se,ne=0,te=0;if(q.length){for(ae=oe=se=0;se<4;++se)(Z=q[se])&&(K=Math.abs(Z.value))&&(ne+=Z.value,te+=K,ae+=K*Z.x,oe+=K*Z.y);q.x=ae/te,q.y=oe/te}else{(Z=q).x=Z.data.x,Z.y=Z.data.y;do{ne+=C[Z.data.index]}while(Z=Z.next)}q.value=ne}function H(q,ne,Z,K){if(!q.value)return!0;var te=q.x-d.x,ae=q.y-d.y,oe=K-ne,se=te*te+ae*ae;if(oe*oe/N<se)return se<P&&(0===te&&(se+=(te=jo(g))*te),0===ae&&(se+=(ae=jo(g))*ae),se<R&&(se=Math.sqrt(R*se)),d.vx+=te*q.value*v/se,d.vy+=ae*q.value*v/se),!0;if(!(q.length||se>=P)){(q.data!==d||q.next)&&(0===te&&(se+=(te=jo(g))*te),0===ae&&(se+=(ae=jo(g))*ae),se<R&&(se=Math.sqrt(R*se)));do{q.data!==d&&(d.vx+=te*(oe=C[q.data.index]*v/se),d.vy+=ae*oe)}while(q=q.next)}}return F.initialize=function(q,ne){a=q,g=ne,V()},F.strength=function(q){return arguments.length?(w="function"==typeof q?q:Io(+q),V(),F):w},F.distanceMin=function(q){return arguments.length?(R=q*q,F):Math.sqrt(R)},F.distanceMax=function(q){return arguments.length?(P=q*q,F):Math.sqrt(P)},F.theta=function(q){return arguments.length?(N=q*q,F):Math.sqrt(N)},F}function f_(a,d,g){var v,C,R,w=Io(.1);function P(F){for(var V=0,W=v.length;V<W;++V){var H=v[V],q=H.x-d||1e-6,ne=H.y-g||1e-6,Z=Math.sqrt(q*q+ne*ne),K=(R[V]-Z)*C[V]*F/Z;H.vx+=q*K,H.vy+=ne*K}}function N(){if(v){var F,V=v.length;for(C=new Array(V),R=new Array(V),F=0;F<V;++F)R[F]=+a(v[F],F,v),C[F]=isNaN(R[F])?0:+w(v[F],F,v)}}return"function"!=typeof a&&(a=Io(+a)),null==d&&(d=0),null==g&&(g=0),P.initialize=function(F){v=F,N()},P.strength=function(F){return arguments.length?(w="function"==typeof F?F:Io(+F),N(),P):w},P.radius=function(F){return arguments.length?(a="function"==typeof F?F:Io(+F),N(),P):a},P.x=function(F){return arguments.length?(d=+F,P):d},P.y=function(F){return arguments.length?(g=+F,P):g},P}function og(a){var g,v,w,d=Io(.1);function C(P){for(var V,N=0,F=g.length;N<F;++N)(V=g[N]).vx+=(w[N]-V.x)*v[N]*P}function R(){if(g){var P,N=g.length;for(v=new Array(N),w=new Array(N),P=0;P<N;++P)v[P]=isNaN(w[P]=+a(g[P],P,g))?0:+d(g[P],P,g)}}return"function"!=typeof a&&(a=Io(null==a?0:+a)),C.initialize=function(P){g=P,R()},C.strength=function(P){return arguments.length?(d="function"==typeof P?P:Io(+P),R(),C):d},C.x=function(P){return arguments.length?(a="function"==typeof P?P:Io(+P),R(),C):a},C}function H0(a){var g,v,w,d=Io(.1);function C(P){for(var V,N=0,F=g.length;N<F;++N)(V=g[N]).vy+=(w[N]-V.y)*v[N]*P}function R(){if(g){var P,N=g.length;for(v=new Array(N),w=new Array(N),P=0;P<N;++P)v[P]=isNaN(w[P]=+a(g[P],P,g))?0:+d(g[P],P,g)}}return"function"!=typeof a&&(a=Io(null==a?0:+a)),C.initialize=function(P){g=P,R()},C.strength=function(P){return arguments.length?(d="function"==typeof P?P:Io(+P),R(),C):d},C.y=function(P){return arguments.length?(a="function"==typeof P?P:Io(+P),R(),C):a},C}function ja(a,d){if((g=(a=d?a.toExponential(d-1):a.toExponential()).indexOf("e"))<0)return null;var g,v=a.slice(0,g);return[v.length>1?v[0]+v.slice(2):v,+a.slice(g+1)]}function us(a){return(a=ja(Math.abs(a)))?a[1]:NaN}var vh,_h=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ku(a){if(!(d=_h.exec(a)))throw new Error("invalid format: "+a);var d;return new gc({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function gc(a){this.fill=void 0===a.fill?" ":a.fill+"",this.align=void 0===a.align?">":a.align+"",this.sign=void 0===a.sign?"-":a.sign+"",this.symbol=void 0===a.symbol?"":a.symbol+"",this.zero=!!a.zero,this.width=void 0===a.width?void 0:+a.width,this.comma=!!a.comma,this.precision=void 0===a.precision?void 0:+a.precision,this.trim=!!a.trim,this.type=void 0===a.type?"":a.type+""}function ag(a,d){var g=ja(a,d);if(!g)return a+"";var v=g[0],w=g[1];return w<0?"0."+new Array(-w).join("0")+v:v.length>w+1?v.slice(0,w+1)+"."+v.slice(w+1):v+new Array(w-v.length+2).join("0")}ku.prototype=gc.prototype,gc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _f={"%":(a,d)=>(100*a).toFixed(d),b:a=>Math.round(a).toString(2),c:a=>a+"",d:function G0(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)},e:(a,d)=>a.toExponential(d),f:(a,d)=>a.toFixed(d),g:(a,d)=>a.toPrecision(d),o:a=>Math.round(a).toString(8),p:(a,d)=>ag(100*a,d),r:ag,s:function W0(a,d){var g=ja(a,d);if(!g)return a+"";var v=g[0],w=g[1],C=w-(vh=3*Math.max(-8,Math.min(8,Math.floor(w/3))))+1,R=v.length;return C===R?v:C>R?v+new Array(C-R+1).join("0"):C>0?v.slice(0,C)+"."+v.slice(C):"0."+new Array(1-C).join("0")+ja(a,Math.max(0,d+C-1))[0]},X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function vf(a){return a}var ql,Xl,Sd,j0=Array.prototype.map,Gc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function yh(a){var d=void 0===a.grouping||void 0===a.thousands?vf:function Pu(a,d){return function(g,v){for(var w=g.length,C=[],R=0,P=a[0],N=0;w>0&&P>0&&(N+P+1>v&&(P=Math.max(1,v-N)),C.push(g.substring(w-=P,w+P)),!((N+=P+1)>v));)P=a[R=(R+1)%a.length];return C.reverse().join(d)}}(j0.call(a.grouping,Number),a.thousands+""),g=void 0===a.currency?"":a.currency[0]+"",v=void 0===a.currency?"":a.currency[1]+"",w=void 0===a.decimal?".":a.decimal+"",C=void 0===a.numerals?vf:function gh(a){return function(d){return d.replace(/[0-9]/g,function(g){return a[+g]})}}(j0.call(a.numerals,String)),R=void 0===a.percent?"%":a.percent+"",P=void 0===a.minus?"\u2212":a.minus+"",N=void 0===a.nan?"NaN":a.nan+"";function F(W){var H=(W=ku(W)).fill,q=W.align,ne=W.sign,Z=W.symbol,K=W.zero,te=W.width,ae=W.comma,oe=W.precision,se=W.trim,ue=W.type;"n"===ue?(ae=!0,ue="g"):_f[ue]||(void 0===oe&&(oe=12),se=!0,ue="g"),(K||"0"===H&&"="===q)&&(K=!0,H="0",q="=");var _e="$"===Z?g:"#"===Z&&/[boxX]/.test(ue)?"0"+ue.toLowerCase():"",Ce="$"===Z?v:/[%p]/.test(ue)?R:"",ye=_f[ue],Ke=/[defgprs%]/.test(ue);function ke(Oe){var le,me,Me,ft=_e,it=Ce;if("c"===ue)it=ye(Oe)+it,Oe="";else{var We=(Oe=+Oe)<0||1/Oe<0;if(Oe=isNaN(Oe)?N:ye(Math.abs(Oe),oe),se&&(Oe=function Lu(a){e:for(var w,d=a.length,g=1,v=-1;g<d;++g)switch(a[g]){case".":v=w=g;break;case"0":0===v&&(v=g),w=g;break;default:if(!+a[g])break e;v>0&&(v=0)}return v>0?a.slice(0,v)+a.slice(w+1):a}(Oe)),We&&0==+Oe&&"+"!==ne&&(We=!1),ft=(We?"("===ne?ne:P:"-"===ne||"("===ne?"":ne)+ft,it=("s"===ue?Gc[8+vh/3]:"")+it+(We&&"("===ne?")":""),Ke)for(le=-1,me=Oe.length;++le<me;)if(48>(Me=Oe.charCodeAt(le))||Me>57){it=(46===Me?w+Oe.slice(le+1):Oe.slice(le))+it,Oe=Oe.slice(0,le);break}}ae&&!K&&(Oe=d(Oe,1/0));var Se=ft.length+Oe.length+it.length,Ge=Se<te?new Array(te-Se+1).join(H):"";switch(ae&&K&&(Oe=d(Ge+Oe,Ge.length?te-it.length:1/0),Ge=""),q){case"<":Oe=ft+Oe+it+Ge;break;case"=":Oe=ft+Ge+Oe+it;break;case"^":Oe=Ge.slice(0,Se=Ge.length>>1)+ft+Oe+it+Ge.slice(Se);break;default:Oe=Ge+ft+Oe+it}return C(Oe)}return oe=void 0===oe?6:/[gprs]/.test(ue)?Math.max(1,Math.min(21,oe)):Math.max(0,Math.min(20,oe)),ke.toString=function(){return W+""},ke}return{format:F,formatPrefix:function V(W,H){var q=F(((W=ku(W)).type="f",W)),ne=3*Math.max(-8,Math.min(8,Math.floor(us(H)/3))),Z=Math.pow(10,-ne),K=Gc[8+ne/3];return function(te){return q(Z*te)+K}}}}function xw(a){return ql=yh(a),Xl=ql.format,Sd=ql.formatPrefix,ql}function cg(a){return Math.max(0,-us(Math.abs(a)))}function ci(a,d){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(us(d)/3)))-us(Math.abs(a)))}function Mw(a,d){return a=Math.abs(a),d=Math.abs(d)-a,Math.max(0,us(d)-us(a))+1}xw({thousands:",",grouping:[3],currency:["$",""]});var bi=1e-6,Ou=1e-12,ur=Math.PI,$s=ur/2,Hp=ur/4,xa=2*ur,Qr=180/ur,Si=ur/180,dr=Math.abs,yf=Math.atan,Po=Math.atan2,si=Math.cos,Gp=Math.ceil,Px=Math.exp,$0=(Math,Math.hypot),p_=Math.log,lg=Math.pow,Qn=Math.sin,qs=Math.sign||function(a){return a>0?1:a<0?-1:0},Os=Math.sqrt,uo=Math.tan;function Ed(a){return a>1?0:a<-1?ur:Math.acos(a)}function qo(a){return a>1?$s:a<-1?-$s:Math.asin(a)}function xl(a){return(a=Qn(a/2))*a}function di(){}function Cd(a,d){a&&bf.hasOwnProperty(a.type)&&bf[a.type](a,d)}var bh={Feature:function(a,d){Cd(a.geometry,d)},FeatureCollection:function(a,d){for(var g=a.features,v=-1,w=g.length;++v<w;)Cd(g[v].geometry,d)}},bf={Sphere:function(a,d){d.sphere()},Point:function(a,d){d.point((a=a.coordinates)[0],a[1],a[2])},MultiPoint:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)d.point((a=g[v])[0],a[1],a[2])},LineString:function(a,d){Td(a.coordinates,d,0)},MultiLineString:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)Td(g[v],d,0)},Polygon:function(a,d){Yl(a.coordinates,d)},MultiPolygon:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)Yl(g[v],d)},GeometryCollection:function(a,d){for(var g=a.geometries,v=-1,w=g.length;++v<w;)Cd(g[v],d)}};function Td(a,d,g){var C,v=-1,w=a.length-g;for(d.lineStart();++v<w;)d.point((C=a[v])[0],C[1],C[2]);d.lineEnd()}function Yl(a,d){var g=-1,v=a.length;for(d.polygonStart();++g<v;)Td(a[g],d,1);d.polygonEnd()}function Ma(a,d){a&&bh.hasOwnProperty(a.type)?bh[a.type](a,d):Cd(a,d)}var Wp,m_,Fu,Ad,q0,xf=new wo,Mf=new wo,Zl={point:di,lineStart:di,lineEnd:di,polygonStart:function(){xf=new wo,Zl.lineStart=xh,Zl.lineEnd=Mh},polygonEnd:function(){var a=+xf;Mf.add(a<0?xa+a:a),this.lineStart=this.lineEnd=this.point=di},sphere:function(){Mf.add(xa)}};function xh(){Zl.point=Cy}function Mh(){wh(Wp,m_)}function Cy(a,d){Zl.point=wh,Wp=a,m_=d,Fu=a*=Si,Ad=si(d=(d*=Si)/2+Hp),q0=Qn(d)}function wh(a,d){var g=(a*=Si)-Fu,v=g>=0?1:-1,w=v*g,C=si(d=(d*=Si)/2+Hp),R=Qn(d),P=q0*R,N=Ad*C+P*si(w),F=P*v*Qn(w);xf.add(Po(F,N)),Fu=a,Ad=C,q0=R}function jp(a){return Mf=new wo,Ma(a,Zl),2*Mf}function X0(a){return[Po(a[1],a[0]),qo(a[2])]}function Oi(a){var d=a[0],g=a[1],v=si(g);return[v*si(d),v*Qn(d),Qn(g)]}function Nu(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]}function Ml(a,d){return[a[1]*d[2]-a[2]*d[1],a[2]*d[0]-a[0]*d[2],a[0]*d[1]-a[1]*d[0]]}function Vn(a,d){a[0]+=d[0],a[1]+=d[1],a[2]+=d[2]}function Kl(a,d){return[a[0]*d,a[1]*d,a[2]*d]}function Ty(a){var d=Os(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=d,a[1]/=d,a[2]/=d}var on,gn,$n,_c,Jl,g_,ug,wl,Sh,Eh,Uu,Ei={point:ds,lineStart:Ay,lineEnd:Dy,polygonStart:function(){Ei.point=Ry,Ei.lineStart=ps,Ei.lineEnd=kx,Sh=new wo,Zl.polygonStart()},polygonEnd:function(){Zl.polygonEnd(),Ei.point=ds,Ei.lineStart=Ay,Ei.lineEnd=Dy,xf<0?(on=-($n=180),gn=-(_c=90)):Sh>bi?_c=90:Sh<-bi&&(gn=-90),Uu[0]=on,Uu[1]=$n},sphere:function(){on=-($n=180),gn=-(_c=90)}};function ds(a,d){Eh.push(Uu=[on=a,$n=a]),d<gn&&(gn=d),d>_c&&(_c=d)}function Rs(a,d){var g=Oi([a*Si,d*Si]);if(wl){var v=Ml(wl,g),C=Ml([v[1],-v[0],0],v);Ty(C),C=X0(C);var F,R=a-Jl,P=R>0?1:-1,N=C[0]*Qr*P,V=dr(R)>180;V^(P*Jl<N&&N<P*a)?(F=C[1]*Qr)>_c&&(_c=F):V^(P*Jl<(N=(N+360)%360-180)&&N<P*a)?(F=-C[1]*Qr)<gn&&(gn=F):(d<gn&&(gn=d),d>_c&&(_c=d)),V?a<Jl?es(on,a)>es(on,$n)&&($n=a):es(a,$n)>es(on,$n)&&(on=a):$n>=on?(a<on&&(on=a),a>$n&&($n=a)):a>Jl?es(on,a)>es(on,$n)&&($n=a):es(a,$n)>es(on,$n)&&(on=a)}else Eh.push(Uu=[on=a,$n=a]);d<gn&&(gn=d),d>_c&&(_c=d),wl=g,Jl=a}function Ay(){Ei.point=Rs}function Dy(){Uu[0]=on,Uu[1]=$n,Ei.point=ds,wl=null}function Ry(a,d){if(wl){var g=a-Jl;Sh.add(dr(g)>180?g+(g>0?360:-360):g)}else g_=a,ug=d;Zl.point(a,d),Rs(a,d)}function ps(){Zl.lineStart()}function kx(){Ry(g_,ug),Zl.lineEnd(),dr(Sh)>bi&&(on=-($n=180)),Uu[0]=on,Uu[1]=$n,wl=null}function es(a,d){return(d-=a)<0?d+360:d}function Rr(a,d){return a[0]-d[0]}function Lx(a,d){return a[0]<=a[1]?a[0]<=d&&d<=a[1]:d<a[0]||a[1]<d}function Ox(a){var d,g,v,w,C,R,P;if(_c=$n=-(on=gn=1/0),Eh=[],Ma(a,Ei),g=Eh.length){for(Eh.sort(Rr),d=1,C=[v=Eh[0]];d<g;++d)Lx(v,(w=Eh[d])[0])||Lx(v,w[1])?(es(v[0],w[1])>es(v[0],v[1])&&(v[1]=w[1]),es(w[0],v[1])>es(v[0],v[1])&&(v[0]=w[0])):C.push(v=w);for(R=-1/0,d=0,v=C[g=C.length-1];d<=g;v=w,++d)(P=es(v[1],(w=C[d])[0]))>R&&(R=P,on=w[0],$n=v[1])}return Eh=Uu=null,on===1/0||gn===1/0?[[NaN,NaN],[NaN,NaN]]:[[on,gn],[$n,_c]]}var dg,wf,$p,hg,__,fg,v_,Ch,Th,Dd,Y0,Sf,Wc,Is,Xo,vc,jc={sphere:di,point:ww,lineStart:Z0,lineEnd:Ew,polygonStart:function(){jc.lineStart=Yo,jc.lineEnd=pg},polygonEnd:function(){jc.lineStart=Z0,jc.lineEnd=Ew}};function ww(a,d){a*=Si;var g=si(d*=Si);y_(g*si(a),g*Qn(a),Qn(d))}function y_(a,d,g){++dg,$p+=(a-$p)/dg,hg+=(d-hg)/dg,__+=(g-__)/dg}function Z0(){jc.point=Fx}function Fx(a,d){a*=Si;var g=si(d*=Si);Is=g*si(a),Xo=g*Qn(a),vc=Qn(d),jc.point=Sw,y_(Is,Xo,vc)}function Sw(a,d){a*=Si;var g=si(d*=Si),v=g*si(a),w=g*Qn(a),C=Qn(d),R=Po(Os((R=Xo*C-vc*w)*R+(R=vc*v-Is*C)*R+(R=Is*w-Xo*v)*R),Is*v+Xo*w+vc*C);wf+=R,fg+=R*(Is+(Is=v)),v_+=R*(Xo+(Xo=w)),Ch+=R*(vc+(vc=C)),y_(Is,Xo,vc)}function Ew(){jc.point=ww}function Yo(){jc.point=b_}function pg(){Iy(Sf,Wc),jc.point=ww}function b_(a,d){Sf=a,Wc=d,a*=Si,d*=Si,jc.point=Iy;var g=si(d);Is=g*si(a),Xo=g*Qn(a),vc=Qn(d),y_(Is,Xo,vc)}function Iy(a,d){a*=Si;var g=si(d*=Si),v=g*si(a),w=g*Qn(a),C=Qn(d),R=Xo*C-vc*w,P=vc*v-Is*C,N=Is*w-Xo*v,F=$0(R,P,N),V=qo(F),W=F&&-V/F;Th.add(W*R),Dd.add(W*P),Y0.add(W*N),wf+=V,fg+=V*(Is+(Is=v)),v_+=V*(Xo+(Xo=w)),Ch+=V*(vc+(vc=C)),y_(Is,Xo,vc)}function K0(a){dg=wf=$p=hg=__=fg=v_=Ch=0,Th=new wo,Dd=new wo,Y0=new wo,Ma(a,jc);var d=+Th,g=+Dd,v=+Y0,w=$0(d,g,v);return w<Ou&&(d=fg,g=v_,v=Ch,wf<bi&&(d=$p,g=hg,v=__),(w=$0(d,g,v))<Ou)?[NaN,NaN]:[Po(g,d)*Qr,qo(v/w)*Qr]}function ts(a){return function(){return a}}function Fs(a,d){function g(v,w){return v=a(v,w),d(v[0],v[1])}return a.invert&&d.invert&&(g.invert=function(v,w){return(v=d.invert(v,w))&&a.invert(v[0],v[1])}),g}function to(a,d){return dr(a)>ur&&(a-=Math.round(a/xa)*xa),[a,d]}function Wr(a,d,g){return(a%=xa)?d||g?Fs(Cw(a),Nx(d,g)):Cw(a):d||g?Nx(d,g):to}function x_(a){return function(d,g){return dr(d+=a)>ur&&(d-=Math.round(d/xa)*xa),[d,g]}}function Cw(a){var d=x_(a);return d.invert=x_(-a),d}function Nx(a,d){var g=si(a),v=Qn(a),w=si(d),C=Qn(d);function R(P,N){var F=si(N),V=si(P)*F,W=Qn(P)*F,H=Qn(N),q=H*g+V*v;return[Po(W*w-q*C,V*g-H*v),qo(q*w+W*C)]}return R.invert=function(P,N){var F=si(N),V=si(P)*F,W=Qn(P)*F,H=Qn(N),q=H*w-W*C;return[Po(W*w+H*C,V*g+q*v),qo(q*g-V*v)]},R}function Ux(a){function d(g){return(g=a(g[0]*Si,g[1]*Si))[0]*=Qr,g[1]*=Qr,g}return a=Wr(a[0]*Si,a[1]*Si,a.length>2?a[2]*Si:0),d.invert=function(g){return(g=a.invert(g[0]*Si,g[1]*Si))[0]*=Qr,g[1]*=Qr,g},d}function qp(a,d,g,v,w,C){if(g){var R=si(d),P=Qn(d),N=v*g;null==w?(w=d+v*xa,C=d-N/2):(w=mg(R,w),C=mg(R,C),(v>0?w<C:w>C)&&(w+=v*xa));for(var F,V=w;v>0?V>C:V<C;V-=N)F=X0([R,-P*si(V),-P*Qn(V)]),a.point(F[0],F[1])}}function mg(a,d){(d=Oi(d))[0]-=a,Ty(d);var g=Ed(-d[1]);return((-d[2]<0?-g:g)+xa-bi)%xa}function Bu(){var v,w,a=ts([0,0]),d=ts(90),g=ts(6),C={point:function R(N,F){v.push(N=w(N,F)),N[0]*=Qr,N[1]*=Qr}};function P(){var N=a.apply(this,arguments),F=d.apply(this,arguments)*Si,V=g.apply(this,arguments)*Si;return v=[],w=Wr(-N[0]*Si,-N[1]*Si,0).invert,qp(C,F,V,1),N={type:"Polygon",coordinates:[v]},v=w=null,N}return P.center=function(N){return arguments.length?(a="function"==typeof N?N:ts([+N[0],+N[1]]),P):a},P.radius=function(N){return arguments.length?(d="function"==typeof N?N:ts(+N),P):d},P.precision=function(N){return arguments.length?(g="function"==typeof N?N:ts(+N),P):g},P}function Ir(){var d,a=[];return{point:function(g,v,w){d.push([g,v,w])},lineStart:function(){a.push(d=[])},lineEnd:di,rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))},result:function(){var g=a;return a=[],d=null,g}}}function Ql(a,d){return dr(a[0]-d[0])<bi&&dr(a[1]-d[1])<bi}function Py(a,d,g,v){this.x=a,this.z=d,this.o=g,this.e=v,this.v=!1,this.n=this.p=null}function Bx(a,d,g,v,w){var P,N,C=[],R=[];if(a.forEach(function(ne){if(!((Z=ne.length-1)<=0)){var Z,ae,K=ne[0],te=ne[Z];if(Ql(K,te)){if(!K[2]&&!te[2]){for(w.lineStart(),P=0;P<Z;++P)w.point((K=ne[P])[0],K[1]);return void w.lineEnd()}te[0]+=2*bi}C.push(ae=new Py(K,ne,null,!0)),R.push(ae.o=new Py(K,null,ae,!1)),C.push(ae=new Py(te,ne,null,!1)),R.push(ae.o=new Py(te,null,ae,!0))}}),C.length){for(R.sort(d),Rd(C),Rd(R),P=0,N=R.length;P<N;++P)R[P].e=g=!g;for(var V,W,F=C[0];;){for(var H=F,q=!0;H.v;)if((H=H.n)===F)return;V=H.z,w.lineStart();do{if(H.v=H.o.v=!0,H.e){if(q)for(P=0,N=V.length;P<N;++P)w.point((W=V[P])[0],W[1]);else v(H.x,H.n.x,1,w);H=H.n}else{if(q)for(P=(V=H.p.z).length-1;P>=0;--P)w.point((W=V[P])[0],W[1]);else v(H.x,H.p.x,-1,w);H=H.p}V=(H=H.o).z,q=!q}while(!H.v);w.lineEnd()}}}function Rd(a){if(d=a.length){for(var d,w,g=0,v=a[0];++g<d;)v.n=w=a[g],w.p=v,v=w;v.n=w=a[0],w.p=v}}function eu(a){return dr(a[0])<=ur?a[0]:qs(a[0])*((dr(a[0])+ur)%xa-ur)}function Vu(a,d){var g=eu(d),v=d[1],w=Qn(v),C=[Qn(g),-si(g),0],R=0,P=0,N=new wo;1===w?v=$s+bi:-1===w&&(v=-$s-bi);for(var F=0,V=a.length;F<V;++F)if(H=(W=a[F]).length)for(var W,H,q=W[H-1],ne=eu(q),Z=q[1]/2+Hp,K=Qn(Z),te=si(Z),ae=0;ae<H;++ae,ne=se,K=_e,te=Ce,q=oe){var oe=W[ae],se=eu(oe),ue=oe[1]/2+Hp,_e=Qn(ue),Ce=si(ue),ye=se-ne,Ke=ye>=0?1:-1,ke=Ke*ye,Oe=ke>ur,ft=K*_e;if(N.add(Po(ft*Ke*Qn(ke),te*Ce+ft*si(ke))),R+=Oe?ye+Ke*xa:ye,Oe^ne>=g^se>=g){var it=Ml(Oi(q),Oi(oe));Ty(it);var le=Ml(C,it);Ty(le);var me=(Oe^ye>=0?-1:1)*qo(le[2]);(v>me||v===me&&(it[0]||it[1]))&&(P+=Oe^ye>=0?1:-1)}}return(R<-bi||R<bi&&N<-Ou)^1&P}function Vx(a,d,g,v){return function(w){var F,V,W,C=d(w),R=Ir(),P=d(R),N=!1,H={point:q,lineStart:Z,lineEnd:K,polygonStart:function(){H.point=te,H.lineStart=ae,H.lineEnd=oe,V=[],F=[]},polygonEnd:function(){H.point=q,H.lineStart=Z,H.lineEnd=K,V=Aa(V);var se=Vu(F,v);V.length?(N||(w.polygonStart(),N=!0),Bx(V,nS,se,g,w)):se&&(N||(w.polygonStart(),N=!0),w.lineStart(),g(null,null,1,w),w.lineEnd()),N&&(w.polygonEnd(),N=!1),V=F=null},sphere:function(){w.polygonStart(),w.lineStart(),g(null,null,1,w),w.lineEnd(),w.polygonEnd()}};function q(se,ue){a(se,ue)&&w.point(se,ue)}function ne(se,ue){C.point(se,ue)}function Z(){H.point=ne,C.lineStart()}function K(){H.point=q,C.lineEnd()}function te(se,ue){W.push([se,ue]),P.point(se,ue)}function ae(){P.lineStart(),W=[]}function oe(){te(W[0][0],W[0][1]),P.lineEnd();var _e,ye,Ke,ke,se=P.clean(),ue=R.result(),Ce=ue.length;if(W.pop(),F.push(W),W=null,Ce){if(1&se){if((ye=(Ke=ue[0]).length-1)>0){for(N||(w.polygonStart(),N=!0),w.lineStart(),_e=0;_e<ye;++_e)w.point((ke=Ke[_e])[0],ke[1]);w.lineEnd()}return}Ce>1&&2&se&&ue.push(ue.pop().concat(ue.shift())),V.push(ue.filter(Tw))}}return H}}function Tw(a){return a.length>1}function nS(a,d){return((a=a.x)[0]<0?a[1]-$s-bi:$s-a[1])-((d=d.x)[0]<0?d[1]-$s-bi:$s-d[1])}to.invert=to;const zx=Vx(function(){return!0},function iS(a){var w,d=NaN,g=NaN,v=NaN;return{lineStart:function(){a.lineStart(),w=1},point:function(C,R){var P=C>0?ur:-ur,N=dr(C-d);dr(N-ur)<bi?(a.point(d,g=(g+R)/2>0?$s:-$s),a.point(v,g),a.lineEnd(),a.lineStart(),a.point(P,g),a.point(C,g),w=0):v!==P&&N>=ur&&(dr(d-v)<bi&&(d-=v*bi),dr(C-P)<bi&&(C-=P*bi),g=function rS(a,d,g,v){var w,C,R=Qn(a-g);return dr(R)>bi?yf((Qn(d)*(C=si(v))*Qn(g)-Qn(v)*(w=si(d))*Qn(a))/(w*C*R)):(d+v)/2}(d,g,C,R),a.point(v,g),a.lineEnd(),a.lineStart(),a.point(P,g),w=0),a.point(d=C,g=R),v=P},lineEnd:function(){a.lineEnd(),d=g=NaN},clean:function(){return 2-w}}},function Hx(a,d,g,v){var w;if(null==a)v.point(-ur,w=g*$s),v.point(0,w),v.point(ur,w),v.point(ur,0),v.point(ur,-w),v.point(0,-w),v.point(-ur,-w),v.point(-ur,0),v.point(-ur,w);else if(dr(a[0]-d[0])>bi){var C=a[0]<d[0]?ur:-ur;v.point(-C,w=g*C/2),v.point(0,w),v.point(C,w)}else v.point(d[0],d[1])},[-ur,-$s]);function M_(a){var d=si(a),g=6*Si,v=d>0,w=dr(d)>bi;function R(V,W){return si(V)*si(W)>d}function N(V,W,H){var Z=[1,0,0],K=Ml(Oi(V),Oi(W)),te=Nu(K,K),ae=K[0],oe=te-ae*ae;if(!oe)return!H&&V;var se=d*te/oe,ue=-d*ae/oe,_e=Ml(Z,K),Ce=Kl(Z,se);Vn(Ce,Kl(K,ue));var Ke=_e,ke=Nu(Ce,Ke),Oe=Nu(Ke,Ke),ft=ke*ke-Oe*(Nu(Ce,Ce)-1);if(!(ft<0)){var it=Os(ft),le=Kl(Ke,(-ke-it)/Oe);if(Vn(le,Ce),le=X0(le),!H)return le;var Ge,me=V[0],Me=W[0],We=V[1],Se=W[1];Me<me&&(Ge=me,me=Me,Me=Ge);var De=Me-me,rt=dr(De-ur)<bi;if(!rt&&Se<We&&(Ge=We,We=Se,Se=Ge),rt||De<bi?rt?We+Se>0^le[1]<(dr(le[0]-me)<bi?We:Se):We<=le[1]&&le[1]<=Se:De>ur^(me<=le[0]&&le[0]<=Me)){var It=Kl(Ke,(-ke+it)/Oe);return Vn(It,Ce),[le,X0(It)]}}}function F(V,W){var H=v?a:ur-a,q=0;return V<-H?q|=1:V>H&&(q|=2),W<-H?q|=4:W>H&&(q|=8),q}return Vx(R,function P(V){var W,H,q,ne,Z;return{lineStart:function(){ne=q=!1,Z=1},point:function(K,te){var oe,ae=[K,te],se=R(K,te),ue=v?se?0:F(K,te):se?F(K+(K<0?ur:-ur),te):0;if(!W&&(ne=q=se)&&V.lineStart(),se!==q&&(!(oe=N(W,ae))||Ql(W,oe)||Ql(ae,oe))&&(ae[2]=1),se!==q)Z=0,se?(V.lineStart(),oe=N(ae,W),V.point(oe[0],oe[1])):(oe=N(W,ae),V.point(oe[0],oe[1],2),V.lineEnd()),W=oe;else if(w&&W&&v^se){var _e;!(ue&H)&&(_e=N(ae,W,!0))&&(Z=0,v?(V.lineStart(),V.point(_e[0][0],_e[0][1]),V.point(_e[1][0],_e[1][1]),V.lineEnd()):(V.point(_e[1][0],_e[1][1]),V.lineEnd(),V.lineStart(),V.point(_e[0][0],_e[0][1],3)))}se&&(!W||!Ql(W,ae))&&V.point(ae[0],ae[1]),W=ae,q=se,H=ue},lineEnd:function(){q&&V.lineEnd(),W=null},clean:function(){return Z|(ne&&q)<<1}}},function C(V,W,H,q){qp(q,a,g,H,V,W)},v?[0,-a]:[-ur,a-ur])}var w_=1e9,ky=-w_;function Ly(a,d,g,v){function w(F,V){return a<=F&&F<=g&&d<=V&&V<=v}function C(F,V,W,H){var q=0,ne=0;if(null==F||(q=R(F,W))!==(ne=R(V,W))||N(F,V)<0^W>0)do{H.point(0===q||3===q?a:g,q>1?v:d)}while((q=(q+W+4)%4)!==ne);else H.point(V[0],V[1])}function R(F,V){return dr(F[0]-a)<bi?V>0?0:3:dr(F[0]-g)<bi?V>0?2:1:dr(F[1]-d)<bi?V>0?1:0:V>0?3:2}function P(F,V){return N(F.x,V.x)}function N(F,V){var W=R(F,1),H=R(V,1);return W!==H?W-H:0===W?V[1]-F[1]:1===W?F[0]-V[0]:2===W?F[1]-V[1]:V[0]-F[0]}return function(F){var H,q,ne,Z,K,te,ae,oe,se,ue,_e,V=F,W=Ir(),Ce={point:ye,lineStart:function ft(){Ce.point=le,q&&q.push(ne=[]),ue=!0,se=!1,ae=oe=NaN},lineEnd:function it(){H&&(le(Z,K),te&&se&&W.rejoin(),H.push(W.result())),Ce.point=ye,se&&V.lineEnd()},polygonStart:function ke(){V=W,H=[],q=[],_e=!0},polygonEnd:function Oe(){var me=function Ke(){for(var me=0,Me=0,We=q.length;Me<We;++Me)for(var gt,It,Se=q[Me],Ge=1,De=Se.length,rt=Se[0],xt=rt[0],Vt=rt[1];Ge<De;++Ge)gt=xt,It=Vt,xt=(rt=Se[Ge])[0],Vt=rt[1],It<=v?Vt>v&&(xt-gt)*(v-It)>(Vt-It)*(a-gt)&&++me:Vt<=v&&(xt-gt)*(v-It)<(Vt-It)*(a-gt)&&--me;return me}(),Me=_e&&me,We=(H=Aa(H)).length;(Me||We)&&(F.polygonStart(),Me&&(F.lineStart(),C(null,null,1,F),F.lineEnd()),We&&Bx(H,P,me,C,F),F.polygonEnd()),V=F,H=q=ne=null}};function ye(me,Me){w(me,Me)&&V.point(me,Me)}function le(me,Me){var We=w(me,Me);if(q&&ne.push([me,Me]),ue)Z=me,K=Me,te=We,ue=!1,We&&(V.lineStart(),V.point(me,Me));else if(We&&se)V.point(me,Me);else{var Se=[ae=Math.max(ky,Math.min(w_,ae)),oe=Math.max(ky,Math.min(w_,oe))],Ge=[me=Math.max(ky,Math.min(w_,me)),Me=Math.max(ky,Math.min(w_,Me))];!function sS(a,d,g,v,w,C){var ne,R=a[0],P=a[1],V=0,W=1,H=d[0]-R,q=d[1]-P;if(ne=g-R,H||!(ne>0)){if(ne/=H,H<0){if(ne<V)return;ne<W&&(W=ne)}else if(H>0){if(ne>W)return;ne>V&&(V=ne)}if(ne=w-R,H||!(ne<0)){if(ne/=H,H<0){if(ne>W)return;ne>V&&(V=ne)}else if(H>0){if(ne<V)return;ne<W&&(W=ne)}if(ne=v-P,q||!(ne>0)){if(ne/=q,q<0){if(ne<V)return;ne<W&&(W=ne)}else if(q>0){if(ne>W)return;ne>V&&(V=ne)}if(ne=C-P,q||!(ne<0)){if(ne/=q,q<0){if(ne>W)return;ne>V&&(V=ne)}else if(q>0){if(ne<V)return;ne<W&&(W=ne)}return V>0&&(a[0]=R+V*H,a[1]=P+V*q),W<1&&(d[0]=R+W*H,d[1]=P+W*q),!0}}}}}(Se,Ge,a,d,g,v)?We&&(V.lineStart(),V.point(me,Me),_e=!1):(se||(V.lineStart(),V.point(Se[0],Se[1])),V.point(Ge[0],Ge[1]),We||V.lineEnd(),_e=!1)}ae=me,oe=Me,se=We}return Ce}}function Aw(){var w,C,R,a=0,d=0,g=960,v=500;return R={stream:function(P){return w&&C===P?w:w=Ly(a,d,g,v)(C=P)},extent:function(P){return arguments.length?(a=+P[0][0],d=+P[0][1],g=+P[1][0],v=+P[1][1],w=C=null,R):[[a,d],[g,v]]}}}var Oy,S,s,l,m={sphere:di,point:di,lineStart:function b(){m.point=i,m.lineEnd=p},lineEnd:di,polygonStart:di,polygonEnd:di};function p(){m.point=m.lineEnd=di}function i(a,d){S=a*=Si,s=Qn(d*=Si),l=si(d),m.point=o}function o(a,d){a*=Si;var g=Qn(d*=Si),v=si(d),w=dr(a-S),C=si(w),P=v*Qn(w),N=l*g-s*v*C,F=s*g+l*v*C;Oy.add(Po(Os(P*P+N*N),F)),S=a,s=g,l=v}function u(a){return Oy=new wo,Ma(a,m),+Oy}var f=[null,null],_={type:"LineString",coordinates:f};function x(a,d){return f[0]=a,f[1]=d,u(_)}var M={Feature:function(a,d){return D(a.geometry,d)},FeatureCollection:function(a,d){for(var g=a.features,v=-1,w=g.length;++v<w;)if(D(g[v].geometry,d))return!0;return!1}},E={Sphere:function(){return!0},Point:function(a,d){return k(a.coordinates,d)},MultiPoint:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)if(k(g[v],d))return!0;return!1},LineString:function(a,d){return O(a.coordinates,d)},MultiLineString:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)if(O(g[v],d))return!0;return!1},Polygon:function(a,d){return I(a.coordinates,d)},MultiPolygon:function(a,d){for(var g=a.coordinates,v=-1,w=g.length;++v<w;)if(I(g[v],d))return!0;return!1},GeometryCollection:function(a,d){for(var g=a.geometries,v=-1,w=g.length;++v<w;)if(D(g[v],d))return!0;return!1}};function D(a,d){return!(!a||!E.hasOwnProperty(a.type))&&E[a.type](a,d)}function k(a,d){return 0===x(a,d)}function O(a,d){for(var g,v,w,C=0,R=a.length;C<R;C++){if(0===(v=x(a[C],d))||C>0&&(w=x(a[C],a[C-1]))>0&&g<=w&&v<=w&&(g+v-w)*(1-Math.pow((g-v)/w,2))<Ou*w)return!0;g=v}return!1}function I(a,d){return!!Vu(a.map(U),B(d))}function U(a){return(a=a.map(B)).pop(),a}function B(a){return[a[0]*Si,a[1]*Si]}function j(a,d){return(a&&M.hasOwnProperty(a.type)?M[a.type]:D)(a,d)}function $(a,d,g){var v=So(a,d-bi,g).concat(d);return function(w){return v.map(function(C){return[w,C]})}}function G(a,d,g){var v=So(a,d-bi,g).concat(d);return function(w){return v.map(function(C){return[C,w]})}}function Q(){var a,d,g,v,w,C,R,P,H,q,ne,Z,N=10,F=N,V=90,W=360,K=2.5;function te(){return{type:"MultiLineString",coordinates:ae()}}function ae(){return So(Gp(v/V)*V,g,V).map(ne).concat(So(Gp(P/W)*W,R,W).map(Z)).concat(So(Gp(d/N)*N,a,N).filter(function(oe){return dr(oe%V)>bi}).map(H)).concat(So(Gp(C/F)*F,w,F).filter(function(oe){return dr(oe%W)>bi}).map(q))}return te.lines=function(){return ae().map(function(oe){return{type:"LineString",coordinates:oe}})},te.outline=function(){return{type:"Polygon",coordinates:[ne(v).concat(Z(R).slice(1),ne(g).reverse().slice(1),Z(P).reverse().slice(1))]}},te.extent=function(oe){return arguments.length?te.extentMajor(oe).extentMinor(oe):te.extentMinor()},te.extentMajor=function(oe){return arguments.length?(P=+oe[0][1],R=+oe[1][1],(v=+oe[0][0])>(g=+oe[1][0])&&(oe=v,v=g,g=oe),P>R&&(oe=P,P=R,R=oe),te.precision(K)):[[v,P],[g,R]]},te.extentMinor=function(oe){return arguments.length?(C=+oe[0][1],w=+oe[1][1],(d=+oe[0][0])>(a=+oe[1][0])&&(oe=d,d=a,a=oe),C>w&&(oe=C,C=w,w=oe),te.precision(K)):[[d,C],[a,w]]},te.step=function(oe){return arguments.length?te.stepMajor(oe).stepMinor(oe):te.stepMinor()},te.stepMajor=function(oe){return arguments.length?(V=+oe[0],W=+oe[1],te):[V,W]},te.stepMinor=function(oe){return arguments.length?(N=+oe[0],F=+oe[1],te):[N,F]},te.precision=function(oe){return arguments.length?(K=+oe,H=$(C,w,90),q=G(d,a,K),ne=$(P,R,90),Z=G(v,g,K),te):K},te.extentMajor([[-180,-90+bi],[180,90-bi]]).extentMinor([[-180,-80-bi],[180,80+bi]])}function J(){return Q()()}function Y(a,d){var g=a[0]*Si,v=a[1]*Si,w=d[0]*Si,C=d[1]*Si,R=si(v),P=Qn(v),N=si(C),F=Qn(C),V=R*si(g),W=R*Qn(g),H=N*si(w),q=N*Qn(w),ne=2*qo(Os(xl(C-v)+R*N*xl(w-g))),Z=Qn(ne),K=ne?function(te){var ae=Qn(te*=ne)/Z,oe=Qn(ne-te)/Z,se=oe*V+ae*H,ue=oe*W+ae*q,_e=oe*P+ae*F;return[Po(ue,se)*Qr,Po(_e,Os(se*se+ue*ue))*Qr]}:function(){return[g*Qr,v*Qr]};return K.distance=ne,K}const ee=a=>a;var fe,ce,de,Ye,he=new wo,xe=new wo,Qe={point:di,lineStart:di,lineEnd:di,polygonStart:function(){Qe.lineStart=Ne,Qe.lineEnd=Pt},polygonEnd:function(){Qe.lineStart=Qe.lineEnd=Qe.point=di,he.add(dr(xe)),xe=new wo},result:function(){var a=he/2;return he=new wo,a}};function Ne(){Qe.point=$e}function $e(a,d){Qe.point=et,fe=de=a,ce=Ye=d}function et(a,d){xe.add(Ye*a-de*d),de=a,Ye=d}function Pt(){et(fe,ce)}const Dt=Qe;var Ze=1/0,at=Ze,bt=-Ze,tn=bt;const Ft={point:function St(a,d){a<Ze&&(Ze=a),a>bt&&(bt=a),d<at&&(at=d),d>tn&&(tn=d)},lineStart:di,lineEnd:di,polygonStart:di,polygonEnd:di,result:function(){var a=[[Ze,at],[bt,tn]];return bt=tn=-(at=Ze=1/0),a}};var Bt,En,cn,Ae,Et=0,an=0,je=0,Tt=0,Ut=0,Nt=0,en=0,tt=0,wt=0,ge={point:dt,lineStart:Ot,lineEnd:ve,polygonStart:function(){ge.lineStart=lt,ge.lineEnd=nt},polygonEnd:function(){ge.point=dt,ge.lineStart=Ot,ge.lineEnd=ve},result:function(){var a=wt?[en/wt,tt/wt]:Nt?[Tt/Nt,Ut/Nt]:je?[Et/je,an/je]:[NaN,NaN];return Et=an=je=Tt=Ut=Nt=en=tt=wt=0,a}};function dt(a,d){Et+=a,an+=d,++je}function Ot(){ge.point=hn}function hn(a,d){ge.point=we,dt(cn=a,Ae=d)}function we(a,d){var g=a-cn,v=d-Ae,w=Os(g*g+v*v);Tt+=w*(cn+a)/2,Ut+=w*(Ae+d)/2,Nt+=w,dt(cn=a,Ae=d)}function ve(){ge.point=dt}function lt(){ge.point=zt}function nt(){sn(Bt,En)}function zt(a,d){ge.point=sn,dt(Bt=cn=a,En=Ae=d)}function sn(a,d){var g=a-cn,v=d-Ae,w=Os(g*g+v*v);Tt+=w*(cn+a)/2,Ut+=w*(Ae+d)/2,Nt+=w,en+=(w=Ae*a-cn*d)*(cn+a),tt+=w*(Ae+d),wt+=3*w,dt(cn=a,Ae=d)}const Xe=ge;function vt(a){this._context=a}vt.prototype={_radius:4.5,pointRadius:function(a){return this._radius=a,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(a,d){switch(this._point){case 0:this._context.moveTo(a,d),this._point=1;break;case 1:this._context.lineTo(a,d);break;default:this._context.moveTo(a+this._radius,d),this._context.arc(a,d,this._radius,0,xa)}},result:di};var yn,In,Wn,qe,_t,pt=new wo,Yt={point:di,lineStart:function(){Yt.point=wn},lineEnd:function(){yn&&jn(In,Wn),Yt.point=di},polygonStart:function(){yn=!0},polygonEnd:function(){yn=null},result:function(){var a=+pt;return pt=new wo,a}};function wn(a,d){Yt.point=jn,In=qe=a,Wn=_t=d}function jn(a,d){pt.add(Os((qe-=a)*qe+(_t-=d)*_t)),qe=a,_t=d}const ot=Yt;let qt,vn,Hn,qn;class br{constructor(d){this._append=null==d?Nr:function ko(a){const d=Math.floor(a);if(!(d>=0))throw new RangeError(`invalid digits: ${a}`);if(d>15)return Nr;if(d!==qt){const g=10**d;qt=d,vn=function(w){let C=1;this._+=w[0];for(const R=w.length;C<R;++C)this._+=Math.round(arguments[C]*g)/g+w[C]}}return vn}(d),this._radius=4.5,this._=""}pointRadius(d){return this._radius=+d,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(d,g){switch(this._point){case 0:this._append`M${d},${g}`,this._point=1;break;case 1:this._append`L${d},${g}`;break;default:if(this._append`M${d},${g}`,this._radius!==Hn||this._append!==vn){const v=this._radius,w=this._;this._="",this._append`m0,${v}a${v},${v} 0 1,1 0,${-2*v}a${v},${v} 0 1,1 0,${2*v}z`,Hn=v,vn=this._append,qn=this._,this._=w}this._+=qn}}result(){const d=this._;return this._="",d.length?d:null}}function Nr(a){let d=1;this._+=a[0];for(const g=a.length;d<g;++d)this._+=arguments[d]+a[d]}function Id(a,d){let w,C,g=3,v=4.5;function R(P){return P&&("function"==typeof v&&C.pointRadius(+v.apply(this,arguments)),Ma(P,w(C))),C.result()}return R.area=function(P){return Ma(P,w(Dt)),Dt.result()},R.measure=function(P){return Ma(P,w(ot)),ot.result()},R.bounds=function(P){return Ma(P,w(Ft)),Ft.result()},R.centroid=function(P){return Ma(P,w(Xe)),Xe.result()},R.projection=function(P){return arguments.length?(w=null==P?(a=null,ee):(a=P).stream,R):a},R.context=function(P){return arguments.length?(C=null==P?(d=null,new br(g)):new vt(d=P),"function"!=typeof v&&C.pointRadius(v),R):d},R.pointRadius=function(P){return arguments.length?(v="function"==typeof P?P:(C.pointRadius(+P),+P),R):v},R.digits=function(P){if(!arguments.length)return g;if(null==P)g=null;else{const N=Math.floor(P);if(!(N>=0))throw new RangeError(`invalid digits: ${P}`);g=N}return null===d&&(C=new br(g)),R},R.projection(a).digits(g).context(d)}function ho(a){return{stream:$a(a)}}function $a(a){return function(d){var g=new Sl;for(var v in a)g[v]=a[v];return g.stream=d,g}}function Sl(){}function Fe(a,d,g){var v=a.clipExtent&&a.clipExtent();return a.scale(150).translate([0,0]),null!=v&&a.clipExtent(null),Ma(g,a.stream(Ft)),d(Ft.result()),null!=v&&a.clipExtent(v),a}function Ht(a,d,g){return Fe(a,function(v){var w=d[1][0]-d[0][0],C=d[1][1]-d[0][1],R=Math.min(w/(v[1][0]-v[0][0]),C/(v[1][1]-v[0][1])),P=+d[0][0]+(w-R*(v[1][0]+v[0][0]))/2,N=+d[0][1]+(C-R*(v[1][1]+v[0][1]))/2;a.scale(150*R).translate([P,N])},g)}function fn(a,d,g){return Ht(a,[[0,0],d],g)}function Lt(a,d,g){return Fe(a,function(v){var w=+d,C=w/(v[1][0]-v[0][0]),R=(w-C*(v[1][0]+v[0][0]))/2,P=-C*v[0][1];a.scale(150*C).translate([R,P])},g)}function _n(a,d,g){return Fe(a,function(v){var w=+d,C=w/(v[1][1]-v[0][1]),R=-C*v[0][0],P=(w-C*(v[1][1]+v[0][1]))/2;a.scale(150*C).translate([R,P])},g)}Sl.prototype={constructor:Sl,point:function(a,d){this.stream.point(a,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ee=16,mt=si(30*Si);function Ct(a,d){return+d?function Gt(a,d){function g(v,w,C,R,P,N,F,V,W,H,q,ne,Z,K){var te=F-v,ae=V-w,oe=te*te+ae*ae;if(oe>4*d&&Z--){var se=R+H,ue=P+q,_e=N+ne,Ce=Os(se*se+ue*ue+_e*_e),ye=qo(_e/=Ce),Ke=dr(dr(_e)-1)<bi||dr(C-W)<bi?(C+W)/2:Po(ue,se),ke=a(Ke,ye),Oe=ke[0],ft=ke[1],it=Oe-v,le=ft-w,me=ae*it-te*le;(me*me/oe>d||dr((te*it+ae*le)/oe-.5)>.3||R*H+P*q+N*ne<mt)&&(g(v,w,C,R,P,N,Oe,ft,Ke,se/=Ce,ue/=Ce,_e,Z,K),K.point(Oe,ft),g(Oe,ft,Ke,se,ue,_e,F,V,W,H,q,ne,Z,K))}}return function(v){var w,C,R,P,N,F,V,W,H,q,ne,Z,K={point:te,lineStart:ae,lineEnd:se,polygonStart:function(){v.polygonStart(),K.lineStart=ue},polygonEnd:function(){v.polygonEnd(),K.lineStart=ae}};function te(ye,Ke){ye=a(ye,Ke),v.point(ye[0],ye[1])}function ae(){W=NaN,K.point=oe,v.lineStart()}function oe(ye,Ke){var ke=Oi([ye,Ke]),Oe=a(ye,Ke);g(W,H,V,q,ne,Z,W=Oe[0],H=Oe[1],V=ye,q=ke[0],ne=ke[1],Z=ke[2],Ee,v),v.point(W,H)}function se(){K.point=te,v.lineEnd()}function ue(){ae(),K.point=_e,K.lineEnd=Ce}function _e(ye,Ke){oe(w=ye,Ke),C=W,R=H,P=q,N=ne,F=Z,K.point=oe}function Ce(){g(W,H,V,q,ne,Z,C,R,w,P,N,F,Ee,v),K.lineEnd=se,se()}return K}}(a,d):function ht(a){return $a({point:function(d,g){d=a(d,g),this.stream.point(d[0],d[1])}})}(a)}var Fn=$a({point:function(a,d){this.stream.point(a*Si,d*Si)}});function Mi(a,d,g,v,w,C){if(!C)return function Zn(a,d,g,v,w){function C(R,P){return[d+a*(R*=v),g-a*(P*=w)]}return C.invert=function(R,P){return[(R-d)/a*v,(g-P)/a*w]},C}(a,d,g,v,w);var R=si(C),P=Qn(C),N=R*a,F=P*a,V=R/a,W=P/a,H=(P*g-R*d)/a,q=(P*d+R*g)/a;function ne(Z,K){return[N*(Z*=v)-F*(K*=w)+d,g-F*Z-N*K]}return ne.invert=function(Z,K){return[v*(V*Z-W*K+H),w*(q-W*Z-V*K)]},ne}function _i(a){return Gi(function(){return a})()}function Gi(a){var d,V,te,ae,oe,_e,Ce,ye,Ke,ke,g=150,v=480,w=250,C=0,R=0,P=0,N=0,F=0,W=0,H=1,q=1,ne=null,Z=zx,K=null,se=ee,ue=.5;function Oe(me){return ye(me[0]*Si,me[1]*Si)}function ft(me){return(me=ye.invert(me[0],me[1]))&&[me[0]*Qr,me[1]*Qr]}function it(){var me=Mi(g,0,0,H,q,W).apply(null,d(C,R)),Me=Mi(g,v-me[0],w-me[1],H,q,W);return V=Wr(P,N,F),Ce=Fs(d,Me),ye=Fs(V,Ce),_e=Ct(Ce,ue),le()}function le(){return Ke=ke=null,Oe}return Oe.stream=function(me){return Ke&&ke===me?Ke:Ke=Fn(function Nn(a){return $a({point:function(d,g){var v=a(d,g);return this.stream.point(v[0],v[1])}})}(V)(Z(_e(se(ke=me)))))},Oe.preclip=function(me){return arguments.length?(Z=me,ne=void 0,le()):Z},Oe.postclip=function(me){return arguments.length?(se=me,K=te=ae=oe=null,le()):se},Oe.clipAngle=function(me){return arguments.length?(Z=+me?M_(ne=me*Si):(ne=null,zx),le()):ne*Qr},Oe.clipExtent=function(me){return arguments.length?(se=null==me?(K=te=ae=oe=null,ee):Ly(K=+me[0][0],te=+me[0][1],ae=+me[1][0],oe=+me[1][1]),le()):null==K?null:[[K,te],[ae,oe]]},Oe.scale=function(me){return arguments.length?(g=+me,it()):g},Oe.translate=function(me){return arguments.length?(v=+me[0],w=+me[1],it()):[v,w]},Oe.center=function(me){return arguments.length?(C=me[0]%360*Si,R=me[1]%360*Si,it()):[C*Qr,R*Qr]},Oe.rotate=function(me){return arguments.length?(P=me[0]%360*Si,N=me[1]%360*Si,F=me.length>2?me[2]%360*Si:0,it()):[P*Qr,N*Qr,F*Qr]},Oe.angle=function(me){return arguments.length?(W=me%360*Si,it()):W*Qr},Oe.reflectX=function(me){return arguments.length?(H=me?-1:1,it()):H<0},Oe.reflectY=function(me){return arguments.length?(q=me?-1:1,it()):q<0},Oe.precision=function(me){return arguments.length?(_e=Ct(Ce,ue=me*me),le()):Os(ue)},Oe.fitExtent=function(me,Me){return Ht(Oe,me,Me)},Oe.fitSize=function(me,Me){return fn(Oe,me,Me)},Oe.fitWidth=function(me,Me){return Lt(Oe,me,Me)},Oe.fitHeight=function(me,Me){return _n(Oe,me,Me)},function(){return d=a.apply(this,arguments),Oe.invert=d.invert&&ft,it()}}function vi(a){var d=0,g=ur/3,v=Gi(a),w=v(d,g);return w.parallels=function(C){return arguments.length?v(d=C[0]*Si,g=C[1]*Si):[d*Qr,g*Qr]},w}function Zo(a,d){var g=Qn(a),v=(g+Qn(d))/2;if(dr(v)<bi)return function li(a){var d=si(a);function g(v,w){return[v*d,Qn(w)/d]}return g.invert=function(v,w){return[v/d,qo(w*d)]},g}(a);var w=1+g*(2*v-g),C=Os(w)/v;function R(P,N){var F=Os(w-2*v*Qn(N))/v;return[F*Qn(P*=v),C-F*si(P)]}return R.invert=function(P,N){var F=C-N,V=Po(P,dr(F))*qs(F);return F*v<0&&(V-=ur*qs(P)*qs(F)),[V/v,qo((w-(P*P+F*F)*v*v)/(2*v))]},R}function jr(){return vi(Zo).scale(155.424).center([0,33.6442])}function $c(){return jr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hr(){var a,d,v,C,P,N,g=$c(),w=jr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),R=jr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),F={point:function(H,q){N=[H,q]}};function V(H){var q=H[0],ne=H[1];return N=null,v.point(q,ne),N||(C.point(q,ne),N)||(P.point(q,ne),N)}function W(){return a=d=null,V}return V.invert=function(H){var q=g.scale(),ne=g.translate(),Z=(H[0]-ne[0])/q,K=(H[1]-ne[1])/q;return(K>=.12&&K<.234&&Z>=-.425&&Z<-.214?w:K>=.166&&K<.234&&Z>=-.214&&Z<-.115?R:g).invert(H)},V.stream=function(H){return a&&d===H?a:a=function Ns(a){var d=a.length;return{point:function(g,v){for(var w=-1;++w<d;)a[w].point(g,v)},sphere:function(){for(var g=-1;++g<d;)a[g].sphere()},lineStart:function(){for(var g=-1;++g<d;)a[g].lineStart()},lineEnd:function(){for(var g=-1;++g<d;)a[g].lineEnd()},polygonStart:function(){for(var g=-1;++g<d;)a[g].polygonStart()},polygonEnd:function(){for(var g=-1;++g<d;)a[g].polygonEnd()}}}([g.stream(d=H),w.stream(H),R.stream(H)])},V.precision=function(H){return arguments.length?(g.precision(H),w.precision(H),R.precision(H),W()):g.precision()},V.scale=function(H){return arguments.length?(g.scale(H),w.scale(.35*H),R.scale(H),V.translate(g.translate())):g.scale()},V.translate=function(H){if(!arguments.length)return g.translate();var q=g.scale(),ne=+H[0],Z=+H[1];return v=g.translate(H).clipExtent([[ne-.455*q,Z-.238*q],[ne+.455*q,Z+.238*q]]).stream(F),C=w.translate([ne-.307*q,Z+.201*q]).clipExtent([[ne-.425*q+bi,Z+.12*q+bi],[ne-.214*q-bi,Z+.234*q-bi]]).stream(F),P=R.translate([ne-.205*q,Z+.212*q]).clipExtent([[ne-.214*q+bi,Z+.166*q+bi],[ne-.115*q-bi,Z+.234*q-bi]]).stream(F),W()},V.fitExtent=function(H,q){return Ht(V,H,q)},V.fitSize=function(H,q){return fn(V,H,q)},V.fitWidth=function(H,q){return Lt(V,H,q)},V.fitHeight=function(H,q){return _n(V,H,q)},V.scale(1070)}function Xp(a){return function(d,g){var v=si(d),w=si(g),C=a(v*w);return C===1/0?[2,0]:[C*w*Qn(d),C*Qn(g)]}}function Er(a){return function(d,g){var v=Os(d*d+g*g),w=a(v),C=Qn(w),R=si(w);return[Po(d*C,v*R),qo(v&&g*C/v)]}}var qa=Xp(function(a){return Os(2/(1+a))});function J0(){return _i(qa).scale(124.75).clipAngle(179.999)}qa.invert=Er(function(a){return 2*qo(a/2)});var Lo=Xp(function(a){return(a=Ed(a))&&a/Qn(a)});function S_(){return _i(Lo).scale(79.4188).clipAngle(179.999)}function bo(a,d){return[a,p_(uo(($s+d)/2))]}function Ef(){return Fy(bo).scale(961/xa)}function Fy(a){var P,N,F,d=_i(a),g=d.center,v=d.scale,w=d.translate,C=d.clipExtent,R=null;function V(){var W=ur*v(),H=d(Ux(d.rotate()).invert([0,0]));return C(null==R?[[H[0]-W,H[1]-W],[H[0]+W,H[1]+W]]:a===bo?[[Math.max(H[0]-W,R),P],[Math.min(H[0]+W,N),F]]:[[R,Math.max(H[1]-W,P)],[N,Math.min(H[1]+W,F)]])}return d.scale=function(W){return arguments.length?(v(W),V()):v()},d.translate=function(W){return arguments.length?(w(W),V()):w()},d.center=function(W){return arguments.length?(g(W),V()):g()},d.clipExtent=function(W){return arguments.length?(null==W?R=P=N=F=null:(R=+W[0][0],P=+W[0][1],N=+W[1][0],F=+W[1][1]),V()):null==R?null:[[R,P],[N,F]]},V()}function yc(a){return uo(($s+a)/2)}function Gx(a,d){var g=si(a),v=a===d?Qn(a):p_(g/si(d))/p_(yc(d)/yc(a)),w=g*lg(yc(a),v)/v;if(!v)return bo;function C(R,P){w>0?P<-$s+bi&&(P=-$s+bi):P>$s-bi&&(P=$s-bi);var N=w/lg(yc(P),v);return[N*Qn(v*R),w-N*si(v*R)]}return C.invert=function(R,P){var N=w-P,F=qs(v)*Os(R*R+N*N),V=Po(R,dr(N))*qs(N);return N*v<0&&(V-=ur*qs(R)*qs(N)),[V/v,2*yf(lg(w/F,1/v))-$s]},C}function UE(){return vi(Gx).scale(109.5).parallels([30,30])}function Q0(a,d){return[a,d]}function BE(){return _i(Q0).scale(152.63)}function SA(a,d){var g=si(a),v=a===d?Qn(a):(g-si(d))/(d-a),w=g/v+a;if(dr(v)<bi)return Q0;function C(R,P){var N=w-P,F=v*R;return[N*Qn(F),w-N*si(F)]}return C.invert=function(R,P){var N=w-P,F=Po(R,dr(N))*qs(N);return N*v<0&&(F-=ur*qs(R)*qs(N)),[F/v,w-qs(v)*Os(R*R+N*N)]},C}function EA(){return vi(SA).scale(131.154).center([0,13.9389])}Lo.invert=Er(function(a){return a}),bo.invert=function(a,d){return[a,2*yf(Px(d))-$s]},Q0.invert=Q0;var Dw=1.340264,Rw=-.081106,Iw=893e-6,Pw=.003796,oS=Os(3)/2;function VE(a,d){var g=qo(oS*Qn(d)),v=g*g,w=v*v*v;return[a*si(g)/(oS*(Dw+3*Rw*v+w*(7*Iw+9*Pw*v))),g*(Dw+Rw*v+w*(Iw+Pw*v))]}function M2(){return _i(VE).scale(177.158)}function aS(a,d){var g=si(d),v=si(a)*g;return[g*Qn(a)/v,Qn(d)/v]}function CA(){return _i(aS).scale(144.049).clipAngle(60)}function w2(){var R,P,F,V,W,K,te,a=1,d=0,g=0,v=1,w=1,C=0,N=null,H=1,q=1,ne=$a({point:function(se,ue){var _e=oe([se,ue]);this.stream.point(_e[0],_e[1])}}),Z=ee;function ae(){return H=a*v,q=a*w,K=te=null,oe}function oe(se){var ue=se[0]*H,_e=se[1]*q;if(C){var Ce=_e*R-ue*P;ue=ue*R+_e*P,_e=Ce}return[ue+d,_e+g]}return oe.invert=function(se){var ue=se[0]-d,_e=se[1]-g;if(C){var Ce=_e*R+ue*P;ue=ue*R-_e*P,_e=Ce}return[ue/H,_e/q]},oe.stream=function(se){return K&&te===se?K:K=ne(Z(te=se))},oe.postclip=function(se){return arguments.length?(Z=se,N=F=V=W=null,ae()):Z},oe.clipExtent=function(se){return arguments.length?(Z=null==se?(N=F=V=W=null,ee):Ly(N=+se[0][0],F=+se[0][1],V=+se[1][0],W=+se[1][1]),ae()):null==N?null:[[N,F],[V,W]]},oe.scale=function(se){return arguments.length?(a=+se,ae()):a},oe.translate=function(se){return arguments.length?(d=+se[0],g=+se[1],ae()):[d,g]},oe.angle=function(se){return arguments.length?(P=Qn(C=se%360*Si),R=si(C),ae()):C*Qr},oe.reflectX=function(se){return arguments.length?(v=se?-1:1,ae()):v<0},oe.reflectY=function(se){return arguments.length?(w=se?-1:1,ae()):w<0},oe.fitExtent=function(se,ue){return Ht(oe,se,ue)},oe.fitSize=function(se,ue){return fn(oe,se,ue)},oe.fitWidth=function(se,ue){return Lt(oe,se,ue)},oe.fitHeight=function(se,ue){return _n(oe,se,ue)},oe}function zE(a,d){var g=d*d,v=g*g;return[a*(.8707-.131979*g+v*(v*(.003971*g-.001529*v)-.013791)),d*(1.007226+g*(.015085+v*(.028874*g-.044475-.005916*v)))]}function TA(){return _i(zE).scale(175.295)}function HE(a,d){return[si(d)*Qn(a),Qn(d)]}function S2(){return _i(HE).scale(249.5).clipAngle(90+bi)}function GE(a,d){var g=si(d),v=1+si(a)*g;return[g*Qn(a)/v,Qn(d)/v]}function WE(){return _i(GE).scale(250).clipAngle(142)}function kw(a,d){return[p_(uo(($s+d)/2)),-a]}function AA(){var a=Fy(kw),d=a.center,g=a.rotate;return a.center=function(v){return arguments.length?d([-v[1],v[0]]):[(v=d())[1],-v[0]]},a.rotate=function(v){return arguments.length?g([v[0],v[1],v.length>2?v[2]+90:90]):[(v=g())[0],v[1],v[2]-90]},g([0,0,90]).scale(159.155)}function jE(a,d){return a.parent===d.parent?1:2}function C2(a,d){return a+d.x}function T2(a,d){return Math.max(a,d.y)}function DA(){var a=jE,d=1,g=1,v=!1;function w(C){var R,P=0;C.eachAfter(function(H){var q=H.children;q?(H.x=function E2(a){return a.reduce(C2,0)/a.length}(q),H.y=function $E(a){return 1+a.reduce(T2,0)}(q)):(H.x=R?P+=a(H,R):0,H.y=0,R=H)});var N=function Cr(a){for(var d;d=a.children;)a=d[0];return a}(C),F=function Wx(a){for(var d;d=a.children;)a=d[d.length-1];return a}(C),V=N.x-a(N,F)/2,W=F.x+a(F,N)/2;return C.eachAfter(v?function(H){H.x=(H.x-C.x)*d,H.y=(C.y-H.y)*g}:function(H){H.x=(H.x-V)/(W-V)*d,H.y=(1-(C.y?H.y/C.y:1))*g})}return w.separation=function(C){return arguments.length?(a=C,w):a},w.size=function(C){return arguments.length?(v=!1,d=+C[0],g=+C[1],w):v?null:[d,g]},w.nodeSize=function(C){return arguments.length?(v=!0,d=+C[0],g=+C[1],w):v?[d,g]:null},w}function A2(a){var d=0,g=a.children,v=g&&g.length;if(v)for(;--v>=0;)d+=g[v].value;else d=1;a.value=d}function ZE(a,d){a instanceof Map?(a=[void 0,a],void 0===d&&(d=h3)):void 0===d&&(d=OA);for(var v,C,R,P,N,g=new Ny(a),w=[g];v=w.pop();)if((R=d(v.data))&&(N=(R=Array.from(R)).length))for(v.children=R,P=N-1;P>=0;--P)w.push(C=R[P]=new Ny(R[P])),C.parent=v,C.depth=v.depth+1;return g.eachBefore(NA)}function OA(a){return a.children}function h3(a){return Array.isArray(a)?a[1]:null}function FA(a){void 0!==a.data.value&&(a.value=a.data.value),a.data=a.data.data}function NA(a){var d=0;do{a.height=d}while((a=a.parent)&&a.height<++d)}function Ny(a){this.data=a,this.depth=this.height=0,this.parent=null}function KE(a){return null==a?null:UA(a)}function UA(a){if("function"!=typeof a)throw new Error;return a}function Uy(){return 0}function jx(a){return function(){return a}}VE.invert=function(a,d){for(var R,g=d,v=g*g,w=v*v*v,C=0;C<12&&(w=(v=(g-=R=(g*(Dw+Rw*v+w*(Iw+Pw*v))-d)/(Dw+3*Rw*v+w*(7*Iw+9*Pw*v)))*g)*v*v,!(dr(R)<Ou));++C);return[oS*a*(Dw+3*Rw*v+w*(7*Iw+9*Pw*v))/si(g),qo(Qn(g)/oS)]},aS.invert=Er(yf),zE.invert=function(a,d){var w,g=d,v=25;do{var C=g*g,R=C*C;g-=w=(g*(1.007226+C*(.015085+R*(.028874*C-.044475-.005916*R)))-d)/(1.007226+C*(.045255+R*(.259866*C-.311325-.005916*11*R)))}while(dr(w)>bi&&--v>0);return[a/(.8707+(C=g*g)*(C*(C*C*C*(.003971-.001529*C)-.013791)-.131979)),g]},HE.invert=Er(qo),GE.invert=Er(function(a){return 2*yf(a)}),kw.invert=function(a,d){return[-d,2*yf(Px(a))-$s]},Ny.prototype=ZE.prototype={constructor:Ny,count:function d3(){return this.eachAfter(A2)},each:function RA(a,d){let g=-1;for(const v of this)a.call(d,v,++g,this);return this},eachAfter:function D2(a,d){for(var C,R,P,g=this,v=[g],w=[],N=-1;g=v.pop();)if(w.push(g),C=g.children)for(R=0,P=C.length;R<P;++R)v.push(C[R]);for(;g=w.pop();)a.call(d,g,++N,this);return this},eachBefore:function qE(a,d){for(var w,C,g=this,v=[g],R=-1;g=v.pop();)if(a.call(d,g,++R,this),w=g.children)for(C=w.length-1;C>=0;--C)v.push(w[C]);return this},find:function cS(a,d){let g=-1;for(const v of this)if(a.call(d,v,++g,this))return v},sum:function R2(a){return this.eachAfter(function(d){for(var g=+a(d.data)||0,v=d.children,w=v&&v.length;--w>=0;)g+=v[w].value;d.value=g})},sort:function XE(a){return this.eachBefore(function(d){d.children&&d.children.sort(a)})},path:function YE(a){for(var d=this,g=function IA(a,d){if(a===d)return a;var g=a.ancestors(),v=d.ancestors(),w=null;for(a=g.pop(),d=v.pop();a===d;)w=a,a=g.pop(),d=v.pop();return w}(d,a),v=[d];d!==g;)v.push(d=d.parent);for(var w=v.length;a!==g;)v.splice(w,0,a),a=a.parent;return v},ancestors:function PA(){for(var a=this,d=[a];a=a.parent;)d.push(a);return d},descendants:function kA(){return Array.from(this)},leaves:function LA(){var a=[];return this.eachBefore(function(d){d.children||a.push(d)}),a},links:function I2(){var a=this,d=[];return a.each(function(g){g!==a&&d.push({source:g.parent,target:g})}),d},copy:function k2(){return ZE(this).eachBefore(FA)},[Symbol.iterator]:function*P2(){var d,v,w,C,a=this,g=[a];do{for(d=g.reverse(),g=[];a=d.pop();)if(yield a,v=a.children)for(w=0,C=v.length;w<C;++w)g.push(v[w])}while(g.length)}};const L2=1664525,O2=1013904223,BA=4294967296;function JE(){let a=1;return()=>(a=(L2*a+O2)%BA)/BA}function U2(a){return VA(a,JE())}function VA(a,d){for(var C,R,g=0,v=(a=function N2(a,d){let v,w,g=a.length;for(;g;)w=d()*g--|0,v=a[g],a[g]=a[w],a[w]=v;return a}(Array.from(a),d)).length,w=[];g<v;)C=a[g],R&&QE(R,C)?++g:(R=zA(w=B2(w,C)),g=0);return R}function B2(a,d){var g,v;if(lS(d,a))return[d];for(g=0;g<a.length;++g)if(ev(d,a[g])&&lS($x(a[g],d),a))return[a[g],d];for(g=0;g<a.length-1;++g)for(v=g+1;v<a.length;++v)if(ev($x(a[g],a[v]),d)&&ev($x(a[g],d),a[v])&&ev($x(a[v],d),a[g])&&lS(Ah(a[g],a[v],d),a))return[a[g],a[v],d];throw new Error}function ev(a,d){var g=a.r-d.r,v=d.x-a.x,w=d.y-a.y;return g<0||g*g<v*v+w*w}function QE(a,d){var g=a.r-d.r+1e-9*Math.max(a.r,d.r,1),v=d.x-a.x,w=d.y-a.y;return g>0&&g*g>v*v+w*w}function lS(a,d){for(var g=0;g<d.length;++g)if(!QE(a,d[g]))return!1;return!0}function zA(a){switch(a.length){case 1:return function HA(a){return{x:a.x,y:a.y,r:a.r}}(a[0]);case 2:return $x(a[0],a[1]);case 3:return Ah(a[0],a[1],a[2])}}function $x(a,d){var g=a.x,v=a.y,w=a.r,C=d.x,R=d.y,P=d.r,N=C-g,F=R-v,V=P-w,W=Math.sqrt(N*N+F*F);return{x:(g+C+N/W*V)/2,y:(v+R+F/W*V)/2,r:(W+w+P)/2}}function Ah(a,d,g){var v=a.x,w=a.y,C=a.r,R=d.x,P=d.y,N=d.r,F=g.x,V=g.y,W=g.r,H=v-R,q=v-F,ne=w-P,Z=w-V,K=N-C,te=W-C,ae=v*v+w*w-C*C,oe=ae-R*R-P*P+N*N,se=ae-F*F-V*V+W*W,ue=q*ne-H*Z,_e=(ne*se-Z*oe)/(2*ue)-v,Ce=(Z*K-ne*te)/ue,ye=(q*oe-H*se)/(2*ue)-w,Ke=(H*te-q*K)/ue,ke=Ce*Ce+Ke*Ke-1,Oe=2*(C+_e*Ce+ye*Ke),ft=_e*_e+ye*ye-C*C,it=-(Math.abs(ke)>1e-6?(Oe+Math.sqrt(Oe*Oe-4*ke*ft))/(2*ke):ft/Oe);return{x:v+_e+Ce*it,y:w+ye+Ke*it,r:it}}function GA(a,d,g){var w,C,P,N,v=a.x-d.x,R=a.y-d.y,F=v*v+R*R;F?(C=d.r+g.r,N=a.r+g.r,(C*=C)>(N*=N)?(w=(F+N-C)/(2*F),P=Math.sqrt(Math.max(0,N/F-w*w)),g.x=a.x-w*v-P*R,g.y=a.y-w*R+P*v):(w=(F+C-N)/(2*F),P=Math.sqrt(Math.max(0,C/F-w*w)),g.x=d.x+w*v-P*R,g.y=d.y+w*R+P*v)):(g.x=d.x+g.r,g.y=d.y)}function V2(a,d){var g=a.r+d.r-1e-6,v=d.x-a.x,w=d.y-a.y;return g>0&&g*g>v*v+w*w}function gg(a){var d=a._,g=a.next._,v=d.r+g.r,w=(d.x*g.r+g.x*d.r)/v,C=(d.y*g.r+g.y*d.r)/v;return w*w+C*C}function By(a){this._=a,this.next=null,this.previous=null}function WA(a,d){if(!(C=(a=function F2(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}(a)).length))return 0;var g,v,w,C,R,P,N,F,V,W,H;if((g=a[0]).x=0,g.y=0,!(C>1))return g.r;if(g.x=-(v=a[1]).r,v.x=g.r,v.y=0,!(C>2))return g.r+v.r;GA(v,g,w=a[2]),g=new By(g),v=new By(v),w=new By(w),g.next=w.previous=v,v.next=g.previous=w,w.next=v.previous=g;e:for(N=3;N<C;++N){GA(g._,v._,w=a[N]),w=new By(w),F=v.next,V=g.previous,W=v._.r,H=g._.r;do{if(W<=H){if(V2(F._,w._)){g.next=v=F,v.previous=g,--N;continue e}W+=F._.r,F=F.next}else{if(V2(V._,w._)){(g=V).next=v,v.previous=g,--N;continue e}H+=V._.r,V=V.previous}}while(F!==V.next);for(w.previous=g,w.next=v,g.next=v.previous=v=w,R=gg(g);(w=w.next)!==v;)(P=gg(w))<R&&(g=w,R=P);v=g.next}for(g=[v._],w=v;(w=w.next)!==v;)g.push(w._);for(w=VA(g,d),N=0;N<C;++N)(g=a[N]).x-=w.x,g.y-=w.y;return w.r}function z2(a){return WA(a,JE()),a}function H2(a){return Math.sqrt(a.value)}function Lw(){var a=null,d=1,g=1,v=Uy;function w(C){const R=JE();return C.x=d/2,C.y=g/2,a?C.eachBefore(jA(a)).eachAfter(Ow(v,.5,R)).eachBefore(Ai(1)):C.eachBefore(jA(H2)).eachAfter(Ow(Uy,1,R)).eachAfter(Ow(v,C.r/Math.min(d,g),R)).eachBefore(Ai(Math.min(d,g)/(2*C.r))),C}return w.radius=function(C){return arguments.length?(a=KE(C),w):a},w.size=function(C){return arguments.length?(d=+C[0],g=+C[1],w):[d,g]},w.padding=function(C){return arguments.length?(v="function"==typeof C?C:jx(+C),w):v},w}function jA(a){return function(d){d.children||(d.r=Math.max(0,+a(d)||0))}}function Ow(a,d,g){return function(v){if(w=v.children){var w,C,N,R=w.length,P=a(v)*d||0;if(P)for(C=0;C<R;++C)w[C].r+=P;if(N=WA(w,g),P)for(C=0;C<R;++C)w[C].r-=P;v.r=N+P}}}function Ai(a){return function(d){var g=d.parent;d.r*=a,g&&(d.x=g.x+a*d.x,d.y=g.y+a*d.y)}}function $A(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function Yp(a,d,g,v,w){for(var R,C=a.children,P=-1,N=C.length,F=a.value&&(v-d)/a.value;++P<N;)(R=C[P]).y0=g,R.y1=w,R.x0=d,R.x1=d+=R.value*F}function Cf(){var a=1,d=1,g=0,v=!1;function w(R){var P=R.height+1;return R.x0=R.y0=g,R.x1=a,R.y1=d/P,R.eachBefore(function C(R,P){return function(N){N.children&&Yp(N,N.x0,R*(N.depth+1)/P,N.x1,R*(N.depth+2)/P);var F=N.x0,V=N.y0,W=N.x1-g,H=N.y1-g;W<F&&(F=W=(F+W)/2),H<V&&(V=H=(V+H)/2),N.x0=F,N.y0=V,N.x1=W,N.y1=H}}(d,P)),v&&R.eachBefore($A),R}return w.round=function(R){return arguments.length?(v=!!R,w):v},w.size=function(R){return arguments.length?(a=+R[0],d=+R[1],w):[a,d]},w.padding=function(R){return arguments.length?(g=+R,w):g},w}var G2={depth:-1},qA={},eC={};function uS(a){return a.id}function Pd(a){return a.parentId}function W2(){var g,a=uS,d=Pd;function v(w){var N,F,V,W,H,q,ne,Z,C=Array.from(w),R=a,P=d,K=new Map;if(null!=g){const te=C.map((se,ue)=>function j2(a){let d=(a=`${a}`).length;return dS(a,d-1)&&!dS(a,d-2)&&(a=a.slice(0,-1)),"/"===a[0]?a:`/${a}`}(g(se,ue,w))),ae=te.map(tC),oe=new Set(te).add("");for(const se of ae)oe.has(se)||(oe.add(se),te.push(se),ae.push(tC(se)),C.push(eC));R=(se,ue)=>te[ue],P=(se,ue)=>ae[ue]}for(V=0,N=C.length;V<N;++V)q=C[V]=new Ny(F=C[V]),null!=(ne=R(F,V,w))&&(ne+="")&&(Z=q.id=ne,K.set(Z,K.has(Z)?qA:q)),null!=(ne=P(F,V,w))&&(ne+="")&&(q.parent=ne);for(V=0;V<N;++V)if(ne=(q=C[V]).parent){if(!(H=K.get(ne)))throw new Error("missing: "+ne);if(H===qA)throw new Error("ambiguous: "+ne);H.children?H.children.push(q):H.children=[q],q.parent=H}else{if(W)throw new Error("multiple roots");W=q}if(!W)throw new Error("no root");if(null!=g){for(;W.data===eC&&1===W.children.length;)W=W.children[0],--N;for(let te=C.length-1;te>=0&&(q=C[te]).data===eC;--te)q.data=null}if(W.parent=G2,W.eachBefore(function(te){te.depth=te.parent.depth+1,--N}).eachBefore(NA),W.parent=null,N>0)throw new Error("cycle");return W}return v.id=function(w){return arguments.length?(a=KE(w),v):a},v.parentId=function(w){return arguments.length?(d=KE(w),v):d},v.path=function(w){return arguments.length?(g=KE(w),v):g},v}function tC(a){let d=a.length;if(d<2)return"";for(;--d>1&&!dS(a,d););return a.slice(0,d)}function dS(a,d){if("/"===a[d]){let g=0;for(;d>0&&"\\"===a[--d];)++g;if(!(1&g))return!0}return!1}function nC(a,d){return a.parent===d.parent?1:2}function hS(a){var d=a.children;return d?d[0]:a.t}function Fw(a){var d=a.children;return d?d[d.length-1]:a.t}function iC(a,d,g){var v=g/(d.i-a.i);d.c-=v,d.s+=g,a.c+=v,d.z+=g,d.m+=g}function rC(a,d,g){return a.a.parent===d.parent?a.a:g}function qx(a,d){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=d}function q2(){var a=nC,d=1,g=1,v=null;function w(F){var V=function $2(a){for(var g,w,C,R,P,d=new qx(a,0),v=[d];g=v.pop();)if(C=g._.children)for(g.children=new Array(P=C.length),R=P-1;R>=0;--R)v.push(w=g.children[R]=new qx(C[R],R)),w.parent=g;return(d.parent=new qx(null,0)).children=[d],d}(F);if(V.eachAfter(C),V.parent.m=-V.z,V.eachBefore(R),v)F.eachBefore(N);else{var W=F,H=F,q=F;F.eachBefore(function(ae){ae.x<W.x&&(W=ae),ae.x>H.x&&(H=ae),ae.depth>q.depth&&(q=ae)});var ne=W===H?1:a(W,H)/2,Z=ne-W.x,K=d/(H.x+ne+Z),te=g/(q.depth||1);F.eachBefore(function(ae){ae.x=(ae.x+Z)*K,ae.y=ae.depth*te})}return F}function C(F){var V=F.children,W=F.parent.children,H=F.i?W[F.i-1]:null;if(V){!function XA(a){for(var C,d=0,g=0,v=a.children,w=v.length;--w>=0;)(C=v[w]).z+=d,C.m+=d,d+=C.s+(g+=C.c)}(F);var q=(V[0].z+V[V.length-1].z)/2;H?(F.z=H.z+a(F._,H._),F.m=F.z-q):F.z=q}else H&&(F.z=H.z+a(F._,H._));F.parent.A=function P(F,V,W){if(V){for(var se,H=F,q=F,ne=V,Z=H.parent.children[0],K=H.m,te=q.m,ae=ne.m,oe=Z.m;ne=Fw(ne),H=hS(H),ne&&H;)Z=hS(Z),(q=Fw(q)).a=F,(se=ne.z+ae-H.z-K+a(ne._,H._))>0&&(iC(rC(ne,F,W),F,se),K+=se,te+=se),ae+=ne.m,K+=H.m,oe+=Z.m,te+=q.m;ne&&!Fw(q)&&(q.t=ne,q.m+=ae-te),H&&!hS(Z)&&(Z.t=H,Z.m+=K-oe,W=F)}return W}(F,H,F.parent.A||W[0])}function R(F){F._.x=F.z+F.parent.m,F.m+=F.parent.m}function N(F){F.x*=d,F.y=F.depth*g}return w.separation=function(F){return arguments.length?(a=F,w):a},w.size=function(F){return arguments.length?(v=!1,d=+F[0],g=+F[1],w):v?null:[d,g]},w.nodeSize=function(F){return arguments.length?(v=!0,d=+F[0],g=+F[1],w):v?[d,g]:null},w}function fS(a,d,g,v,w){for(var R,C=a.children,P=-1,N=C.length,F=a.value&&(w-g)/a.value;++P<N;)(R=C[P]).x0=d,R.x1=v,R.y0=g,R.y1=g+=R.value*F}qx.prototype=Object.create(Ny.prototype);var YA=(1+Math.sqrt(5))/2;function sC(a,d,g,v,w,C){for(var N,F,q,ne,K,te,ae,oe,se,ue,_e,R=[],P=d.children,V=0,W=0,H=P.length,Z=d.value;V<H;){q=w-g,ne=C-v;do{K=P[W++].value}while(!K&&W<H);for(te=ae=K,_e=K*K*(ue=Math.max(ne/q,q/ne)/(Z*a)),se=Math.max(ae/_e,_e/te);W<H;++W){if(K+=F=P[W].value,F<te&&(te=F),F>ae&&(ae=F),_e=K*K*ue,(oe=Math.max(ae/_e,_e/te))>se){K-=F;break}se=oe}R.push(N={value:K,dice:q<ne,children:P.slice(V,W)}),N.dice?Yp(N,g,v,w,Z?v+=ne*K/Z:C):fS(N,g,v,Z?g+=q*K/Z:w,C),Z-=K,V=W}return R}const pS=function a(d){function g(v,w,C,R,P){sC(d,v,w,C,R,P)}return g.ratio=function(v){return a((v=+v)>1?v:1)},g}(YA);function rr(){var a=pS,d=!1,g=1,v=1,w=[0],C=Uy,R=Uy,P=Uy,N=Uy,F=Uy;function V(H){return H.x0=H.y0=0,H.x1=g,H.y1=v,H.eachBefore(W),w=[0],d&&H.eachBefore($A),H}function W(H){var q=w[H.depth],ne=H.x0+q,Z=H.y0+q,K=H.x1-q,te=H.y1-q;K<ne&&(ne=K=(ne+K)/2),te<Z&&(Z=te=(Z+te)/2),H.x0=ne,H.y0=Z,H.x1=K,H.y1=te,H.children&&(q=w[H.depth+1]=C(H)/2,ne+=F(H)-q,Z+=R(H)-q,(K-=P(H)-q)<ne&&(ne=K=(ne+K)/2),(te-=N(H)-q)<Z&&(Z=te=(Z+te)/2),a(H,ne,Z,K,te))}return V.round=function(H){return arguments.length?(d=!!H,V):d},V.size=function(H){return arguments.length?(g=+H[0],v=+H[1],V):[g,v]},V.tile=function(H){return arguments.length?(a=UA(H),V):a},V.padding=function(H){return arguments.length?V.paddingInner(H).paddingOuter(H):V.paddingInner()},V.paddingInner=function(H){return arguments.length?(C="function"==typeof H?H:jx(+H),V):C},V.paddingOuter=function(H){return arguments.length?V.paddingTop(H).paddingRight(H).paddingBottom(H).paddingLeft(H):V.paddingTop()},V.paddingTop=function(H){return arguments.length?(R="function"==typeof H?H:jx(+H),V):R},V.paddingRight=function(H){return arguments.length?(P="function"==typeof H?H:jx(+H),V):P},V.paddingBottom=function(H){return arguments.length?(N="function"==typeof H?H:jx(+H),V):N},V.paddingLeft=function(H){return arguments.length?(F="function"==typeof H?H:jx(+H),V):F},V}function no(a,d,g,v,w){var R,N,C=a.children,P=C.length,F=new Array(P+1);for(F[0]=N=R=0;R<P;++R)F[R+1]=N+=C[R].value;!function V(W,H,q,ne,Z,K,te){if(W>=H-1){var ae=C[W];return ae.x0=ne,ae.y0=Z,ae.x1=K,void(ae.y1=te)}for(var oe=F[W],se=q/2+oe,ue=W+1,_e=H-1;ue<_e;){var Ce=ue+_e>>>1;F[Ce]<se?ue=Ce+1:_e=Ce}se-F[ue-1]<F[ue]-se&&W+1<ue&&--ue;var ye=F[ue]-oe,Ke=q-ye;if(K-ne>te-Z){var ke=q?(ne*Ke+K*ye)/q:K;V(W,ue,ye,ne,Z,ke,te),V(ue,H,Ke,ke,Z,K,te)}else{var Oe=q?(Z*Ke+te*ye)/q:te;V(W,ue,ye,ne,Z,K,Oe),V(ue,H,Ke,ne,Oe,K,te)}}(0,P,a.value,d,g,v,w)}function El(a,d,g,v,w){(1&a.depth?fS:Yp)(a,d,g,v,w)}const sr=function a(d){function g(v,w,C,R,P){if((N=v._squarify)&&N.ratio===d)for(var N,F,V,W,q,H=-1,ne=N.length,Z=v.value;++H<ne;){for(V=(F=N[H]).children,W=F.value=0,q=V.length;W<q;++W)F.value+=V[W].value;F.dice?Yp(F,w,C,R,Z?C+=(P-C)*F.value/Z:P):fS(F,w,C,Z?w+=(R-w)*F.value/Z:R,P),Z-=F.value}else v._squarify=N=sC(d,v,w,C,R,P),N.ratio=d}return g.ratio=function(v){return a((v=+v)>1?v:1)},g}(YA);function X2(a){var d=a.length;return function(g){return a[Math.max(0,Math.min(d-1,Math.floor(g*d)))]}}function ZA(a,d){var g=Gh(+a,+d);return function(v){var w=g(v);return w-360*Math.floor(w/360)}}function Nw(a,d){return a=+a,d=+d,function(g){return Math.round(a*(1-g)+d*g)}}var Y2=1e-12;function oC(a){return((a=Math.exp(a))+1/a)/2}const Vy=function a(d,g,v){function w(C,R){var K,te,P=C[0],N=C[1],F=C[2],H=R[2],q=R[0]-P,ne=R[1]-N,Z=q*q+ne*ne;if(Z<Y2)te=Math.log(H/F)/d,K=function(Ce){return[P+Ce*q,N+Ce*ne,F*Math.exp(d*Ce*te)]};else{var ae=Math.sqrt(Z),oe=(H*H-F*F+v*Z)/(2*F*g*ae),se=(H*H-F*F-v*Z)/(2*H*g*ae),ue=Math.log(Math.sqrt(oe*oe+1)-oe),_e=Math.log(Math.sqrt(se*se+1)-se);te=(_e-ue)/d,K=function(Ce){var ye=Ce*te,Ke=oC(ue),ke=F/(g*ae)*(Ke*function zu(a){return((a=Math.exp(2*a))-1)/(a+1)}(d*ye+ue)-function aC(a){return((a=Math.exp(a))-1/a)/2}(ue));return[P+ke*q,N+ke*ne,F*Ke/oC(d*ye+ue)]}}return K.duration=1e3*te*d/Math.SQRT2,K}return w.rho=function(C){var R=Math.max(.001,+C),P=R*R;return a(R,P,P*P)},w}(Math.SQRT2,2,4);function KA(a){return function(d,g){var v=a((d=Mm(d)).h,(g=Mm(g)).h),w=cr(d.s,g.s),C=cr(d.l,g.l),R=cr(d.opacity,g.opacity);return function(P){return d.h=v(P),d.s=w(P),d.l=C(P),d.opacity=R(P),d+""}}}const Z2=KA(Gh);var f3=KA(cr);function p3(a,d){var g=cr((a=Kv(a)).l,(d=Kv(d)).l),v=cr(a.a,d.a),w=cr(a.b,d.b),C=cr(a.opacity,d.opacity);return function(R){return a.l=g(R),a.a=v(R),a.b=w(R),a.opacity=C(R),a+""}}function cC(a){return function(d,g){var v=a((d=Ki(d)).h,(g=Ki(g)).h),w=cr(d.c,g.c),C=cr(d.l,g.l),R=cr(d.opacity,g.opacity);return function(P){return d.h=v(P),d.c=w(P),d.l=C(P),d.opacity=R(P),d+""}}}const lC=cC(Gh);var Uw=cC(cr);function JA(a){return function d(g){function v(w,C){var R=a((w=aa(w)).h,(C=aa(C)).h),P=cr(w.s,C.s),N=cr(w.l,C.l),F=cr(w.opacity,C.opacity);return function(V){return w.h=R(V),w.s=P(V),w.l=N(Math.pow(V,g)),w.opacity=F(V),w+""}}return g=+g,v.gamma=d,v}(1)}const uC=JA(Gh);var mS=JA(cr);function dC(a,d){void 0===d&&(d=a,a=Ts);for(var g=0,v=d.length-1,w=d[0],C=new Array(v<0?0:v);g<v;)C[g]=a(w,w=d[++g]);return function(R){var P=Math.max(0,Math.min(v-1,Math.floor(R*=v)));return C[P](R-P)}}function K2(a,d){for(var g=new Array(d),v=0;v<d;++v)g[v]=a(v/(d-1));return g}function J2(a){for(var v,d=-1,g=a.length,w=a[g-1],C=0;++d<g;)C+=(v=w)[1]*(w=a[d])[0]-v[0]*w[1];return C/2}function Q2(a){for(var C,P,d=-1,g=a.length,v=0,w=0,R=a[g-1],N=0;++d<g;)N+=P=(C=R)[0]*(R=a[d])[1]-R[0]*C[1],v+=(C[0]+R[0])*P,w+=(C[1]+R[1])*P;return[v/(N*=3),w/N]}function hC(a,d,g){return(d[0]-a[0])*(g[1]-a[1])-(d[1]-a[1])*(g[0]-a[0])}function QA(a,d){return a[0]-d[0]||a[1]-d[1]}function fC(a){const d=a.length,g=[0,1];let w,v=2;for(w=2;w<d;++w){for(;v>1&&hC(a[g[v-2]],a[g[v-1]],a[w])<=0;)--v;g[v++]=w}return g.slice(0,v)}function gS(a){if((g=a.length)<3)return null;var d,g,v=new Array(g),w=new Array(g);for(d=0;d<g;++d)v[d]=[+a[d][0],+a[d][1],d];for(v.sort(QA),d=0;d<g;++d)w[d]=[v[d][0],-v[d][1]];var C=fC(v),R=fC(w),P=R[0]===C[0],N=R[R.length-1]===C[C.length-1],F=[];for(d=C.length-1;d>=0;--d)F.push(a[v[C[d]][2]]);for(d=+P;d<R.length-N;++d)F.push(a[v[R[d]][2]]);return F}function pC(a,d){for(var N,F,g=a.length,v=a[g-1],w=d[0],C=d[1],R=v[0],P=v[1],V=!1,W=0;W<g;++W)N=(v=a[W])[0],(F=v[1])>C!=P>C&&w<(R-N)*(C-F)/(P-F)+N&&(V=!V),R=N,P=F;return V}function m3(a){for(var w,C,d=-1,g=a.length,v=a[g-1],R=v[0],P=v[1],N=0;++d<g;)w=R,C=P,w-=R=(v=a[d])[0],C-=P=v[1],N+=Math.hypot(w,C);return N}const qc=Math.random,eP=function a(d){function g(v,w){return v=null==v?0:+v,w=null==w?1:+w,1===arguments.length?(w=v,v=0):w-=v,function(){return d()*w+v}}return g.source=a,g}(qc),eD=function a(d){function g(v,w){return arguments.length<2&&(w=v,v=0),v=Math.floor(v),w=Math.floor(w)-v,function(){return Math.floor(d()*w+v)}}return g.source=a,g}(qc),tv=function a(d){function g(v,w){var C,R;return v=null==v?0:+v,w=null==w?1:+w,function(){var P;if(null!=C)P=C,C=null;else do{C=2*d()-1,P=2*d()-1,R=C*C+P*P}while(!R||R>1);return v+w*P*Math.sqrt(-2*Math.log(R)/R)}}return g.source=a,g}(qc),tP=function a(d){var g=tv.source(d);function v(){var w=g.apply(this,arguments);return function(){return Math.exp(w())}}return v.source=a,v}(qc),mC=function a(d){function g(v){return(v=+v)<=0?()=>0:function(){for(var w=0,C=v;C>1;--C)w+=d();return w+C*d()}}return g.source=a,g}(qc),gC=function a(d){var g=mC.source(d);function v(w){if(0==(w=+w))return d;var C=g(w);return function(){return C()/w}}return v.source=a,v}(qc),g3=function a(d){function g(v){return function(){return-Math.log1p(-d())/v}}return g.source=a,g}(qc),nP=function a(d){function g(v){if((v=+v)<0)throw new RangeError("invalid alpha");return v=1/-v,function(){return Math.pow(1-d(),v)}}return g.source=a,g}(qc),_3=function a(d){function g(v){if((v=+v)<0||v>1)throw new RangeError("invalid p");return function(){return Math.floor(d()+v)}}return g.source=a,g}(qc),tD=function a(d){function g(v){if((v=+v)<0||v>1)throw new RangeError("invalid p");return 0===v?()=>1/0:1===v?()=>1:(v=Math.log1p(-v),function(){return 1+Math.floor(Math.log1p(-d())/v)})}return g.source=a,g}(qc),_C=function a(d){var g=tv.source(d)();function v(w,C){if((w=+w)<0)throw new RangeError("invalid k");if(0===w)return()=>0;if(C=null==C?1:+C,1===w)return()=>-Math.log1p(-d())*C;var R=(w<1?w+1:w)-1/3,P=1/(3*Math.sqrt(R)),N=w<1?()=>Math.pow(d(),1/w):()=>1;return function(){do{do{var F=g(),V=1+P*F}while(V<=0);V*=V*V;var W=1-d()}while(W>=1-.0331*F*F*F*F&&Math.log(W)>=.5*F*F+R*(1-V+Math.log(V)));return R*V*N()*C}}return v.source=a,v}(qc),nD=function a(d){var g=_C.source(d);function v(w,C){var R=g(w),P=g(C);return function(){var N=R();return 0===N?0:N/(N+P())}}return v.source=a,v}(qc),vC=function a(d){var g=tD.source(d),v=nD.source(d);function w(C,R){return C=+C,(R=+R)>=1?()=>C:R<=0?()=>0:function(){for(var P=0,N=C,F=R;N*F>16&&N*(1-F)>16;){var V=Math.floor((N+1)*F),W=v(V,N-V+1)();W<=F?(P+=V,N-=V,F=(F-W)/(1-W)):(N=V-1,F/=W)}for(var H=F<.5,ne=g(H?F:1-F),Z=ne(),K=0;Z<=N;++K)Z+=ne();return P+(H?K:N-K)}}return w.source=a,w}(qc),iD=function a(d){function g(v,w,C){var R;return 0==(v=+v)?R=P=>-Math.log(P):(v=1/v,R=P=>Math.pow(P,v)),w=null==w?0:+w,C=null==C?1:+C,function(){return w+C*R(-Math.log1p(-d()))}}return g.source=a,g}(qc),iP=function a(d){function g(v,w){return v=null==v?0:+v,w=null==w?1:+w,function(){return v+w*Math.tan(Math.PI*d())}}return g.source=a,g}(qc),rD=function a(d){function g(v,w){return v=null==v?0:+v,w=null==w?1:+w,function(){var C=d();return v+w*Math.log(C/(1-C))}}return g.source=a,g}(qc),sD=function a(d){var g=_C.source(d),v=vC.source(d);function w(C){return function(){for(var R=0,P=C;P>16;){var N=Math.floor(.875*P),F=g(N)();if(F>P)return R+v(N-1,P/F)();R+=N,P-=F}for(var V=-Math.log1p(-d()),W=0;V<=P;++W)V-=Math.log1p(-d());return R+W}}return w.source=a,w}(qc),rP=1664525,sP=1013904223,yC=1/4294967296;function oP(a=Math.random()){let d=0|(0<=a&&a<1?a/yC:Math.abs(a));return()=>(d=rP*d+sP|0,yC*(d>>>0))}function Dh(a,d){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(d).domain(a)}return this}function _g(a,d){switch(arguments.length){case 0:break;case 1:"function"==typeof a?this.interpolator(a):this.range(a);break;default:this.domain(a),"function"==typeof d?this.interpolator(d):this.range(d)}return this}const _S=Symbol("implicit");function vS(){var a=new Oh,d=[],g=[],v=_S;function w(C){let R=a.get(C);if(void 0===R){if(v!==_S)return v;a.set(C,R=d.push(C)-1)}return g[R%g.length]}return w.domain=function(C){if(!arguments.length)return d.slice();d=[],a=new Oh;for(const R of C)a.has(R)||a.set(R,d.push(R)-1);return w},w.range=function(C){return arguments.length?(g=Array.from(C),w):g.slice()},w.unknown=function(C){return arguments.length?(v=C,w):v},w.copy=function(){return vS(d,g).unknown(v)},Dh.apply(w,arguments),w}function bC(){var C,R,a=vS().unknown(void 0),d=a.domain,g=a.range,v=0,w=1,P=!1,N=0,F=0,V=.5;function W(){var H=d().length,q=w<v,ne=q?w:v,Z=q?v:w;C=(Z-ne)/Math.max(1,H-N+2*F),P&&(C=Math.floor(C)),ne+=(Z-ne-C*(H-N))*V,R=C*(1-N),P&&(ne=Math.round(ne),R=Math.round(R));var K=So(H).map(function(te){return ne+C*te});return g(q?K.reverse():K)}return delete a.unknown,a.domain=function(H){return arguments.length?(d(H),W()):d()},a.range=function(H){return arguments.length?([v,w]=H,v=+v,w=+w,W()):[v,w]},a.rangeRound=function(H){return[v,w]=H,v=+v,w=+w,P=!0,W()},a.bandwidth=function(){return R},a.step=function(){return C},a.round=function(H){return arguments.length?(P=!!H,W()):P},a.padding=function(H){return arguments.length?(N=Math.min(1,F=+H),W()):N},a.paddingInner=function(H){return arguments.length?(N=Math.min(1,H),W()):N},a.paddingOuter=function(H){return arguments.length?(F=+H,W()):F},a.align=function(H){return arguments.length?(V=Math.max(0,Math.min(1,H)),W()):V},a.copy=function(){return bC(d(),[v,w]).round(P).paddingInner(N).paddingOuter(F).align(V)},Dh.apply(W(),arguments)}function oD(a){var d=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return oD(d())},a}function v3(){return oD(bC.apply(null,arguments).paddingInner(1))}function xC(a){return+a}var aP=[0,1];function kd(a){return a}function cD(a,d){return(d-=a=+a)?function(g){return(g-a)/d}:function aD(a){return function(){return a}}(isNaN(d)?NaN:.5)}function b3(a,d,g){var v=a[0],w=a[1],C=d[0],R=d[1];return w<v?(v=cD(w,v),C=g(R,C)):(v=cD(v,w),C=g(C,R)),function(P){return C(v(P))}}function x3(a,d,g){var v=Math.min(a.length,d.length)-1,w=new Array(v),C=new Array(v),R=-1;for(a[v]<a[0]&&(a=a.slice().reverse(),d=d.slice().reverse());++R<v;)w[R]=cD(a[R],a[R+1]),C[R]=g(d[R],d[R+1]);return function(P){var N=He(a,P,1,v)-1;return C[N](w[N](P))}}function yS(a,d){return d.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function zy(){var v,w,C,P,N,F,a=aP,d=aP,g=Ts,R=kd;function V(){var H=Math.min(a.length,d.length);return R!==kd&&(R=function y3(a,d){var g;return a>d&&(g=a,a=d,d=g),function(v){return Math.max(a,Math.min(d,v))}}(a[0],a[H-1])),P=H>2?x3:b3,N=F=null,W}function W(H){return null==H||isNaN(H=+H)?C:(N||(N=P(a.map(v),d,g)))(v(R(H)))}return W.invert=function(H){return R(w((F||(F=P(d,a.map(v),Ln)))(H)))},W.domain=function(H){return arguments.length?(a=Array.from(H,xC),V()):a.slice()},W.range=function(H){return arguments.length?(d=Array.from(H),V()):d.slice()},W.rangeRound=function(H){return d=Array.from(H),g=Nw,V()},W.clamp=function(H){return arguments.length?(R=!!H||kd,V()):R!==kd},W.interpolate=function(H){return arguments.length?(g=H,V()):g},W.unknown=function(H){return arguments.length?(C=H,W):C},function(H,q){return v=H,w=q,V()}}function lD(){return zy()(kd,kd)}function Bw(a,d,g,v){var C,w=um(a,d,g);switch((v=ku(v??",f")).type){case"s":var R=Math.max(Math.abs(a),Math.abs(d));return null==v.precision&&!isNaN(C=ci(w,R))&&(v.precision=C),Sd(v,R);case"":case"e":case"g":case"p":case"r":null==v.precision&&!isNaN(C=Mw(w,Math.max(Math.abs(a),Math.abs(d))))&&(v.precision=C-("e"===v.type));break;case"f":case"%":null==v.precision&&!isNaN(C=cg(w))&&(v.precision=C-2*("%"===v.type))}return Xl(v)}function Zp(a){var d=a.domain;return a.ticks=function(g){var v=d();return gr(v[0],v[v.length-1],g??10)},a.tickFormat=function(g,v){var w=d();return Bw(w[0],w[w.length-1],g??10,v)},a.nice=function(g){null==g&&(g=10);var N,F,v=d(),w=0,C=v.length-1,R=v[w],P=v[C],V=10;for(P<R&&(F=R,R=P,P=F,F=w,w=C,C=F);V-- >0;){if((F=Xr(R,P,g))===N)return v[w]=R,v[C]=P,d(v);if(F>0)R=Math.floor(R/F)*F,P=Math.ceil(P/F)*F;else{if(!(F<0))break;R=Math.ceil(R*F)/F,P=Math.floor(P*F)/F}N=F}return a},a}function Xx(){var a=lD();return a.copy=function(){return yS(a,Xx())},Dh.apply(a,arguments),Zp(a)}function MC(a){var d;function g(v){return null==v||isNaN(v=+v)?d:v}return g.invert=g,g.domain=g.range=function(v){return arguments.length?(a=Array.from(v,xC),g):a.slice()},g.unknown=function(v){return arguments.length?(d=v,g):d},g.copy=function(){return MC(a).unknown(d)},a=arguments.length?Array.from(a,xC):[0,1],Zp(g)}function cP(a,d){var R,g=0,v=(a=a.slice()).length-1,w=a[g],C=a[v];return C<w&&(R=g,g=v,v=R,R=w,w=C,C=R),a[g]=d.floor(w),a[v]=d.ceil(C),a}function bS(a){return Math.log(a)}function wC(a){return Math.exp(a)}function xS(a){return-Math.log(-a)}function M3(a){return-Math.exp(-a)}function tu(a){return isFinite(a)?+("1e"+a):a<0?0:a}function Kp(a){return(d,g)=>-a(-d,g)}function SC(a){const d=a(bS,wC),g=d.domain;let w,C,v=10;function R(){return w=function uP(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),d=>Math.log(d)/a)}(v),C=function lP(a){return 10===a?tu:a===Math.E?Math.exp:d=>Math.pow(a,d)}(v),g()[0]<0?(w=Kp(w),C=Kp(C),a(xS,M3)):a(bS,wC),d}return d.base=function(P){return arguments.length?(v=+P,R()):v},d.domain=function(P){return arguments.length?(g(P),R()):g()},d.ticks=P=>{const N=g();let F=N[0],V=N[N.length-1];const W=V<F;W&&([F,V]=[V,F]);let ne,Z,H=w(F),q=w(V);const K=null==P?10:+P;let te=[];if(!(v%1)&&q-H<K){if(H=Math.floor(H),q=Math.ceil(q),F>0){for(;H<=q;++H)for(ne=1;ne<v;++ne)if(Z=H<0?ne/C(-H):ne*C(H),!(Z<F)){if(Z>V)break;te.push(Z)}}else for(;H<=q;++H)for(ne=v-1;ne>=1;--ne)if(Z=H>0?ne/C(-H):ne*C(H),!(Z<F)){if(Z>V)break;te.push(Z)}2*te.length<K&&(te=gr(F,V,K))}else te=gr(H,q,Math.min(q-H,K)).map(C);return W?te.reverse():te},d.tickFormat=(P,N)=>{if(null==P&&(P=10),null==N&&(N=10===v?"s":","),"function"!=typeof N&&(!(v%1)&&null==(N=ku(N)).precision&&(N.trim=!0),N=Xl(N)),P===1/0)return N;const F=Math.max(1,v*P/d.ticks().length);return V=>{let W=V/C(Math.round(w(V)));return W*v<v-.5&&(W*=v),W<=F?N(V):""}},d.nice=()=>g(cP(g(),{floor:P=>C(Math.floor(w(P))),ceil:P=>C(Math.ceil(w(P)))})),d}function dP(){const a=SC(zy()).domain([1,10]);return a.copy=()=>yS(a,dP()).base(a.base()),Dh.apply(a,arguments),a}function hP(a){return function(d){return Math.sign(d)*Math.log1p(Math.abs(d/a))}}function fP(a){return function(d){return Math.sign(d)*Math.expm1(Math.abs(d))*a}}function EC(a){var d=1,g=a(hP(d),fP(d));return g.constant=function(v){return arguments.length?a(hP(d=+v),fP(d)):d},Zp(g)}function CC(){var a=EC(zy());return a.copy=function(){return yS(a,CC()).constant(a.constant())},Dh.apply(a,arguments)}function uD(a){return function(d){return d<0?-Math.pow(-d,a):Math.pow(d,a)}}function w3(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function pP(a){return a<0?-a*a:a*a}function MS(a){var d=a(kd,kd),g=1;return d.exponent=function(w){return arguments.length?(g=+w,function v(){return 1===g?a(kd,kd):.5===g?a(w3,pP):a(uD(g),uD(1/g))}()):g},Zp(d)}function wS(){var a=MS(zy());return a.copy=function(){return yS(a,wS()).exponent(a.exponent())},Dh.apply(a,arguments),a}function S3(){return wS.apply(null,arguments).exponent(.5)}function Tf(a){return Math.sign(a)*a*a}function SS(){var v,a=lD(),d=[0,1],g=!1;function w(C){var R=function mP(a){return Math.sign(a)*Math.sqrt(Math.abs(a))}(a(C));return isNaN(R)?v:g?Math.round(R):R}return w.invert=function(C){return a.invert(Tf(C))},w.domain=function(C){return arguments.length?(a.domain(C),w):a.domain()},w.range=function(C){return arguments.length?(a.range((d=Array.from(C,xC)).map(Tf)),w):d.slice()},w.rangeRound=function(C){return w.range(C).round(!0)},w.round=function(C){return arguments.length?(g=!!C,w):g},w.clamp=function(C){return arguments.length?(a.clamp(C),w):a.clamp()},w.unknown=function(C){return arguments.length?(v=C,w):v},w.copy=function(){return SS(a.domain(),d).round(g).clamp(a.clamp()).unknown(v)},Dh.apply(w,arguments),Zp(w)}function dD(){var v,a=[],d=[],g=[];function w(){var R=0,P=Math.max(1,d.length);for(g=new Array(P-1);++R<P;)g[R-1]=Cv(a,R/P);return C}function C(R){return null==R||isNaN(R=+R)?v:d[He(g,R)]}return C.invertExtent=function(R){var P=d.indexOf(R);return P<0?[NaN,NaN]:[P>0?g[P-1]:a[0],P<g.length?g[P]:a[a.length-1]]},C.domain=function(R){if(!arguments.length)return a.slice();a=[];for(let P of R)null!=P&&!isNaN(P=+P)&&a.push(P);return a.sort(rn),w()},C.range=function(R){return arguments.length?(d=Array.from(R),w()):d.slice()},C.unknown=function(R){return arguments.length?(v=R,C):v},C.quantiles=function(){return g.slice()},C.copy=function(){return dD().domain(a).range(d).unknown(v)},Dh.apply(C,arguments)}function gP(){var C,a=0,d=1,g=1,v=[.5],w=[0,1];function R(N){return null!=N&&N<=N?w[He(v,N,0,g)]:C}function P(){var N=-1;for(v=new Array(g);++N<g;)v[N]=((N+1)*d-(N-g)*a)/(g+1);return R}return R.domain=function(N){return arguments.length?([a,d]=N,a=+a,d=+d,P()):[a,d]},R.range=function(N){return arguments.length?(g=(w=Array.from(N)).length-1,P()):w.slice()},R.invertExtent=function(N){var F=w.indexOf(N);return F<0?[NaN,NaN]:F<1?[a,v[0]]:F>=g?[v[g-1],d]:[v[F-1],v[F]]},R.unknown=function(N){return arguments.length&&(C=N),R},R.thresholds=function(){return v.slice()},R.copy=function(){return gP().domain([a,d]).range(w).unknown(C)},Dh.apply(Zp(R),arguments)}function xi(){var g,a=[.5],d=[0,1],v=1;function w(C){return null!=C&&C<=C?d[He(a,C,0,v)]:g}return w.domain=function(C){return arguments.length?(a=Array.from(C),v=Math.min(a.length,d.length-1),w):a.slice()},w.range=function(C){return arguments.length?(d=Array.from(C),v=Math.min(a.length,d.length-1),w):d.slice()},w.invertExtent=function(C){var R=d.indexOf(C);return[a[R-1],a[R]]},w.unknown=function(C){return arguments.length?(g=C,w):g},w.copy=function(){return xi().domain(a).range(d).unknown(g)},Dh.apply(w,arguments)}const E_=1e3,Ld=60*E_,C_=60*Ld,T_=24*C_,Vw=7*T_,TC=30*T_,ES=365*T_,AC=new Date,CS=new Date;function Ko(a,d,g,v){function w(C){return a(C=0===arguments.length?new Date:new Date(+C)),C}return w.floor=C=>(a(C=new Date(+C)),C),w.ceil=C=>(a(C=new Date(C-1)),d(C,1),a(C),C),w.round=C=>{const R=w(C),P=w.ceil(C);return C-R<P-C?R:P},w.offset=(C,R)=>(d(C=new Date(+C),null==R?1:Math.floor(R)),C),w.range=(C,R,P)=>{const N=[];if(C=w.ceil(C),P=null==P?1:Math.floor(P),!(C<R&&P>0))return N;let F;do{N.push(F=new Date(+C)),d(C,P),a(C)}while(F<C&&C<R);return N},w.filter=C=>Ko(R=>{if(R>=R)for(;a(R),!C(R);)R.setTime(R-1)},(R,P)=>{if(R>=R)if(P<0)for(;++P<=0;)for(;d(R,-1),!C(R););else for(;--P>=0;)for(;d(R,1),!C(R););}),g&&(w.count=(C,R)=>(AC.setTime(+C),CS.setTime(+R),a(AC),a(CS),Math.floor(g(AC,CS))),w.every=C=>(C=Math.floor(C),isFinite(C)&&C>0?C>1?w.filter(v?R=>v(R)%C==0:R=>w.count(0,R)%C==0):w:null)),w}const nv=Ko(()=>{},(a,d)=>{a.setTime(+a+d)},(a,d)=>d-a);nv.every=a=>(a=Math.floor(a),isFinite(a)&&a>0?a>1?Ko(d=>{d.setTime(Math.floor(d/a)*a)},(d,g)=>{d.setTime(+d+g*a)},(d,g)=>(g-d)/a):nv:null);const TS=nv.range,A_=Ko(a=>{a.setTime(a-a.getMilliseconds())},(a,d)=>{a.setTime(+a+d*E_)},(a,d)=>(d-a)/E_,a=>a.getUTCSeconds()),AS=A_.range,Af=Ko(a=>{a.setTime(a-a.getMilliseconds()-a.getSeconds()*E_)},(a,d)=>{a.setTime(+a+d*Ld)},(a,d)=>(d-a)/Ld,a=>a.getMinutes()),iv=Af.range,zw=Ko(a=>{a.setUTCSeconds(0,0)},(a,d)=>{a.setTime(+a+d*Ld)},(a,d)=>(d-a)/Ld,a=>a.getUTCMinutes()),DC=zw.range,Hw=Ko(a=>{a.setTime(a-a.getMilliseconds()-a.getSeconds()*E_-a.getMinutes()*Ld)},(a,d)=>{a.setTime(+a+d*C_)},(a,d)=>(d-a)/C_,a=>a.getHours()),_P=Hw.range,RC=Ko(a=>{a.setUTCMinutes(0,0,0)},(a,d)=>{a.setTime(+a+d*C_)},(a,d)=>(d-a)/C_,a=>a.getUTCHours()),vP=RC.range,Hy=Ko(a=>a.setHours(0,0,0,0),(a,d)=>a.setDate(a.getDate()+d),(a,d)=>(d-a-(d.getTimezoneOffset()-a.getTimezoneOffset())*Ld)/T_,a=>a.getDate()-1),yP=Hy.range,Gw=Ko(a=>{a.setUTCHours(0,0,0,0)},(a,d)=>{a.setUTCDate(a.getUTCDate()+d)},(a,d)=>(d-a)/T_,a=>a.getUTCDate()-1),hD=Gw.range,fD=Ko(a=>{a.setUTCHours(0,0,0,0)},(a,d)=>{a.setUTCDate(a.getUTCDate()+d)},(a,d)=>(d-a)/T_,a=>Math.floor(a/T_)),pD=fD.range;function Gy(a){return Ko(d=>{d.setDate(d.getDate()-(d.getDay()+7-a)%7),d.setHours(0,0,0,0)},(d,g)=>{d.setDate(d.getDate()+7*g)},(d,g)=>(g-d-(g.getTimezoneOffset()-d.getTimezoneOffset())*Ld)/Vw)}const Wy=Gy(0),DS=Gy(1),RS=Gy(2),IC=Gy(3),rv=Gy(4),PC=Gy(5),kC=Gy(6),LC=Wy.range,Yx=DS.range,IS=RS.range,mD=IC.range,bP=rv.range,xP=PC.range,E3=kC.range;function Zx(a){return Ko(d=>{d.setUTCDate(d.getUTCDate()-(d.getUTCDay()+7-a)%7),d.setUTCHours(0,0,0,0)},(d,g)=>{d.setUTCDate(d.getUTCDate()+7*g)},(d,g)=>(g-d)/Vw)}const Ww=Zx(0),Kx=Zx(1),Xa=Zx(2),gD=Zx(3),jy=Zx(4),MP=Zx(5),wP=Zx(6),SP=Ww.range,C3=Kx.range,T3=Xa.range,EP=gD.range,PS=jy.range,CP=MP.range,TP=wP.range,jw=Ko(a=>{a.setDate(1),a.setHours(0,0,0,0)},(a,d)=>{a.setMonth(a.getMonth()+d)},(a,d)=>d.getMonth()-a.getMonth()+12*(d.getFullYear()-a.getFullYear()),a=>a.getMonth()),$y=jw.range,$w=Ko(a=>{a.setUTCDate(1),a.setUTCHours(0,0,0,0)},(a,d)=>{a.setUTCMonth(a.getUTCMonth()+d)},(a,d)=>d.getUTCMonth()-a.getUTCMonth()+12*(d.getUTCFullYear()-a.getUTCFullYear()),a=>a.getUTCMonth()),OC=$w.range,Df=Ko(a=>{a.setMonth(0,1),a.setHours(0,0,0,0)},(a,d)=>{a.setFullYear(a.getFullYear()+d)},(a,d)=>d.getFullYear()-a.getFullYear(),a=>a.getFullYear());Df.every=a=>isFinite(a=Math.floor(a))&&a>0?Ko(d=>{d.setFullYear(Math.floor(d.getFullYear()/a)*a),d.setMonth(0,1),d.setHours(0,0,0,0)},(d,g)=>{d.setFullYear(d.getFullYear()+g*a)}):null;const AP=Df.range,Rf=Ko(a=>{a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,d)=>{a.setUTCFullYear(a.getUTCFullYear()+d)},(a,d)=>d.getUTCFullYear()-a.getUTCFullYear(),a=>a.getUTCFullYear());Rf.every=a=>isFinite(a=Math.floor(a))&&a>0?Ko(d=>{d.setUTCFullYear(Math.floor(d.getUTCFullYear()/a)*a),d.setUTCMonth(0,1),d.setUTCHours(0,0,0,0)},(d,g)=>{d.setUTCFullYear(d.getUTCFullYear()+g*a)}):null;const FC=Rf.range;function qw(a,d,g,v,w,C){const R=[[A_,1,E_],[A_,5,5*E_],[A_,15,15*E_],[A_,30,30*E_],[C,1,Ld],[C,5,5*Ld],[C,15,15*Ld],[C,30,30*Ld],[w,1,C_],[w,3,3*C_],[w,6,6*C_],[w,12,12*C_],[v,1,T_],[v,2,2*T_],[g,1,Vw],[d,1,TC],[d,3,3*TC],[a,1,ES]];function N(F,V,W){const H=Math.abs(V-F)/W,q=Pn(([,,K])=>K).right(R,H);if(q===R.length)return a.every(um(F/ES,V/ES,W));if(0===q)return nv.every(Math.max(um(F,V,W),1));const[ne,Z]=R[H/R[q-1][2]<R[q][2]/H?q-1:q];return ne.every(Z)}return[function P(F,V,W){const H=V<F;H&&([F,V]=[V,F]);const q=W&&"function"==typeof W.range?W:N(F,V,W),ne=q?q.range(F,+V+1):[];return H?ne.reverse():ne},N]}const[DP,RP]=qw(Rf,$w,Ww,fD,RC,zw),[IP,PP]=qw(Df,jw,Wy,Hy,Hw,Af);function kS(a){if(0<=a.y&&a.y<100){var d=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return d.setFullYear(a.y),d}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function NC(a){if(0<=a.y&&a.y<100){var d=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return d.setUTCFullYear(a.y),d}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Xw(a,d,g){return{y:a,m:d,d:g,H:0,M:0,S:0,L:0}}function _D(a){var d=a.dateTime,g=a.date,v=a.time,w=a.periods,C=a.days,R=a.shortDays,P=a.months,N=a.shortMonths,F=Jx(w),V=sv(w),W=Jx(C),H=sv(C),q=Jx(R),ne=sv(R),Z=Jx(P),K=sv(P),te=Jx(N),ae=sv(N),oe={a:function We(Xt){return R[Xt.getDay()]},A:function Se(Xt){return C[Xt.getDay()]},b:function Ge(Xt){return N[Xt.getMonth()]},B:function De(Xt){return P[Xt.getMonth()]},c:null,d:GP,e:GP,f:Ji,g:TD,G:qP,H:UC,I:D_,j:WP,L:MD,m:BC,M:jP,p:function rt(Xt){return w[+(Xt.getHours()>=12)]},q:function gt(Xt){return 1+~~(Xt.getMonth()/3)},Q:Jw,s:Rh,S:$P,u:wD,U:SD,V:VC,w:CD,W:R_,x:null,X:null,y:qy,Y:AD,Z:Zw,"%":Kw},se={a:function It(Xt){return R[Xt.getUTCDay()]},A:function xt(Xt){return C[Xt.getUTCDay()]},b:function Vt(Xt){return N[Xt.getUTCMonth()]},B:function bn(Xt){return P[Xt.getUTCMonth()]},c:null,d:DD,e:DD,f:Od,g:tk,G:N3,H:XP,I:RD,j:YP,L:zC,m:Ya,M:wa,p:function $t(Xt){return w[+(Xt.getUTCHours()>=12)]},q:function kn(Xt){return 1+~~(Xt.getUTCMonth()/3)},Q:Jw,s:Rh,S:Ur,u:Jo,U:Fi,V:KP,w:JP,W:QP,x:null,X:null,y:ek,Y:F3,Z:LS,"%":Kw},ue={a:function ke(Xt,pn,dn){var Rt=q.exec(pn.slice(dn));return Rt?(Xt.w=ne.get(Rt[0].toLowerCase()),dn+Rt[0].length):-1},A:function Oe(Xt,pn,dn){var Rt=W.exec(pn.slice(dn));return Rt?(Xt.w=H.get(Rt[0].toLowerCase()),dn+Rt[0].length):-1},b:function ft(Xt,pn,dn){var Rt=te.exec(pn.slice(dn));return Rt?(Xt.m=ae.get(Rt[0].toLowerCase()),dn+Rt[0].length):-1},B:function it(Xt,pn,dn){var Rt=Z.exec(pn.slice(dn));return Rt?(Xt.m=K.get(Rt[0].toLowerCase()),dn+Rt[0].length):-1},c:function le(Xt,pn,dn){return ye(Xt,d,pn,dn)},d:VP,e:VP,f:P3,g:NP,G:FP,H:zP,I:zP,j:D3,L:I3,m:Qx,M:R3,p:function Ke(Xt,pn,dn){var Rt=F.exec(pn.slice(dn));return Rt?(Xt.p=V.get(Rt[0].toLowerCase()),dn+Rt[0].length):-1},q:BP,Q:L3,s:O3,S:HP,u:xD,U:Yw,V:LP,w:A3,W:OP,x:function me(Xt,pn,dn){return ye(Xt,g,pn,dn)},X:function Me(Xt,pn,dn){return ye(Xt,v,pn,dn)},y:NP,Y:FP,Z:UP,"%":k3};function _e(Xt,pn){return function(dn){var hi,An,wi,Rt=[],xn=-1,ti=0,Ui=Xt.length;for(dn instanceof Date||(dn=new Date(+dn));++xn<Ui;)37===Xt.charCodeAt(xn)&&(Rt.push(Xt.slice(ti,xn)),null!=(An=vD[hi=Xt.charAt(++xn)])?hi=Xt.charAt(++xn):An="e"===hi?" ":"0",(wi=pn[hi])&&(hi=wi(dn,An)),Rt.push(hi),ti=xn+1);return Rt.push(Xt.slice(ti,xn)),Rt.join("")}}function Ce(Xt,pn){return function(dn){var ti,Ui,Rt=Xw(1900,void 0,1);if(ye(Rt,Xt,dn+="",0)!=dn.length)return null;if("Q"in Rt)return new Date(Rt.Q);if("s"in Rt)return new Date(1e3*Rt.s+("L"in Rt?Rt.L:0));if(pn&&!("Z"in Rt)&&(Rt.Z=0),"p"in Rt&&(Rt.H=Rt.H%12+12*Rt.p),void 0===Rt.m&&(Rt.m="q"in Rt?Rt.q:0),"V"in Rt){if(Rt.V<1||Rt.V>53)return null;"w"in Rt||(Rt.w=1),"Z"in Rt?(Ui=(ti=NC(Xw(Rt.y,0,1))).getUTCDay(),ti=Ui>4||0===Ui?Kx.ceil(ti):Kx(ti),ti=Gw.offset(ti,7*(Rt.V-1)),Rt.y=ti.getUTCFullYear(),Rt.m=ti.getUTCMonth(),Rt.d=ti.getUTCDate()+(Rt.w+6)%7):(Ui=(ti=kS(Xw(Rt.y,0,1))).getDay(),ti=Ui>4||0===Ui?DS.ceil(ti):DS(ti),ti=Hy.offset(ti,7*(Rt.V-1)),Rt.y=ti.getFullYear(),Rt.m=ti.getMonth(),Rt.d=ti.getDate()+(Rt.w+6)%7)}else("W"in Rt||"U"in Rt)&&("w"in Rt||(Rt.w="u"in Rt?Rt.u%7:"W"in Rt?1:0),Ui="Z"in Rt?NC(Xw(Rt.y,0,1)).getUTCDay():kS(Xw(Rt.y,0,1)).getDay(),Rt.m=0,Rt.d="W"in Rt?(Rt.w+6)%7+7*Rt.W-(Ui+5)%7:Rt.w+7*Rt.U-(Ui+6)%7);return"Z"in Rt?(Rt.H+=Rt.Z/100|0,Rt.M+=Rt.Z%100,NC(Rt)):kS(Rt)}}function ye(Xt,pn,dn,Rt){for(var hi,An,xn=0,ti=pn.length,Ui=dn.length;xn<ti;){if(Rt>=Ui)return-1;if(37===(hi=pn.charCodeAt(xn++))){if(hi=pn.charAt(xn++),!(An=ue[hi in vD?pn.charAt(xn++):hi])||(Rt=An(Xt,dn,Rt))<0)return-1}else if(hi!=dn.charCodeAt(Rt++))return-1}return Rt}return oe.x=_e(g,oe),oe.X=_e(v,oe),oe.c=_e(d,oe),se.x=_e(g,se),se.X=_e(v,se),se.c=_e(d,se),{format:function(Xt){var pn=_e(Xt+="",oe);return pn.toString=function(){return Xt},pn},parse:function(Xt){var pn=Ce(Xt+="",!1);return pn.toString=function(){return Xt},pn},utcFormat:function(Xt){var pn=_e(Xt+="",se);return pn.toString=function(){return Xt},pn},utcParse:function(Xt){var pn=Ce(Xt+="",!0);return pn.toString=function(){return Xt},pn}}}var ov,ID,nk,HC,GC,vD={"-":"",_:" ",0:"0"},bc=/^\s*\d+/,yD=/^%/,bD=/[\\^$*+?|[\]().{}]/g;function ms(a,d,g){var v=a<0?"-":"",w=(v?-a:a)+"",C=w.length;return v+(C<g?new Array(g-C+1).join(d)+w:w)}function kP(a){return a.replace(bD,"\\$&")}function Jx(a){return new RegExp("^(?:"+a.map(kP).join("|")+")","i")}function sv(a){return new Map(a.map((d,g)=>[d.toLowerCase(),g]))}function A3(a,d,g){var v=bc.exec(d.slice(g,g+1));return v?(a.w=+v[0],g+v[0].length):-1}function xD(a,d,g){var v=bc.exec(d.slice(g,g+1));return v?(a.u=+v[0],g+v[0].length):-1}function Yw(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.U=+v[0],g+v[0].length):-1}function LP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.V=+v[0],g+v[0].length):-1}function OP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.W=+v[0],g+v[0].length):-1}function FP(a,d,g){var v=bc.exec(d.slice(g,g+4));return v?(a.y=+v[0],g+v[0].length):-1}function NP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.y=+v[0]+(+v[0]>68?1900:2e3),g+v[0].length):-1}function UP(a,d,g){var v=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(d.slice(g,g+6));return v?(a.Z=v[1]?0:-(v[2]+(v[3]||"00")),g+v[0].length):-1}function BP(a,d,g){var v=bc.exec(d.slice(g,g+1));return v?(a.q=3*v[0]-3,g+v[0].length):-1}function Qx(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.m=v[0]-1,g+v[0].length):-1}function VP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.d=+v[0],g+v[0].length):-1}function D3(a,d,g){var v=bc.exec(d.slice(g,g+3));return v?(a.m=0,a.d=+v[0],g+v[0].length):-1}function zP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.H=+v[0],g+v[0].length):-1}function R3(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.M=+v[0],g+v[0].length):-1}function HP(a,d,g){var v=bc.exec(d.slice(g,g+2));return v?(a.S=+v[0],g+v[0].length):-1}function I3(a,d,g){var v=bc.exec(d.slice(g,g+3));return v?(a.L=+v[0],g+v[0].length):-1}function P3(a,d,g){var v=bc.exec(d.slice(g,g+6));return v?(a.L=Math.floor(v[0]/1e3),g+v[0].length):-1}function k3(a,d,g){var v=yD.exec(d.slice(g,g+1));return v?g+v[0].length:-1}function L3(a,d,g){var v=bc.exec(d.slice(g));return v?(a.Q=+v[0],g+v[0].length):-1}function O3(a,d,g){var v=bc.exec(d.slice(g));return v?(a.s=+v[0],g+v[0].length):-1}function GP(a,d){return ms(a.getDate(),d,2)}function UC(a,d){return ms(a.getHours(),d,2)}function D_(a,d){return ms(a.getHours()%12||12,d,2)}function WP(a,d){return ms(1+Hy.count(Df(a),a),d,3)}function MD(a,d){return ms(a.getMilliseconds(),d,3)}function Ji(a,d){return MD(a,d)+"000"}function BC(a,d){return ms(a.getMonth()+1,d,2)}function jP(a,d){return ms(a.getMinutes(),d,2)}function $P(a,d){return ms(a.getSeconds(),d,2)}function wD(a){var d=a.getDay();return 0===d?7:d}function SD(a,d){return ms(Wy.count(Df(a)-1,a),d,2)}function ED(a){var d=a.getDay();return d>=4||0===d?rv(a):rv.ceil(a)}function VC(a,d){return a=ED(a),ms(rv.count(Df(a),a)+(4===Df(a).getDay()),d,2)}function CD(a){return a.getDay()}function R_(a,d){return ms(DS.count(Df(a)-1,a),d,2)}function qy(a,d){return ms(a.getFullYear()%100,d,2)}function TD(a,d){return ms((a=ED(a)).getFullYear()%100,d,2)}function AD(a,d){return ms(a.getFullYear()%1e4,d,4)}function qP(a,d){var g=a.getDay();return ms((a=g>=4||0===g?rv(a):rv.ceil(a)).getFullYear()%1e4,d,4)}function Zw(a){var d=a.getTimezoneOffset();return(d>0?"-":(d*=-1,"+"))+ms(d/60|0,"0",2)+ms(d%60,"0",2)}function DD(a,d){return ms(a.getUTCDate(),d,2)}function XP(a,d){return ms(a.getUTCHours(),d,2)}function RD(a,d){return ms(a.getUTCHours()%12||12,d,2)}function YP(a,d){return ms(1+Gw.count(Rf(a),a),d,3)}function zC(a,d){return ms(a.getUTCMilliseconds(),d,3)}function Od(a,d){return zC(a,d)+"000"}function Ya(a,d){return ms(a.getUTCMonth()+1,d,2)}function wa(a,d){return ms(a.getUTCMinutes(),d,2)}function Ur(a,d){return ms(a.getUTCSeconds(),d,2)}function Jo(a){var d=a.getUTCDay();return 0===d?7:d}function Fi(a,d){return ms(Ww.count(Rf(a)-1,a),d,2)}function ZP(a){var d=a.getUTCDay();return d>=4||0===d?jy(a):jy.ceil(a)}function KP(a,d){return a=ZP(a),ms(jy.count(Rf(a),a)+(4===Rf(a).getUTCDay()),d,2)}function JP(a){return a.getUTCDay()}function QP(a,d){return ms(Kx.count(Rf(a)-1,a),d,2)}function ek(a,d){return ms(a.getUTCFullYear()%100,d,2)}function tk(a,d){return ms((a=ZP(a)).getUTCFullYear()%100,d,2)}function F3(a,d){return ms(a.getUTCFullYear()%1e4,d,4)}function N3(a,d){var g=a.getUTCDay();return ms((a=g>=4||0===g?jy(a):jy.ceil(a)).getUTCFullYear()%1e4,d,4)}function LS(){return"+0000"}function Kw(){return"%"}function Jw(a){return+a}function Rh(a){return Math.floor(+a/1e3)}function PD(a){return ov=_D(a),ID=ov.format,nk=ov.parse,HC=ov.utcFormat,GC=ov.utcParse,ov}function kD(a){return new Date(a)}function ik(a){return a instanceof Date?+a:+new Date(+a)}function WC(a,d,g,v,w,C,R,P,N,F){var V=lD(),W=V.invert,H=V.domain,q=F(".%L"),ne=F(":%S"),Z=F("%I:%M"),K=F("%I %p"),te=F("%a %d"),ae=F("%b %d"),oe=F("%B"),se=F("%Y");function ue(_e){return(N(_e)<_e?q:P(_e)<_e?ne:R(_e)<_e?Z:C(_e)<_e?K:v(_e)<_e?w(_e)<_e?te:ae:g(_e)<_e?oe:se)(_e)}return V.invert=function(_e){return new Date(W(_e))},V.domain=function(_e){return arguments.length?H(Array.from(_e,ik)):H().map(kD)},V.ticks=function(_e){var Ce=H();return a(Ce[0],Ce[Ce.length-1],_e??10)},V.tickFormat=function(_e,Ce){return null==Ce?ue:F(Ce)},V.nice=function(_e){var Ce=H();return(!_e||"function"!=typeof _e.range)&&(_e=d(Ce[0],Ce[Ce.length-1],_e??10)),_e?H(cP(Ce,_e)):V},V.copy=function(){return yS(V,WC(a,d,g,v,w,C,R,P,N,F))},V}function U3(){return Dh.apply(WC(IP,PP,Df,jw,Wy,Hy,Hw,Af,A_,ID).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function If(){return Dh.apply(WC(DP,RP,Rf,$w,Ww,Gw,RC,zw,A_,HC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eM(){var g,v,w,C,N,a=0,d=1,R=kd,P=!1;function F(W){return null==W||isNaN(W=+W)?N:R(0===w?.5:(W=(C(W)-g)*w,P?Math.max(0,Math.min(1,W)):W))}function V(W){return function(H){var q,ne;return arguments.length?([q,ne]=H,R=W(q,ne),F):[R(0),R(1)]}}return F.domain=function(W){return arguments.length?([a,d]=W,g=C(a=+a),v=C(d=+d),w=g===v?0:1/(v-g),F):[a,d]},F.clamp=function(W){return arguments.length?(P=!!W,F):P},F.interpolator=function(W){return arguments.length?(R=W,F):R},F.range=V(Ts),F.rangeRound=V(Nw),F.unknown=function(W){return arguments.length?(N=W,F):N},function(W){return C=W,g=W(a),v=W(d),w=g===v?0:1/(v-g),F}}function av(a,d){return d.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function LD(){var a=Zp(eM()(kd));return a.copy=function(){return av(a,LD())},_g.apply(a,arguments)}function OD(){var a=SC(eM()).domain([1,10]);return a.copy=function(){return av(a,OD()).base(a.base())},_g.apply(a,arguments)}function FD(){var a=EC(eM());return a.copy=function(){return av(a,FD()).constant(a.constant())},_g.apply(a,arguments)}function Xy(){var a=MS(eM());return a.copy=function(){return av(a,Xy()).exponent(a.exponent())},_g.apply(a,arguments)}function rk(){return Xy.apply(null,arguments).exponent(.5)}function Za(){var a=[],d=kd;function g(v){if(null!=v&&!isNaN(v=+v))return d((He(a,v,1)-1)/(a.length-1))}return g.domain=function(v){if(!arguments.length)return a.slice();a=[];for(let w of v)null!=w&&!isNaN(w=+w)&&a.push(w);return a.sort(rn),g},g.interpolator=function(v){return arguments.length?(d=v,g):d},g.range=function(){return a.map((v,w)=>d(w/(a.length-1)))},g.quantiles=function(v){return Array.from({length:v+1},(w,C)=>Nf(a,C/v))},g.copy=function(){return Za(d).domain(a)},_g.apply(g,arguments)}function ki(){var w,C,R,P,N,V,H,a=0,d=.5,g=1,v=1,F=kd,W=!1;function q(Z){return isNaN(Z=+Z)?H:(Z=.5+((Z=+V(Z))-C)*(v*Z<v*C?P:N),F(W?Math.max(0,Math.min(1,Z)):Z))}function ne(Z){return function(K){var te,ae,oe;return arguments.length?([te,ae,oe]=K,F=dC(Z,[te,ae,oe]),q):[F(0),F(.5),F(1)]}}return q.domain=function(Z){return arguments.length?([a,d,g]=Z,w=V(a=+a),C=V(d=+d),R=V(g=+g),P=w===C?0:.5/(C-w),N=C===R?0:.5/(R-C),v=C<w?-1:1,q):[a,d,g]},q.clamp=function(Z){return arguments.length?(W=!!Z,q):W},q.interpolator=function(Z){return arguments.length?(F=Z,q):F},q.range=ne(Ts),q.rangeRound=ne(Nw),q.unknown=function(Z){return arguments.length?(H=Z,q):H},function(Z){return V=Z,w=Z(a),C=Z(d),R=Z(g),P=w===C?0:.5/(C-w),N=C===R?0:.5/(R-C),v=C<w?-1:1,q}}function fr(){var a=Zp(ki()(kd));return a.copy=function(){return av(a,fr())},_g.apply(a,arguments)}function ND(){var a=SC(ki()).domain([.1,1,10]);return a.copy=function(){return av(a,ND()).base(a.base())},_g.apply(a,arguments)}function Qw(){var a=EC(ki());return a.copy=function(){return av(a,Qw()).constant(a.constant())},_g.apply(a,arguments)}function Jp(){var a=MS(ki());return a.copy=function(){return av(a,Jp()).exponent(a.exponent())},_g.apply(a,arguments)}function OS(){return Jp.apply(null,arguments).exponent(.5)}function Ni(a){for(var d=a.length/6|0,g=new Array(d),v=0;v<d;)g[v]="#"+a.slice(6*v,6*++v);return g}PD({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const sk=Ni("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ka=Ni("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ok=Ni("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fo=Ni("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ak=Ni("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),FS=Ni("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ck=Ni("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),NS=Ni("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),lk=Ni("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),UD=Ni("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Us=a=>Cs(a[a.length-1]);var e1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ni);const jC=Us(e1);var BD=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ni);const VD=Us(BD);var zD=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ni);const uk=Us(zD);var HD=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ni);const dk=Us(HD);var $C=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ni);const hk=Us($C);var qC=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ni);const US=Us(qC);var tM=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ni);const fk=Us(tM);var GD=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ni);const XC=Us(GD);var YC=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ni);const pk=Us(YC);var BS=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ni);const mk=Us(BS);var WD=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ni);const gk=Us(WD);var VS=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ni);const _k=Us(VS);var jD=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ni);const vk=Us(jD);var zS=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ni);const ZC=Us(zS);var KC=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ni);const yk=Us(KC);var bk=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ni);const $D=Us(bk);var HS=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ni);const qD=Us(HS);var JC=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ni);const xk=Us(JC);var QC=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ni);const XD=Us(QC);var YD=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ni);const t1=Us(YD);var eT=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ni);const Mk=Us(eT);var cv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ni);const wk=Us(cv);var tT=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ni);const nT=Us(tT);var n1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ni);const ZD=Us(n1);var KD=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ni);const B3=Us(KD);var iT=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ni);const Sk=Us(iT);var JD=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ni);const rT=Us(JD);function V3(a){return a=Math.max(0,Math.min(1,a)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-a*(35.34-a*(2381.73-a*(6402.7-a*(7024.72-2710.57*a)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+a*(170.73+a*(52.82-a*(131.46-a*(176.58-67.37*a)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+a*(442.36-a*(2482.43-a*(6167.24-a*(6614.94-2475.67*a)))))))+")"}const Qp=mS(aa(300,.5,0),aa(-240,.5,1));var Ek=mS(aa(-100,.75,.35),aa(80,1.5,.8)),Ck=mS(aa(260,.75,.35),aa(80,1.5,.8)),GS=aa();function Tk(a){(a<0||a>1)&&(a-=Math.floor(a));var d=Math.abs(a-.5);return GS.h=360*a-100,GS.s=1.5-1.5*d,GS.l=.8-.9*d,GS+""}var r1=qf(),Ak=Math.PI/3,Dk=2*Math.PI/3;function Rk(a){var d;return a=(.5-a)*Math.PI,r1.r=255*(d=Math.sin(a))*d,r1.g=255*(d=Math.sin(a+Ak))*d,r1.b=255*(d=Math.sin(a+Dk))*d,r1+""}function Ik(a){return a=Math.max(0,Math.min(1,a)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+a*(1172.33-a*(10793.56-a*(33300.12-a*(38394.49-14825.05*a)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+a*(557.33+a*(1225.33-a*(3574.96-a*(1073.77+707.56*a)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+a*(3211.1-a*(15327.97-a*(27814-a*(22569.18-6838.66*a)))))))+")"}function WS(a){var d=a.length;return function(g){return a[Math.max(0,Math.min(d-1,Math.floor(g*d)))]}}const Pk=WS(Ni("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var kk=WS(Ni("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Lk=WS(Ni("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ok=WS(Ni("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Fk(a){return Tr(Mr(a).call(document.documentElement))}var Nk=0;function QD(){return new sT}function sT(){this._="@"+(++Nk).toString(36)}function Uk(a,d){return a.target&&(a=zs(a),void 0===d&&(d=a.currentTarget),a=a.touches||[a]),Array.from(a,g=>Zi(g,d))}function eR(a){return"string"==typeof a?new Ss([document.querySelectorAll(a)],[document.documentElement]):new Ss([ws(a)],Co)}function or(a){return function(){return a}}sT.prototype=QD.prototype={constructor:sT,get:function(a){for(var d=this._;!(d in a);)if(!(a=a.parentNode))return;return a[d]},set:function(a,d){return a[this._]=d},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};const tR=Math.abs,nu=Math.atan2,em=Math.cos,oT=Math.max,s1=Math.min,Ih=Math.sin,Or=Math.sqrt,Cl=1e-12,lv=Math.PI,jS=lv/2,uv=2*lv;function Vk(a){return a>=1?jS:a<=-1?-jS:Math.asin(a)}function $S(a){let d=3;return a.digits=function(g){if(!arguments.length)return d;if(null==g)d=null;else{const v=Math.floor(g);if(!(v>=0))throw new RangeError(`invalid digits: ${g}`);d=v}return a},()=>new c0(d)}function z3(a){return a.innerRadius}function H3(a){return a.outerRadius}function zk(a){return a.startAngle}function Hk(a){return a.endAngle}function nR(a){return a&&a.padAngle}function aT(a,d,g,v,w,C,R){var P=a-g,N=d-v,F=(R?C:-C)/Or(P*P+N*N),V=F*N,W=-F*P,H=a+V,q=d+W,ne=g+V,Z=v+W,K=(H+ne)/2,te=(q+Z)/2,ae=ne-H,oe=Z-q,se=ae*ae+oe*oe,ue=w-C,_e=H*Z-ne*q,Ce=(oe<0?-1:1)*Or(oT(0,ue*ue*se-_e*_e)),ye=(_e*oe-ae*Ce)/se,Ke=(-_e*ae-oe*Ce)/se,ke=(_e*oe+ae*Ce)/se,Oe=(-_e*ae+oe*Ce)/se,ft=ye-K,it=Ke-te,le=ke-K,me=Oe-te;return ft*ft+it*it>le*le+me*me&&(ye=ke,Ke=Oe),{cx:ye,cy:Ke,x01:-V,y01:-W,x11:ye*(w/ue-1),y11:Ke*(w/ue-1)}}function iR(){var a=z3,d=H3,g=or(0),v=null,w=zk,C=Hk,R=nR,P=null,N=$S(F);function F(){var V,W,H=+a.apply(this,arguments),q=+d.apply(this,arguments),ne=w.apply(this,arguments)-jS,Z=C.apply(this,arguments)-jS,K=tR(Z-ne),te=Z>ne;if(P||(P=V=N()),q<H&&(W=q,q=H,H=W),q>Cl)if(K>uv-Cl)P.moveTo(q*em(ne),q*Ih(ne)),P.arc(0,0,q,ne,Z,!te),H>Cl&&(P.moveTo(H*em(Z),H*Ih(Z)),P.arc(0,0,H,Z,ne,te));else{var it,le,ae=ne,oe=Z,se=ne,ue=Z,_e=K,Ce=K,ye=R.apply(this,arguments)/2,Ke=ye>Cl&&(v?+v.apply(this,arguments):Or(H*H+q*q)),ke=s1(tR(q-H)/2,+g.apply(this,arguments)),Oe=ke,ft=ke;if(Ke>Cl){var me=Vk(Ke/H*Ih(ye)),Me=Vk(Ke/q*Ih(ye));(_e-=2*me)>Cl?(se+=me*=te?1:-1,ue-=me):(_e=0,se=ue=(ne+Z)/2),(Ce-=2*Me)>Cl?(ae+=Me*=te?1:-1,oe-=Me):(Ce=0,ae=oe=(ne+Z)/2)}var We=q*em(ae),Se=q*Ih(ae),Ge=H*em(ue),De=H*Ih(ue);if(ke>Cl){var Vt,rt=q*em(oe),gt=q*Ih(oe),It=H*em(se),xt=H*Ih(se);if(K<lv)if(Vt=function Gk(a,d,g,v,w,C,R,P){var N=g-a,F=v-d,V=R-w,W=P-C,H=W*N-V*F;if(!(H*H<Cl))return[a+(H=(V*(d-C)-W*(a-w))/H)*N,d+H*F]}(We,Se,It,xt,rt,gt,Ge,De)){var bn=We-Vt[0],$t=Se-Vt[1],kn=rt-Vt[0],Xt=gt-Vt[1],pn=1/Ih(function Bk(a){return a>1?0:a<-1?lv:Math.acos(a)}((bn*kn+$t*Xt)/(Or(bn*bn+$t*$t)*Or(kn*kn+Xt*Xt)))/2),dn=Or(Vt[0]*Vt[0]+Vt[1]*Vt[1]);Oe=s1(ke,(H-dn)/(pn-1)),ft=s1(ke,(q-dn)/(pn+1))}else Oe=ft=0}Ce>Cl?ft>Cl?(it=aT(It,xt,We,Se,q,ft,te),le=aT(rt,gt,Ge,De,q,ft,te),P.moveTo(it.cx+it.x01,it.cy+it.y01),ft<ke?P.arc(it.cx,it.cy,ft,nu(it.y01,it.x01),nu(le.y01,le.x01),!te):(P.arc(it.cx,it.cy,ft,nu(it.y01,it.x01),nu(it.y11,it.x11),!te),P.arc(0,0,q,nu(it.cy+it.y11,it.cx+it.x11),nu(le.cy+le.y11,le.cx+le.x11),!te),P.arc(le.cx,le.cy,ft,nu(le.y11,le.x11),nu(le.y01,le.x01),!te))):(P.moveTo(We,Se),P.arc(0,0,q,ae,oe,!te)):P.moveTo(We,Se),H>Cl&&_e>Cl?Oe>Cl?(it=aT(Ge,De,rt,gt,H,-Oe,te),le=aT(We,Se,It,xt,H,-Oe,te),P.lineTo(it.cx+it.x01,it.cy+it.y01),Oe<ke?P.arc(it.cx,it.cy,Oe,nu(it.y01,it.x01),nu(le.y01,le.x01),!te):(P.arc(it.cx,it.cy,Oe,nu(it.y01,it.x01),nu(it.y11,it.x11),!te),P.arc(0,0,H,nu(it.cy+it.y11,it.cx+it.x11),nu(le.cy+le.y11,le.cx+le.x11),te),P.arc(le.cx,le.cy,Oe,nu(le.y11,le.x11),nu(le.y01,le.x01),!te))):P.arc(0,0,H,ue,se,te):P.lineTo(Ge,De)}else P.moveTo(0,0);if(P.closePath(),V)return P=null,V+""||null}return F.centroid=function(){var V=(+a.apply(this,arguments)+ +d.apply(this,arguments))/2,W=(+w.apply(this,arguments)+ +C.apply(this,arguments))/2-lv/2;return[em(W)*V,Ih(W)*V]},F.innerRadius=function(V){return arguments.length?(a="function"==typeof V?V:or(+V),F):a},F.outerRadius=function(V){return arguments.length?(d="function"==typeof V?V:or(+V),F):d},F.cornerRadius=function(V){return arguments.length?(g="function"==typeof V?V:or(+V),F):g},F.padRadius=function(V){return arguments.length?(v=null==V?null:"function"==typeof V?V:or(+V),F):v},F.startAngle=function(V){return arguments.length?(w="function"==typeof V?V:or(+V),F):w},F.endAngle=function(V){return arguments.length?(C="function"==typeof V?V:or(+V),F):C},F.padAngle=function(V){return arguments.length?(R="function"==typeof V?V:or(+V),F):R},F.context=function(V){return arguments.length?(P=V??null,F):P},F}var G3=Array.prototype.slice;function nM(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}function Wk(a){this._context=a}function qS(a){return new Wk(a)}function cT(a){return a[0]}function lT(a){return a[1]}function iM(a,d){var g=or(!0),v=null,w=qS,C=null,R=$S(P);function P(N){var F,W,q,V=(N=nM(N)).length,H=!1;for(null==v&&(C=w(q=R())),F=0;F<=V;++F)!(F<V&&g(W=N[F],F,N))===H&&((H=!H)?C.lineStart():C.lineEnd()),H&&C.point(+a(W,F,N),+d(W,F,N));if(q)return C=null,q+""||null}return a="function"==typeof a?a:void 0===a?cT:or(a),d="function"==typeof d?d:void 0===d?lT:or(d),P.x=function(N){return arguments.length?(a="function"==typeof N?N:or(+N),P):a},P.y=function(N){return arguments.length?(d="function"==typeof N?N:or(+N),P):d},P.defined=function(N){return arguments.length?(g="function"==typeof N?N:or(!!N),P):g},P.curve=function(N){return arguments.length?(w=N,null!=v&&(C=w(v)),P):w},P.context=function(N){return arguments.length?(null==N?v=C=null:C=w(v=N),P):v},P}function rR(a,d,g){var v=null,w=or(!0),C=null,R=qS,P=null,N=$S(F);function F(W){var H,q,ne,K,ae,Z=(W=nM(W)).length,te=!1,oe=new Array(Z),se=new Array(Z);for(null==C&&(P=R(ae=N())),H=0;H<=Z;++H){if(!(H<Z&&w(K=W[H],H,W))===te)if(te=!te)q=H,P.areaStart(),P.lineStart();else{for(P.lineEnd(),P.lineStart(),ne=H-1;ne>=q;--ne)P.point(oe[ne],se[ne]);P.lineEnd(),P.areaEnd()}te&&(oe[H]=+a(K,H,W),se[H]=+d(K,H,W),P.point(v?+v(K,H,W):oe[H],g?+g(K,H,W):se[H]))}if(ae)return P=null,ae+""||null}function V(){return iM().defined(w).curve(R).context(C)}return a="function"==typeof a?a:void 0===a?cT:or(+a),d="function"==typeof d?d:or(void 0===d?0:+d),g="function"==typeof g?g:void 0===g?lT:or(+g),F.x=function(W){return arguments.length?(a="function"==typeof W?W:or(+W),v=null,F):a},F.x0=function(W){return arguments.length?(a="function"==typeof W?W:or(+W),F):a},F.x1=function(W){return arguments.length?(v=null==W?null:"function"==typeof W?W:or(+W),F):v},F.y=function(W){return arguments.length?(d="function"==typeof W?W:or(+W),g=null,F):d},F.y0=function(W){return arguments.length?(d="function"==typeof W?W:or(+W),F):d},F.y1=function(W){return arguments.length?(g=null==W?null:"function"==typeof W?W:or(+W),F):g},F.lineX0=F.lineY0=function(){return V().x(a).y(d)},F.lineY1=function(){return V().x(a).y(g)},F.lineX1=function(){return V().x(v).y(d)},F.defined=function(W){return arguments.length?(w="function"==typeof W?W:or(!!W),F):w},F.curve=function(W){return arguments.length?(R=W,null!=C&&(P=R(C)),F):R},F.context=function(W){return arguments.length?(null==W?C=P=null:P=R(C=W),F):C},F}function XS(a,d){return d<a?-1:d>a?1:d>=a?0:NaN}function jk(a){return a}function $k(){var a=jk,d=XS,g=null,v=or(0),w=or(uv),C=or(0);function R(P){var N,V,W,te,se,F=(P=nM(P)).length,H=0,q=new Array(F),ne=new Array(F),Z=+v.apply(this,arguments),K=Math.min(uv,Math.max(-uv,w.apply(this,arguments)-Z)),ae=Math.min(Math.abs(K)/F,C.apply(this,arguments)),oe=ae*(K<0?-1:1);for(N=0;N<F;++N)(se=ne[q[N]=N]=+a(P[N],N,P))>0&&(H+=se);for(null!=d?q.sort(function(ue,_e){return d(ne[ue],ne[_e])}):null!=g&&q.sort(function(ue,_e){return g(P[ue],P[_e])}),N=0,W=H?(K-F*oe)/H:0;N<F;++N,Z=te)ne[V=q[N]]={data:P[V],index:N,value:se=ne[V],startAngle:Z,endAngle:te=Z+(se>0?se*W:0)+oe,padAngle:ae};return ne}return R.value=function(P){return arguments.length?(a="function"==typeof P?P:or(+P),R):a},R.sortValues=function(P){return arguments.length?(d=P,g=null,R):d},R.sort=function(P){return arguments.length?(g=P,d=null,R):g},R.startAngle=function(P){return arguments.length?(v="function"==typeof P?P:or(+P),R):v},R.endAngle=function(P){return arguments.length?(w="function"==typeof P?P:or(+P),R):w},R.padAngle=function(P){return arguments.length?(C="function"==typeof P?P:or(+P),R):C},R}Wk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2;default:this._context.lineTo(a,d)}}};var qk=uT(qS);function sR(a){this._curve=a}function uT(a){function d(g){return new sR(a(g))}return d._curve=a,d}function o1(a){var d=a.curve;return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a.curve=function(g){return arguments.length?d(uT(g)):d()._curve},a}function oR(){return o1(iM().curve(qk))}function Xk(){var a=rR().curve(qk),d=a.curve,g=a.lineX0,v=a.lineX1,w=a.lineY0,C=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return o1(g())},delete a.lineX0,a.lineEndAngle=function(){return o1(v())},delete a.lineX1,a.lineInnerRadius=function(){return o1(w())},delete a.lineY0,a.lineOuterRadius=function(){return o1(C())},delete a.lineY1,a.curve=function(R){return arguments.length?d(uT(R)):d()._curve},a}function a1(a,d){return[(d=+d)*Math.cos(a-=Math.PI/2),d*Math.sin(a)]}sR.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,d){this._curve.point(d*Math.sin(a),d*-Math.cos(a))}};class aR{constructor(d,g){this._context=d,this._x=g}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(d,g){switch(d=+d,g=+g,this._point){case 0:this._point=1,this._line?this._context.lineTo(d,g):this._context.moveTo(d,g);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+d)/2,this._y0,this._x0,g,d,g):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+g)/2,d,this._y0,d,g)}this._x0=d,this._y0=g}}class Yk{constructor(d){this._context=d}lineStart(){this._point=0}lineEnd(){}point(d,g){if(d=+d,g=+g,0===this._point)this._point=1;else{const v=a1(this._x0,this._y0),w=a1(this._x0,this._y0=(this._y0+g)/2),C=a1(d,this._y0),R=a1(d,g);this._context.moveTo(...v),this._context.bezierCurveTo(...w,...C,...R)}this._x0=d,this._y0=g}}function cR(a){return new aR(a,!0)}function Zk(a){return new aR(a,!1)}function Kk(a){return new Yk(a)}function Jk(a){return a.source}function Qk(a){return a.target}function YS(a){let d=Jk,g=Qk,v=cT,w=lT,C=null,R=null,P=$S(N);function N(){let F;const V=G3.call(arguments),W=d.apply(this,V),H=g.apply(this,V);if(null==C&&(R=a(F=P())),R.lineStart(),V[0]=W,R.point(+v.apply(this,V),+w.apply(this,V)),V[0]=H,R.point(+v.apply(this,V),+w.apply(this,V)),R.lineEnd(),F)return R=null,F+""||null}return N.source=function(F){return arguments.length?(d=F,N):d},N.target=function(F){return arguments.length?(g=F,N):g},N.x=function(F){return arguments.length?(v="function"==typeof F?F:or(+F),N):v},N.y=function(F){return arguments.length?(w="function"==typeof F?F:or(+F),N):w},N.context=function(F){return arguments.length?(null==F?C=R=null:R=a(C=F),N):C},N}function W3(){return YS(cR)}function eL(){return YS(Zk)}function Sa(){const a=YS(Kk);return a.angle=a.x,delete a.x,a.radius=a.y,delete a.y,a}const j3=Or(3),tL={draw(a,d){const g=.59436*Or(d+s1(d/28,.75)),v=g/2,w=v*j3;a.moveTo(0,g),a.lineTo(0,-g),a.moveTo(-w,-v),a.lineTo(w,v),a.moveTo(-w,v),a.lineTo(w,-v)}},dT={draw(a,d){const g=Or(d/lv);a.moveTo(g,0),a.arc(0,0,g,0,uv)}},nL={draw(a,d){const g=Or(d/5)/2;a.moveTo(-3*g,-g),a.lineTo(-g,-g),a.lineTo(-g,-3*g),a.lineTo(g,-3*g),a.lineTo(g,-g),a.lineTo(3*g,-g),a.lineTo(3*g,g),a.lineTo(g,g),a.lineTo(g,3*g),a.lineTo(-g,3*g),a.lineTo(-g,g),a.lineTo(-3*g,g),a.closePath()}},iL=Or(1/3),$3=2*iL,lR={draw(a,d){const g=Or(d/$3),v=g*iL;a.moveTo(0,-g),a.lineTo(v,0),a.lineTo(0,g),a.lineTo(-v,0),a.closePath()}},rL={draw(a,d){const g=.62625*Or(d);a.moveTo(0,-g),a.lineTo(g,0),a.lineTo(0,g),a.lineTo(-g,0),a.closePath()}},sL={draw(a,d){const g=.87559*Or(d-s1(d/7,2));a.moveTo(-g,0),a.lineTo(g,0),a.moveTo(0,g),a.lineTo(0,-g)}},oL={draw(a,d){const g=Or(d),v=-g/2;a.rect(v,v,g,g)}},hT={draw(a,d){const g=.4431*Or(d);a.moveTo(g,g),a.lineTo(g,-g),a.lineTo(-g,-g),a.lineTo(-g,g),a.closePath()}},uR=Ih(lv/10)/Ih(7*lv/10),fT=Ih(uv/10)*uR,c1=-em(uv/10)*uR,cL={draw(a,d){const g=Or(.8908130915292852*d),v=fT*g,w=c1*g;a.moveTo(0,-g),a.lineTo(v,w);for(let C=1;C<5;++C){const R=uv*C/5,P=em(R),N=Ih(R);a.lineTo(N*g,-P*g),a.lineTo(P*v-N*w,N*v+P*w)}a.closePath()}},dR=Or(3),pT={draw(a,d){const g=-Or(d/(3*dR));a.moveTo(0,2*g),a.lineTo(-dR*g,-g),a.lineTo(dR*g,-g),a.closePath()}},hR=Or(3),lL={draw(a,d){const g=.6824*Or(d),v=g/2,w=g*hR/2;a.moveTo(0,-g),a.lineTo(w,v),a.lineTo(-w,v),a.closePath()}},tm=-.5,Pf=Or(3)/2,ZS=1/Or(12),q3=3*(ZS/2+1),uL={draw(a,d){const g=Or(d/q3),v=g/2,w=g*ZS,C=v,R=g*ZS+g,P=-C,N=R;a.moveTo(v,w),a.lineTo(C,R),a.lineTo(P,N),a.lineTo(tm*v-Pf*w,Pf*v+tm*w),a.lineTo(tm*C-Pf*R,Pf*C+tm*R),a.lineTo(tm*P-Pf*N,Pf*P+tm*N),a.lineTo(tm*v+Pf*w,tm*w-Pf*v),a.lineTo(tm*C+Pf*R,tm*R-Pf*C),a.lineTo(tm*P+Pf*N,tm*N-Pf*P),a.closePath()}},fR={draw(a,d){const g=.6189*Or(d-s1(d/6,1.7));a.moveTo(-g,-g),a.lineTo(g,g),a.moveTo(-g,g),a.lineTo(g,-g)}},dL=[dT,nL,lR,oL,cL,pT,uL],X3=[dT,sL,fR,lL,tL,hT,rL];function Y3(a,d){let g=null,v=$S(w);function w(){let C;if(g||(g=C=v()),a.apply(this,arguments).draw(g,+d.apply(this,arguments)),C)return g=null,C+""||null}return a="function"==typeof a?a:or(a||dT),d="function"==typeof d?d:or(void 0===d?64:+d),w.type=function(C){return arguments.length?(a="function"==typeof C?C:or(C),w):a},w.size=function(C){return arguments.length?(d="function"==typeof C?C:or(+C),w):d},w.context=function(C){return arguments.length?(g=C??null,w):g},w}function Yy(){}function mT(a,d,g){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+d)/6,(a._y0+4*a._y1+g)/6)}function gT(a){this._context=a}function Z3(a){return new gT(a)}function pR(a){this._context=a}function K3(a){return new pR(a)}function mR(a){this._context=a}function hL(a){return new mR(a)}function fL(a,d){this._basis=new gT(a),this._beta=d}gT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mT(this,a,d)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=d}},pR.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._x2=a,this._y2=d;break;case 1:this._point=2,this._x3=a,this._y3=d;break;case 2:this._point=3,this._x4=a,this._y4=d,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+d)/6);break;default:mT(this,a,d)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=d}},mR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var g=(this._x0+4*this._x1+a)/6,v=(this._y0+4*this._y1+d)/6;this._line?this._context.lineTo(g,v):this._context.moveTo(g,v);break;case 3:this._point=4;default:mT(this,a,d)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=d}},fL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var a=this._x,d=this._y,g=a.length-1;if(g>0)for(var N,v=a[0],w=d[0],C=a[g]-v,R=d[g]-w,P=-1;++P<=g;)this._basis.point(this._beta*a[P]+(1-this._beta)*(v+(N=P/g)*C),this._beta*d[P]+(1-this._beta)*(w+N*R));this._x=this._y=null,this._basis.lineEnd()},point:function(a,d){this._x.push(+a),this._y.push(+d)}};const J3=function a(d){function g(v){return 1===d?new gT(v):new fL(v,d)}return g.beta=function(v){return a(+v)},g}(.85);function _T(a,d,g){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-d),a._y2+a._k*(a._y1-g),a._x2,a._y2)}function gR(a,d){this._context=a,this._k=(1-d)/6}gR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2,this._x1=a,this._y1=d;break;case 2:this._point=3;default:_T(this,a,d)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const Q3=function a(d){function g(v){return new gR(v,d)}return g.tension=function(v){return a(+v)},g}(0);function _R(a,d){this._context=a,this._k=(1-d)/6}_R.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._x3=a,this._y3=d;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=d);break;case 2:this._point=3,this._x5=a,this._y5=d;break;default:_T(this,a,d)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const eN=function a(d){function g(v){return new _R(v,d)}return g.tension=function(v){return a(+v)},g}(0);function vR(a,d){this._context=a,this._k=(1-d)/6}vR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_T(this,a,d)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const tN=function a(d){function g(v){return new vR(v,d)}return g.tension=function(v){return a(+v)},g}(0);function yR(a,d,g){var v=a._x1,w=a._y1,C=a._x2,R=a._y2;if(a._l01_a>Cl){var P=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,N=3*a._l01_a*(a._l01_a+a._l12_a);v=(v*P-a._x0*a._l12_2a+a._x2*a._l01_2a)/N,w=(w*P-a._y0*a._l12_2a+a._y2*a._l01_2a)/N}if(a._l23_a>Cl){var F=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,V=3*a._l23_a*(a._l23_a+a._l12_a);C=(C*F+a._x1*a._l23_2a-d*a._l12_2a)/V,R=(R*F+a._y1*a._l23_2a-g*a._l12_2a)/V}a._context.bezierCurveTo(v,w,C,R,a._x2,a._y2)}function bR(a,d){this._context=a,this._alpha=d}bR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){if(a=+a,d=+d,this._point){var g=this._x2-a,v=this._y2-d;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(g*g+v*v,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2;break;case 2:this._point=3;default:yR(this,a,d)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const vT=function a(d){function g(v){return d?new bR(v,d):new gR(v,0)}return g.alpha=function(v){return a(+v)},g}(.5);function rM(a,d){this._context=a,this._alpha=d}rM.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,d){if(a=+a,d=+d,this._point){var g=this._x2-a,v=this._y2-d;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(g*g+v*v,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=a,this._y3=d;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=d);break;case 2:this._point=3,this._x5=a,this._y5=d;break;default:yR(this,a,d)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const pL=function a(d){function g(v){return d?new rM(v,d):new _R(v,0)}return g.alpha=function(v){return a(+v)},g}(.5);function l1(a,d){this._context=a,this._alpha=d}l1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){if(a=+a,d=+d,this._point){var g=this._x2-a,v=this._y2-d;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(g*g+v*v,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yR(this,a,d)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=d}};const mL=function a(d){function g(v){return d?new l1(v,d):new vR(v,0)}return g.alpha=function(v){return a(+v)},g}(.5);function yT(a){this._context=a}function gL(a){return new yT(a)}function xR(a){return a<0?-1:1}function MR(a,d,g){var v=a._x1-a._x0,w=d-a._x1,C=(a._y1-a._y0)/(v||w<0&&-0),R=(g-a._y1)/(w||v<0&&-0),P=(C*w+R*v)/(v+w);return(xR(C)+xR(R))*Math.min(Math.abs(C),Math.abs(R),.5*Math.abs(P))||0}function wR(a,d){var g=a._x1-a._x0;return g?(3*(a._y1-a._y0)/g-d)/2:d}function sM(a,d,g){var v=a._x0,C=a._x1,R=a._y1,P=(C-v)/3;a._context.bezierCurveTo(v+P,a._y0+P*d,C-P,R-P*g,C,R)}function Zy(a){this._context=a}function bT(a){this._context=new xT(a)}function xT(a){this._context=a}function u1(a){return new Zy(a)}function MT(a){return new bT(a)}function KS(a){this._context=a}function wT(a){var d,v,g=a.length-1,w=new Array(g),C=new Array(g),R=new Array(g);for(w[0]=0,C[0]=2,R[0]=a[0]+2*a[1],d=1;d<g-1;++d)w[d]=1,C[d]=4,R[d]=4*a[d]+2*a[d+1];for(w[g-1]=2,C[g-1]=7,R[g-1]=8*a[g-1]+a[g],d=1;d<g;++d)C[d]-=v=w[d]/C[d-1],R[d]-=v*R[d-1];for(w[g-1]=R[g-1]/C[g-1],d=g-2;d>=0;--d)w[d]=(R[d]-w[d+1])/C[d];for(C[g-1]=(a[g]+w[g-1])/2,d=0;d<g-1;++d)C[d]=2*a[d+1]-w[d+1];return[w,C]}function SR(a){return new KS(a)}function JS(a,d){this._context=a,this._t=d}function _L(a){return new JS(a,.5)}function vL(a){return new JS(a,0)}function ER(a){return new JS(a,1)}function oM(a,d){if((R=a.length)>1)for(var v,w,R,g=1,C=a[d[0]],P=C.length;g<R;++g)for(w=C,C=a[d[g]],v=0;v<P;++v)C[v][1]+=C[v][0]=isNaN(w[v][1])?w[v][0]:w[v][1]}function aM(a){for(var d=a.length,g=new Array(d);--d>=0;)g[d]=d;return g}function CR(a,d){return a[d]}function TR(a){const d=[];return d.key=a,d}function QS(){var a=or([]),d=aM,g=oM,v=CR;function w(C){var P,V,R=Array.from(a.apply(this,arguments),TR),N=R.length,F=-1;for(const W of C)for(P=0,++F;P<N;++P)(R[P][F]=[0,+v(W,R[P].key,F,C)]).data=W;for(P=0,V=nM(d(R));P<N;++P)R[V[P]].index=P;return g(R,V),R}return w.keys=function(C){return arguments.length?(a="function"==typeof C?C:or(Array.from(C)),w):a},w.value=function(C){return arguments.length?(v="function"==typeof C?C:or(+C),w):v},w.order=function(C){return arguments.length?(d=null==C?aM:"function"==typeof C?C:or(Array.from(C)),w):d},w.offset=function(C){return arguments.length?(g=C??oM,w):g},w}function ST(a,d){if((v=a.length)>0){for(var g,v,R,w=0,C=a[0].length;w<C;++w){for(R=g=0;g<v;++g)R+=a[g][w][1]||0;if(R)for(g=0;g<v;++g)a[g][w][1]/=R}oM(a,d)}}function yL(a,d){if((N=a.length)>0)for(var g,w,C,R,P,N,v=0,F=a[d[0]].length;v<F;++v)for(R=P=0,g=0;g<N;++g)(C=(w=a[d[g]][v])[1]-w[0])>0?(w[0]=R,w[1]=R+=C):C<0?(w[1]=P,w[0]=P+=C):(w[0]=0,w[1]=C)}function AR(a,d){if((w=a.length)>0){for(var w,g=0,v=a[d[0]],C=v.length;g<C;++g){for(var R=0,P=0;R<w;++R)P+=a[R][g][1]||0;v[g][1]+=v[g][0]=-P/2}oM(a,d)}}function DR(a,d){if((R=a.length)>0&&(C=(w=a[d[0]]).length)>0){for(var w,C,R,g=0,v=1;v<C;++v){for(var P=0,N=0,F=0;P<R;++P){for(var V=a[d[P]],W=V[v][1]||0,q=(W-(V[v-1][1]||0))/2,ne=0;ne<P;++ne){var Z=a[d[ne]];q+=(Z[v][1]||0)-(Z[v-1][1]||0)}N+=W,F+=q*W}w[v-1][1]+=w[v-1][0]=g,N&&(g-=F/N)}w[v-1][1]+=w[v-1][0]=g,oM(a,d)}}function RR(a){var d=a.map(ET);return aM(a).sort(function(g,v){return d[g]-d[v]})}function ET(a){for(var w,d=-1,g=0,v=a.length,C=-1/0;++d<v;)(w=+a[d][1])>C&&(C=w,g=d);return g}function CT(a){var d=a.map(IR);return aM(a).sort(function(g,v){return d[g]-d[v]})}function IR(a){for(var w,d=0,g=-1,v=a.length;++g<v;)(w=+a[g][1])&&(d+=w);return d}function PR(a){return CT(a).reverse()}function bL(a){var g,v,d=a.length,w=a.map(IR),C=RR(a),R=0,P=0,N=[],F=[];for(g=0;g<d;++g)v=C[g],R<P?(R+=w[v],N.push(v)):(P+=w[v],F.push(v));return F.reverse().concat(N)}function xL(a){return aM(a).reverse()}yT.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,d){a=+a,d=+d,this._point?this._context.lineTo(a,d):(this._point=1,this._context.moveTo(a,d))}},Zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sM(this,this._t0,wR(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,d){var g=NaN;if(d=+d,(a=+a)!==this._x1||d!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2;break;case 2:this._point=3,sM(this,wR(this,g=MR(this,a,d)),g);break;default:sM(this,this._t0,g=MR(this,a,d))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=d,this._t0=g}}},(bT.prototype=Object.create(Zy.prototype)).point=function(a,d){Zy.prototype.point.call(this,d,a)},xT.prototype={moveTo:function(a,d){this._context.moveTo(d,a)},closePath:function(){this._context.closePath()},lineTo:function(a,d){this._context.lineTo(d,a)},bezierCurveTo:function(a,d,g,v,w,C){this._context.bezierCurveTo(d,a,v,g,C,w)}},KS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,d=this._y,g=a.length;if(g)if(this._line?this._context.lineTo(a[0],d[0]):this._context.moveTo(a[0],d[0]),2===g)this._context.lineTo(a[1],d[1]);else for(var v=wT(a),w=wT(d),C=0,R=1;R<g;++C,++R)this._context.bezierCurveTo(v[0][C],w[0][C],v[1][C],w[1][C],a[R],d[R]);(this._line||0!==this._line&&1===g)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,d){this._x.push(+a),this._y.push(+d)}},JS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,d){switch(a=+a,d=+d,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,d):this._context.moveTo(a,d);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,d),this._context.lineTo(a,d);else{var g=this._x*(1-this._t)+a*this._t;this._context.lineTo(g,this._y),this._context.lineTo(g,d)}}this._x=a,this._y=d}};var kR="%Y-%m-%dT%H:%M:%S.%LZ";const iN=Date.prototype.toISOString?function TT(a){return a.toISOString()}:HC(kR),ML=+new Date("2000-01-01T00:00:00.000Z")?function LR(a){var d=new Date(a);return isNaN(d)?null:d}:GC(kR);function wL(a,d,g){var v=new Vl,w=d;return null==d?(v.restart(a,d,g),v):(v._restart=v.restart,v.restart=function(C,R,P){R=+R,P=null==P?ra():+P,v._restart(function N(F){F+=w,v._restart(N,w+=R,P),C(F)},R,P)},v.restart(a,d,g),v)}const eE=a=>()=>a;function OR(a,{sourceEvent:d,target:g,transform:v,dispatch:w}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:d,enumerable:!0,configurable:!0},target:{value:g,enumerable:!0,configurable:!0},transform:{value:v,enumerable:!0,configurable:!0},_:{value:w}})}function vg(a,d,g){this.k=a,this.x=d,this.y=g}vg.prototype={constructor:vg,scale:function(a){return 1===a?this:new vg(this.k*a,this.x,this.y)},translate:function(a,d){return 0===a&0===d?this:new vg(this.k,this.x+this.k*a,this.y+this.k*d)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var d1=new vg(1,0,0);function AT(a){for(;!a.__zoom;)if(!(a=a.parentNode))return d1;return a.__zoom}function tE(a){a.stopImmediatePropagation()}function cM(a){a.preventDefault(),a.stopImmediatePropagation()}function sN(a){return!(a.ctrlKey&&"wheel"!==a.type||a.button)}function SL(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a).hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]:[[0,0],[a.clientWidth,a.clientHeight]]}function EL(){return this.__zoom||d1}function CL(a){return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function FR(){return navigator.maxTouchPoints||"ontouchstart"in this}function NR(a,d,g){var v=a.invertX(d[0][0])-g[0][0],w=a.invertX(d[1][0])-g[1][0],C=a.invertY(d[0][1])-g[0][1],R=a.invertY(d[1][1])-g[1][1];return a.translate(w>v?(v+w)/2:Math.min(0,v)||Math.max(0,w),R>C?(C+R)/2:Math.min(0,C)||Math.max(0,R))}function dv(){var V,W,H,a=sN,d=SL,g=NR,v=CL,w=FR,C=[0,1/0],R=[[-1/0,-1/0],[1/0,1/0]],P=250,N=Vy,F=W_("start","zoom","end"),q=500,ne=150,Z=0,K=10;function te(le){le.property("__zoom",EL).on("wheel.zoom",ye,{passive:!1}).on("mousedown.zoom",Ke).on("dblclick.zoom",ke).filter(w).on("touchstart.zoom",Oe).on("touchmove.zoom",ft).on("touchend.zoom touchcancel.zoom",it).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function ae(le,me){return(me=Math.max(C[0],Math.min(C[1],me)))===le.k?le:new vg(me,le.x,le.y)}function oe(le,me,Me){var We=me[0]-Me[0]*le.k,Se=me[1]-Me[1]*le.k;return We===le.x&&Se===le.y?le:new vg(le.k,We,Se)}function se(le){return[(+le[0][0]+ +le[1][0])/2,(+le[0][1]+ +le[1][1])/2]}function ue(le,me,Me,We){le.on("start.zoom",function(){_e(this,arguments).event(We).start()}).on("interrupt.zoom end.zoom",function(){_e(this,arguments).event(We).end()}).tween("zoom",function(){var Se=this,Ge=arguments,De=_e(Se,Ge).event(We),rt=d.apply(Se,Ge),gt=null==Me?se(rt):"function"==typeof Me?Me.apply(Se,Ge):Me,It=Math.max(rt[1][0]-rt[0][0],rt[1][1]-rt[0][1]),xt=Se.__zoom,Vt="function"==typeof me?me.apply(Se,Ge):me,bn=N(xt.invert(gt).concat(It/xt.k),Vt.invert(gt).concat(It/Vt.k));return function($t){if(1===$t)$t=Vt;else{var kn=bn($t),Xt=It/kn[2];$t=new vg(Xt,gt[0]-kn[0]*Xt,gt[1]-kn[1]*Xt)}De.zoom(null,$t)}})}function _e(le,me,Me){return!Me&&le.__zooming||new Ce(le,me)}function Ce(le,me){this.that=le,this.args=me,this.active=0,this.sourceEvent=null,this.extent=d.apply(le,me),this.taps=0}function ye(le,...me){if(a.apply(this,arguments)){var Me=_e(this,me).event(le),We=this.__zoom,Se=Math.max(C[0],Math.min(C[1],We.k*Math.pow(2,v.apply(this,arguments)))),Ge=Zi(le);if(Me.wheel)(Me.mouse[0][0]!==Ge[0]||Me.mouse[0][1]!==Ge[1])&&(Me.mouse[1]=We.invert(Me.mouse[0]=Ge)),clearTimeout(Me.wheel);else{if(We.k===Se)return;Me.mouse=[Ge,We.invert(Ge)],_s(this),Me.start()}cM(le),Me.wheel=setTimeout(function De(){Me.wheel=null,Me.end()},ne),Me.zoom("mouse",g(oe(ae(We,Se),Me.mouse[0],Me.mouse[1]),Me.extent,R))}}function Ke(le,...me){if(!H&&a.apply(this,arguments)){var Me=le.currentTarget,We=_e(this,me,!0).event(le),Se=Tr(le.view).on("mousemove.zoom",function gt(xt){if(cM(xt),!We.moved){var Vt=xt.clientX-De,bn=xt.clientY-rt;We.moved=Vt*Vt+bn*bn>Z}We.event(xt).zoom("mouse",g(oe(We.that.__zoom,We.mouse[0]=Zi(xt,Me),We.mouse[1]),We.extent,R))},!0).on("mouseup.zoom",function It(xt){Se.on("mousemove.zoom mouseup.zoom",null),Dc(xt.view,We.moved),cM(xt),We.event(xt).end()},!0),Ge=Zi(le,Me),De=le.clientX,rt=le.clientY;kl(le.view),tE(le),We.mouse=[Ge,this.__zoom.invert(Ge)],_s(this),We.start()}}function ke(le,...me){if(a.apply(this,arguments)){var Me=this.__zoom,We=Zi(le.changedTouches?le.changedTouches[0]:le,this),Se=Me.invert(We),De=g(oe(ae(Me,Me.k*(le.shiftKey?.5:2)),We,Se),d.apply(this,me),R);cM(le),P>0?Tr(this).transition().duration(P).call(ue,De,We,le):Tr(this).call(te.transform,De,We,le)}}function Oe(le,...me){if(a.apply(this,arguments)){var Ge,De,rt,gt,Me=le.touches,We=Me.length,Se=_e(this,me,le.changedTouches.length===We).event(le);for(tE(le),De=0;De<We;++De)gt=[gt=Zi(rt=Me[De],this),this.__zoom.invert(gt),rt.identifier],Se.touch0?!Se.touch1&&Se.touch0[2]!==gt[2]&&(Se.touch1=gt,Se.taps=0):(Se.touch0=gt,Ge=!0,Se.taps=1+!!V);V&&(V=clearTimeout(V)),Ge&&(Se.taps<2&&(W=gt[0],V=setTimeout(function(){V=null},q)),_s(this),Se.start())}}function ft(le,...me){if(this.__zooming){var Ge,De,rt,gt,Me=_e(this,me).event(le),We=le.changedTouches,Se=We.length;for(cM(le),Ge=0;Ge<Se;++Ge)rt=Zi(De=We[Ge],this),Me.touch0&&Me.touch0[2]===De.identifier?Me.touch0[0]=rt:Me.touch1&&Me.touch1[2]===De.identifier&&(Me.touch1[0]=rt);if(De=Me.that.__zoom,Me.touch1){var It=Me.touch0[0],xt=Me.touch0[1],Vt=Me.touch1[0],bn=Me.touch1[1],$t=($t=Vt[0]-It[0])*$t+($t=Vt[1]-It[1])*$t,kn=(kn=bn[0]-xt[0])*kn+(kn=bn[1]-xt[1])*kn;De=ae(De,Math.sqrt($t/kn)),rt=[(It[0]+Vt[0])/2,(It[1]+Vt[1])/2],gt=[(xt[0]+bn[0])/2,(xt[1]+bn[1])/2]}else{if(!Me.touch0)return;rt=Me.touch0[0],gt=Me.touch0[1]}Me.zoom("touch",g(oe(De,rt,gt),Me.extent,R))}}function it(le,...me){if(this.__zooming){var Ge,De,Me=_e(this,me).event(le),We=le.changedTouches,Se=We.length;for(tE(le),H&&clearTimeout(H),H=setTimeout(function(){H=null},q),Ge=0;Ge<Se;++Ge)De=We[Ge],Me.touch0&&Me.touch0[2]===De.identifier?delete Me.touch0:Me.touch1&&Me.touch1[2]===De.identifier&&delete Me.touch1;if(Me.touch1&&!Me.touch0&&(Me.touch0=Me.touch1,delete Me.touch1),Me.touch0)Me.touch0[1]=this.__zoom.invert(Me.touch0[0]);else if(Me.end(),2===Me.taps&&(De=Zi(De,this),Math.hypot(W[0]-De[0],W[1]-De[1])<K)){var rt=Tr(this).on("dblclick.zoom");rt&&rt.apply(this,arguments)}}}return te.transform=function(le,me,Me,We){var Se=le.selection?le.selection():le;Se.property("__zoom",EL),le!==Se?ue(le,me,Me,We):Se.interrupt().each(function(){_e(this,arguments).event(We).start().zoom(null,"function"==typeof me?me.apply(this,arguments):me).end()})},te.scaleBy=function(le,me,Me,We){te.scaleTo(le,function(){return this.__zoom.k*("function"==typeof me?me.apply(this,arguments):me)},Me,We)},te.scaleTo=function(le,me,Me,We){te.transform(le,function(){var Se=d.apply(this,arguments),Ge=this.__zoom,De=null==Me?se(Se):"function"==typeof Me?Me.apply(this,arguments):Me,rt=Ge.invert(De),gt="function"==typeof me?me.apply(this,arguments):me;return g(oe(ae(Ge,gt),De,rt),Se,R)},Me,We)},te.translateBy=function(le,me,Me,We){te.transform(le,function(){return g(this.__zoom.translate("function"==typeof me?me.apply(this,arguments):me,"function"==typeof Me?Me.apply(this,arguments):Me),d.apply(this,arguments),R)},null,We)},te.translateTo=function(le,me,Me,We,Se){te.transform(le,function(){var Ge=d.apply(this,arguments),De=this.__zoom,rt=null==We?se(Ge):"function"==typeof We?We.apply(this,arguments):We;return g(d1.translate(rt[0],rt[1]).scale(De.k).translate("function"==typeof me?-me.apply(this,arguments):-me,"function"==typeof Me?-Me.apply(this,arguments):-Me),Ge,R)},We,Se)},Ce.prototype={event:function(le){return le&&(this.sourceEvent=le),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(le,me){return this.mouse&&"mouse"!==le&&(this.mouse[1]=me.invert(this.mouse[0])),this.touch0&&"touch"!==le&&(this.touch0[1]=me.invert(this.touch0[0])),this.touch1&&"touch"!==le&&(this.touch1[1]=me.invert(this.touch1[0])),this.that.__zoom=me,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(le){var me=Tr(this.that).datum();F.call(le,this.that,new OR(le,{sourceEvent:this.sourceEvent,target:te,type:le,transform:this.that.__zoom,dispatch:F}),me)}},te.wheelDelta=function(le){return arguments.length?(v="function"==typeof le?le:eE(+le),te):v},te.filter=function(le){return arguments.length?(a="function"==typeof le?le:eE(!!le),te):a},te.touchable=function(le){return arguments.length?(w="function"==typeof le?le:eE(!!le),te):w},te.extent=function(le){return arguments.length?(d="function"==typeof le?le:eE([[+le[0][0],+le[0][1]],[+le[1][0],+le[1][1]]]),te):d},te.scaleExtent=function(le){return arguments.length?(C[0]=+le[0],C[1]=+le[1],te):[C[0],C[1]]},te.translateExtent=function(le){return arguments.length?(R[0][0]=+le[0][0],R[1][0]=+le[1][0],R[0][1]=+le[0][1],R[1][1]=+le[1][1],te):[[R[0][0],R[0][1]],[R[1][0],R[1][1]]]},te.constrain=function(le){return arguments.length?(g=le,te):g},te.duration=function(le){return arguments.length?(P=+le,te):P},te.interpolate=function(le){return arguments.length?(N=le,te):N},te.on=function(){var le=F.on.apply(F,arguments);return le===F?te:le},te.clickDistance=function(le){return arguments.length?(Z=(le=+le)*le,te):Math.sqrt(Z)},te.tapDistance=function(le){return arguments.length?(K=+le,te):K},te}AT.prototype=vg.prototype},379:(Fr,re,Rn)=>{"use strict";function rn(p,i,o,u,f,_,x){try{var M=p[_](x),E=M.value}catch(D){return void o(D)}M.done?i(E):Promise.resolve(E).then(u,f)}Rn.r(re),Rn.d(re,{OrbitControls:()=>b});const Qt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Je=0,Zt=1,Ue=2,He=1,ze=2,ct=3,Mt=0,At=1,yt=2,Kn=0,$r=1,po=2,xo=3,Mc=4,Jc=5,Bs=100,ou=101,cm=102,au=103,Gu=104,Lh=200,Mo=201,wo=202,P_=203,pr=204,Oh=205,Fh=206,k_=207,xv=208,Ci=209,L_=210,Nh=0,qr=1,mr=2,lm=3,ri=4,O_=5,Mv=6,Uh=7,Eg=0,hb=1,cu=2,wc=0,fb=1,wv=2,Sv=3,Of=4,Cg=5,Ca=301,Wu=302,Tl=303,ju=304,Ud=306,Oo=1e3,io=1001,gr=1002,Xr=1003,um=1004,dm=1005,bs=1006,F_=1007,Bd=1008,Al=1009,Ev=1010,Nf=1011,Cv=1012,uu=1013,Ta=1014,Sc=1015,Uf=1016,Tv=1017,Bf=1018,Bh=1020,Aa=1021,Ec=1023,Av=1024,xs=1025,So=1026,Vf=1027,pb=1028,Dv=1029,Rv=1030,mb=1031,N_=1033,ec=33776,hm=33777,ns=33778,Xu=33779,ua=35840,Iv=35841,U_=35842,B_=35843,Tg=36196,zf=37492,Vh=37496,V_=37808,fm=37809,Ag=37810,z_=37811,Dg=37812,Rg=37813,H_=37814,Ig=37815,G_=37816,Hf=37817,Ms=37818,tc=37819,Vd=37820,zh=37821,Yr=36492,Pg=36283,is=36284,pm=36285,Pv=36286,Wi=3e3,ws=3001,zd=3201,nc=0,k1=1,ic="srgb",gm="srgb-linear",_b="display-p3",ss="300 es",Zu=1035;class Ys{addEventListener(i,o){void 0===this._listeners&&(this._listeners={});const u=this._listeners;void 0===u[i]&&(u[i]=[]),-1===u[i].indexOf(o)&&u[i].push(o)}hasEventListener(i,o){if(void 0===this._listeners)return!1;const u=this._listeners;return void 0!==u[i]&&-1!==u[i].indexOf(o)}removeEventListener(i,o){if(void 0===this._listeners)return;const f=this._listeners[i];if(void 0!==f){const _=f.indexOf(o);-1!==_&&f.splice(_,1)}}dispatchEvent(i){if(void 0===this._listeners)return;const u=this._listeners[i.type];if(void 0!==u){i.target=this;const f=u.slice(0);for(let _=0,x=f.length;_<x;_++)f[_].call(this,i);i.target=null}}}const Qo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Cc=Math.PI/180,go=180/Math.PI;function kr(){const p=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=4294967295*Math.random()|0,u=4294967295*Math.random()|0;return(Qo[255&p]+Qo[p>>8&255]+Qo[p>>16&255]+Qo[p>>24&255]+"-"+Qo[255&i]+Qo[i>>8&255]+"-"+Qo[i>>16&15|64]+Qo[i>>24&255]+"-"+Qo[63&o|128]+Qo[o>>8&255]+"-"+Qo[o>>16&255]+Qo[o>>24&255]+Qo[255&u]+Qo[u>>8&255]+Qo[u>>16&255]+Qo[u>>24&255]).toLowerCase()}function Vs(p,i,o){return Math.max(i,Math.min(o,p))}function Rl(p,i,o){return(1-o)*p+o*i}function Tc(p){return 0==(p&p-1)&&0!==p}function tl(p){return Math.pow(2,Math.floor(Math.log(p)/Math.LN2))}function Bn(p,i){switch(i.constructor){case Float32Array:return p;case Uint16Array:return p/65535;case Uint8Array:return p/255;case Int16Array:return Math.max(p/32767,-1);case Int8Array:return Math.max(p/127,-1);default:throw new Error("Invalid component type.")}}function ji(p,i){switch(i.constructor){case Float32Array:return p;case Uint16Array:return Math.round(65535*p);case Uint8Array:return Math.round(255*p);case Int16Array:return Math.round(32767*p);case Int8Array:return Math.round(127*p);default:throw new Error("Invalid component type.")}}class Wt{constructor(i=0,o=0){Wt.prototype.isVector2=!0,this.x=i,this.y=o}get width(){return this.x}set width(i){this.x=i}get height(){return this.y}set height(i){this.y=i}set(i,o){return this.x=i,this.y=o,this}setScalar(i){return this.x=i,this.y=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setComponent(i,o){switch(i){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y)}copy(i){return this.x=i.x,this.y=i.y,this}add(i){return this.x+=i.x,this.y+=i.y,this}addScalar(i){return this.x+=i,this.y+=i,this}addVectors(i,o){return this.x=i.x+o.x,this.y=i.y+o.y,this}addScaledVector(i,o){return this.x+=i.x*o,this.y+=i.y*o,this}sub(i){return this.x-=i.x,this.y-=i.y,this}subScalar(i){return this.x-=i,this.y-=i,this}subVectors(i,o){return this.x=i.x-o.x,this.y=i.y-o.y,this}multiply(i){return this.x*=i.x,this.y*=i.y,this}multiplyScalar(i){return this.x*=i,this.y*=i,this}divide(i){return this.x/=i.x,this.y/=i.y,this}divideScalar(i){return this.multiplyScalar(1/i)}applyMatrix3(i){const o=this.x,u=this.y,f=i.elements;return this.x=f[0]*o+f[3]*u+f[6],this.y=f[1]*o+f[4]*u+f[7],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this}clamp(i,o){return this.x=Math.max(i.x,Math.min(o.x,this.x)),this.y=Math.max(i.y,Math.min(o.y,this.y)),this}clampScalar(i,o){return this.x=Math.max(i,Math.min(o,this.x)),this.y=Math.max(i,Math.min(o,this.y)),this}clampLength(i,o){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(i,Math.min(o,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(i){const o=Math.sqrt(this.lengthSq()*i.lengthSq());if(0===o)return Math.PI/2;const u=this.dot(i)/o;return Math.acos(Vs(u,-1,1))}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){const o=this.x-i.x,u=this.y-i.y;return o*o+u*u}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,o){return this.x+=(i.x-this.x)*o,this.y+=(i.y-this.y)*o,this}lerpVectors(i,o,u){return this.x=i.x+(o.x-i.x)*u,this.y=i.y+(o.y-i.y)*u,this}equals(i){return i.x===this.x&&i.y===this.y}fromArray(i,o=0){return this.x=i[o],this.y=i[o+1],this}toArray(i=[],o=0){return i[o]=this.x,i[o+1]=this.y,i}fromBufferAttribute(i,o){return this.x=i.getX(o),this.y=i.getY(o),this}rotateAround(i,o){const u=Math.cos(o),f=Math.sin(o),_=this.x-i.x,x=this.y-i.y;return this.x=_*u-x*f+i.x,this.y=_*f+x*u+i.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class er{constructor(){er.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(i,o,u,f,_,x,M,E,D){const k=this.elements;return k[0]=i,k[1]=f,k[2]=M,k[3]=o,k[4]=_,k[5]=E,k[6]=u,k[7]=x,k[8]=D,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(i){const o=this.elements,u=i.elements;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],this}extractBasis(i,o,u){return i.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),u.setFromMatrix3Column(this,2),this}setFromMatrix4(i){const o=i.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(i){return this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,o){const u=i.elements,f=o.elements,_=this.elements,x=u[0],M=u[3],E=u[6],D=u[1],k=u[4],O=u[7],I=u[2],U=u[5],B=u[8],j=f[0],$=f[3],G=f[6],Q=f[1],J=f[4],Y=f[7],ee=f[2],he=f[5],xe=f[8];return _[0]=x*j+M*Q+E*ee,_[3]=x*$+M*J+E*he,_[6]=x*G+M*Y+E*xe,_[1]=D*j+k*Q+O*ee,_[4]=D*$+k*J+O*he,_[7]=D*G+k*Y+O*xe,_[2]=I*j+U*Q+B*ee,_[5]=I*$+U*J+B*he,_[8]=I*G+U*Y+B*xe,this}multiplyScalar(i){const o=this.elements;return o[0]*=i,o[3]*=i,o[6]*=i,o[1]*=i,o[4]*=i,o[7]*=i,o[2]*=i,o[5]*=i,o[8]*=i,this}determinant(){const i=this.elements,o=i[0],u=i[1],f=i[2],_=i[3],x=i[4],M=i[5],E=i[6],D=i[7],k=i[8];return o*x*k-o*M*D-u*_*k+u*M*E+f*_*D-f*x*E}invert(){const i=this.elements,o=i[0],u=i[1],f=i[2],_=i[3],x=i[4],M=i[5],E=i[6],D=i[7],k=i[8],O=k*x-M*D,I=M*E-k*_,U=D*_-x*E,B=o*O+u*I+f*U;if(0===B)return this.set(0,0,0,0,0,0,0,0,0);const j=1/B;return i[0]=O*j,i[1]=(f*D-k*u)*j,i[2]=(M*u-f*x)*j,i[3]=I*j,i[4]=(k*o-f*E)*j,i[5]=(f*_-M*o)*j,i[6]=U*j,i[7]=(u*E-D*o)*j,i[8]=(x*o-u*_)*j,this}transpose(){let i;const o=this.elements;return i=o[1],o[1]=o[3],o[3]=i,i=o[2],o[2]=o[6],o[6]=i,i=o[5],o[5]=o[7],o[7]=i,this}getNormalMatrix(i){return this.setFromMatrix4(i).invert().transpose()}transposeIntoArray(i){const o=this.elements;return i[0]=o[0],i[1]=o[3],i[2]=o[6],i[3]=o[1],i[4]=o[4],i[5]=o[7],i[6]=o[2],i[7]=o[5],i[8]=o[8],this}setUvTransform(i,o,u,f,_,x,M){const E=Math.cos(_),D=Math.sin(_);return this.set(u*E,u*D,-u*(E*x+D*M)+x+i,-f*D,f*E,-f*(-D*x+E*M)+M+o,0,0,1),this}scale(i,o){return this.premultiply(Il.makeScale(i,o)),this}rotate(i){return this.premultiply(Il.makeRotation(-i)),this}translate(i,o){return this.premultiply(Il.makeTranslation(i,o)),this}makeTranslation(i,o){return this.set(1,0,i,0,1,o,0,0,1),this}makeRotation(i){const o=Math.cos(i),u=Math.sin(i);return this.set(o,-u,0,u,o,0,0,0,1),this}makeScale(i,o){return this.set(i,0,0,0,o,0,0,0,1),this}equals(i){const o=this.elements,u=i.elements;for(let f=0;f<9;f++)if(o[f]!==u[f])return!1;return!0}fromArray(i,o=0){for(let u=0;u<9;u++)this.elements[u]=i[u+o];return this}toArray(i=[],o=0){const u=this.elements;return i[o]=u[0],i[o+1]=u[1],i[o+2]=u[2],i[o+3]=u[3],i[o+4]=u[4],i[o+5]=u[5],i[o+6]=u[6],i[o+7]=u[7],i[o+8]=u[8],i}clone(){return(new this.constructor).fromArray(this.elements)}}const Il=new er;function vm(p){for(let i=p.length-1;i>=0;--i)if(p[i]>=65535)return!0;return!1}function Ju(p){return document.createElementNS("http://www.w3.org/1999/xhtml",p)}function Hh(p){return p<.04045?.0773993808*p:Math.pow(.9478672986*p+.0521327014,2.4)}function Uv(p){return p<.0031308?12.92*p:1.055*Math.pow(p,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const mi=(new er).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),RM=(new er).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Ia={[gm]:p=>p,[ic]:p=>p.convertSRGBToLinear(),[_b]:function Sb(p){return p.convertSRGBToLinear().applyMatrix3(RM)}},$i={[gm]:p=>p,[ic]:p=>p.convertLinearToSRGB(),[_b]:function Xn(p){return p.applyMatrix3(mi).convertLinearToSRGB()}},Mr={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(p){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!p},get workingColorSpace(){return gm},set workingColorSpace(p){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(p,i,o){if(!1===this.enabled||i===o||!i||!o)return p;const u=Ia[i],f=$i[o];if(void 0===u||void 0===f)throw new Error(`Unsupported color space conversion, "${i}" to "${o}".`);return f(u(p))},fromWorkingColorSpace:function(p,i){return this.convert(p,this.workingColorSpace,i)},toWorkingColorSpace:function(p,i){return this.convert(p,i,this.workingColorSpace)}};let _o;class nl{static getDataURL(i){if(/^data:/i.test(i.src)||typeof HTMLCanvasElement>"u")return i.src;let o;if(i instanceof HTMLCanvasElement)o=i;else{void 0===_o&&(_o=Ju("canvas")),_o.width=i.width,_o.height=i.height;const u=_o.getContext("2d");i instanceof ImageData?u.putImageData(i,0,0):u.drawImage(i,0,0,i.width,i.height),o=_o}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",i),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(i){if(typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap){const o=Ju("canvas");o.width=i.width,o.height=i.height;const u=o.getContext("2d");u.drawImage(i,0,0,i.width,i.height);const f=u.getImageData(0,0,i.width,i.height),_=f.data;for(let x=0;x<_.length;x++)_[x]=255*Hh(_[x]/255);return u.putImageData(f,0,0),o}if(i.data){const o=i.data.slice(0);for(let u=0;u<o.length;u++)o[u]=o instanceof Uint8Array||o instanceof Uint8ClampedArray?Math.floor(255*Hh(o[u]/255)):Hh(o[u]);return{data:o,width:i.width,height:i.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),i}}class Eo{constructor(i=null){this.isSource=!0,this.uuid=kr(),this.data=i,this.version=0}set needsUpdate(i){!0===i&&this.version++}toJSON(i){const o=void 0===i||"string"==typeof i;if(!o&&void 0!==i.images[this.uuid])return i.images[this.uuid];const u={uuid:this.uuid,url:""},f=this.data;if(null!==f){let _;if(Array.isArray(f)){_=[];for(let x=0,M=f.length;x<M;x++)_.push($_(f[x].isDataTexture?f[x].image:f[x]))}else _=$_(f);u.url=_}return o||(i.images[this.uuid]=u),u}}function $_(p){return typeof HTMLImageElement<"u"&&p instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&p instanceof ImageBitmap?nl.getDataURL(p):p.data?{data:Array.from(p.data),width:p.width,height:p.height,type:p.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rc=0,tr=(()=>{class p extends Ys{constructor(o=p.DEFAULT_IMAGE,u=p.DEFAULT_MAPPING,f=io,_=io,x=bs,M=Bd,E=Ec,D=Al,k=p.DEFAULT_ANISOTROPY,O=Wi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rc++}),this.uuid=kr(),this.name="",this.source=new Eo(o),this.mipmaps=[],this.mapping=u,this.channel=0,this.wrapS=f,this.wrapT=_,this.magFilter=x,this.minFilter=M,this.anisotropy=k,this.format=E,this.internalFormat=null,this.type=D,this.offset=new Wt(0,0),this.repeat=new Wt(1,1),this.center=new Wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new er,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=O,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(o=null){this.source.data=o}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(o){return this.name=o.name,this.source=o.source,this.mipmaps=o.mipmaps.slice(0),this.mapping=o.mapping,this.channel=o.channel,this.wrapS=o.wrapS,this.wrapT=o.wrapT,this.magFilter=o.magFilter,this.minFilter=o.minFilter,this.anisotropy=o.anisotropy,this.format=o.format,this.internalFormat=o.internalFormat,this.type=o.type,this.offset.copy(o.offset),this.repeat.copy(o.repeat),this.center.copy(o.center),this.rotation=o.rotation,this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrix.copy(o.matrix),this.generateMipmaps=o.generateMipmaps,this.premultiplyAlpha=o.premultiplyAlpha,this.flipY=o.flipY,this.unpackAlignment=o.unpackAlignment,this.encoding=o.encoding,this.userData=JSON.parse(JSON.stringify(o.userData)),this.needsUpdate=!0,this}toJSON(o){const u=void 0===o||"string"==typeof o;if(!u&&void 0!==o.textures[this.uuid])return o.textures[this.uuid];const f={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(o).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),u||(o.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(o){if(300!==this.mapping)return o;if(o.applyMatrix3(this.matrix),o.x<0||o.x>1)switch(this.wrapS){case Oo:o.x=o.x-Math.floor(o.x);break;case io:o.x=o.x<0?0:1;break;case gr:o.x=1===Math.abs(Math.floor(o.x)%2)?Math.ceil(o.x)-o.x:o.x-Math.floor(o.x)}if(o.y<0||o.y>1)switch(this.wrapT){case Oo:o.y=o.y-Math.floor(o.y);break;case io:o.y=o.y<0?0:1;break;case gr:o.y=1===Math.abs(Math.floor(o.y)%2)?Math.ceil(o.y)-o.y:o.y-Math.floor(o.y)}return this.flipY&&(o.y=1-o.y),o}set needsUpdate(o){!0===o&&(this.version++,this.source.needsUpdate=!0)}}return p.DEFAULT_IMAGE=null,p.DEFAULT_MAPPING=300,p.DEFAULT_ANISOTROPY=1,p})();class Vi{constructor(i=0,o=0,u=0,f=1){Vi.prototype.isVector4=!0,this.x=i,this.y=o,this.z=u,this.w=f}get width(){return this.z}set width(i){this.z=i}get height(){return this.w}set height(i){this.w=i}set(i,o,u,f){return this.x=i,this.y=o,this.z=u,this.w=f,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this.w=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setW(i){return this.w=i,this}setComponent(i,o){switch(i){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this.w=void 0!==i.w?i.w:1,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this.w+=i.w,this}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this.w+=i,this}addVectors(i,o){return this.x=i.x+o.x,this.y=i.y+o.y,this.z=i.z+o.z,this.w=i.w+o.w,this}addScaledVector(i,o){return this.x+=i.x*o,this.y+=i.y*o,this.z+=i.z*o,this.w+=i.w*o,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this.w-=i.w,this}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this.w-=i,this}subVectors(i,o){return this.x=i.x-o.x,this.y=i.y-o.y,this.z=i.z-o.z,this.w=i.w-o.w,this}multiply(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z,this.w*=i.w,this}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this}applyMatrix4(i){const o=this.x,u=this.y,f=this.z,_=this.w,x=i.elements;return this.x=x[0]*o+x[4]*u+x[8]*f+x[12]*_,this.y=x[1]*o+x[5]*u+x[9]*f+x[13]*_,this.z=x[2]*o+x[6]*u+x[10]*f+x[14]*_,this.w=x[3]*o+x[7]*u+x[11]*f+x[15]*_,this}divideScalar(i){return this.multiplyScalar(1/i)}setAxisAngleFromQuaternion(i){this.w=2*Math.acos(i.w);const o=Math.sqrt(1-i.w*i.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=i.x/o,this.y=i.y/o,this.z=i.z/o),this}setAxisAngleFromRotationMatrix(i){let o,u,f,_;const E=i.elements,D=E[0],k=E[4],O=E[8],I=E[1],U=E[5],B=E[9],j=E[2],$=E[6],G=E[10];if(Math.abs(k-I)<.01&&Math.abs(O-j)<.01&&Math.abs(B-$)<.01){if(Math.abs(k+I)<.1&&Math.abs(O+j)<.1&&Math.abs(B+$)<.1&&Math.abs(D+U+G-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const J=(D+1)/2,Y=(U+1)/2,ee=(G+1)/2,he=(k+I)/4,xe=(O+j)/4,fe=(B+$)/4;return J>Y&&J>ee?J<.01?(u=0,f=.707106781,_=.707106781):(u=Math.sqrt(J),f=he/u,_=xe/u):Y>ee?Y<.01?(u=.707106781,f=0,_=.707106781):(f=Math.sqrt(Y),u=he/f,_=fe/f):ee<.01?(u=.707106781,f=.707106781,_=0):(_=Math.sqrt(ee),u=xe/_,f=fe/_),this.set(u,f,_,o),this}let Q=Math.sqrt(($-B)*($-B)+(O-j)*(O-j)+(I-k)*(I-k));return Math.abs(Q)<.001&&(Q=1),this.x=($-B)/Q,this.y=(O-j)/Q,this.z=(I-k)/Q,this.w=Math.acos((D+U+G-1)/2),this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this.w=Math.min(this.w,i.w),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this.w=Math.max(this.w,i.w),this}clamp(i,o){return this.x=Math.max(i.x,Math.min(o.x,this.x)),this.y=Math.max(i.y,Math.min(o.y,this.y)),this.z=Math.max(i.z,Math.min(o.z,this.z)),this.w=Math.max(i.w,Math.min(o.w,this.w)),this}clampScalar(i,o){return this.x=Math.max(i,Math.min(o,this.x)),this.y=Math.max(i,Math.min(o,this.y)),this.z=Math.max(i,Math.min(o,this.z)),this.w=Math.max(i,Math.min(o,this.w)),this}clampLength(i,o){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(i,Math.min(o,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,o){return this.x+=(i.x-this.x)*o,this.y+=(i.y-this.y)*o,this.z+=(i.z-this.z)*o,this.w+=(i.w-this.w)*o,this}lerpVectors(i,o,u){return this.x=i.x+(o.x-i.x)*u,this.y=i.y+(o.y-i.y)*u,this.z=i.z+(o.z-i.z)*u,this.w=i.w+(o.w-i.w)*u,this}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z&&i.w===this.w}fromArray(i,o=0){return this.x=i[o],this.y=i[o+1],this.z=i[o+2],this.w=i[o+3],this}toArray(i=[],o=0){return i[o]=this.x,i[o+1]=this.y,i[o+2]=this.z,i[o+3]=this.w,i}fromBufferAttribute(i,o){return this.x=i.getX(o),this.y=i.getY(o),this.z=i.getZ(o),this.w=i.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Gn extends Ys{constructor(i=1,o=1,u={}){super(),this.isWebGLRenderTarget=!0,this.width=i,this.height=o,this.depth=1,this.scissor=new Vi(0,0,i,o),this.scissorTest=!1,this.viewport=new Vi(0,0,i,o),this.texture=new tr({width:i,height:o,depth:1},u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,this.texture.internalFormat=void 0!==u.internalFormat?u.internalFormat:null,this.texture.minFilter=void 0!==u.minFilter?u.minFilter:bs,this.depthBuffer=void 0===u.depthBuffer||u.depthBuffer,this.stencilBuffer=void 0!==u.stencilBuffer&&u.stencilBuffer,this.depthTexture=void 0!==u.depthTexture?u.depthTexture:null,this.samples=void 0!==u.samples?u.samples:0}setSize(i,o,u=1){(this.width!==i||this.height!==o||this.depth!==u)&&(this.width=i,this.height=o,this.depth=u,this.texture.image.width=i,this.texture.image.height=o,this.texture.image.depth=u,this.dispose()),this.viewport.set(0,0,i,o),this.scissor.set(0,0,i,o)}clone(){return(new this.constructor).copy(this)}copy(i){this.width=i.width,this.height=i.height,this.depth=i.depth,this.viewport.copy(i.viewport),this.texture=i.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},i.texture.image);return this.texture.source=new Eo(o),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,null!==i.depthTexture&&(this.depthTexture=i.depthTexture.clone()),this.samples=i.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qi extends tr{constructor(i=null,o=1,u=1,f=1){super(null),this.isDataArrayTexture=!0,this.image={data:i,width:o,height:u,depth:f},this.magFilter=Xr,this.minFilter=Xr,this.wrapR=io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pl extends tr{constructor(i=null,o=1,u=1,f=1){super(null),this.isData3DTexture=!0,this.image={data:i,width:o,height:u,depth:f},this.magFilter=Xr,this.minFilter=Xr,this.wrapR=io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pe{constructor(i=0,o=0,u=0,f=1){this.isQuaternion=!0,this._x=i,this._y=o,this._z=u,this._w=f}static slerpFlat(i,o,u,f,_,x,M){let E=u[f+0],D=u[f+1],k=u[f+2],O=u[f+3];const I=_[x+0],U=_[x+1],B=_[x+2],j=_[x+3];if(0===M)return i[o+0]=E,i[o+1]=D,i[o+2]=k,void(i[o+3]=O);if(1===M)return i[o+0]=I,i[o+1]=U,i[o+2]=B,void(i[o+3]=j);if(O!==j||E!==I||D!==U||k!==B){let $=1-M;const G=E*I+D*U+k*B+O*j,Q=G>=0?1:-1,J=1-G*G;if(J>Number.EPSILON){const ee=Math.sqrt(J),he=Math.atan2(ee,G*Q);$=Math.sin($*he)/ee,M=Math.sin(M*he)/ee}const Y=M*Q;if(E=E*$+I*Y,D=D*$+U*Y,k=k*$+B*Y,O=O*$+j*Y,$===1-M){const ee=1/Math.sqrt(E*E+D*D+k*k+O*O);E*=ee,D*=ee,k*=ee,O*=ee}}i[o]=E,i[o+1]=D,i[o+2]=k,i[o+3]=O}static multiplyQuaternionsFlat(i,o,u,f,_,x){const M=u[f],E=u[f+1],D=u[f+2],k=u[f+3],O=_[x],I=_[x+1],U=_[x+2],B=_[x+3];return i[o]=M*B+k*O+E*U-D*I,i[o+1]=E*B+k*I+D*O-M*U,i[o+2]=D*B+k*U+M*I-E*O,i[o+3]=k*B-M*O-E*I-D*U,i}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get w(){return this._w}set w(i){this._w=i,this._onChangeCallback()}set(i,o,u,f){return this._x=i,this._y=o,this._z=u,this._w=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(i){return this._x=i.x,this._y=i.y,this._z=i.z,this._w=i.w,this._onChangeCallback(),this}setFromEuler(i,o){const u=i._x,f=i._y,_=i._z,x=i._order,M=Math.cos,E=Math.sin,D=M(u/2),k=M(f/2),O=M(_/2),I=E(u/2),U=E(f/2),B=E(_/2);switch(x){case"XYZ":this._x=I*k*O+D*U*B,this._y=D*U*O-I*k*B,this._z=D*k*B+I*U*O,this._w=D*k*O-I*U*B;break;case"YXZ":this._x=I*k*O+D*U*B,this._y=D*U*O-I*k*B,this._z=D*k*B-I*U*O,this._w=D*k*O+I*U*B;break;case"ZXY":this._x=I*k*O-D*U*B,this._y=D*U*O+I*k*B,this._z=D*k*B+I*U*O,this._w=D*k*O-I*U*B;break;case"ZYX":this._x=I*k*O-D*U*B,this._y=D*U*O+I*k*B,this._z=D*k*B-I*U*O,this._w=D*k*O+I*U*B;break;case"YZX":this._x=I*k*O+D*U*B,this._y=D*U*O+I*k*B,this._z=D*k*B-I*U*O,this._w=D*k*O-I*U*B;break;case"XZY":this._x=I*k*O-D*U*B,this._y=D*U*O-I*k*B,this._z=D*k*B+I*U*O,this._w=D*k*O+I*U*B;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+x)}return!1!==o&&this._onChangeCallback(),this}setFromAxisAngle(i,o){const u=o/2,f=Math.sin(u);return this._x=i.x*f,this._y=i.y*f,this._z=i.z*f,this._w=Math.cos(u),this._onChangeCallback(),this}setFromRotationMatrix(i){const o=i.elements,u=o[0],f=o[4],_=o[8],x=o[1],M=o[5],E=o[9],D=o[2],k=o[6],O=o[10],I=u+M+O;if(I>0){const U=.5/Math.sqrt(I+1);this._w=.25/U,this._x=(k-E)*U,this._y=(_-D)*U,this._z=(x-f)*U}else if(u>M&&u>O){const U=2*Math.sqrt(1+u-M-O);this._w=(k-E)/U,this._x=.25*U,this._y=(f+x)/U,this._z=(_+D)/U}else if(M>O){const U=2*Math.sqrt(1+M-u-O);this._w=(_-D)/U,this._x=(f+x)/U,this._y=.25*U,this._z=(E+k)/U}else{const U=2*Math.sqrt(1+O-u-M);this._w=(x-f)/U,this._x=(_+D)/U,this._y=(E+k)/U,this._z=.25*U}return this._onChangeCallback(),this}setFromUnitVectors(i,o){let u=i.dot(o)+1;return u<Number.EPSILON?(u=0,Math.abs(i.x)>Math.abs(i.z)?(this._x=-i.y,this._y=i.x,this._z=0,this._w=u):(this._x=0,this._y=-i.z,this._z=i.y,this._w=u)):(this._x=i.y*o.z-i.z*o.y,this._y=i.z*o.x-i.x*o.z,this._z=i.x*o.y-i.y*o.x,this._w=u),this.normalize()}angleTo(i){return 2*Math.acos(Math.abs(Vs(this.dot(i),-1,1)))}rotateTowards(i,o){const u=this.angleTo(i);if(0===u)return this;const f=Math.min(1,o/u);return this.slerp(i,f),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(i){return this._x*i._x+this._y*i._y+this._z*i._z+this._w*i._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let i=this.length();return 0===i?(this._x=0,this._y=0,this._z=0,this._w=1):(i=1/i,this._x=this._x*i,this._y=this._y*i,this._z=this._z*i,this._w=this._w*i),this._onChangeCallback(),this}multiply(i){return this.multiplyQuaternions(this,i)}premultiply(i){return this.multiplyQuaternions(i,this)}multiplyQuaternions(i,o){const u=i._x,f=i._y,_=i._z,x=i._w,M=o._x,E=o._y,D=o._z,k=o._w;return this._x=u*k+x*M+f*D-_*E,this._y=f*k+x*E+_*M-u*D,this._z=_*k+x*D+u*E-f*M,this._w=x*k-u*M-f*E-_*D,this._onChangeCallback(),this}slerp(i,o){if(0===o)return this;if(1===o)return this.copy(i);const u=this._x,f=this._y,_=this._z,x=this._w;let M=x*i._w+u*i._x+f*i._y+_*i._z;if(M<0?(this._w=-i._w,this._x=-i._x,this._y=-i._y,this._z=-i._z,M=-M):this.copy(i),M>=1)return this._w=x,this._x=u,this._y=f,this._z=_,this;const E=1-M*M;if(E<=Number.EPSILON){const U=1-o;return this._w=U*x+o*this._w,this._x=U*u+o*this._x,this._y=U*f+o*this._y,this._z=U*_+o*this._z,this.normalize(),this._onChangeCallback(),this}const D=Math.sqrt(E),k=Math.atan2(D,M),O=Math.sin((1-o)*k)/D,I=Math.sin(o*k)/D;return this._w=x*O+this._w*I,this._x=u*O+this._x*I,this._y=f*O+this._y*I,this._z=_*O+this._z*I,this._onChangeCallback(),this}slerpQuaternions(i,o,u){return this.copy(i).slerp(o,u)}random(){const i=Math.random(),o=Math.sqrt(1-i),u=Math.sqrt(i),f=2*Math.PI*Math.random(),_=2*Math.PI*Math.random();return this.set(o*Math.cos(f),u*Math.sin(_),u*Math.cos(_),o*Math.sin(f))}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._w===this._w}fromArray(i,o=0){return this._x=i[o],this._y=i[o+1],this._z=i[o+2],this._w=i[o+3],this._onChangeCallback(),this}toArray(i=[],o=0){return i[o]=this._x,i[o+1]=this._y,i[o+2]=this._z,i[o+3]=this._w,i}fromBufferAttribute(i,o){return this._x=i.getX(o),this._y=i.getY(o),this._z=i.getZ(o),this._w=i.getW(o),this}toJSON(){return this.toArray()}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(i=0,o=0,u=0){Re.prototype.isVector3=!0,this.x=i,this.y=o,this.z=u}set(i,o,u){return void 0===u&&(u=this.z),this.x=i,this.y=o,this.z=u,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setComponent(i,o){switch(i){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this}addVectors(i,o){return this.x=i.x+o.x,this.y=i.y+o.y,this.z=i.z+o.z,this}addScaledVector(i,o){return this.x+=i.x*o,this.y+=i.y*o,this.z+=i.z*o,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this}subVectors(i,o){return this.x=i.x-o.x,this.y=i.y-o.y,this.z=i.z-o.z,this}multiply(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z,this}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this}multiplyVectors(i,o){return this.x=i.x*o.x,this.y=i.y*o.y,this.z=i.z*o.z,this}applyEuler(i){return this.applyQuaternion(Ac.setFromEuler(i))}applyAxisAngle(i,o){return this.applyQuaternion(Ac.setFromAxisAngle(i,o))}applyMatrix3(i){const o=this.x,u=this.y,f=this.z,_=i.elements;return this.x=_[0]*o+_[3]*u+_[6]*f,this.y=_[1]*o+_[4]*u+_[7]*f,this.z=_[2]*o+_[5]*u+_[8]*f,this}applyNormalMatrix(i){return this.applyMatrix3(i).normalize()}applyMatrix4(i){const o=this.x,u=this.y,f=this.z,_=i.elements,x=1/(_[3]*o+_[7]*u+_[11]*f+_[15]);return this.x=(_[0]*o+_[4]*u+_[8]*f+_[12])*x,this.y=(_[1]*o+_[5]*u+_[9]*f+_[13])*x,this.z=(_[2]*o+_[6]*u+_[10]*f+_[14])*x,this}applyQuaternion(i){const o=this.x,u=this.y,f=this.z,_=i.x,x=i.y,M=i.z,E=i.w,D=E*o+x*f-M*u,k=E*u+M*o-_*f,O=E*f+_*u-x*o,I=-_*o-x*u-M*f;return this.x=D*E+I*-_+k*-M-O*-x,this.y=k*E+I*-x+O*-_-D*-M,this.z=O*E+I*-M+D*-x-k*-_,this}project(i){return this.applyMatrix4(i.matrixWorldInverse).applyMatrix4(i.projectionMatrix)}unproject(i){return this.applyMatrix4(i.projectionMatrixInverse).applyMatrix4(i.matrixWorld)}transformDirection(i){const o=this.x,u=this.y,f=this.z,_=i.elements;return this.x=_[0]*o+_[4]*u+_[8]*f,this.y=_[1]*o+_[5]*u+_[9]*f,this.z=_[2]*o+_[6]*u+_[10]*f,this.normalize()}divide(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z,this}divideScalar(i){return this.multiplyScalar(1/i)}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this}clamp(i,o){return this.x=Math.max(i.x,Math.min(o.x,this.x)),this.y=Math.max(i.y,Math.min(o.y,this.y)),this.z=Math.max(i.z,Math.min(o.z,this.z)),this}clampScalar(i,o){return this.x=Math.max(i,Math.min(o,this.x)),this.y=Math.max(i,Math.min(o,this.y)),this.z=Math.max(i,Math.min(o,this.z)),this}clampLength(i,o){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(i,Math.min(o,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,o){return this.x+=(i.x-this.x)*o,this.y+=(i.y-this.y)*o,this.z+=(i.z-this.z)*o,this}lerpVectors(i,o,u){return this.x=i.x+(o.x-i.x)*u,this.y=i.y+(o.y-i.y)*u,this.z=i.z+(o.z-i.z)*u,this}cross(i){return this.crossVectors(this,i)}crossVectors(i,o){const u=i.x,f=i.y,_=i.z,x=o.x,M=o.y,E=o.z;return this.x=f*E-_*M,this.y=_*x-u*E,this.z=u*M-f*x,this}projectOnVector(i){const o=i.lengthSq();if(0===o)return this.set(0,0,0);const u=i.dot(this)/o;return this.copy(i).multiplyScalar(u)}projectOnPlane(i){return jf.copy(this).projectOnVector(i),this.sub(jf)}reflect(i){return this.sub(jf.copy(i).multiplyScalar(2*this.dot(i)))}angleTo(i){const o=Math.sqrt(this.lengthSq()*i.lengthSq());if(0===o)return Math.PI/2;const u=this.dot(i)/o;return Math.acos(Vs(u,-1,1))}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){const o=this.x-i.x,u=this.y-i.y,f=this.z-i.z;return o*o+u*u+f*f}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)+Math.abs(this.z-i.z)}setFromSpherical(i){return this.setFromSphericalCoords(i.radius,i.phi,i.theta)}setFromSphericalCoords(i,o,u){const f=Math.sin(o)*i;return this.x=f*Math.sin(u),this.y=Math.cos(o)*i,this.z=f*Math.cos(u),this}setFromCylindrical(i){return this.setFromCylindricalCoords(i.radius,i.theta,i.y)}setFromCylindricalCoords(i,o,u){return this.x=i*Math.sin(o),this.y=u,this.z=i*Math.cos(o),this}setFromMatrixPosition(i){const o=i.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(i){const o=this.setFromMatrixColumn(i,0).length(),u=this.setFromMatrixColumn(i,1).length(),f=this.setFromMatrixColumn(i,2).length();return this.x=o,this.y=u,this.z=f,this}setFromMatrixColumn(i,o){return this.fromArray(i.elements,4*o)}setFromMatrix3Column(i,o){return this.fromArray(i.elements,3*o)}setFromEuler(i){return this.x=i._x,this.y=i._y,this.z=i._z,this}setFromColor(i){return this.x=i.r,this.y=i.g,this.z=i.b,this}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z}fromArray(i,o=0){return this.x=i[o],this.y=i[o+1],this.z=i[o+2],this}toArray(i=[],o=0){return i[o]=this.x,i[o+1]=this.y,i[o+2]=this.z,i}fromBufferAttribute(i,o){return this.x=i.getX(o),this.y=i.getY(o),this.z=i.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const i=2*(Math.random()-.5),o=Math.random()*Math.PI*2,u=Math.sqrt(1-i**2);return this.x=u*Math.cos(o),this.y=u*Math.sin(o),this.z=i,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jf=new Re,Ac=new Pe;class gi{constructor(i=new Re(1/0,1/0,1/0),o=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=i,this.max=o}set(i,o){return this.min.copy(i),this.max.copy(o),this}setFromArray(i){this.makeEmpty();for(let o=0,u=i.length;o<u;o+=3)this.expandByPoint(Co.fromArray(i,o));return this}setFromBufferAttribute(i){this.makeEmpty();for(let o=0,u=i.count;o<u;o++)this.expandByPoint(Co.fromBufferAttribute(i,o));return this}setFromPoints(i){this.makeEmpty();for(let o=0,u=i.length;o<u;o++)this.expandByPoint(i[o]);return this}setFromCenterAndSize(i,o){const u=Co.copy(o).multiplyScalar(.5);return this.min.copy(i).sub(u),this.max.copy(i).add(u),this}setFromObject(i,o=!1){return this.makeEmpty(),this.expandByObject(i,o)}clone(){return(new this.constructor).copy(this)}copy(i){return this.min.copy(i.min),this.max.copy(i.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(i){return this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(i){return this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)}expandByPoint(i){return this.min.min(i),this.max.max(i),this}expandByVector(i){return this.min.sub(i),this.max.add(i),this}expandByScalar(i){return this.min.addScalar(-i),this.max.addScalar(i),this}expandByObject(i,o=!1){if(i.updateWorldMatrix(!1,!1),void 0!==i.boundingBox)null===i.boundingBox&&i.computeBoundingBox(),Ss.copy(i.boundingBox),Ss.applyMatrix4(i.matrixWorld),this.union(Ss);else{const f=i.geometry;if(void 0!==f)if(o&&void 0!==f.attributes&&void 0!==f.attributes.position){const _=f.attributes.position;for(let x=0,M=_.count;x<M;x++)Co.fromBufferAttribute(_,x).applyMatrix4(i.matrixWorld),this.expandByPoint(Co)}else null===f.boundingBox&&f.computeBoundingBox(),Ss.copy(f.boundingBox),Ss.applyMatrix4(i.matrixWorld),this.union(Ss)}const u=i.children;for(let f=0,_=u.length;f<_;f++)this.expandByObject(u[f],o);return this}containsPoint(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y||i.z<this.min.z||i.z>this.max.z)}containsBox(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y&&this.min.z<=i.min.z&&i.max.z<=this.max.z}getParameter(i,o){return o.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y||i.max.z<this.min.z||i.min.z>this.max.z)}intersectsSphere(i){return this.clampPoint(i.center,Co),Co.distanceToSquared(i.center)<=i.radius*i.radius}intersectsPlane(i){let o,u;return i.normal.x>0?(o=i.normal.x*this.min.x,u=i.normal.x*this.max.x):(o=i.normal.x*this.max.x,u=i.normal.x*this.min.x),i.normal.y>0?(o+=i.normal.y*this.min.y,u+=i.normal.y*this.max.y):(o+=i.normal.y*this.max.y,u+=i.normal.y*this.min.y),i.normal.z>0?(o+=i.normal.z*this.min.z,u+=i.normal.z*this.max.z):(o+=i.normal.z*this.max.z,u+=i.normal.z*this.min.z),o<=-i.constant&&u>=-i.constant}intersectsTriangle(i){if(this.isEmpty())return!1;this.getCenter(pu),wr.subVectors(this.max,pu),da.subVectors(i.a,pu),Es.subVectors(i.b,pu),so.subVectors(i.c,pu),Tr.subVectors(Es,da),Ks.subVectors(so,Es),No.subVectors(da,so);let o=[0,-Tr.z,Tr.y,0,-Ks.z,Ks.y,0,-No.z,No.y,Tr.z,0,-Tr.x,Ks.z,0,-Ks.x,No.z,0,-No.x,-Tr.y,Tr.x,0,-Ks.y,Ks.x,0,-No.y,No.x,0];return!(!Gd(o,da,Es,so,wr)||(o=[1,0,0,0,1,0,0,0,1],!Gd(o,da,Es,so,wr)))&&(kl.crossVectors(Tr,Ks),o=[kl.x,kl.y,kl.z],Gd(o,da,Es,so,wr))}clampPoint(i,o){return o.copy(i).clamp(this.min,this.max)}distanceToPoint(i){return this.clampPoint(i,Co).distanceTo(i)}getBoundingSphere(i){return this.isEmpty()?i.makeEmpty():(this.getCenter(i.center),i.radius=.5*this.getSize(Co).length()),i}intersect(i){return this.min.max(i.min),this.max.min(i.max),this.isEmpty()&&this.makeEmpty(),this}union(i){return this.min.min(i.min),this.max.max(i.max),this}applyMatrix4(i){return this.isEmpty()||(Fo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i),Fo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i),Fo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i),Fo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i),Fo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i),Fo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i),Fo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i),Fo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i),this.setFromPoints(Fo)),this}translate(i){return this.min.add(i),this.max.add(i),this}equals(i){return i.min.equals(this.min)&&i.max.equals(this.max)}}const Fo=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],Co=new Re,Ss=new gi,da=new Re,Es=new Re,so=new Re,Tr=new Re,Ks=new Re,No=new Re,pu=new Re,wr=new Re,kl=new Re,Dc=new Re;function Gd(p,i,o,u,f){for(let _=0,x=p.length-3;_<=x;_+=3){Dc.fromArray(p,_);const M=f.x*Math.abs(Dc.x)+f.y*Math.abs(Dc.y)+f.z*Math.abs(Dc.z),E=i.dot(Dc),D=o.dot(Dc),k=u.dot(Dc);if(Math.max(-Math.max(E,D,k),Math.min(E,D,k))>M)return!1}return!0}const Ll=new gi,ha=new Re,Js=new Re;class Sr{constructor(i=new Re,o=-1){this.center=i,this.radius=o}set(i,o){return this.center.copy(i),this.radius=o,this}setFromPoints(i,o){const u=this.center;void 0!==o?u.copy(o):Ll.setFromPoints(i).getCenter(u);let f=0;for(let _=0,x=i.length;_<x;_++)f=Math.max(f,u.distanceToSquared(i[_]));return this.radius=Math.sqrt(f),this}copy(i){return this.center.copy(i.center),this.radius=i.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(i){return i.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(i){return i.distanceTo(this.center)-this.radius}intersectsSphere(i){const o=this.radius+i.radius;return i.center.distanceToSquared(this.center)<=o*o}intersectsBox(i){return i.intersectsSphere(this)}intersectsPlane(i){return Math.abs(i.distanceToPoint(this.center))<=this.radius}clampPoint(i,o){const u=this.center.distanceToSquared(i);return o.copy(i),u>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(i){return this.isEmpty()?(i.makeEmpty(),i):(i.set(this.center,this.center),i.expandByScalar(this.radius),i)}applyMatrix4(i){return this.center.applyMatrix4(i),this.radius=this.radius*i.getMaxScaleOnAxis(),this}translate(i){return this.center.add(i),this}expandByPoint(i){if(this.isEmpty())return this.center.copy(i),this.radius=0,this;ha.subVectors(i,this.center);const o=ha.lengthSq();if(o>this.radius*this.radius){const u=Math.sqrt(o),f=.5*(u-this.radius);this.center.addScaledVector(ha,f/u),this.radius+=f}return this}union(i){return i.isEmpty()?this:this.isEmpty()?(this.copy(i),this):(!0===this.center.equals(i.center)?this.radius=Math.max(this.radius,i.radius):(Js.subVectors(i.center,this.center).setLength(i.radius),this.expandByPoint(ha.copy(i.center).add(Js)),this.expandByPoint(ha.copy(i.center).sub(Js))),this)}equals(i){return i.center.equals(this.center)&&i.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sc=new Re,oo=new Re,Zr=new Re,Ol=new Re,Qu=new Re,Wd=new Re,fa=new Re;class zi{constructor(i=new Re,o=new Re(0,0,-1)){this.origin=i,this.direction=o}set(i,o){return this.origin.copy(i),this.direction.copy(o),this}copy(i){return this.origin.copy(i.origin),this.direction.copy(i.direction),this}at(i,o){return o.copy(this.origin).addScaledVector(this.direction,i)}lookAt(i){return this.direction.copy(i).sub(this.origin).normalize(),this}recast(i){return this.origin.copy(this.at(i,sc)),this}closestPointToPoint(i,o){o.subVectors(i,this.origin);const u=o.dot(this.direction);return u<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,u)}distanceToPoint(i){return Math.sqrt(this.distanceSqToPoint(i))}distanceSqToPoint(i){const o=sc.subVectors(i,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(i):(sc.copy(this.origin).addScaledVector(this.direction,o),sc.distanceToSquared(i))}distanceSqToSegment(i,o,u,f){oo.copy(i).add(o).multiplyScalar(.5),Zr.copy(o).sub(i).normalize(),Ol.copy(this.origin).sub(oo);const _=.5*i.distanceTo(o),x=-this.direction.dot(Zr),M=Ol.dot(this.direction),E=-Ol.dot(Zr),D=Ol.lengthSq(),k=Math.abs(1-x*x);let O,I,U,B;if(k>0)if(O=x*E-M,I=x*M-E,B=_*k,O>=0)if(I>=-B)if(I<=B){const j=1/k;O*=j,I*=j,U=O*(O+x*I+2*M)+I*(x*O+I+2*E)+D}else I=_,O=Math.max(0,-(x*I+M)),U=-O*O+I*(I+2*E)+D;else I=-_,O=Math.max(0,-(x*I+M)),U=-O*O+I*(I+2*E)+D;else I<=-B?(O=Math.max(0,-(-x*_+M)),I=O>0?-_:Math.min(Math.max(-_,-E),_),U=-O*O+I*(I+2*E)+D):I<=B?(O=0,I=Math.min(Math.max(-_,-E),_),U=I*(I+2*E)+D):(O=Math.max(0,-(x*_+M)),I=O>0?_:Math.min(Math.max(-_,-E),_),U=-O*O+I*(I+2*E)+D);else I=x>0?-_:_,O=Math.max(0,-(x*I+M)),U=-O*O+I*(I+2*E)+D;return u&&u.copy(this.origin).addScaledVector(this.direction,O),f&&f.copy(oo).addScaledVector(Zr,I),U}intersectSphere(i,o){sc.subVectors(i.center,this.origin);const u=sc.dot(this.direction),f=sc.dot(sc)-u*u,_=i.radius*i.radius;if(f>_)return null;const x=Math.sqrt(_-f),M=u-x,E=u+x;return E<0?null:this.at(M<0?E:M,o)}intersectsSphere(i){return this.distanceSqToPoint(i.center)<=i.radius*i.radius}distanceToPlane(i){const o=i.normal.dot(this.direction);if(0===o)return 0===i.distanceToPoint(this.origin)?0:null;const u=-(this.origin.dot(i.normal)+i.constant)/o;return u>=0?u:null}intersectPlane(i,o){const u=this.distanceToPlane(i);return null===u?null:this.at(u,o)}intersectsPlane(i){const o=i.distanceToPoint(this.origin);return 0===o||i.normal.dot(this.direction)*o<0}intersectBox(i,o){let u,f,_,x,M,E;const D=1/this.direction.x,k=1/this.direction.y,O=1/this.direction.z,I=this.origin;return D>=0?(u=(i.min.x-I.x)*D,f=(i.max.x-I.x)*D):(u=(i.max.x-I.x)*D,f=(i.min.x-I.x)*D),k>=0?(_=(i.min.y-I.y)*k,x=(i.max.y-I.y)*k):(_=(i.max.y-I.y)*k,x=(i.min.y-I.y)*k),u>x||_>f||((_>u||isNaN(u))&&(u=_),(x<f||isNaN(f))&&(f=x),O>=0?(M=(i.min.z-I.z)*O,E=(i.max.z-I.z)*O):(M=(i.max.z-I.z)*O,E=(i.min.z-I.z)*O),u>E||M>f)||((M>u||u!=u)&&(u=M),(E<f||f!=f)&&(f=E),f<0)?null:this.at(u>=0?u:f,o)}intersectsBox(i){return null!==this.intersectBox(i,sc)}intersectTriangle(i,o,u,f,_){Qu.subVectors(o,i),Wd.subVectors(u,i),fa.crossVectors(Qu,Wd);let M,x=this.direction.dot(fa);if(x>0){if(f)return null;M=1}else{if(!(x<0))return null;M=-1,x=-x}Ol.subVectors(this.origin,i);const E=M*this.direction.dot(Wd.crossVectors(Ol,Wd));if(E<0)return null;const D=M*this.direction.dot(Qu.cross(Ol));if(D<0||E+D>x)return null;const k=-M*Ol.dot(fa);return k<0?null:this.at(k/x,_)}applyMatrix4(i){return this.origin.applyMatrix4(i),this.direction.transformDirection(i),this}equals(i){return i.origin.equals(this.origin)&&i.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Hi{constructor(){Hi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(i,o,u,f,_,x,M,E,D,k,O,I,U,B,j,$){const G=this.elements;return G[0]=i,G[4]=o,G[8]=u,G[12]=f,G[1]=_,G[5]=x,G[9]=M,G[13]=E,G[2]=D,G[6]=k,G[10]=O,G[14]=I,G[3]=U,G[7]=B,G[11]=j,G[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Hi).fromArray(this.elements)}copy(i){const o=this.elements,u=i.elements;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],this}copyPosition(i){const o=this.elements,u=i.elements;return o[12]=u[12],o[13]=u[13],o[14]=u[14],this}setFromMatrix3(i){const o=i.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(i,o,u){return i.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),u.setFromMatrixColumn(this,2),this}makeBasis(i,o,u){return this.set(i.x,o.x,u.x,0,i.y,o.y,u.y,0,i.z,o.z,u.z,0,0,0,0,1),this}extractRotation(i){const o=this.elements,u=i.elements,f=1/Pa.setFromMatrixColumn(i,0).length(),_=1/Pa.setFromMatrixColumn(i,1).length(),x=1/Pa.setFromMatrixColumn(i,2).length();return o[0]=u[0]*f,o[1]=u[1]*f,o[2]=u[2]*f,o[3]=0,o[4]=u[4]*_,o[5]=u[5]*_,o[6]=u[6]*_,o[7]=0,o[8]=u[8]*x,o[9]=u[9]*x,o[10]=u[10]*x,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(i){const o=this.elements,u=i.x,f=i.y,_=i.z,x=Math.cos(u),M=Math.sin(u),E=Math.cos(f),D=Math.sin(f),k=Math.cos(_),O=Math.sin(_);if("XYZ"===i.order){const I=x*k,U=x*O,B=M*k,j=M*O;o[0]=E*k,o[4]=-E*O,o[8]=D,o[1]=U+B*D,o[5]=I-j*D,o[9]=-M*E,o[2]=j-I*D,o[6]=B+U*D,o[10]=x*E}else if("YXZ"===i.order){const I=E*k,U=E*O,B=D*k,j=D*O;o[0]=I+j*M,o[4]=B*M-U,o[8]=x*D,o[1]=x*O,o[5]=x*k,o[9]=-M,o[2]=U*M-B,o[6]=j+I*M,o[10]=x*E}else if("ZXY"===i.order){const I=E*k,U=E*O,B=D*k,j=D*O;o[0]=I-j*M,o[4]=-x*O,o[8]=B+U*M,o[1]=U+B*M,o[5]=x*k,o[9]=j-I*M,o[2]=-x*D,o[6]=M,o[10]=x*E}else if("ZYX"===i.order){const I=x*k,U=x*O,B=M*k,j=M*O;o[0]=E*k,o[4]=B*D-U,o[8]=I*D+j,o[1]=E*O,o[5]=j*D+I,o[9]=U*D-B,o[2]=-D,o[6]=M*E,o[10]=x*E}else if("YZX"===i.order){const I=x*E,U=x*D,B=M*E,j=M*D;o[0]=E*k,o[4]=j-I*O,o[8]=B*O+U,o[1]=O,o[5]=x*k,o[9]=-M*k,o[2]=-D*k,o[6]=U*O+B,o[10]=I-j*O}else if("XZY"===i.order){const I=x*E,U=x*D,B=M*E,j=M*D;o[0]=E*k,o[4]=-O,o[8]=D*k,o[1]=I*O+j,o[5]=x*k,o[9]=U*O-B,o[2]=B*O-U,o[6]=M*k,o[10]=j*O+I}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(i){return this.compose(IM,i,$f)}lookAt(i,o,u){const f=this.elements;return To.subVectors(i,o),0===To.lengthSq()&&(To.z=1),To.normalize(),ed.crossVectors(u,To),0===ed.lengthSq()&&(1===Math.abs(u.z)?To.x+=1e-4:To.z+=1e-4,To.normalize(),ed.crossVectors(u,To)),ed.normalize(),ka.crossVectors(To,ed),f[0]=ed.x,f[4]=ka.x,f[8]=To.x,f[1]=ed.y,f[5]=ka.y,f[9]=To.y,f[2]=ed.z,f[6]=ka.z,f[10]=To.z,this}multiply(i){return this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,o){const u=i.elements,f=o.elements,_=this.elements,x=u[0],M=u[4],E=u[8],D=u[12],k=u[1],O=u[5],I=u[9],U=u[13],B=u[2],j=u[6],$=u[10],G=u[14],Q=u[3],J=u[7],Y=u[11],ee=u[15],he=f[0],xe=f[4],fe=f[8],ce=f[12],de=f[1],Ye=f[5],Qe=f[9],Ne=f[13],$e=f[2],et=f[6],Pt=f[10],Dt=f[14],Ze=f[3],at=f[7],bt=f[11],tn=f[15];return _[0]=x*he+M*de+E*$e+D*Ze,_[4]=x*xe+M*Ye+E*et+D*at,_[8]=x*fe+M*Qe+E*Pt+D*bt,_[12]=x*ce+M*Ne+E*Dt+D*tn,_[1]=k*he+O*de+I*$e+U*Ze,_[5]=k*xe+O*Ye+I*et+U*at,_[9]=k*fe+O*Qe+I*Pt+U*bt,_[13]=k*ce+O*Ne+I*Dt+U*tn,_[2]=B*he+j*de+$*$e+G*Ze,_[6]=B*xe+j*Ye+$*et+G*at,_[10]=B*fe+j*Qe+$*Pt+G*bt,_[14]=B*ce+j*Ne+$*Dt+G*tn,_[3]=Q*he+J*de+Y*$e+ee*Ze,_[7]=Q*xe+J*Ye+Y*et+ee*at,_[11]=Q*fe+J*Qe+Y*Pt+ee*bt,_[15]=Q*ce+J*Ne+Y*Dt+ee*tn,this}multiplyScalar(i){const o=this.elements;return o[0]*=i,o[4]*=i,o[8]*=i,o[12]*=i,o[1]*=i,o[5]*=i,o[9]*=i,o[13]*=i,o[2]*=i,o[6]*=i,o[10]*=i,o[14]*=i,o[3]*=i,o[7]*=i,o[11]*=i,o[15]*=i,this}determinant(){const i=this.elements,o=i[0],u=i[4],f=i[8],_=i[12],x=i[1],M=i[5],E=i[9],D=i[13],k=i[2],O=i[6],I=i[10],U=i[14];return i[3]*(+_*E*O-f*D*O-_*M*I+u*D*I+f*M*U-u*E*U)+i[7]*(+o*E*U-o*D*I+_*x*I-f*x*U+f*D*k-_*E*k)+i[11]*(+o*D*O-o*M*U-_*x*O+u*x*U+_*M*k-u*D*k)+i[15]*(-f*M*k-o*E*O+o*M*I+f*x*O-u*x*I+u*E*k)}transpose(){const i=this.elements;let o;return o=i[1],i[1]=i[4],i[4]=o,o=i[2],i[2]=i[8],i[8]=o,o=i[6],i[6]=i[9],i[9]=o,o=i[3],i[3]=i[12],i[12]=o,o=i[7],i[7]=i[13],i[13]=o,o=i[11],i[11]=i[14],i[14]=o,this}setPosition(i,o,u){const f=this.elements;return i.isVector3?(f[12]=i.x,f[13]=i.y,f[14]=i.z):(f[12]=i,f[13]=o,f[14]=u),this}invert(){const i=this.elements,o=i[0],u=i[1],f=i[2],_=i[3],x=i[4],M=i[5],E=i[6],D=i[7],k=i[8],O=i[9],I=i[10],U=i[11],B=i[12],j=i[13],$=i[14],G=i[15],Q=O*$*D-j*I*D+j*E*U-M*$*U-O*E*G+M*I*G,J=B*I*D-k*$*D-B*E*U+x*$*U+k*E*G-x*I*G,Y=k*j*D-B*O*D+B*M*U-x*j*U-k*M*G+x*O*G,ee=B*O*E-k*j*E-B*M*I+x*j*I+k*M*$-x*O*$,he=o*Q+u*J+f*Y+_*ee;if(0===he)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const xe=1/he;return i[0]=Q*xe,i[1]=(j*I*_-O*$*_-j*f*U+u*$*U+O*f*G-u*I*G)*xe,i[2]=(M*$*_-j*E*_+j*f*D-u*$*D-M*f*G+u*E*G)*xe,i[3]=(O*E*_-M*I*_-O*f*D+u*I*D+M*f*U-u*E*U)*xe,i[4]=J*xe,i[5]=(k*$*_-B*I*_+B*f*U-o*$*U-k*f*G+o*I*G)*xe,i[6]=(B*E*_-x*$*_-B*f*D+o*$*D+x*f*G-o*E*G)*xe,i[7]=(x*I*_-k*E*_+k*f*D-o*I*D-x*f*U+o*E*U)*xe,i[8]=Y*xe,i[9]=(B*O*_-k*j*_-B*u*U+o*j*U+k*u*G-o*O*G)*xe,i[10]=(x*j*_-B*M*_+B*u*D-o*j*D-x*u*G+o*M*G)*xe,i[11]=(k*M*_-x*O*_-k*u*D+o*O*D+x*u*U-o*M*U)*xe,i[12]=ee*xe,i[13]=(k*j*f-B*O*f+B*u*I-o*j*I-k*u*$+o*O*$)*xe,i[14]=(B*M*f-x*j*f-B*u*E+o*j*E+x*u*$-o*M*$)*xe,i[15]=(x*O*f-k*M*f+k*u*E-o*O*E-x*u*I+o*M*I)*xe,this}scale(i){const o=this.elements,u=i.x,f=i.y,_=i.z;return o[0]*=u,o[4]*=f,o[8]*=_,o[1]*=u,o[5]*=f,o[9]*=_,o[2]*=u,o[6]*=f,o[10]*=_,o[3]*=u,o[7]*=f,o[11]*=_,this}getMaxScaleOnAxis(){const i=this.elements;return Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1]+i[2]*i[2],i[4]*i[4]+i[5]*i[5]+i[6]*i[6],i[8]*i[8]+i[9]*i[9]+i[10]*i[10]))}makeTranslation(i,o,u){return this.set(1,0,0,i,0,1,0,o,0,0,1,u,0,0,0,1),this}makeRotationX(i){const o=Math.cos(i),u=Math.sin(i);return this.set(1,0,0,0,0,o,-u,0,0,u,o,0,0,0,0,1),this}makeRotationY(i){const o=Math.cos(i),u=Math.sin(i);return this.set(o,0,u,0,0,1,0,0,-u,0,o,0,0,0,0,1),this}makeRotationZ(i){const o=Math.cos(i),u=Math.sin(i);return this.set(o,-u,0,0,u,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(i,o){const u=Math.cos(o),f=Math.sin(o),_=1-u,x=i.x,M=i.y,E=i.z,D=_*x,k=_*M;return this.set(D*x+u,D*M-f*E,D*E+f*M,0,D*M+f*E,k*M+u,k*E-f*x,0,D*E-f*M,k*E+f*x,_*E*E+u,0,0,0,0,1),this}makeScale(i,o,u){return this.set(i,0,0,0,0,o,0,0,0,0,u,0,0,0,0,1),this}makeShear(i,o,u,f,_,x){return this.set(1,u,_,0,i,1,x,0,o,f,1,0,0,0,0,1),this}compose(i,o,u){const f=this.elements,_=o._x,x=o._y,M=o._z,E=o._w,D=_+_,k=x+x,O=M+M,I=_*D,U=_*k,B=_*O,j=x*k,$=x*O,G=M*O,Q=E*D,J=E*k,Y=E*O,ee=u.x,he=u.y,xe=u.z;return f[0]=(1-(j+G))*ee,f[1]=(U+Y)*ee,f[2]=(B-J)*ee,f[3]=0,f[4]=(U-Y)*he,f[5]=(1-(I+G))*he,f[6]=($+Q)*he,f[7]=0,f[8]=(B+J)*xe,f[9]=($-Q)*xe,f[10]=(1-(I+j))*xe,f[11]=0,f[12]=i.x,f[13]=i.y,f[14]=i.z,f[15]=1,this}decompose(i,o,u){const f=this.elements;let _=Pa.set(f[0],f[1],f[2]).length();const x=Pa.set(f[4],f[5],f[6]).length(),M=Pa.set(f[8],f[9],f[10]).length();this.determinant()<0&&(_=-_),i.x=f[12],i.y=f[13],i.z=f[14],Fl.copy(this);const D=1/_,k=1/x,O=1/M;return Fl.elements[0]*=D,Fl.elements[1]*=D,Fl.elements[2]*=D,Fl.elements[4]*=k,Fl.elements[5]*=k,Fl.elements[6]*=k,Fl.elements[8]*=O,Fl.elements[9]*=O,Fl.elements[10]*=O,o.setFromRotationMatrix(Fl),u.x=_,u.y=x,u.z=M,this}makePerspective(i,o,u,f,_,x){const M=this.elements,D=2*_/(u-f),k=(o+i)/(o-i),O=(u+f)/(u-f),I=-(x+_)/(x-_),U=-2*x*_/(x-_);return M[0]=2*_/(o-i),M[4]=0,M[8]=k,M[12]=0,M[1]=0,M[5]=D,M[9]=O,M[13]=0,M[2]=0,M[6]=0,M[10]=I,M[14]=U,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this}makeOrthographic(i,o,u,f,_,x){const M=this.elements,E=1/(o-i),D=1/(u-f),k=1/(x-_),O=(o+i)*E,I=(u+f)*D,U=(x+_)*k;return M[0]=2*E,M[4]=0,M[8]=0,M[12]=-O,M[1]=0,M[5]=2*D,M[9]=0,M[13]=-I,M[2]=0,M[6]=0,M[10]=-2*k,M[14]=-U,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this}equals(i){const o=this.elements,u=i.elements;for(let f=0;f<16;f++)if(o[f]!==u[f])return!1;return!0}fromArray(i,o=0){for(let u=0;u<16;u++)this.elements[u]=i[u+o];return this}toArray(i=[],o=0){const u=this.elements;return i[o]=u[0],i[o+1]=u[1],i[o+2]=u[2],i[o+3]=u[3],i[o+4]=u[4],i[o+5]=u[5],i[o+6]=u[6],i[o+7]=u[7],i[o+8]=u[8],i[o+9]=u[9],i[o+10]=u[10],i[o+11]=u[11],i[o+12]=u[12],i[o+13]=u[13],i[o+14]=u[14],i[o+15]=u[15],i}}const Pa=new Re,Fl=new Hi,IM=new Re(0,0,0),$f=new Re(1,1,1),ed=new Re,ka=new Re,To=new Re,Bv=new Hi,Lg=new Pe;let Og=(()=>{class p{constructor(o=0,u=0,f=0,_=p.DEFAULT_ORDER){this.isEuler=!0,this._x=o,this._y=u,this._z=f,this._order=_}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get order(){return this._order}set order(o){this._order=o,this._onChangeCallback()}set(o,u,f,_=this._order){return this._x=o,this._y=u,this._z=f,this._order=_,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}setFromRotationMatrix(o,u=this._order,f=!0){const _=o.elements,x=_[0],M=_[4],E=_[8],D=_[1],k=_[5],O=_[9],I=_[2],U=_[6],B=_[10];switch(u){case"XYZ":this._y=Math.asin(Vs(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-O,B),this._z=Math.atan2(-M,x)):(this._x=Math.atan2(U,k),this._z=0);break;case"YXZ":this._x=Math.asin(-Vs(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(E,B),this._z=Math.atan2(D,k)):(this._y=Math.atan2(-I,x),this._z=0);break;case"ZXY":this._x=Math.asin(Vs(U,-1,1)),Math.abs(U)<.9999999?(this._y=Math.atan2(-I,B),this._z=Math.atan2(-M,k)):(this._y=0,this._z=Math.atan2(D,x));break;case"ZYX":this._y=Math.asin(-Vs(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(U,B),this._z=Math.atan2(D,x)):(this._x=0,this._z=Math.atan2(-M,k));break;case"YZX":this._z=Math.asin(Vs(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(-O,k),this._y=Math.atan2(-I,x)):(this._x=0,this._y=Math.atan2(E,B));break;case"XZY":this._z=Math.asin(-Vs(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(U,k),this._y=Math.atan2(E,x)):(this._x=Math.atan2(-O,B),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,!0===f&&this._onChangeCallback(),this}setFromQuaternion(o,u,f){return Bv.makeRotationFromQuaternion(o),this.setFromRotationMatrix(Bv,u,f)}setFromVector3(o,u=this._order){return this.set(o.x,o.y,o.z,u)}reorder(o){return Lg.setFromEuler(this),this.setFromQuaternion(Lg,o)}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}fromArray(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this._onChangeCallback(),this}toArray(o=[],u=0){return o[u]=this._x,o[u+1]=this._y,o[u+2]=this._z,o[u+3]=this._order,o}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return p.DEFAULT_ORDER="XYZ",p})();class qf{constructor(){this.mask=1}set(i){this.mask=(1<<i|0)>>>0}enable(i){this.mask|=1<<i|0}enableAll(){this.mask=-1}toggle(i){this.mask^=1<<i|0}disable(i){this.mask&=~(1<<i|0)}disableAll(){this.mask=0}test(i){return 0!=(this.mask&i.mask)}isEnabled(i){return 0!=(this.mask&(1<<i|0))}}let ea=0;const Xf=new Re,il=new Pe,Rc=new Hi,Nl=new Re,td=new Re,xm=new Re,Eb=new Pe,nd=new Re(1,0,0),Mm=new Re(0,1,0),Hr=new Re(0,0,1),q_={type:"added"},os={type:"removed"};let Qs=(()=>{class p extends Ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ea++}),this.uuid=kr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DEFAULT_UP.clone();const o=new Re,u=new Og,f=new Pe,_=new Re(1,1,1);u._onChange(function x(){f.setFromEuler(u,!1)}),f._onChange(function M(){u.setFromQuaternion(f,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:o},rotation:{configurable:!0,enumerable:!0,value:u},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:_},modelViewMatrix:{value:new Hi},normalMatrix:{value:new er}}),this.matrix=new Hi,this.matrixWorld=new Hi,this.matrixAutoUpdate=p.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=p.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new qf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(o){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(o),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(o){return this.quaternion.premultiply(o),this}setRotationFromAxisAngle(o,u){this.quaternion.setFromAxisAngle(o,u)}setRotationFromEuler(o){this.quaternion.setFromEuler(o,!0)}setRotationFromMatrix(o){this.quaternion.setFromRotationMatrix(o)}setRotationFromQuaternion(o){this.quaternion.copy(o)}rotateOnAxis(o,u){return il.setFromAxisAngle(o,u),this.quaternion.multiply(il),this}rotateOnWorldAxis(o,u){return il.setFromAxisAngle(o,u),this.quaternion.premultiply(il),this}rotateX(o){return this.rotateOnAxis(nd,o)}rotateY(o){return this.rotateOnAxis(Mm,o)}rotateZ(o){return this.rotateOnAxis(Hr,o)}translateOnAxis(o,u){return Xf.copy(o).applyQuaternion(this.quaternion),this.position.add(Xf.multiplyScalar(u)),this}translateX(o){return this.translateOnAxis(nd,o)}translateY(o){return this.translateOnAxis(Mm,o)}translateZ(o){return this.translateOnAxis(Hr,o)}localToWorld(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(this.matrixWorld)}worldToLocal(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(Rc.copy(this.matrixWorld).invert())}lookAt(o,u,f){o.isVector3?Nl.copy(o):Nl.set(o,u,f);const _=this.parent;this.updateWorldMatrix(!0,!1),td.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rc.lookAt(td,Nl,this.up):Rc.lookAt(Nl,td,this.up),this.quaternion.setFromRotationMatrix(Rc),_&&(Rc.extractRotation(_.matrixWorld),il.setFromRotationMatrix(Rc),this.quaternion.premultiply(il.invert()))}add(o){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(null!==o.parent&&o.parent.remove(o),o.parent=this,this.children.push(o),o.dispatchEvent(q_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)}remove(o){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const u=this.children.indexOf(o);return-1!==u&&(o.parent=null,this.children.splice(u,1),o.dispatchEvent(os)),this}removeFromParent(){const o=this.parent;return null!==o&&o.remove(this),this}clear(){for(let o=0;o<this.children.length;o++){const u=this.children[o];u.parent=null,u.dispatchEvent(os)}return this.children.length=0,this}attach(o){return this.updateWorldMatrix(!0,!1),Rc.copy(this.matrixWorld).invert(),null!==o.parent&&(o.parent.updateWorldMatrix(!0,!1),Rc.multiply(o.parent.matrixWorld)),o.applyMatrix4(Rc),this.add(o),o.updateWorldMatrix(!1,!0),this}getObjectById(o){return this.getObjectByProperty("id",o)}getObjectByName(o){return this.getObjectByProperty("name",o)}getObjectByProperty(o,u){if(this[o]===u)return this;for(let f=0,_=this.children.length;f<_;f++){const M=this.children[f].getObjectByProperty(o,u);if(void 0!==M)return M}}getObjectsByProperty(o,u){let f=[];this[o]===u&&f.push(this);for(let _=0,x=this.children.length;_<x;_++){const M=this.children[_].getObjectsByProperty(o,u);M.length>0&&(f=f.concat(M))}return f}getWorldPosition(o){return this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,o,xm),o}getWorldScale(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,Eb,o),o}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const u=this.matrixWorld.elements;return o.set(u[8],u[9],u[10]).normalize()}raycast(){}traverse(o){o(this);const u=this.children;for(let f=0,_=u.length;f<_;f++)u[f].traverse(o)}traverseVisible(o){if(!1===this.visible)return;o(this);const u=this.children;for(let f=0,_=u.length;f<_;f++)u[f].traverseVisible(o)}traverseAncestors(o){const u=this.parent;null!==u&&(o(u),u.traverseAncestors(o))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);const u=this.children;for(let f=0,_=u.length;f<_;f++){const x=u[f];(!0===x.matrixWorldAutoUpdate||!0===o)&&x.updateMatrixWorld(o)}}updateWorldMatrix(o,u){const f=this.parent;if(!0===o&&null!==f&&!0===f.matrixWorldAutoUpdate&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===u){const _=this.children;for(let x=0,M=_.length;x<M;x++){const E=_[x];!0===E.matrixWorldAutoUpdate&&E.updateWorldMatrix(!1,!0)}}}toJSON(o){const u=void 0===o||"string"==typeof o,f={};u&&(o={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const _={};function x(E,D){return void 0===E[D.uuid]&&(E[D.uuid]=D.toJSON(o)),D.uuid}if(_.uuid=this.uuid,_.type=this.type,""!==this.name&&(_.name=this.name),!0===this.castShadow&&(_.castShadow=!0),!0===this.receiveShadow&&(_.receiveShadow=!0),!1===this.visible&&(_.visible=!1),!1===this.frustumCulled&&(_.frustumCulled=!1),0!==this.renderOrder&&(_.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(_.userData=this.userData),_.layers=this.layers.mask,_.matrix=this.matrix.toArray(),_.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(_.matrixAutoUpdate=!1),this.isInstancedMesh&&(_.type="InstancedMesh",_.count=this.count,_.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(_.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?_.background=this.background.toJSON():this.background.isTexture&&(_.background=this.background.toJSON(o).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(_.environment=this.environment.toJSON(o).uuid);else if(this.isMesh||this.isLine||this.isPoints){_.geometry=x(o.geometries,this.geometry);const E=this.geometry.parameters;if(void 0!==E&&void 0!==E.shapes){const D=E.shapes;if(Array.isArray(D))for(let k=0,O=D.length;k<O;k++)x(o.shapes,D[k]);else x(o.shapes,D)}}if(this.isSkinnedMesh&&(_.bindMode=this.bindMode,_.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(x(o.skeletons,this.skeleton),_.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const E=[];for(let D=0,k=this.material.length;D<k;D++)E.push(x(o.materials,this.material[D]));_.material=E}else _.material=x(o.materials,this.material);if(this.children.length>0){_.children=[];for(let E=0;E<this.children.length;E++)_.children.push(this.children[E].toJSON(o).object)}if(this.animations.length>0){_.animations=[];for(let E=0;E<this.animations.length;E++)_.animations.push(x(o.animations,this.animations[E]))}if(u){const E=M(o.geometries),D=M(o.materials),k=M(o.textures),O=M(o.images),I=M(o.shapes),U=M(o.skeletons),B=M(o.animations),j=M(o.nodes);E.length>0&&(f.geometries=E),D.length>0&&(f.materials=D),k.length>0&&(f.textures=k),O.length>0&&(f.images=O),I.length>0&&(f.shapes=I),U.length>0&&(f.skeletons=U),B.length>0&&(f.animations=B),j.length>0&&(f.nodes=j)}return f.object=_,f;function M(E){const D=[];for(const k in E){const O=E[k];delete O.metadata,D.push(O)}return D}}clone(o){return(new this.constructor).copy(this,o)}copy(o,u=!0){if(this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.rotation.order=o.rotation.order,this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=o.matrixWorldAutoUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.userData=JSON.parse(JSON.stringify(o.userData)),!0===u)for(let f=0;f<o.children.length;f++)this.add(o.children[f].clone());return this}}return p.DEFAULT_UP=new Re(0,1,0),p.DEFAULT_MATRIX_AUTO_UPDATE=!0,p.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,p})();const vo=new Re,rl=new Re,Ul=new Re,Uo=new Re,Bl=new Re,ta=new Re,Gh=new Re,wm=new Re,cr=new Re,id=new Re;let yo=!1;class Cs{constructor(i=new Re,o=new Re,u=new Re){this.a=i,this.b=o,this.c=u}static getNormal(i,o,u,f){f.subVectors(u,o),vo.subVectors(i,o),f.cross(vo);const _=f.lengthSq();return _>0?f.multiplyScalar(1/Math.sqrt(_)):f.set(0,0,0)}static getBarycoord(i,o,u,f,_){vo.subVectors(f,o),rl.subVectors(u,o),Ul.subVectors(i,o);const x=vo.dot(vo),M=vo.dot(rl),E=vo.dot(Ul),D=rl.dot(rl),k=rl.dot(Ul),O=x*D-M*M;if(0===O)return _.set(-2,-1,-1);const I=1/O,U=(D*E-M*k)*I,B=(x*k-M*E)*I;return _.set(1-U-B,B,U)}static containsPoint(i,o,u,f){return this.getBarycoord(i,o,u,f,Uo),Uo.x>=0&&Uo.y>=0&&Uo.x+Uo.y<=1}static getUV(i,o,u,f,_,x,M,E){return!1===yo&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yo=!0),this.getInterpolation(i,o,u,f,_,x,M,E)}static getInterpolation(i,o,u,f,_,x,M,E){return this.getBarycoord(i,o,u,f,Uo),E.setScalar(0),E.addScaledVector(_,Uo.x),E.addScaledVector(x,Uo.y),E.addScaledVector(M,Uo.z),E}static isFrontFacing(i,o,u,f){return vo.subVectors(u,o),rl.subVectors(i,o),vo.cross(rl).dot(f)<0}set(i,o,u){return this.a.copy(i),this.b.copy(o),this.c.copy(u),this}setFromPointsAndIndices(i,o,u,f){return this.a.copy(i[o]),this.b.copy(i[u]),this.c.copy(i[f]),this}setFromAttributeAndIndices(i,o,u,f){return this.a.fromBufferAttribute(i,o),this.b.fromBufferAttribute(i,u),this.c.fromBufferAttribute(i,f),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.a.copy(i.a),this.b.copy(i.b),this.c.copy(i.c),this}getArea(){return vo.subVectors(this.c,this.b),rl.subVectors(this.a,this.b),.5*vo.cross(rl).length()}getMidpoint(i){return i.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(i){return Cs.getNormal(this.a,this.b,this.c,i)}getPlane(i){return i.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(i,o){return Cs.getBarycoord(i,this.a,this.b,this.c,o)}getUV(i,o,u,f,_){return!1===yo&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yo=!0),Cs.getInterpolation(i,this.a,this.b,this.c,o,u,f,_)}getInterpolation(i,o,u,f,_){return Cs.getInterpolation(i,this.a,this.b,this.c,o,u,f,_)}containsPoint(i){return Cs.containsPoint(i,this.a,this.b,this.c)}isFrontFacing(i){return Cs.isFrontFacing(this.a,this.b,this.c,i)}intersectsBox(i){return i.intersectsTriangle(this)}closestPointToPoint(i,o){const u=this.a,f=this.b,_=this.c;let x,M;Bl.subVectors(f,u),ta.subVectors(_,u),wm.subVectors(i,u);const E=Bl.dot(wm),D=ta.dot(wm);if(E<=0&&D<=0)return o.copy(u);cr.subVectors(i,f);const k=Bl.dot(cr),O=ta.dot(cr);if(k>=0&&O<=k)return o.copy(f);const I=E*O-k*D;if(I<=0&&E>=0&&k<=0)return x=E/(E-k),o.copy(u).addScaledVector(Bl,x);id.subVectors(i,_);const U=Bl.dot(id),B=ta.dot(id);if(B>=0&&U<=B)return o.copy(_);const j=U*D-E*B;if(j<=0&&D>=0&&B<=0)return M=D/(D-B),o.copy(u).addScaledVector(ta,M);const $=k*B-U*O;if($<=0&&O-k>=0&&U-B>=0)return Gh.subVectors(_,f),M=(O-k)/(O-k+(U-B)),o.copy(f).addScaledVector(Gh,M);const G=1/($+j+I);return x=j*G,M=I*G,o.copy(u).addScaledVector(Bl,x).addScaledVector(ta,M)}equals(i){return i.a.equals(this.a)&&i.b.equals(this.b)&&i.c.equals(this.c)}}let La=0;class jd extends Ys{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:La++}),this.uuid=kr(),this.name="",this.type="Material",this.blending=$r,this.side=Mt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=pr,this.blendDst=Oh,this.blendEquation=Bs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(i){this._alphaTest>0!=i>0&&this.version++,this._alphaTest=i}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(i){if(void 0!==i)for(const o in i){const u=i[o];if(void 0===u){console.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const f=this[o];void 0!==f?f&&f.isColor?f.set(u):f&&f.isVector3&&u&&u.isVector3?f.copy(u):this[o]=u:console.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`)}}toJSON(i){const o=void 0===i||"string"==typeof i;o&&(i={textures:{},images:{}});const u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function f(_){const x=[];for(const M in _){const E=_[M];delete E.metadata,x.push(E)}return x}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),void 0!==this.roughness&&(u.roughness=this.roughness),void 0!==this.metalness&&(u.metalness=this.metalness),void 0!==this.sheen&&(u.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(u.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(u.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(u.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(u.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(u.shininess=this.shininess),void 0!==this.clearcoat&&(u.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(i).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(i).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(i).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(u.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(u.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(u.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(u.iridescenceMap=this.iridescenceMap.toJSON(i).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(u.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(i).uuid),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(i).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(i).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(i).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(i).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(i).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(i).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(i).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(i).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(i).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(i).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(i).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(i).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(u.specularIntensityMap=this.specularIntensityMap.toJSON(i).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(u.specularColorMap=this.specularColorMap.toJSON(i).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(i).uuid,void 0!==this.combine&&(u.combine=this.combine)),void 0!==this.envMapIntensity&&(u.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(u.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(u.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(i).uuid),void 0!==this.transmission&&(u.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(u.transmissionMap=this.transmissionMap.toJSON(i).uuid),void 0!==this.thickness&&(u.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(u.thicknessMap=this.thicknessMap.toJSON(i).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(u.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(u.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(u.size=this.size),null!==this.shadowSide&&(u.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(u.sizeAttenuation=this.sizeAttenuation),this.blending!==$r&&(u.blending=this.blending),this.side!==Mt&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),!0===this.transparent&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.colorWrite=this.colorWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(u.rotation=this.rotation),!0===this.polygonOffset&&(u.polygonOffset=!0),0!==this.polygonOffsetFactor&&(u.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(u.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(u.linewidth=this.linewidth),void 0!==this.dashSize&&(u.dashSize=this.dashSize),void 0!==this.gapSize&&(u.gapSize=this.gapSize),void 0!==this.scale&&(u.scale=this.scale),!0===this.dithering&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(u.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(u.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(u.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(u.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(u.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(u.flatShading=this.flatShading),!1===this.visible&&(u.visible=!1),!1===this.toneMapped&&(u.toneMapped=!1),!1===this.fog&&(u.fog=!1),Object.keys(this.userData).length>0&&(u.userData=this.userData),o){const _=f(i.textures),x=f(i.images);_.length>0&&(u.textures=_),x.length>0&&(u.images=x)}return u}clone(){return(new this.constructor).copy(this)}copy(i){this.name=i.name,this.blending=i.blending,this.side=i.side,this.vertexColors=i.vertexColors,this.opacity=i.opacity,this.transparent=i.transparent,this.blendSrc=i.blendSrc,this.blendDst=i.blendDst,this.blendEquation=i.blendEquation,this.blendSrcAlpha=i.blendSrcAlpha,this.blendDstAlpha=i.blendDstAlpha,this.blendEquationAlpha=i.blendEquationAlpha,this.depthFunc=i.depthFunc,this.depthTest=i.depthTest,this.depthWrite=i.depthWrite,this.stencilWriteMask=i.stencilWriteMask,this.stencilFunc=i.stencilFunc,this.stencilRef=i.stencilRef,this.stencilFuncMask=i.stencilFuncMask,this.stencilFail=i.stencilFail,this.stencilZFail=i.stencilZFail,this.stencilZPass=i.stencilZPass,this.stencilWrite=i.stencilWrite;const o=i.clippingPlanes;let u=null;if(null!==o){const f=o.length;u=new Array(f);for(let _=0;_!==f;++_)u[_]=o[_].clone()}return this.clippingPlanes=u,this.clipIntersection=i.clipIntersection,this.clipShadows=i.clipShadows,this.shadowSide=i.shadowSide,this.colorWrite=i.colorWrite,this.precision=i.precision,this.polygonOffset=i.polygonOffset,this.polygonOffsetFactor=i.polygonOffsetFactor,this.polygonOffsetUnits=i.polygonOffsetUnits,this.dithering=i.dithering,this.alphaTest=i.alphaTest,this.alphaToCoverage=i.alphaToCoverage,this.premultipliedAlpha=i.premultipliedAlpha,this.forceSinglePass=i.forceSinglePass,this.visible=i.visible,this.toneMapped=i.toneMapped,this.userData=JSON.parse(JSON.stringify(i.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(i){!0===i&&this.version++}}const na={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gs={h:0,s:0,l:0},Yf={h:0,s:0,l:0};function Yn(p,i,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?p+6*(i-p)*o:o<.5?i:o<2/3?p+6*(i-p)*(2/3-o):p}class Ln{constructor(i,o,u){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===o&&void 0===u?this.set(i):this.setRGB(i,o,u)}set(i){return i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i),this}setScalar(i){return this.r=i,this.g=i,this.b=i,this}setHex(i,o=ic){return i=Math.floor(i),this.r=(i>>16&255)/255,this.g=(i>>8&255)/255,this.b=(255&i)/255,Mr.toWorkingColorSpace(this,o),this}setRGB(i,o,u,f=Mr.workingColorSpace){return this.r=i,this.g=o,this.b=u,Mr.toWorkingColorSpace(this,f),this}setHSL(i,o,u,f=Mr.workingColorSpace){if(i=function Fv(p,i){return(p%i+i)%i}(i,1),o=Vs(o,0,1),u=Vs(u,0,1),0===o)this.r=this.g=this.b=u;else{const _=u<=.5?u*(1+o):u+o-u*o,x=2*u-_;this.r=Yn(x,_,i+1/3),this.g=Yn(x,_,i),this.b=Yn(x,_,i-1/3)}return Mr.toWorkingColorSpace(this,f),this}setStyle(i,o=ic){function u(_){void 0!==_&&parseFloat(_)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}let f;if(f=/^(\w+)\(([^\)]*)\)/.exec(i)){let _;const M=f[2];switch(f[1]){case"rgb":case"rgba":if(_=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(M))return this.r=Math.min(255,parseInt(_[1],10))/255,this.g=Math.min(255,parseInt(_[2],10))/255,this.b=Math.min(255,parseInt(_[3],10))/255,Mr.toWorkingColorSpace(this,o),u(_[4]),this;if(_=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(M))return this.r=Math.min(100,parseInt(_[1],10))/100,this.g=Math.min(100,parseInt(_[2],10))/100,this.b=Math.min(100,parseInt(_[3],10))/100,Mr.toWorkingColorSpace(this,o),u(_[4]),this;break;case"hsl":case"hsla":if(_=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(M)){const E=parseFloat(_[1])/360,D=parseFloat(_[2])/100,k=parseFloat(_[3])/100;return u(_[4]),this.setHSL(E,D,k,o)}break;default:console.warn("THREE.Color: Unknown color model "+i)}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(i)){const _=f[1],x=_.length;if(3===x)return this.setRGB(parseInt(_.charAt(0),16)/15,parseInt(_.charAt(1),16)/15,parseInt(_.charAt(2),16)/15,o);if(6===x)return this.setHex(parseInt(_,16),o);console.warn("THREE.Color: Invalid hex color "+i)}else if(i&&i.length>0)return this.setColorName(i,o);return this}setColorName(i,o=ic){const u=na[i.toLowerCase()];return void 0!==u?this.setHex(u,o):console.warn("THREE.Color: Unknown color "+i),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(i){return this.r=i.r,this.g=i.g,this.b=i.b,this}copySRGBToLinear(i){return this.r=Hh(i.r),this.g=Hh(i.g),this.b=Hh(i.b),this}copyLinearToSRGB(i){return this.r=Uv(i.r),this.g=Uv(i.g),this.b=Uv(i.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(i=ic){return Mr.fromWorkingColorSpace(Gr.copy(this),i),Vs(255*Gr.r,0,255)<<16^Vs(255*Gr.g,0,255)<<8^Vs(255*Gr.b,0,255)<<0}getHexString(i=ic){return("000000"+this.getHex(i).toString(16)).slice(-6)}getHSL(i,o=Mr.workingColorSpace){Mr.fromWorkingColorSpace(Gr.copy(this),o);const u=Gr.r,f=Gr.g,_=Gr.b,x=Math.max(u,f,_),M=Math.min(u,f,_);let E,D;const k=(M+x)/2;if(M===x)E=0,D=0;else{const O=x-M;switch(D=k<=.5?O/(x+M):O/(2-x-M),x){case u:E=(f-_)/O+(f<_?6:0);break;case f:E=(_-u)/O+2;break;case _:E=(u-f)/O+4}E/=6}return i.h=E,i.s=D,i.l=k,i}getRGB(i,o=Mr.workingColorSpace){return Mr.fromWorkingColorSpace(Gr.copy(this),o),i.r=Gr.r,i.g=Gr.g,i.b=Gr.b,i}getStyle(i=ic){Mr.fromWorkingColorSpace(Gr.copy(this),i);const o=Gr.r,u=Gr.g,f=Gr.b;return i!==ic?`color(${i} ${o.toFixed(3)} ${u.toFixed(3)} ${f.toFixed(3)})`:`rgb(${255*o|0},${255*u|0},${255*f|0})`}offsetHSL(i,o,u){return this.getHSL(gs),gs.h+=i,gs.s+=o,gs.l+=u,this.setHSL(gs.h,gs.s,gs.l),this}add(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this}addColors(i,o){return this.r=i.r+o.r,this.g=i.g+o.g,this.b=i.b+o.b,this}addScalar(i){return this.r+=i,this.g+=i,this.b+=i,this}sub(i){return this.r=Math.max(0,this.r-i.r),this.g=Math.max(0,this.g-i.g),this.b=Math.max(0,this.b-i.b),this}multiply(i){return this.r*=i.r,this.g*=i.g,this.b*=i.b,this}multiplyScalar(i){return this.r*=i,this.g*=i,this.b*=i,this}lerp(i,o){return this.r+=(i.r-this.r)*o,this.g+=(i.g-this.g)*o,this.b+=(i.b-this.b)*o,this}lerpColors(i,o,u){return this.r=i.r+(o.r-i.r)*u,this.g=i.g+(o.g-i.g)*u,this.b=i.b+(o.b-i.b)*u,this}lerpHSL(i,o){this.getHSL(gs),i.getHSL(Yf);const u=Rl(gs.h,Yf.h,o),f=Rl(gs.s,Yf.s,o),_=Rl(gs.l,Yf.l,o);return this.setHSL(u,f,_),this}setFromVector3(i){return this.r=i.x,this.g=i.y,this.b=i.z,this}applyMatrix3(i){const o=this.r,u=this.g,f=this.b,_=i.elements;return this.r=_[0]*o+_[3]*u+_[6]*f,this.g=_[1]*o+_[4]*u+_[7]*f,this.b=_[2]*o+_[5]*u+_[8]*f,this}equals(i){return i.r===this.r&&i.g===this.g&&i.b===this.b}fromArray(i,o=0){return this.r=i[o],this.g=i[o+1],this.b=i[o+2],this}toArray(i=[],o=0){return i[o]=this.r,i[o+1]=this.g,i[o+2]=this.b,i}fromBufferAttribute(i,o){return this.r=i.getX(o),this.g=i.getY(o),this.b=i.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gr=new Ln;Ln.NAMES=na;class ia extends jd{constructor(i){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Eg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(i)}copy(i){return super.copy(i),this.color.copy(i.color),this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.fog=i.fog,this}}const zs=new Re,Zi=new Wt;class Hs{constructor(i,o,u=!1){if(Array.isArray(i))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=i,this.itemSize=o,this.count=void 0!==i?i.length/o:0,this.normalized=u,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(i){!0===i&&this.version++}setUsage(i){return this.usage=i,this}copy(i){return this.name=i.name,this.array=new i.array.constructor(i.array),this.itemSize=i.itemSize,this.count=i.count,this.normalized=i.normalized,this.usage=i.usage,this}copyAt(i,o,u){i*=this.itemSize,u*=o.itemSize;for(let f=0,_=this.itemSize;f<_;f++)this.array[i+f]=o.array[u+f];return this}copyArray(i){return this.array.set(i),this}applyMatrix3(i){if(2===this.itemSize)for(let o=0,u=this.count;o<u;o++)Zi.fromBufferAttribute(this,o),Zi.applyMatrix3(i),this.setXY(o,Zi.x,Zi.y);else if(3===this.itemSize)for(let o=0,u=this.count;o<u;o++)zs.fromBufferAttribute(this,o),zs.applyMatrix3(i),this.setXYZ(o,zs.x,zs.y,zs.z);return this}applyMatrix4(i){for(let o=0,u=this.count;o<u;o++)zs.fromBufferAttribute(this,o),zs.applyMatrix4(i),this.setXYZ(o,zs.x,zs.y,zs.z);return this}applyNormalMatrix(i){for(let o=0,u=this.count;o<u;o++)zs.fromBufferAttribute(this,o),zs.applyNormalMatrix(i),this.setXYZ(o,zs.x,zs.y,zs.z);return this}transformDirection(i){for(let o=0,u=this.count;o<u;o++)zs.fromBufferAttribute(this,o),zs.transformDirection(i),this.setXYZ(o,zs.x,zs.y,zs.z);return this}set(i,o=0){return this.array.set(i,o),this}getX(i){let o=this.array[i*this.itemSize];return this.normalized&&(o=Bn(o,this.array)),o}setX(i,o){return this.normalized&&(o=ji(o,this.array)),this.array[i*this.itemSize]=o,this}getY(i){let o=this.array[i*this.itemSize+1];return this.normalized&&(o=Bn(o,this.array)),o}setY(i,o){return this.normalized&&(o=ji(o,this.array)),this.array[i*this.itemSize+1]=o,this}getZ(i){let o=this.array[i*this.itemSize+2];return this.normalized&&(o=Bn(o,this.array)),o}setZ(i,o){return this.normalized&&(o=ji(o,this.array)),this.array[i*this.itemSize+2]=o,this}getW(i){let o=this.array[i*this.itemSize+3];return this.normalized&&(o=Bn(o,this.array)),o}setW(i,o){return this.normalized&&(o=ji(o,this.array)),this.array[i*this.itemSize+3]=o,this}setXY(i,o,u){return i*=this.itemSize,this.normalized&&(o=ji(o,this.array),u=ji(u,this.array)),this.array[i+0]=o,this.array[i+1]=u,this}setXYZ(i,o,u,f){return i*=this.itemSize,this.normalized&&(o=ji(o,this.array),u=ji(u,this.array),f=ji(f,this.array)),this.array[i+0]=o,this.array[i+1]=u,this.array[i+2]=f,this}setXYZW(i,o,u,f,_){return i*=this.itemSize,this.normalized&&(o=ji(o,this.array),u=ji(u,this.array),f=ji(f,this.array),_=ji(_,this.array)),this.array[i+0]=o,this.array[i+1]=u,this.array[i+2]=f,this.array[i+3]=_,this}onUpload(i){return this.onUploadCallback=i,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const i={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(i.name=this.name),35044!==this.usage&&(i.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(i.updateRange=this.updateRange),i}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Oa extends Hs{constructor(i,o,u){super(new Uint16Array(i),o,u)}}class Gs extends Hs{constructor(i,o,u){super(new Uint32Array(i),o,u)}}class Jn extends Hs{constructor(i,o,u){super(new Float32Array(i),o,u)}}let ra=0;const Fa=new Hi,Vl=new Qs,Ao=new Re,Vo=new gi,_r=new gi,ai=new Re;class nr extends Ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ra++}),this.uuid=kr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(i){return this.index=Array.isArray(i)?new(vm(i)?Gs:Oa)(i,1):i,this}getAttribute(i){return this.attributes[i]}setAttribute(i,o){return this.attributes[i]=o,this}deleteAttribute(i){return delete this.attributes[i],this}hasAttribute(i){return void 0!==this.attributes[i]}addGroup(i,o,u=0){this.groups.push({start:i,count:o,materialIndex:u})}clearGroups(){this.groups=[]}setDrawRange(i,o){this.drawRange.start=i,this.drawRange.count=o}applyMatrix4(i){const o=this.attributes.position;void 0!==o&&(o.applyMatrix4(i),o.needsUpdate=!0);const u=this.attributes.normal;if(void 0!==u){const _=(new er).getNormalMatrix(i);u.applyNormalMatrix(_),u.needsUpdate=!0}const f=this.attributes.tangent;return void 0!==f&&(f.transformDirection(i),f.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(i){return Fa.makeRotationFromQuaternion(i),this.applyMatrix4(Fa),this}rotateX(i){return Fa.makeRotationX(i),this.applyMatrix4(Fa),this}rotateY(i){return Fa.makeRotationY(i),this.applyMatrix4(Fa),this}rotateZ(i){return Fa.makeRotationZ(i),this.applyMatrix4(Fa),this}translate(i,o,u){return Fa.makeTranslation(i,o,u),this.applyMatrix4(Fa),this}scale(i,o,u){return Fa.makeScale(i,o,u),this.applyMatrix4(Fa),this}lookAt(i){return Vl.lookAt(i),Vl.updateMatrix(),this.applyMatrix4(Vl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ao).negate(),this.translate(Ao.x,Ao.y,Ao.z),this}setFromPoints(i){const o=[];for(let u=0,f=i.length;u<f;u++){const _=i[u];o.push(_.x,_.y,_.z||0)}return this.setAttribute("position",new Jn(o,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new gi);const i=this.attributes.position,o=this.morphAttributes.position;if(i&&i.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));if(void 0!==i){if(this.boundingBox.setFromBufferAttribute(i),o)for(let u=0,f=o.length;u<f;u++)Vo.setFromBufferAttribute(o[u]),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,Vo.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,Vo.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(Vo.min),this.boundingBox.expandByPoint(Vo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sr);const i=this.attributes.position,o=this.morphAttributes.position;if(i&&i.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Re,1/0);if(i){const u=this.boundingSphere.center;if(Vo.setFromBufferAttribute(i),o)for(let _=0,x=o.length;_<x;_++)_r.setFromBufferAttribute(o[_]),this.morphTargetsRelative?(ai.addVectors(Vo.min,_r.min),Vo.expandByPoint(ai),ai.addVectors(Vo.max,_r.max),Vo.expandByPoint(ai)):(Vo.expandByPoint(_r.min),Vo.expandByPoint(_r.max));Vo.getCenter(u);let f=0;for(let _=0,x=i.count;_<x;_++)ai.fromBufferAttribute(i,_),f=Math.max(f,u.distanceToSquared(ai));if(o)for(let _=0,x=o.length;_<x;_++){const M=o[_],E=this.morphTargetsRelative;for(let D=0,k=M.count;D<k;D++)ai.fromBufferAttribute(M,D),E&&(Ao.fromBufferAttribute(i,D),ai.add(Ao)),f=Math.max(f,u.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const i=this.index,o=this.attributes;if(null===i||void 0===o.position||void 0===o.normal||void 0===o.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const u=i.array,f=o.position.array,_=o.normal.array,x=o.uv.array,M=f.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Hs(new Float32Array(4*M),4));const E=this.getAttribute("tangent").array,D=[],k=[];for(let de=0;de<M;de++)D[de]=new Re,k[de]=new Re;const O=new Re,I=new Re,U=new Re,B=new Wt,j=new Wt,$=new Wt,G=new Re,Q=new Re;function J(de,Ye,Qe){O.fromArray(f,3*de),I.fromArray(f,3*Ye),U.fromArray(f,3*Qe),B.fromArray(x,2*de),j.fromArray(x,2*Ye),$.fromArray(x,2*Qe),I.sub(O),U.sub(O),j.sub(B),$.sub(B);const Ne=1/(j.x*$.y-$.x*j.y);isFinite(Ne)&&(G.copy(I).multiplyScalar($.y).addScaledVector(U,-j.y).multiplyScalar(Ne),Q.copy(U).multiplyScalar(j.x).addScaledVector(I,-$.x).multiplyScalar(Ne),D[de].add(G),D[Ye].add(G),D[Qe].add(G),k[de].add(Q),k[Ye].add(Q),k[Qe].add(Q))}let Y=this.groups;0===Y.length&&(Y=[{start:0,count:u.length}]);for(let de=0,Ye=Y.length;de<Ye;++de){const Qe=Y[de],Ne=Qe.start;for(let et=Ne,Pt=Ne+Qe.count;et<Pt;et+=3)J(u[et+0],u[et+1],u[et+2])}const ee=new Re,he=new Re,xe=new Re,fe=new Re;function ce(de){xe.fromArray(_,3*de),fe.copy(xe);const Ye=D[de];ee.copy(Ye),ee.sub(xe.multiplyScalar(xe.dot(Ye))).normalize(),he.crossVectors(fe,Ye);const Ne=he.dot(k[de])<0?-1:1;E[4*de]=ee.x,E[4*de+1]=ee.y,E[4*de+2]=ee.z,E[4*de+3]=Ne}for(let de=0,Ye=Y.length;de<Ye;++de){const Qe=Y[de],Ne=Qe.start;for(let et=Ne,Pt=Ne+Qe.count;et<Pt;et+=3)ce(u[et+0]),ce(u[et+1]),ce(u[et+2])}}computeVertexNormals(){const i=this.index,o=this.getAttribute("position");if(void 0!==o){let u=this.getAttribute("normal");if(void 0===u)u=new Hs(new Float32Array(3*o.count),3),this.setAttribute("normal",u);else for(let I=0,U=u.count;I<U;I++)u.setXYZ(I,0,0,0);const f=new Re,_=new Re,x=new Re,M=new Re,E=new Re,D=new Re,k=new Re,O=new Re;if(i)for(let I=0,U=i.count;I<U;I+=3){const B=i.getX(I+0),j=i.getX(I+1),$=i.getX(I+2);f.fromBufferAttribute(o,B),_.fromBufferAttribute(o,j),x.fromBufferAttribute(o,$),k.subVectors(x,_),O.subVectors(f,_),k.cross(O),M.fromBufferAttribute(u,B),E.fromBufferAttribute(u,j),D.fromBufferAttribute(u,$),M.add(k),E.add(k),D.add(k),u.setXYZ(B,M.x,M.y,M.z),u.setXYZ(j,E.x,E.y,E.z),u.setXYZ($,D.x,D.y,D.z)}else for(let I=0,U=o.count;I<U;I+=3)f.fromBufferAttribute(o,I+0),_.fromBufferAttribute(o,I+1),x.fromBufferAttribute(o,I+2),k.subVectors(x,_),O.subVectors(f,_),k.cross(O),u.setXYZ(I+0,k.x,k.y,k.z),u.setXYZ(I+1,k.x,k.y,k.z),u.setXYZ(I+2,k.x,k.y,k.z);this.normalizeNormals(),u.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const i=this.attributes.normal;for(let o=0,u=i.count;o<u;o++)ai.fromBufferAttribute(i,o),ai.normalize(),i.setXYZ(o,ai.x,ai.y,ai.z)}toNonIndexed(){function i(M,E){const D=M.array,k=M.itemSize,O=M.normalized,I=new D.constructor(E.length*k);let U=0,B=0;for(let j=0,$=E.length;j<$;j++){U=M.isInterleavedBufferAttribute?E[j]*M.data.stride+M.offset:E[j]*k;for(let G=0;G<k;G++)I[B++]=D[U++]}return new Hs(I,k,O)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new nr,u=this.index.array,f=this.attributes;for(const M in f){const D=i(f[M],u);o.setAttribute(M,D)}const _=this.morphAttributes;for(const M in _){const E=[],D=_[M];for(let k=0,O=D.length;k<O;k++){const U=i(D[k],u);E.push(U)}o.morphAttributes[M]=E}o.morphTargetsRelative=this.morphTargetsRelative;const x=this.groups;for(let M=0,E=x.length;M<E;M++){const D=x[M];o.addGroup(D.start,D.count,D.materialIndex)}return o}toJSON(){const i={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),Object.keys(this.userData).length>0&&(i.userData=this.userData),void 0!==this.parameters){const E=this.parameters;for(const D in E)void 0!==E[D]&&(i[D]=E[D]);return i}i.data={attributes:{}};const o=this.index;null!==o&&(i.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const u=this.attributes;for(const E in u)i.data.attributes[E]=u[E].toJSON(i.data);const f={};let _=!1;for(const E in this.morphAttributes){const D=this.morphAttributes[E],k=[];for(let O=0,I=D.length;O<I;O++)k.push(D[O].toJSON(i.data));k.length>0&&(f[E]=k,_=!0)}_&&(i.data.morphAttributes=f,i.data.morphTargetsRelative=this.morphTargetsRelative);const x=this.groups;x.length>0&&(i.data.groups=JSON.parse(JSON.stringify(x)));const M=this.boundingSphere;return null!==M&&(i.data.boundingSphere={center:M.center.toArray(),radius:M.radius}),i}clone(){return(new this.constructor).copy(this)}copy(i){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=i.name;const u=i.index;null!==u&&this.setIndex(u.clone(o));const f=i.attributes;for(const D in f)this.setAttribute(D,f[D].clone(o));const _=i.morphAttributes;for(const D in _){const k=[],O=_[D];for(let I=0,U=O.length;I<U;I++)k.push(O[I].clone(o));this.morphAttributes[D]=k}this.morphTargetsRelative=i.morphTargetsRelative;const x=i.groups;for(let D=0,k=x.length;D<k;D++){const O=x[D];this.addGroup(O.start,O.count,O.materialIndex)}const M=i.boundingBox;null!==M&&(this.boundingBox=M.clone());const E=i.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.drawRange.start=i.drawRange.start,this.drawRange.count=i.drawRange.count,this.userData=i.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sa=new Hi,eo=new zi,Fg=new Sr,Wh=new Re,zl=new Re,ol=new Re,Hl=new Re,mu=new Re,$d=new Re,gu=new Wt,sd=new Wt,qd=new Wt,Zf=new Re,al=new Re,Na=new Re,jh=new Re,_s=new Re;class ac extends Qs{constructor(i=new nr,o=new ia){super(),this.isMesh=!0,this.type="Mesh",this.geometry=i,this.material=o,this.updateMorphTargets()}copy(i,o){return super.copy(i,o),void 0!==i.morphTargetInfluences&&(this.morphTargetInfluences=i.morphTargetInfluences.slice()),void 0!==i.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},i.morphTargetDictionary)),this.material=i.material,this.geometry=i.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,u=Object.keys(o);if(u.length>0){const f=o[u[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let _=0,x=f.length;_<x;_++){const M=f[_].name||String(_);this.morphTargetInfluences.push(0),this.morphTargetDictionary[M]=_}}}}getVertexPosition(i,o){const u=this.geometry,_=u.morphAttributes.position,x=u.morphTargetsRelative;o.fromBufferAttribute(u.attributes.position,i);const M=this.morphTargetInfluences;if(_&&M){$d.set(0,0,0);for(let E=0,D=_.length;E<D;E++){const k=M[E];0!==k&&(mu.fromBufferAttribute(_[E],i),$d.addScaledVector(x?mu:mu.sub(o),k))}o.add($d)}return this.isSkinnedMesh&&this.applyBoneTransform(i,o),o}raycast(i,o){const u=this.geometry,f=this.material,_=this.matrixWorld;if(void 0===f||(null===u.boundingSphere&&u.computeBoundingSphere(),Fg.copy(u.boundingSphere),Fg.applyMatrix4(_),eo.copy(i.ray).recast(i.near),!1===Fg.containsPoint(eo.origin)&&(null===eo.intersectSphere(Fg,Wh)||eo.origin.distanceToSquared(Wh)>(i.far-i.near)**2))||(sa.copy(_).invert(),eo.copy(i.ray).applyMatrix4(sa),null!==u.boundingBox&&!1===eo.intersectsBox(u.boundingBox)))return;let x;const M=u.index,E=u.attributes.position,D=u.attributes.uv,k=u.attributes.uv2,O=u.attributes.normal,I=u.groups,U=u.drawRange;if(null!==M)if(Array.isArray(f))for(let B=0,j=I.length;B<j;B++){const $=I[B],G=f[$.materialIndex];for(let Y=Math.max($.start,U.start),ee=Math.min(M.count,Math.min($.start+$.count,U.start+U.count));Y<ee;Y+=3){const he=M.getX(Y),xe=M.getX(Y+1),fe=M.getX(Y+2);x=cl(this,G,i,eo,D,k,O,he,xe,fe),x&&(x.faceIndex=Math.floor(Y/3),x.face.materialIndex=$.materialIndex,o.push(x))}}else for(let $=Math.max(0,U.start),G=Math.min(M.count,U.start+U.count);$<G;$+=3){const Q=M.getX($),J=M.getX($+1),Y=M.getX($+2);x=cl(this,f,i,eo,D,k,O,Q,J,Y),x&&(x.faceIndex=Math.floor($/3),o.push(x))}else if(void 0!==E)if(Array.isArray(f))for(let B=0,j=I.length;B<j;B++){const $=I[B],G=f[$.materialIndex];for(let Y=Math.max($.start,U.start),ee=Math.min(E.count,Math.min($.start+$.count,U.start+U.count));Y<ee;Y+=3)x=cl(this,G,i,eo,D,k,O,Y,Y+1,Y+2),x&&(x.faceIndex=Math.floor(Y/3),x.face.materialIndex=$.materialIndex,o.push(x))}else for(let $=Math.max(0,U.start),G=Math.min(E.count,U.start+U.count);$<G;$+=3)x=cl(this,f,i,eo,D,k,O,$,$+1,$+2),x&&(x.faceIndex=Math.floor($/3),o.push(x))}}function cl(p,i,o,u,f,_,x,M,E,D){p.getVertexPosition(M,zl),p.getVertexPosition(E,ol),p.getVertexPosition(D,Hl);const k=function Ng(p,i,o,u,f,_,x,M){let E;if(E=i.side===At?u.intersectTriangle(x,_,f,!0,M):u.intersectTriangle(f,_,x,i.side===Mt,M),null===E)return null;_s.copy(M),_s.applyMatrix4(p.matrixWorld);const D=o.ray.origin.distanceTo(_s);return D<o.near||D>o.far?null:{distance:D,point:_s.clone(),object:p}}(p,i,o,u,zl,ol,Hl,jh);if(k){f&&(gu.fromBufferAttribute(f,M),sd.fromBufferAttribute(f,E),qd.fromBufferAttribute(f,D),k.uv=Cs.getInterpolation(jh,zl,ol,Hl,gu,sd,qd,new Wt)),_&&(gu.fromBufferAttribute(_,M),sd.fromBufferAttribute(_,E),qd.fromBufferAttribute(_,D),k.uv2=Cs.getInterpolation(jh,zl,ol,Hl,gu,sd,qd,new Wt)),x&&(Zf.fromBufferAttribute(x,M),al.fromBufferAttribute(x,E),Na.fromBufferAttribute(x,D),k.normal=Cs.getInterpolation(jh,zl,ol,Hl,Zf,al,Na,new Re),k.normal.dot(u.direction)>0&&k.normal.multiplyScalar(-1));const O={a:M,b:E,c:D,normal:new Re,materialIndex:0};Cs.getNormal(zl,ol,Hl,O.normal),k.face=O}return k}class As extends nr{constructor(i=1,o=1,u=1,f=1,_=1,x=1){super(),this.type="BoxGeometry",this.parameters={width:i,height:o,depth:u,widthSegments:f,heightSegments:_,depthSegments:x};const M=this;f=Math.floor(f),_=Math.floor(_),x=Math.floor(x);const E=[],D=[],k=[],O=[];let I=0,U=0;function B(j,$,G,Q,J,Y,ee,he,xe,fe,ce){const de=Y/xe,Ye=ee/fe,Qe=Y/2,Ne=ee/2,$e=he/2,et=xe+1,Pt=fe+1;let Dt=0,Ze=0;const at=new Re;for(let bt=0;bt<Pt;bt++){const tn=bt*Ye-Ne;for(let Ve=0;Ve<et;Ve++)at[j]=(Ve*de-Qe)*Q,at[$]=tn*J,at[G]=$e,D.push(at.x,at.y,at.z),at[j]=0,at[$]=0,at[G]=he>0?1:-1,k.push(at.x,at.y,at.z),O.push(Ve/xe),O.push(1-bt/fe),Dt+=1}for(let bt=0;bt<fe;bt++)for(let tn=0;tn<xe;tn++){const St=I+tn+et*(bt+1),Ft=I+(tn+1)+et*(bt+1),Et=I+(tn+1)+et*bt;E.push(I+tn+et*bt,St,Et),E.push(St,Ft,Et),Ze+=6}M.addGroup(U,Ze,ce),U+=Ze,I+=Dt}B("z","y","x",-1,-1,u,o,i,x,_,0),B("z","y","x",1,-1,u,o,-i,x,_,1),B("x","z","y",1,1,i,u,o,f,x,2),B("x","z","y",1,-1,i,u,-o,f,x,3),B("x","y","z",1,-1,i,o,u,f,_,4),B("x","y","z",-1,-1,i,o,-u,f,_,5),this.setIndex(E),this.setAttribute("position",new Jn(D,3)),this.setAttribute("normal",new Jn(k,3)),this.setAttribute("uv",new Jn(O,2))}copy(i){return super.copy(i),this.parameters=Object.assign({},i.parameters),this}static fromJSON(i){return new As(i.width,i.height,i.depth,i.widthSegments,i.heightSegments,i.depthSegments)}}function as(p){const i={};for(const o in p){i[o]={};for(const u in p[o]){const f=p[o][u];f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture||f.isQuaternion)?f.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),i[o][u]=null):i[o][u]=f.clone():i[o][u]=Array.isArray(f)?f.slice():f}}return i}function vr(p){const i={};for(let o=0;o<p.length;o++){const u=as(p[o]);for(const f in u)i[f]=u[f]}return i}function Z_(p){return null===p.getRenderTarget()&&p.outputEncoding===ws?ic:gm}const Ug={clone:as,merge:vr};class _u extends jd{constructor(i){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==i&&this.setValues(i)}copy(i){return super.copy(i),this.fragmentShader=i.fragmentShader,this.vertexShader=i.vertexShader,this.uniforms=as(i.uniforms),this.uniformsGroups=function Kf(p){const i=[];for(let o=0;o<p.length;o++)i.push(p[o].clone());return i}(i.uniformsGroups),this.defines=Object.assign({},i.defines),this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.fog=i.fog,this.lights=i.lights,this.clipping=i.clipping,this.extensions=Object.assign({},i.extensions),this.glslVersion=i.glslVersion,this}toJSON(i){const o=super.toJSON(i);o.glslVersion=this.glslVersion,o.uniforms={};for(const f in this.uniforms){const x=this.uniforms[f].value;o.uniforms[f]=x&&x.isTexture?{type:"t",value:x.toJSON(i).uuid}:x&&x.isColor?{type:"c",value:x.getHex()}:x&&x.isVector2?{type:"v2",value:x.toArray()}:x&&x.isVector3?{type:"v3",value:x.toArray()}:x&&x.isVector4?{type:"v4",value:x.toArray()}:x&&x.isMatrix3?{type:"m3",value:x.toArray()}:x&&x.isMatrix4?{type:"m4",value:x.toArray()}:{value:x}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;const u={};for(const f in this.extensions)!0===this.extensions[f]&&(u[f]=!0);return Object.keys(u).length>0&&(o.extensions=u),o}}class ao extends Qs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Hi,this.projectionMatrix=new Hi,this.projectionMatrixInverse=new Hi}copy(i,o){return super.copy(i,o),this.matrixWorldInverse.copy(i.matrixWorldInverse),this.projectionMatrix.copy(i.projectionMatrix),this.projectionMatrixInverse.copy(i.projectionMatrixInverse),this}getWorldDirection(i){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return i.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(i){super.updateMatrixWorld(i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(i,o){super.updateWorldMatrix(i,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Ds extends ao{constructor(i=50,o=1,u=.1,f=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=i,this.zoom=1,this.near=u,this.far=f,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(i,o){return super.copy(i,o),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=null===i.view?null:Object.assign({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this}setFocalLength(i){const o=.5*this.getFilmHeight()/i;this.fov=2*go*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const i=Math.tan(.5*Cc*this.fov);return.5*this.getFilmHeight()/i}getEffectiveFOV(){return 2*go*Math.atan(Math.tan(.5*Cc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(i,o,u,f,_,x){this.aspect=i/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=f,this.view.width=_,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const i=this.near;let o=i*Math.tan(.5*Cc*this.fov)/this.zoom,u=2*o,f=this.aspect*u,_=-.5*f;const x=this.view;if(null!==this.view&&this.view.enabled){const E=x.fullWidth,D=x.fullHeight;_+=x.offsetX*f/E,o-=x.offsetY*u/D,f*=x.width/E,u*=x.height/D}const M=this.filmOffset;0!==M&&(_+=i*M/this.getFilmWidth()),this.projectionMatrix.makePerspective(_,_+f,o,o-u,i,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(i){const o=super.toJSON(i);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}class Em extends Qs{constructor(i,o,u){super(),this.type="CubeCamera",this.renderTarget=u;const f=new Ds(-90,1,i,o);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(1,0,0),this.add(f);const _=new Ds(-90,1,i,o);_.layers=this.layers,_.up.set(0,1,0),_.lookAt(-1,0,0),this.add(_);const x=new Ds(-90,1,i,o);x.layers=this.layers,x.up.set(0,0,-1),x.lookAt(0,1,0),this.add(x);const M=new Ds(-90,1,i,o);M.layers=this.layers,M.up.set(0,0,1),M.lookAt(0,-1,0),this.add(M);const E=new Ds(-90,1,i,o);E.layers=this.layers,E.up.set(0,1,0),E.lookAt(0,0,1),this.add(E);const D=new Ds(-90,1,i,o);D.layers=this.layers,D.up.set(0,1,0),D.lookAt(0,0,-1),this.add(D)}update(i,o){null===this.parent&&this.updateMatrixWorld();const u=this.renderTarget,[f,_,x,M,E,D]=this.children,k=i.getRenderTarget(),O=i.toneMapping,I=i.xr.enabled;i.toneMapping=wc,i.xr.enabled=!1;const U=u.texture.generateMipmaps;u.texture.generateMipmaps=!1,i.setRenderTarget(u,0),i.render(o,f),i.setRenderTarget(u,1),i.render(o,_),i.setRenderTarget(u,2),i.render(o,x),i.setRenderTarget(u,3),i.render(o,M),i.setRenderTarget(u,4),i.render(o,E),u.texture.generateMipmaps=U,i.setRenderTarget(u,5),i.render(o,D),i.setRenderTarget(k),i.toneMapping=O,i.xr.enabled=I,u.texture.needsPMREMUpdate=!0}}class Bg extends tr{constructor(i,o,u,f,_,x,M,E,D,k){super(i=void 0!==i?i:[],o=void 0!==o?o:Ca,u,f,_,x,M,E,D,k),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(i){this.image=i}}class $h extends Gn{constructor(i=1,o={}){super(i,i,o),this.isWebGLCubeRenderTarget=!0;const u={width:i,height:i,depth:1};this.texture=new Bg([u,u,u,u,u,u],o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,this.texture.minFilter=void 0!==o.minFilter?o.minFilter:bs}fromEquirectangularTexture(i,o){this.texture.type=o.type,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const u_uniforms={tEquirect:{value:null}},u_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",u_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",f=new As(5,5,5),_=new _u({name:"CubemapFromEquirect",uniforms:as(u_uniforms),vertexShader:u_vertexShader,fragmentShader:u_fragmentShader,side:At,blending:Kn});_.uniforms.tEquirect.value=o;const x=new ac(f,_),M=o.minFilter;return o.minFilter===Bd&&(o.minFilter=bs),new Em(1,10,this).update(i,x),o.minFilter=M,x.geometry.dispose(),x.material.dispose(),this}clear(i,o,u,f){const _=i.getRenderTarget();for(let x=0;x<6;x++)i.setRenderTarget(this,x),i.clear(o,u,f);i.setRenderTarget(_)}}const Jf=new Re,PM=new Re,Qf=new er;class lc{constructor(i=new Re(1,0,0),o=0){this.isPlane=!0,this.normal=i,this.constant=o}set(i,o){return this.normal.copy(i),this.constant=o,this}setComponents(i,o,u,f){return this.normal.set(i,o,u),this.constant=f,this}setFromNormalAndCoplanarPoint(i,o){return this.normal.copy(i),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(i,o,u){const f=Jf.subVectors(u,o).cross(PM.subVectors(i,o)).normalize();return this.setFromNormalAndCoplanarPoint(f,i),this}copy(i){return this.normal.copy(i.normal),this.constant=i.constant,this}normalize(){const i=1/this.normal.length();return this.normal.multiplyScalar(i),this.constant*=i,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(i){return this.normal.dot(i)+this.constant}distanceToSphere(i){return this.distanceToPoint(i.center)-i.radius}projectPoint(i,o){return o.copy(i).addScaledVector(this.normal,-this.distanceToPoint(i))}intersectLine(i,o){const u=i.delta(Jf),f=this.normal.dot(u);if(0===f)return 0===this.distanceToPoint(i.start)?o.copy(i.start):null;const _=-(i.start.dot(this.normal)+this.constant)/f;return _<0||_>1?null:o.copy(i.start).addScaledVector(u,_)}intersectsLine(i){const o=this.distanceToPoint(i.start),u=this.distanceToPoint(i.end);return o<0&&u>0||u<0&&o>0}intersectsBox(i){return i.intersectsPlane(this)}intersectsSphere(i){return i.intersectsPlane(this)}coplanarPoint(i){return i.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(i,o){const u=o||Qf.getNormalMatrix(i),f=this.coplanarPoint(Jf).applyMatrix4(i),_=this.normal.applyMatrix3(u).normalize();return this.constant=-f.dot(_),this}translate(i){return this.constant-=i.dot(this.normal),this}equals(i){return i.normal.equals(this.normal)&&i.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Yd=new Sr,ep=new Re;class K_{constructor(i=new lc,o=new lc,u=new lc,f=new lc,_=new lc,x=new lc){this.planes=[i,o,u,f,_,x]}set(i,o,u,f,_,x){const M=this.planes;return M[0].copy(i),M[1].copy(o),M[2].copy(u),M[3].copy(f),M[4].copy(_),M[5].copy(x),this}copy(i){const o=this.planes;for(let u=0;u<6;u++)o[u].copy(i.planes[u]);return this}setFromProjectionMatrix(i){const o=this.planes,u=i.elements,f=u[0],_=u[1],x=u[2],M=u[3],E=u[4],D=u[5],k=u[6],O=u[7],I=u[8],U=u[9],B=u[10],j=u[11],$=u[12],G=u[13],Q=u[14],J=u[15];return o[0].setComponents(M-f,O-E,j-I,J-$).normalize(),o[1].setComponents(M+f,O+E,j+I,J+$).normalize(),o[2].setComponents(M+_,O+D,j+U,J+G).normalize(),o[3].setComponents(M-_,O-D,j-U,J-G).normalize(),o[4].setComponents(M-x,O-k,j-B,J-Q).normalize(),o[5].setComponents(M+x,O+k,j+B,J+Q).normalize(),this}intersectsObject(i){if(void 0!==i.boundingSphere)null===i.boundingSphere&&i.computeBoundingSphere(),Yd.copy(i.boundingSphere).applyMatrix4(i.matrixWorld);else{const o=i.geometry;null===o.boundingSphere&&o.computeBoundingSphere(),Yd.copy(o.boundingSphere).applyMatrix4(i.matrixWorld)}return this.intersectsSphere(Yd)}intersectsSprite(i){return Yd.center.set(0,0,0),Yd.radius=.7071067811865476,Yd.applyMatrix4(i.matrixWorld),this.intersectsSphere(Yd)}intersectsSphere(i){const o=this.planes,u=i.center,f=-i.radius;for(let _=0;_<6;_++)if(o[_].distanceToPoint(u)<f)return!1;return!0}intersectsBox(i){const o=this.planes;for(let u=0;u<6;u++){const f=o[u];if(ep.x=f.normal.x>0?i.max.x:i.min.x,ep.y=f.normal.y>0?i.max.y:i.min.y,ep.z=f.normal.z>0?i.max.z:i.min.z,f.distanceToPoint(ep)<0)return!1}return!0}containsPoint(i){const o=this.planes;for(let u=0;u<6;u++)if(o[u].distanceToPoint(i)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function kM(){let p=null,i=!1,o=null,u=null;function f(_,x){o(_,x),u=p.requestAnimationFrame(f)}return{start:function(){!0!==i&&null!==o&&(u=p.requestAnimationFrame(f),i=!0)},stop:function(){p.cancelAnimationFrame(u),i=!1},setAnimationLoop:function(_){o=_},setContext:function(_){p=_}}}function Vg(p,i){const o=i.isWebGL2,u=new WeakMap;return{get:function x(D){return D.isInterleavedBufferAttribute&&(D=D.data),u.get(D)},remove:function M(D){D.isInterleavedBufferAttribute&&(D=D.data);const k=u.get(D);k&&(p.deleteBuffer(k.buffer),u.delete(D))},update:function E(D,k){if(D.isGLBufferAttribute){const I=u.get(D);return void((!I||I.version<D.version)&&u.set(D,{buffer:D.buffer,type:D.type,bytesPerElement:D.elementSize,version:D.version}))}D.isInterleavedBufferAttribute&&(D=D.data);const O=u.get(D);void 0===O?u.set(D,function f(D,k){const O=D.array,I=D.usage,U=p.createBuffer();let B;if(p.bindBuffer(k,U),p.bufferData(k,O,I),D.onUploadCallback(),O instanceof Float32Array)B=5126;else if(O instanceof Uint16Array)if(D.isFloat16BufferAttribute){if(!o)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");B=5131}else B=5123;else if(O instanceof Int16Array)B=5122;else if(O instanceof Uint32Array)B=5125;else if(O instanceof Int32Array)B=5124;else if(O instanceof Int8Array)B=5120;else if(O instanceof Uint8Array)B=5121;else{if(!(O instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+O);B=5121}return{buffer:U,type:B,bytesPerElement:O.BYTES_PER_ELEMENT,version:D.version}}(D,k)):O.version<D.version&&(function _(D,k,O){const I=k.array,U=k.updateRange;p.bindBuffer(O,D),-1===U.count?p.bufferSubData(O,0,I):(o?p.bufferSubData(O,U.offset*I.BYTES_PER_ELEMENT,I,U.offset,U.count):p.bufferSubData(O,U.offset*I.BYTES_PER_ELEMENT,I.subarray(U.offset,U.offset+U.count)),U.count=-1),k.onUploadCallback()}(O.buffer,D,k),O.version=D.version)}}}class Cm extends nr{constructor(i=1,o=1,u=1,f=1){super(),this.type="PlaneGeometry",this.parameters={width:i,height:o,widthSegments:u,heightSegments:f};const _=i/2,x=o/2,M=Math.floor(u),E=Math.floor(f),D=M+1,k=E+1,O=i/M,I=o/E,U=[],B=[],j=[],$=[];for(let G=0;G<k;G++){const Q=G*I-x;for(let J=0;J<D;J++)B.push(J*O-_,-Q,0),j.push(0,0,1),$.push(J/M),$.push(1-G/E)}for(let G=0;G<E;G++)for(let Q=0;Q<M;Q++){const Y=Q+D*(G+1),ee=Q+1+D*(G+1),he=Q+1+D*G;U.push(Q+D*G,Y,he),U.push(Y,ee,he)}this.setIndex(U),this.setAttribute("position",new Jn(B,3)),this.setAttribute("normal",new Jn(j,3)),this.setAttribute("uv",new Jn($,2))}copy(i){return super.copy(i),this.parameters=Object.assign({},i.parameters),this}static fromJSON(i){return new Cm(i.width,i.height,i.widthSegments,i.heightSegments)}}const un={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},On={common:{diffuse:{value:new Ln(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new er},alphaMap:{value:null},alphaMapTransform:{value:new er},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new er}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new er}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new er}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new er},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new er},normalScale:{value:new Wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new er},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new er}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new er}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new er}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ln(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ln(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new er}},sprite:{diffuse:{value:new Ln(16777215)},opacity:{value:1},center:{value:new Wt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new er},alphaMap:{value:null},alphaTest:{value:0}}},Pc={basic:{uniforms:vr([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.fog]),vertexShader:un.meshbasic_vert,fragmentShader:un.meshbasic_frag},lambert:{uniforms:vr([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.fog,On.lights,{emissive:{value:new Ln(0)}}]),vertexShader:un.meshlambert_vert,fragmentShader:un.meshlambert_frag},phong:{uniforms:vr([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.fog,On.lights,{emissive:{value:new Ln(0)},specular:{value:new Ln(1118481)},shininess:{value:30}}]),vertexShader:un.meshphong_vert,fragmentShader:un.meshphong_frag},standard:{uniforms:vr([On.common,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.roughnessmap,On.metalnessmap,On.fog,On.lights,{emissive:{value:new Ln(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag},toon:{uniforms:vr([On.common,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.gradientmap,On.fog,On.lights,{emissive:{value:new Ln(0)}}]),vertexShader:un.meshtoon_vert,fragmentShader:un.meshtoon_frag},matcap:{uniforms:vr([On.common,On.bumpmap,On.normalmap,On.displacementmap,On.fog,{matcap:{value:null}}]),vertexShader:un.meshmatcap_vert,fragmentShader:un.meshmatcap_frag},points:{uniforms:vr([On.points,On.fog]),vertexShader:un.points_vert,fragmentShader:un.points_frag},dashed:{uniforms:vr([On.common,On.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:un.linedashed_vert,fragmentShader:un.linedashed_frag},depth:{uniforms:vr([On.common,On.displacementmap]),vertexShader:un.depth_vert,fragmentShader:un.depth_frag},normal:{uniforms:vr([On.common,On.bumpmap,On.normalmap,On.displacementmap,{opacity:{value:1}}]),vertexShader:un.meshnormal_vert,fragmentShader:un.meshnormal_frag},sprite:{uniforms:vr([On.sprite,On.fog]),vertexShader:un.sprite_vert,fragmentShader:un.sprite_frag},background:{uniforms:{uvTransform:{value:new er},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:un.background_vert,fragmentShader:un.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:un.backgroundCube_vert,fragmentShader:un.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:un.cube_vert,fragmentShader:un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:un.equirect_vert,fragmentShader:un.equirect_frag},distanceRGBA:{uniforms:vr([On.common,On.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:un.distanceRGBA_vert,fragmentShader:un.distanceRGBA_frag},shadow:{uniforms:vr([On.lights,On.fog,{color:{value:new Ln(0)},opacity:{value:1}}]),vertexShader:un.shadow_vert,fragmentShader:un.shadow_frag}};Pc.physical={uniforms:vr([Pc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new er},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new er},clearcoatNormalScale:{value:new Wt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new er},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new er},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new er},sheen:{value:0},sheenColor:{value:new Ln(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new er},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new er},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new er},transmissionSamplerSize:{value:new Wt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new er},attenuationDistance:{value:0},attenuationColor:{value:new Ln(0)},specularColor:{value:new Ln(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new er},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new er}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag};const km={r:0,b:0,g:0};function Ua(p,i,o,u,f,_,x){const M=new Ln(0);let D,k,E=!0===_?0:1,O=null,I=0,U=null;function j($,G){$.getRGB(km,Z_(p)),u.buffers.color.setClear(km.r,km.g,km.b,G,x)}return{getClearColor:function(){return M},setClearColor:function($,G=1){M.set($),E=G,j(M,E)},getClearAlpha:function(){return E},setClearAlpha:function($){E=$,j(M,E)},render:function B($,G){let Q=!1,J=!0===G.isScene?G.background:null;J&&J.isTexture&&(J=(G.backgroundBlurriness>0?o:i).get(J));const Y=p.xr,ee=Y.getSession&&Y.getSession();ee&&"additive"===ee.environmentBlendMode&&(J=null),null===J?j(M,E):J&&J.isColor&&(j(J,1),Q=!0),(p.autoClear||Q)&&p.clear(p.autoClearColor,p.autoClearDepth,p.autoClearStencil),J&&(J.isCubeTexture||J.mapping===Ud)?(void 0===k&&(k=new ac(new As(1,1,1),new _u({name:"BackgroundCubeMaterial",uniforms:as(Pc.backgroundCube.uniforms),vertexShader:Pc.backgroundCube.vertexShader,fragmentShader:Pc.backgroundCube.fragmentShader,side:At,depthTest:!1,depthWrite:!1,fog:!1})),k.geometry.deleteAttribute("normal"),k.geometry.deleteAttribute("uv"),k.onBeforeRender=function(he,xe,fe){this.matrixWorld.copyPosition(fe.matrixWorld)},Object.defineProperty(k.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(k)),k.material.uniforms.envMap.value=J,k.material.uniforms.flipEnvMap.value=J.isCubeTexture&&!1===J.isRenderTargetTexture?-1:1,k.material.uniforms.backgroundBlurriness.value=G.backgroundBlurriness,k.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,k.material.toneMapped=J.encoding!==ws,(O!==J||I!==J.version||U!==p.toneMapping)&&(k.material.needsUpdate=!0,O=J,I=J.version,U=p.toneMapping),k.layers.enableAll(),$.unshift(k,k.geometry,k.material,0,0,null)):J&&J.isTexture&&(void 0===D&&(D=new ac(new Cm(2,2),new _u({name:"BackgroundMaterial",uniforms:as(Pc.background.uniforms),vertexShader:Pc.background.vertexShader,fragmentShader:Pc.background.fragmentShader,side:Mt,depthTest:!1,depthWrite:!1,fog:!1})),D.geometry.deleteAttribute("normal"),Object.defineProperty(D.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(D)),D.material.uniforms.t2D.value=J,D.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,D.material.toneMapped=J.encoding!==ws,!0===J.matrixAutoUpdate&&J.updateMatrix(),D.material.uniforms.uvTransform.value.copy(J.matrix),(O!==J||I!==J.version||U!==p.toneMapping)&&(D.material.needsUpdate=!0,O=J,I=J.version,U=p.toneMapping),D.layers.enableAll(),$.unshift(D,D.geometry,D.material,0,0,null))}}}function Lm(p,i,o,u){const f=p.getParameter(34921),_=u.isWebGL2?null:i.get("OES_vertex_array_object"),x=u.isWebGL2||null!==_,M={},E=$(null);let D=E,k=!1;function U($e){return u.isWebGL2?p.bindVertexArray($e):_.bindVertexArrayOES($e)}function B($e){return u.isWebGL2?p.deleteVertexArray($e):_.deleteVertexArrayOES($e)}function $($e){const et=[],Pt=[],Dt=[];for(let Ze=0;Ze<f;Ze++)et[Ze]=0,Pt[Ze]=0,Dt[Ze]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:et,enabledAttributes:Pt,attributeDivisors:Dt,object:$e,attributes:{},index:null}}function J(){const $e=D.newAttributes;for(let et=0,Pt=$e.length;et<Pt;et++)$e[et]=0}function Y($e){ee($e,0)}function ee($e,et){const Dt=D.enabledAttributes,Ze=D.attributeDivisors;D.newAttributes[$e]=1,0===Dt[$e]&&(p.enableVertexAttribArray($e),Dt[$e]=1),Ze[$e]!==et&&((u.isWebGL2?p:i.get("ANGLE_instanced_arrays"))[u.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($e,et),Ze[$e]=et)}function he(){const $e=D.newAttributes,et=D.enabledAttributes;for(let Pt=0,Dt=et.length;Pt<Dt;Pt++)et[Pt]!==$e[Pt]&&(p.disableVertexAttribArray(Pt),et[Pt]=0)}function xe($e,et,Pt,Dt,Ze,at){!0!==u.isWebGL2||5124!==Pt&&5125!==Pt?p.vertexAttribPointer($e,et,Pt,Dt,Ze,at):p.vertexAttribIPointer($e,et,Pt,Ze,at)}function Qe(){Ne(),k=!0,D!==E&&(D=E,U(D.object))}function Ne(){E.geometry=null,E.program=null,E.wireframe=!1}return{setup:function O($e,et,Pt,Dt,Ze){let at=!1;if(x){const bt=function j($e,et,Pt){const Dt=!0===Pt.wireframe;let Ze=M[$e.id];void 0===Ze&&(Ze={},M[$e.id]=Ze);let at=Ze[et.id];void 0===at&&(at={},Ze[et.id]=at);let bt=at[Dt];return void 0===bt&&(bt=$(function I(){return u.isWebGL2?p.createVertexArray():_.createVertexArrayOES()}()),at[Dt]=bt),bt}(Dt,Pt,et);D!==bt&&(D=bt,U(D.object)),at=function G($e,et,Pt,Dt){const Ze=D.attributes,at=et.attributes;let bt=0;const tn=Pt.getAttributes();for(const Ve in tn)if(tn[Ve].location>=0){const Ft=Ze[Ve];let Et=at[Ve];if(void 0===Et&&("instanceMatrix"===Ve&&$e.instanceMatrix&&(Et=$e.instanceMatrix),"instanceColor"===Ve&&$e.instanceColor&&(Et=$e.instanceColor)),void 0===Ft||Ft.attribute!==Et||Et&&Ft.data!==Et.data)return!0;bt++}return D.attributesNum!==bt||D.index!==Dt}($e,Dt,Pt,Ze),at&&function Q($e,et,Pt,Dt){const Ze={},at=et.attributes;let bt=0;const tn=Pt.getAttributes();for(const Ve in tn)if(tn[Ve].location>=0){let Ft=at[Ve];void 0===Ft&&("instanceMatrix"===Ve&&$e.instanceMatrix&&(Ft=$e.instanceMatrix),"instanceColor"===Ve&&$e.instanceColor&&(Ft=$e.instanceColor));const Et={};Et.attribute=Ft,Ft&&Ft.data&&(Et.data=Ft.data),Ze[Ve]=Et,bt++}D.attributes=Ze,D.attributesNum=bt,D.index=Dt}($e,Dt,Pt,Ze)}else{const bt=!0===et.wireframe;(D.geometry!==Dt.id||D.program!==Pt.id||D.wireframe!==bt)&&(D.geometry=Dt.id,D.program=Pt.id,D.wireframe=bt,at=!0)}null!==Ze&&o.update(Ze,34963),(at||k)&&(k=!1,function fe($e,et,Pt,Dt){if(!1===u.isWebGL2&&($e.isInstancedMesh||Dt.isInstancedBufferGeometry)&&null===i.get("ANGLE_instanced_arrays"))return;J();const Ze=Dt.attributes,at=Pt.getAttributes(),bt=et.defaultAttributeValues;for(const tn in at){const Ve=at[tn];if(Ve.location>=0){let St=Ze[tn];if(void 0===St&&("instanceMatrix"===tn&&$e.instanceMatrix&&(St=$e.instanceMatrix),"instanceColor"===tn&&$e.instanceColor&&(St=$e.instanceColor)),void 0!==St){const Ft=St.normalized,Et=St.itemSize,an=o.get(St);if(void 0===an)continue;const je=an.buffer,Tt=an.type,Ut=an.bytesPerElement;if(St.isInterleavedBufferAttribute){const Nt=St.data,en=Nt.stride,tt=St.offset;if(Nt.isInstancedInterleavedBuffer){for(let wt=0;wt<Ve.locationSize;wt++)ee(Ve.location+wt,Nt.meshPerAttribute);!0!==$e.isInstancedMesh&&void 0===Dt._maxInstanceCount&&(Dt._maxInstanceCount=Nt.meshPerAttribute*Nt.count)}else for(let wt=0;wt<Ve.locationSize;wt++)Y(Ve.location+wt);p.bindBuffer(34962,je);for(let wt=0;wt<Ve.locationSize;wt++)xe(Ve.location+wt,Et/Ve.locationSize,Tt,Ft,en*Ut,(tt+Et/Ve.locationSize*wt)*Ut)}else{if(St.isInstancedBufferAttribute){for(let Nt=0;Nt<Ve.locationSize;Nt++)ee(Ve.location+Nt,St.meshPerAttribute);!0!==$e.isInstancedMesh&&void 0===Dt._maxInstanceCount&&(Dt._maxInstanceCount=St.meshPerAttribute*St.count)}else for(let Nt=0;Nt<Ve.locationSize;Nt++)Y(Ve.location+Nt);p.bindBuffer(34962,je);for(let Nt=0;Nt<Ve.locationSize;Nt++)xe(Ve.location+Nt,Et/Ve.locationSize,Tt,Ft,Et*Ut,Et/Ve.locationSize*Nt*Ut)}}else if(void 0!==bt){const Ft=bt[tn];if(void 0!==Ft)switch(Ft.length){case 2:p.vertexAttrib2fv(Ve.location,Ft);break;case 3:p.vertexAttrib3fv(Ve.location,Ft);break;case 4:p.vertexAttrib4fv(Ve.location,Ft);break;default:p.vertexAttrib1fv(Ve.location,Ft)}}}}he()}($e,et,Pt,Dt),null!==Ze&&p.bindBuffer(34963,o.get(Ze).buffer))},reset:Qe,resetDefaultState:Ne,dispose:function ce(){Qe();for(const $e in M){const et=M[$e];for(const Pt in et){const Dt=et[Pt];for(const Ze in Dt)B(Dt[Ze].object),delete Dt[Ze];delete et[Pt]}delete M[$e]}},releaseStatesOfGeometry:function de($e){if(void 0===M[$e.id])return;const et=M[$e.id];for(const Pt in et){const Dt=et[Pt];for(const Ze in Dt)B(Dt[Ze].object),delete Dt[Ze];delete et[Pt]}delete M[$e.id]},releaseStatesOfProgram:function Ye($e){for(const et in M){const Pt=M[et];if(void 0===Pt[$e.id])continue;const Dt=Pt[$e.id];for(const Ze in Dt)B(Dt[Ze].object),delete Dt[Ze];delete Pt[$e.id]}},initAttributes:J,enableAttribute:Y,disableUnusedAttributes:he}}function Om(p,i,o,u){const f=u.isWebGL2;let _;this.setMode=function x(D){_=D},this.render=function M(D,k){p.drawArrays(_,D,k),o.update(k,_,1)},this.renderInstances=function E(D,k,O){if(0===O)return;let I,U;if(f)I=p,U="drawArraysInstanced";else if(I=i.get("ANGLE_instanced_arrays"),U="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[U](_,D,k,O),o.update(k,_,O)}}function u0(p,i,o){let u;function _(xe){if("highp"===xe){if(p.getShaderPrecisionFormat(35633,36338).precision>0&&p.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";xe="mediump"}return"mediump"===xe&&p.getShaderPrecisionFormat(35633,36337).precision>0&&p.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const x=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===p.constructor.name;let M=void 0!==o.precision?o.precision:"highp";const E=_(M);E!==M&&(console.warn("THREE.WebGLRenderer:",M,"not supported, using",E,"instead."),M=E);const D=x||i.has("WEBGL_draw_buffers"),k=!0===o.logarithmicDepthBuffer,O=p.getParameter(34930),I=p.getParameter(35660),U=p.getParameter(3379),B=p.getParameter(34076),j=p.getParameter(34921),$=p.getParameter(36347),G=p.getParameter(36348),Q=p.getParameter(36349),J=I>0,Y=x||i.has("OES_texture_float");return{isWebGL2:x,drawBuffers:D,getMaxAnisotropy:function f(){if(void 0!==u)return u;if(!0===i.has("EXT_texture_filter_anisotropic")){const xe=i.get("EXT_texture_filter_anisotropic");u=p.getParameter(xe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else u=0;return u},getMaxPrecision:_,precision:M,logarithmicDepthBuffer:k,maxTextures:O,maxVertexTextures:I,maxTextureSize:U,maxCubemapSize:B,maxAttributes:j,maxVertexUniforms:$,maxVaryings:G,maxFragmentUniforms:Q,vertexTextures:J,floatFragmentTextures:Y,floatVertexTextures:J&&Y,maxSamples:x?p.getParameter(36183):0}}function pa(p){const i=this;let o=null,u=0,f=!1,_=!1;const x=new lc,M=new er,E={value:null,needsUpdate:!1};function k(O,I,U,B){const j=null!==O?O.length:0;let $=null;if(0!==j){if($=E.value,!0!==B||null===$){const G=U+4*j,Q=I.matrixWorldInverse;M.getNormalMatrix(Q),(null===$||$.length<G)&&($=new Float32Array(G));for(let J=0,Y=U;J!==j;++J,Y+=4)x.copy(O[J]).applyMatrix4(Q,M),x.normal.toArray($,Y),$[Y+3]=x.constant}E.value=$,E.needsUpdate=!0}return i.numPlanes=j,i.numIntersection=0,$}this.uniform=E,this.numPlanes=0,this.numIntersection=0,this.init=function(O,I){const U=0!==O.length||I||0!==u||f;return f=I,u=O.length,U},this.beginShadows=function(){_=!0,k(null)},this.endShadows=function(){_=!1},this.setGlobalState=function(O,I){o=k(O,I,0)},this.setState=function(O,I,U){const B=O.clippingPlanes,j=O.clipIntersection,$=O.clipShadows,G=p.get(O);if(!f||null===B||0===B.length||_&&!$)_?k(null):function D(){E.value!==o&&(E.value=o,E.needsUpdate=u>0),i.numPlanes=u,i.numIntersection=0}();else{const Q=_?0:u,J=4*Q;let Y=G.clippingState||null;E.value=Y,Y=k(B,I,J,U);for(let ee=0;ee!==J;++ee)Y[ee]=o[ee];G.clippingState=Y,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=Q}}}function Jd(p){let i=new WeakMap;function o(x,M){return M===Tl?x.mapping=Ca:M===ju&&(x.mapping=Wu),x}function f(x){const M=x.target;M.removeEventListener("dispose",f);const E=i.get(M);void 0!==E&&(i.delete(M),E.dispose())}return{get:function u(x){if(x&&x.isTexture&&!1===x.isRenderTargetTexture){const M=x.mapping;if(M===Tl||M===ju){if(i.has(x))return o(i.get(x).texture,x.mapping);{const E=x.image;if(E&&E.height>0){const D=new $h(E.height/2);return D.fromEquirectangularTexture(p,x),i.set(x,D),x.addEventListener("dispose",f),o(D.texture,x.mapping)}return null}}}return x},dispose:function _(){i=new WeakMap}}}class Qd extends ao{constructor(i=-1,o=1,u=1,f=-1,_=.1,x=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=i,this.right=o,this.top=u,this.bottom=f,this.near=_,this.far=x,this.updateProjectionMatrix()}copy(i,o){return super.copy(i,o),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=null===i.view?null:Object.assign({},i.view),this}setViewOffset(i,o,u,f,_,x){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=f,this.view.width=_,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const i=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),u=(this.right+this.left)/2,f=(this.top+this.bottom)/2;let _=u-i,x=u+i,M=f+o,E=f-o;if(null!==this.view&&this.view.enabled){const D=(this.right-this.left)/this.view.fullWidth/this.zoom,k=(this.top-this.bottom)/this.view.fullHeight/this.zoom;_+=D*this.view.offsetX,x=_+D*this.view.width,M-=k*this.view.offsetY,E=M-k*this.view.height}this.projectionMatrix.makeOrthographic(_,x,M,E,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(i){const o=super.toJSON(i);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}const kc=[.125,.215,.35,.446,.526,.582],jg=new Qd,$g=new Ln;let eh=null;const Do=(1+Math.sqrt(5))/2,ap=1/Do,d0=[new Re(1,1,1),new Re(-1,1,1),new Re(1,1,-1),new Re(-1,1,-1),new Re(0,Do,ap),new Re(0,Do,-ap),new Re(ap,0,Do),new Re(-ap,0,Do),new Re(Do,ap,0),new Re(-Do,ap,0)];class h0{constructor(i){this._renderer=i,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(i,o=0,u=.1,f=100){eh=this._renderer.getRenderTarget(),this._setSize(256);const _=this._allocateTargets();return _.depthBuffer=!0,this._sceneToCubeUV(i,u,f,_),o>0&&this._blur(_,0,0,o),this._applyPMREM(_),this._cleanup(_),_}fromEquirectangular(i,o=null){return this._fromTexture(i,o)}fromCubemap(i,o=null){return this._fromTexture(i,o)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Fm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Xg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(i){this._lodMax=Math.floor(Math.log2(i)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let i=0;i<this._lodPlanes.length;i++)this._lodPlanes[i].dispose()}_cleanup(i){this._renderer.setRenderTarget(eh),i.scissorTest=!1,Zh(i,0,0,i.width,i.height)}_fromTexture(i,o){this._setSize(i.mapping===Ca||i.mapping===Wu?0===i.image.length?16:i.image[0].width||i.image[0].image.width:i.image.width/4),eh=this._renderer.getRenderTarget();const u=o||this._allocateTargets();return this._textureToCubeUV(i,u),this._applyPMREM(u),this._cleanup(u),u}_allocateTargets(){const i=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,u={magFilter:bs,minFilter:bs,generateMipmaps:!1,type:Uf,format:Ec,encoding:Wi,depthBuffer:!1},f=qg(i,o,u);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==i||this._pingPongRenderTarget.height!==o){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=qg(i,o,u);const{_lodMax:_}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function f0(p){const i=[],o=[],u=[];let f=p;const _=p-4+1+kc.length;for(let x=0;x<_;x++){const M=Math.pow(2,f);o.push(M);let E=1/M;x>p-4?E=kc[x-p+4-1]:0===x&&(E=0),u.push(E);const D=1/(M-2),k=-D,O=1+D,I=[k,k,O,k,O,O,k,k,O,O,k,O],U=6,B=6,j=3,$=2,G=1,Q=new Float32Array(j*B*U),J=new Float32Array($*B*U),Y=new Float32Array(G*B*U);for(let he=0;he<U;he++){const xe=he%3*2/3-1,fe=he>2?0:-1;Q.set([xe,fe,0,xe+2/3,fe,0,xe+2/3,fe+1,0,xe,fe,0,xe+2/3,fe+1,0,xe,fe+1,0],j*B*he),J.set(I,$*B*he),Y.set([he,he,he,he,he,he],G*B*he)}const ee=new nr;ee.setAttribute("position",new Hs(Q,j)),ee.setAttribute("uv",new Hs(J,$)),ee.setAttribute("faceIndex",new Hs(Y,G)),i.push(ee),f>4&&f--}return{lodPlanes:i,sizeLods:o,sigmas:u}}(_)),this._blurMaterial=function dd(p,i,o){const u=new Float32Array(20),f=new Re(0,1,0);return new _u({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/i,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${p}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:f}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Kn,depthTest:!1,depthWrite:!1})}(_,i,o)}return f}_compileMaterial(i){const o=new ac(this._lodPlanes[0],i);this._renderer.compile(o,jg)}_sceneToCubeUV(i,o,u,f){const M=new Ds(90,1,o,u),E=[1,-1,1,1,1,1],D=[1,1,1,-1,-1,-1],k=this._renderer,O=k.autoClear,I=k.toneMapping;k.getClearColor($g),k.toneMapping=wc,k.autoClear=!1;const U=new ia({name:"PMREM.Background",side:At,depthWrite:!1,depthTest:!1}),B=new ac(new As,U);let j=!1;const $=i.background;$?$.isColor&&(U.color.copy($),i.background=null,j=!0):(U.color.copy($g),j=!0);for(let G=0;G<6;G++){const Q=G%3;0===Q?(M.up.set(0,E[G],0),M.lookAt(D[G],0,0)):1===Q?(M.up.set(0,0,E[G]),M.lookAt(0,D[G],0)):(M.up.set(0,E[G],0),M.lookAt(0,0,D[G]));const J=this._cubeSize;Zh(f,Q*J,G>2?J:0,J,J),k.setRenderTarget(f),j&&k.render(B,M),k.render(i,M)}B.geometry.dispose(),B.material.dispose(),k.toneMapping=I,k.autoClear=O,i.background=$}_textureToCubeUV(i,o){const u=this._renderer,f=i.mapping===Ca||i.mapping===Wu;f?(null===this._cubemapMaterial&&(this._cubemapMaterial=Fm()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===i.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Xg());const _=f?this._cubemapMaterial:this._equirectMaterial,x=new ac(this._lodPlanes[0],_);_.uniforms.envMap.value=i;const E=this._cubeSize;Zh(o,0,0,3*E,2*E),u.setRenderTarget(o),u.render(x,jg)}_applyPMREM(i){const o=this._renderer,u=o.autoClear;o.autoClear=!1;for(let f=1;f<this._lodPlanes.length;f++){const _=Math.sqrt(this._sigmas[f]*this._sigmas[f]-this._sigmas[f-1]*this._sigmas[f-1]);this._blur(i,f-1,f,_,d0[(f-1)%d0.length])}o.autoClear=u}_blur(i,o,u,f,_){const x=this._pingPongRenderTarget;this._halfBlur(i,x,o,u,f,"latitudinal",_),this._halfBlur(x,i,u,u,f,"longitudinal",_)}_halfBlur(i,o,u,f,_,x,M){const E=this._renderer,D=this._blurMaterial;"latitudinal"!==x&&"longitudinal"!==x&&console.error("blur direction must be either latitudinal or longitudinal!");const O=new ac(this._lodPlanes[f],D),I=D.uniforms,U=this._sizeLods[u]-1,B=isFinite(_)?Math.PI/(2*U):2*Math.PI/39,j=_/B,$=isFinite(_)?1+Math.floor(3*j):20;$>20&&console.warn(`sigmaRadians, ${_}, is too large and will clip, as it requested ${$} samples when the maximum is set to 20`);const G=[];let Q=0;for(let xe=0;xe<20;++xe){const fe=xe/j,ce=Math.exp(-fe*fe/2);G.push(ce),0===xe?Q+=ce:xe<$&&(Q+=2*ce)}for(let xe=0;xe<G.length;xe++)G[xe]=G[xe]/Q;I.envMap.value=i.texture,I.samples.value=$,I.weights.value=G,I.latitudinal.value="latitudinal"===x,M&&(I.poleAxis.value=M);const{_lodMax:J}=this;I.dTheta.value=B,I.mipInt.value=J-u;const Y=this._sizeLods[f];Zh(o,3*Y*(f>J-4?f-J+4:0),4*(this._cubeSize-Y),3*Y,2*Y),E.setRenderTarget(o),E.render(O,jg)}}function qg(p,i,o){const u=new Gn(p,i,o);return u.texture.mapping=Ud,u.texture.name="PMREM.cubeUv",u.scissorTest=!0,u}function Zh(p,i,o,u,f){p.viewport.set(i,o,u,f),p.scissor.set(i,o,u,f)}function Xg(){return new _u({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Kn,depthTest:!1,depthWrite:!1})}function Fm(){return new _u({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Kn,depthTest:!1,depthWrite:!1})}function p0(p){let i=new WeakMap,o=null;function _(M){const E=M.target;E.removeEventListener("dispose",_);const D=i.get(E);void 0!==D&&(i.delete(E),D.dispose())}return{get:function u(M){if(M&&M.isTexture){const E=M.mapping,D=E===Tl||E===ju,k=E===Ca||E===Wu;if(D||k){if(M.isRenderTargetTexture&&!0===M.needsPMREMUpdate){M.needsPMREMUpdate=!1;let O=i.get(M);return null===o&&(o=new h0(p)),O=D?o.fromEquirectangular(M,O):o.fromCubemap(M,O),i.set(M,O),O.texture}if(i.has(M))return i.get(M).texture;{const O=M.image;if(D&&O&&O.height>0||k&&O&&function f(M){let E=0;for(let k=0;k<6;k++)void 0!==M[k]&&E++;return 6===E}(O)){null===o&&(o=new h0(p));const I=D?o.fromEquirectangular(M):o.fromCubemap(M);return i.set(M,I),M.addEventListener("dispose",_),I.texture}return null}}}return M},dispose:function x(){i=new WeakMap,null!==o&&(o.dispose(),o=null)}}}function cp(p){const i={};function o(u){if(void 0!==i[u])return i[u];let f;switch(u){case"WEBGL_depth_texture":f=p.getExtension("WEBGL_depth_texture")||p.getExtension("MOZ_WEBGL_depth_texture")||p.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":f=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":f=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":f=p.getExtension("WEBGL_compressed_texture_pvrtc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:f=p.getExtension(u)}return i[u]=f,f}return{has:function(u){return null!==o(u)},init:function(u){u.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(u){const f=o(u);return null===f&&console.warn("THREE.WebGLRenderer: "+u+" extension not supported."),f}}}function Jv(p,i,o,u){const f={},_=new WeakMap;function x(O){const I=O.target;null!==I.index&&i.remove(I.index);for(const B in I.attributes)i.remove(I.attributes[B]);I.removeEventListener("dispose",x),delete f[I.id];const U=_.get(I);U&&(i.remove(U),_.delete(I)),u.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,o.memory.geometries--}function D(O){const I=[],U=O.index,B=O.attributes.position;let j=0;if(null!==U){const Q=U.array;j=U.version;for(let J=0,Y=Q.length;J<Y;J+=3){const ee=Q[J+0],he=Q[J+1],xe=Q[J+2];I.push(ee,he,he,xe,xe,ee)}}else{j=B.version;for(let J=0,Y=B.array.length/3-1;J<Y;J+=3){const ee=J+0,he=J+1,xe=J+2;I.push(ee,he,he,xe,xe,ee)}}const $=new(vm(I)?Gs:Oa)(I,1);$.version=j;const G=_.get(O);G&&i.remove(G),_.set(O,$)}return{get:function M(O,I){return!0===f[I.id]||(I.addEventListener("dispose",x),f[I.id]=!0,o.memory.geometries++),I},update:function E(O){const I=O.attributes;for(const B in I)i.update(I[B],34962);const U=O.morphAttributes;for(const B in U){const j=U[B];for(let $=0,G=j.length;$<G;$++)i.update(j[$],34962)}},getWireframeAttribute:function k(O){const I=_.get(O);if(I){const U=O.index;null!==U&&I.version<U.version&&D(O)}else D(O);return _.get(O)}}}function ex(p,i,o,u){const f=u.isWebGL2;let _,M,E;this.setMode=function x(I){_=I},this.setIndex=function D(I){M=I.type,E=I.bytesPerElement},this.render=function k(I,U){p.drawElements(_,U,M,I*E),o.update(U,_,1)},this.renderInstances=function O(I,U,B){if(0===B)return;let j,$;if(f)j=p,$="drawElementsInstanced";else if(j=i.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[$](_,U,M,I*E,B),o.update(U,_,B)}}function aw(p){const o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function f(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function u(_,x,M){switch(o.calls++,x){case 4:o.triangles+=M*(_/3);break;case 1:o.lines+=M*(_/2);break;case 3:o.lines+=M*(_-1);break;case 2:o.lines+=M*_;break;case 0:o.points+=M*_;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",x)}}}}function Qv(p,i){return p[0]-i[0]}function Kr(p,i){return Math.abs(i[1])-Math.abs(p[1])}function zo(p,i,o){const u={},f=new Float32Array(8),_=new WeakMap,x=new Vi,M=[];for(let D=0;D<8;D++)M[D]=[D,0];return{update:function E(D,k,O){const I=D.morphTargetInfluences;if(!0===i.isWebGL2){const U=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,B=void 0!==U?U.length:0;let j=_.get(k);if(void 0===j||j.count!==B){let $e=function(){Qe.dispose(),_.delete(k),k.removeEventListener("dispose",$e)};void 0!==j&&j.texture.dispose();const Q=void 0!==k.morphAttributes.position,J=void 0!==k.morphAttributes.normal,Y=void 0!==k.morphAttributes.color,ee=k.morphAttributes.position||[],he=k.morphAttributes.normal||[],xe=k.morphAttributes.color||[];let fe=0;!0===Q&&(fe=1),!0===J&&(fe=2),!0===Y&&(fe=3);let ce=k.attributes.position.count*fe,de=1;ce>i.maxTextureSize&&(de=Math.ceil(ce/i.maxTextureSize),ce=i.maxTextureSize);const Ye=new Float32Array(ce*de*4*B),Qe=new qi(Ye,ce,de,B);Qe.type=Sc,Qe.needsUpdate=!0;const Ne=4*fe;for(let et=0;et<B;et++){const Pt=ee[et],Dt=he[et],Ze=xe[et],at=ce*de*4*et;for(let bt=0;bt<Pt.count;bt++){const tn=bt*Ne;!0===Q&&(x.fromBufferAttribute(Pt,bt),Ye[at+tn+0]=x.x,Ye[at+tn+1]=x.y,Ye[at+tn+2]=x.z,Ye[at+tn+3]=0),!0===J&&(x.fromBufferAttribute(Dt,bt),Ye[at+tn+4]=x.x,Ye[at+tn+5]=x.y,Ye[at+tn+6]=x.z,Ye[at+tn+7]=0),!0===Y&&(x.fromBufferAttribute(Ze,bt),Ye[at+tn+8]=x.x,Ye[at+tn+9]=x.y,Ye[at+tn+10]=x.z,Ye[at+tn+11]=4===Ze.itemSize?x.w:1)}}j={count:B,texture:Qe,size:new Wt(ce,de)},_.set(k,j),k.addEventListener("dispose",$e)}let $=0;for(let Q=0;Q<I.length;Q++)$+=I[Q];const G=k.morphTargetsRelative?1:1-$;O.getUniforms().setValue(p,"morphTargetBaseInfluence",G),O.getUniforms().setValue(p,"morphTargetInfluences",I),O.getUniforms().setValue(p,"morphTargetsTexture",j.texture,o),O.getUniforms().setValue(p,"morphTargetsTextureSize",j.size)}else{const U=void 0===I?0:I.length;let B=u[k.id];if(void 0===B||B.length!==U){B=[];for(let J=0;J<U;J++)B[J]=[J,0];u[k.id]=B}for(let J=0;J<U;J++){const Y=B[J];Y[0]=J,Y[1]=I[J]}B.sort(Kr);for(let J=0;J<8;J++)J<U&&B[J][1]?(M[J][0]=B[J][0],M[J][1]=B[J][1]):(M[J][0]=Number.MAX_SAFE_INTEGER,M[J][1]=0);M.sort(Qv);const j=k.morphAttributes.position,$=k.morphAttributes.normal;let G=0;for(let J=0;J<8;J++){const Y=M[J],ee=Y[0],he=Y[1];ee!==Number.MAX_SAFE_INTEGER&&he?(j&&k.getAttribute("morphTarget"+J)!==j[ee]&&k.setAttribute("morphTarget"+J,j[ee]),$&&k.getAttribute("morphNormal"+J)!==$[ee]&&k.setAttribute("morphNormal"+J,$[ee]),f[J]=he,G+=he):(j&&!0===k.hasAttribute("morphTarget"+J)&&k.deleteAttribute("morphTarget"+J),$&&!0===k.hasAttribute("morphNormal"+J)&&k.deleteAttribute("morphNormal"+J),f[J]=0)}const Q=k.morphTargetsRelative?1:1-G;O.getUniforms().setValue(p,"morphTargetBaseInfluence",Q),O.getUniforms().setValue(p,"morphTargetInfluences",f)}}}}function tx(p,i,o,u){let f=new WeakMap;function M(E){const D=E.target;D.removeEventListener("dispose",M),o.remove(D.instanceMatrix),null!==D.instanceColor&&o.remove(D.instanceColor)}return{update:function _(E){const D=u.render.frame,O=i.get(E,E.geometry);return f.get(O)!==D&&(i.update(O),f.set(O,D)),E.isInstancedMesh&&(!1===E.hasEventListener("dispose",M)&&E.addEventListener("dispose",M),o.update(E.instanceMatrix,34962),null!==E.instanceColor&&o.update(E.instanceColor,34962)),O},dispose:function x(){f=new WeakMap}}}const lp=new tr,nx=new qi,ix=new Pl,ey=new Bg,Yg=[],Cn=[],Zg=new Float32Array(16),ty=new Float32Array(9),up=new Float32Array(4);function Jr(p,i,o){const u=p[0];if(u<=0||u>0)return p;const f=i*o;let _=Yg[f];if(void 0===_&&(_=new Float32Array(f),Yg[f]=_),0!==i){u.toArray(_,0);for(let x=1,M=0;x!==i;++x)M+=o,p[x].toArray(_,M)}return _}function ir(p,i){if(p.length!==i.length)return!1;for(let o=0,u=p.length;o<u;o++)if(p[o]!==i[o])return!1;return!0}function cs(p,i){for(let o=0,u=i.length;o<u;o++)p[o]=i[o]}function Nm(p,i){let o=Cn[i];void 0===o&&(o=new Int32Array(i),Cn[i]=o);for(let u=0;u!==i;++u)o[u]=p.allocateTextureUnit();return o}function Ba(p,i){const o=this.cache;o[0]!==i&&(p.uniform1f(this.addr,i),o[0]=i)}function cw(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y)&&(p.uniform2f(this.addr,i.x,i.y),o[0]=i.x,o[1]=i.y);else{if(ir(o,i))return;p.uniform2fv(this.addr,i),cs(o,i)}}function ny(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z)&&(p.uniform3f(this.addr,i.x,i.y,i.z),o[0]=i.x,o[1]=i.y,o[2]=i.z);else if(void 0!==i.r)(o[0]!==i.r||o[1]!==i.g||o[2]!==i.b)&&(p.uniform3f(this.addr,i.r,i.g,i.b),o[0]=i.r,o[1]=i.g,o[2]=i.b);else{if(ir(o,i))return;p.uniform3fv(this.addr,i),cs(o,i)}}function iy(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z||o[3]!==i.w)&&(p.uniform4f(this.addr,i.x,i.y,i.z,i.w),o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=i.w);else{if(ir(o,i))return;p.uniform4fv(this.addr,i),cs(o,i)}}function lw(p,i){const o=this.cache,u=i.elements;if(void 0===u){if(ir(o,i))return;p.uniformMatrix2fv(this.addr,!1,i),cs(o,i)}else{if(ir(o,u))return;up.set(u),p.uniformMatrix2fv(this.addr,!1,up),cs(o,u)}}function rx(p,i){const o=this.cache,u=i.elements;if(void 0===u){if(ir(o,i))return;p.uniformMatrix3fv(this.addr,!1,i),cs(o,i)}else{if(ir(o,u))return;ty.set(u),p.uniformMatrix3fv(this.addr,!1,ty),cs(o,u)}}function sx(p,i){const o=this.cache,u=i.elements;if(void 0===u){if(ir(o,i))return;p.uniformMatrix4fv(this.addr,!1,i),cs(o,i)}else{if(ir(o,u))return;Zg.set(u),p.uniformMatrix4fv(this.addr,!1,Zg),cs(o,u)}}function dp(p,i){const o=this.cache;o[0]!==i&&(p.uniform1i(this.addr,i),o[0]=i)}function Kh(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y)&&(p.uniform2i(this.addr,i.x,i.y),o[0]=i.x,o[1]=i.y);else{if(ir(o,i))return;p.uniform2iv(this.addr,i),cs(o,i)}}function hp(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z)&&(p.uniform3i(this.addr,i.x,i.y,i.z),o[0]=i.x,o[1]=i.y,o[2]=i.z);else{if(ir(o,i))return;p.uniform3iv(this.addr,i),cs(o,i)}}function Kg(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z||o[3]!==i.w)&&(p.uniform4i(this.addr,i.x,i.y,i.z,i.w),o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=i.w);else{if(ir(o,i))return;p.uniform4iv(this.addr,i),cs(o,i)}}function Jg(p,i){const o=this.cache;o[0]!==i&&(p.uniform1ui(this.addr,i),o[0]=i)}function ry(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y)&&(p.uniform2ui(this.addr,i.x,i.y),o[0]=i.x,o[1]=i.y);else{if(ir(o,i))return;p.uniform2uiv(this.addr,i),cs(o,i)}}function m0(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z)&&(p.uniform3ui(this.addr,i.x,i.y,i.z),o[0]=i.x,o[1]=i.y,o[2]=i.z);else{if(ir(o,i))return;p.uniform3uiv(this.addr,i),cs(o,i)}}function g0(p,i){const o=this.cache;if(void 0!==i.x)(o[0]!==i.x||o[1]!==i.y||o[2]!==i.z||o[3]!==i.w)&&(p.uniform4ui(this.addr,i.x,i.y,i.z,i.w),o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=i.w);else{if(ir(o,i))return;p.uniform4uiv(this.addr,i),cs(o,i)}}function _0(p,i,o){const u=this.cache,f=o.allocateTextureUnit();u[0]!==f&&(p.uniform1i(this.addr,f),u[0]=f),o.setTexture2D(i||lp,f)}function fp(p,i,o){const u=this.cache,f=o.allocateTextureUnit();u[0]!==f&&(p.uniform1i(this.addr,f),u[0]=f),o.setTexture3D(i||ix,f)}function sy(p,i,o){const u=this.cache,f=o.allocateTextureUnit();u[0]!==f&&(p.uniform1i(this.addr,f),u[0]=f),o.setTextureCube(i||ey,f)}function v0(p,i,o){const u=this.cache,f=o.allocateTextureUnit();u[0]!==f&&(p.uniform1i(this.addr,f),u[0]=f),o.setTexture2DArray(i||nx,f)}function y0(p,i){p.uniform1fv(this.addr,i)}function ox(p,i){const o=Jr(i,this.size,2);p.uniform2fv(this.addr,o)}function dc(p,i){const o=Jr(i,this.size,3);p.uniform3fv(this.addr,o)}function pp(p,i){const o=Jr(i,this.size,4);p.uniform4fv(this.addr,o)}function th(p,i){const o=Jr(i,this.size,4);p.uniformMatrix2fv(this.addr,!1,o)}function Qg(p,i){const o=Jr(i,this.size,9);p.uniformMatrix3fv(this.addr,!1,o)}function Va(p,i){const o=Jr(i,this.size,16);p.uniformMatrix4fv(this.addr,!1,o)}function oy(p,i){p.uniform1iv(this.addr,i)}function Um(p,i){p.uniform2iv(this.addr,i)}function Y1(p,i){p.uniform3iv(this.addr,i)}function Z1(p,i){p.uniform4iv(this.addr,i)}function ax(p,i){p.uniform1uiv(this.addr,i)}function uw(p,i){p.uniform2uiv(this.addr,i)}function cx(p,i){p.uniform3uiv(this.addr,i)}function b0(p,i){p.uniform4uiv(this.addr,i)}function fd(p,i,o){const u=this.cache,f=i.length,_=Nm(o,f);ir(u,_)||(p.uniform1iv(this.addr,_),cs(u,_));for(let x=0;x!==f;++x)o.setTexture2D(i[x]||lp,_[x])}function nh(p,i,o){const u=this.cache,f=i.length,_=Nm(o,f);ir(u,_)||(p.uniform1iv(this.addr,_),cs(u,_));for(let x=0;x!==f;++x)o.setTexture3D(i[x]||ix,_[x])}function ih(p,i,o){const u=this.cache,f=i.length,_=Nm(o,f);ir(u,_)||(p.uniform1iv(this.addr,_),cs(u,_));for(let x=0;x!==f;++x)o.setTextureCube(i[x]||ey,_[x])}function bu(p,i,o){const u=this.cache,f=i.length,_=Nm(o,f);ir(u,_)||(p.uniform1iv(this.addr,_),cs(u,_));for(let x=0;x!==f;++x)o.setTexture2DArray(i[x]||nx,_[x])}class pd{constructor(i,o,u){this.id=i,this.addr=u,this.cache=[],this.setValue=function hd(p){switch(p){case 5126:return Ba;case 35664:return cw;case 35665:return ny;case 35666:return iy;case 35674:return lw;case 35675:return rx;case 35676:return sx;case 5124:case 35670:return dp;case 35667:case 35671:return Kh;case 35668:case 35672:return hp;case 35669:case 35673:return Kg;case 5125:return Jg;case 36294:return ry;case 36295:return m0;case 36296:return g0;case 35678:case 36198:case 36298:case 36306:case 35682:return _0;case 35679:case 36299:case 36307:return fp;case 35680:case 36300:case 36308:case 36293:return sy;case 36289:case 36303:case 36311:case 36292:return v0}}(o.type)}}class hc{constructor(i,o,u){this.id=i,this.addr=u,this.cache=[],this.size=o.size,this.setValue=function za(p){switch(p){case 5126:return y0;case 35664:return ox;case 35665:return dc;case 35666:return pp;case 35674:return th;case 35675:return Qg;case 35676:return Va;case 5124:case 35670:return oy;case 35667:case 35671:return Um;case 35668:case 35672:return Y1;case 35669:case 35673:return Z1;case 5125:return ax;case 36294:return uw;case 36295:return cx;case 36296:return b0;case 35678:case 36198:case 36298:case 36306:case 35682:return fd;case 35679:case 36299:case 36307:return nh;case 35680:case 36300:case 36308:case 36293:return ih;case 36289:case 36303:case 36311:case 36292:return bu}}(o.type)}}class ma{constructor(i){this.id=i,this.seq=[],this.map={}}setValue(i,o,u){const f=this.seq;for(let _=0,x=f.length;_!==x;++_){const M=f[_];M.setValue(i,o[M.id],u)}}}const Bm=/(\w+)(\])?(\[|\.)?/g;function x0(p,i){p.seq.push(i),p.map[i.id]=i}function ca(p,i,o){const u=p.name,f=u.length;for(Bm.lastIndex=0;;){const _=Bm.exec(u);let M=_[1];const D=_[3];if("]"===_[2]&&(M|=0),void 0===D||"["===D&&Bm.lastIndex+2===f){x0(o,void 0===D?new pd(M,p,i):new hc(M,p,i));break}{let O=o.map[M];void 0===O&&(O=new ma(M),x0(o,O)),o=O}}}class Ha{constructor(i,o){this.seq=[],this.map={};const u=i.getProgramParameter(o,35718);for(let f=0;f<u;++f){const _=i.getActiveUniform(o,f);ca(_,i.getUniformLocation(o,_.name),this)}}setValue(i,o,u,f){const _=this.map[o];void 0!==_&&_.setValue(i,u,f)}setOptional(i,o,u){const f=o[u];void 0!==f&&this.setValue(i,u,f)}static upload(i,o,u,f){for(let _=0,x=o.length;_!==x;++_){const M=o[_],E=u[M.id];!1!==E.needsUpdate&&M.setValue(i,E.value,f)}}static seqWithValue(i,o){const u=[];for(let f=0,_=i.length;f!==_;++f){const x=i[f];x.id in o&&u.push(x)}return u}}function M0(p,i,o){const u=p.createShader(i);return p.shaderSource(u,o),p.compileShader(u),u}let ay=0;function t_(p,i,o){const u=p.getShaderParameter(i,35713),f=p.getShaderInfoLog(i).trim();if(u&&""===f)return"";const _=/ERROR: 0:(\d+)/.exec(f);if(_){const x=parseInt(_[1]);return o.toUpperCase()+"\n\n"+f+"\n\n"+function w0(p,i){const o=p.split("\n"),u=[],f=Math.max(i-6,0),_=Math.min(i+6,o.length);for(let x=f;x<_;x++){const M=x+1;u.push(`${M===i?">":" "} ${M}: ${o[x]}`)}return u.join("\n")}(p.getShaderSource(i),x)}return f}function mp(p,i){const o=function e_(p){switch(p){case Wi:return["Linear","( value )"];case ws:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",p),["Linear","( value )"]}}(i);return"vec4 "+p+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function Jh(p,i){let o;switch(i){case fb:o="Linear";break;case wv:o="Reinhard";break;case Sv:o="OptimizedCineon";break;case Of:o="ACESFilmic";break;case Cg:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",i),o="Linear"}return"vec3 "+p+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function Ar(p){return""!==p}function Dr(p,i){const o=i.numSpotLightShadows+i.numSpotLightMaps-i.numSpotLightShadowsWithMaps;return p.replace(/NUM_DIR_LIGHTS/g,i.numDirLights).replace(/NUM_SPOT_LIGHTS/g,i.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,i.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,o).replace(/NUM_RECT_AREA_LIGHTS/g,i.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,i.numPointLights).replace(/NUM_HEMI_LIGHTS/g,i.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,i.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,i.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,i.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,i.numPointLightShadows)}function Xi(p,i){return p.replace(/NUM_CLIPPING_PLANES/g,i.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,i.numClippingPlanes-i.numClipIntersection)}const Lc=/^[ \t]*#include +<([\w\d./]+)>/gm;function vs(p){return p.replace(Lc,fc)}function fc(p,i){const o=un[i];if(void 0===o)throw new Error("Can not resolve #include <"+i+">");return vs(o)}const Qh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cy(p){return p.replace(Qh,Ws)}function Ws(p,i,o,u){let f="";for(let _=parseInt(i);_<parseInt(o);_++)f+=u.replace(/\[\s*i\s*\]/g,"[ "+_+" ]").replace(/UNROLLED_LOOP_INDEX/g,_);return f}function dw(p){let i="precision "+p.precision+" float;\nprecision "+p.precision+" int;";return"highp"===p.precision?i+="\n#define HIGH_PRECISION":"mediump"===p.precision?i+="\n#define MEDIUM_PRECISION":"lowp"===p.precision&&(i+="\n#define LOW_PRECISION"),i}function ul(p,i,o,u){const f=p.getContext(),_=o.defines;let x=o.vertexShader,M=o.fragmentShader;const E=function lx(p){let i="SHADOWMAP_TYPE_BASIC";return p.shadowMapType===He?i="SHADOWMAP_TYPE_PCF":p.shadowMapType===ze?i="SHADOWMAP_TYPE_PCF_SOFT":p.shadowMapType===ct&&(i="SHADOWMAP_TYPE_VSM"),i}(o),D=function ux(p){let i="ENVMAP_TYPE_CUBE";if(p.envMap)switch(p.envMapMode){case Ca:case Wu:i="ENVMAP_TYPE_CUBE";break;case Ud:i="ENVMAP_TYPE_CUBE_UV"}return i}(o),k=function K1(p){let i="ENVMAP_MODE_REFLECTION";return p.envMap&&p.envMapMode===Wu&&(i="ENVMAP_MODE_REFRACTION"),i}(o),O=function J1(p){let i="ENVMAP_BLENDING_NONE";if(p.envMap)switch(p.combine){case Eg:i="ENVMAP_BLENDING_MULTIPLY";break;case hb:i="ENVMAP_BLENDING_MIX";break;case cu:i="ENVMAP_BLENDING_ADD"}return i}(o),I=function dx(p){const i=p.envMapCubeUVHeight;if(null===i)return null;const o=Math.log2(i)-2,u=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,o),112)),texelHeight:u,maxMip:o}}(o),U=o.isWebGL2?"":function gp(p){return[p.extensionDerivatives||p.envMapCubeUVHeight||p.bumpMap||p.normalMapTangentSpace||p.clearcoatNormalMap||p.flatShading||"physical"===p.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(p.extensionFragDepth||p.logarithmicDepthBuffer)&&p.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",p.extensionDrawBuffers&&p.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(p.extensionShaderTextureLOD||p.envMap||p.transmission)&&p.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ar).join("\n")}(o),B=function ii(p){const i=[];for(const o in p){const u=p[o];!1!==u&&i.push("#define "+o+" "+u)}return i.join("\n")}(_),j=f.createProgram();let $,G,Q=o.glslVersion?"#version "+o.glslVersion+"\n":"";o.isRawShaderMaterial?($=[B].filter(Ar).join("\n"),$.length>0&&($+="\n"),G=[U,B].filter(Ar).join("\n"),G.length>0&&(G+="\n")):($=[dw(o),"#define SHADER_NAME "+o.shaderName,B,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+k:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.displacementMap?"#define USE_DISPLACEMENTMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.alphaMapUv?"#define ALPHAMAP_UV "+o.alphaMapUv:"",o.lightMapUv?"#define LIGHTMAP_UV "+o.lightMapUv:"",o.aoMapUv?"#define AOMAP_UV "+o.aoMapUv:"",o.emissiveMapUv?"#define EMISSIVEMAP_UV "+o.emissiveMapUv:"",o.bumpMapUv?"#define BUMPMAP_UV "+o.bumpMapUv:"",o.normalMapUv?"#define NORMALMAP_UV "+o.normalMapUv:"",o.displacementMapUv?"#define DISPLACEMENTMAP_UV "+o.displacementMapUv:"",o.metalnessMapUv?"#define METALNESSMAP_UV "+o.metalnessMapUv:"",o.roughnessMapUv?"#define ROUGHNESSMAP_UV "+o.roughnessMapUv:"",o.clearcoatMapUv?"#define CLEARCOATMAP_UV "+o.clearcoatMapUv:"",o.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+o.clearcoatNormalMapUv:"",o.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+o.clearcoatRoughnessMapUv:"",o.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+o.iridescenceMapUv:"",o.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+o.iridescenceThicknessMapUv:"",o.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+o.sheenColorMapUv:"",o.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+o.sheenRoughnessMapUv:"",o.specularMapUv?"#define SPECULARMAP_UV "+o.specularMapUv:"",o.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+o.specularColorMapUv:"",o.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+o.specularIntensityMapUv:"",o.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+o.transmissionMapUv:"",o.thicknessMapUv?"#define THICKNESSMAP_UV "+o.thicknessMapUv:"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs2?"#define USE_UV2":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+E:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ar).join("\n"),G=[U,dw(o),"#define SHADER_NAME "+o.shaderName,B,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+D:"",o.envMap?"#define "+k:"",o.envMap?"#define "+O:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs2?"#define USE_UV2":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+E:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==wc?"#define TONE_MAPPING":"",o.toneMapping!==wc?un.tonemapping_pars_fragment:"",o.toneMapping!==wc?Jh("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",un.encodings_pars_fragment,mp("linearToOutputTexel",o.outputEncoding),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"","\n"].filter(Ar).join("\n")),x=vs(x),x=Dr(x,o),x=Xi(x,o),M=vs(M),M=Dr(M,o),M=Xi(M,o),x=cy(x),M=cy(M),o.isWebGL2&&!0!==o.isRawShaderMaterial&&(Q="#version 300 es\n",$=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+$,G=["#define varying in",o.glslVersion===ss?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===ss?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+G);const Y=Q+G+M,ee=M0(f,35633,Q+$+x),he=M0(f,35632,Y);if(f.attachShader(j,ee),f.attachShader(j,he),void 0!==o.index0AttributeName?f.bindAttribLocation(j,0,o.index0AttributeName):!0===o.morphTargets&&f.bindAttribLocation(j,0,"position"),f.linkProgram(j),p.debug.checkShaderErrors){const ce=f.getProgramInfoLog(j).trim(),de=f.getShaderInfoLog(ee).trim(),Ye=f.getShaderInfoLog(he).trim();let Qe=!0,Ne=!0;if(!1===f.getProgramParameter(j,35714))if(Qe=!1,"function"==typeof p.debug.onShaderError)p.debug.onShaderError(f,j,ee,he);else{const $e=t_(f,ee,"vertex"),et=t_(f,he,"fragment");console.error("THREE.WebGLProgram: Shader Error "+f.getError()+" - VALIDATE_STATUS "+f.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+ce+"\n"+$e+"\n"+et)}else""!==ce?console.warn("THREE.WebGLProgram: Program Info Log:",ce):(""===de||""===Ye)&&(Ne=!1);Ne&&(this.diagnostics={runnable:Qe,programLog:ce,vertexShader:{log:de,prefix:$},fragmentShader:{log:Ye,prefix:G}})}let xe,fe;return f.deleteShader(ee),f.deleteShader(he),this.getUniforms=function(){return void 0===xe&&(xe=new Ha(f,j)),xe},this.getAttributes=function(){return void 0===fe&&(fe=function ui(p,i){const o={},u=p.getProgramParameter(i,35721);for(let f=0;f<u;f++){const _=p.getActiveAttrib(i,f),x=_.name;let M=1;35674===_.type&&(M=2),35675===_.type&&(M=3),35676===_.type&&(M=4),o[x]={type:_.type,location:p.getAttribLocation(i,x),locationSize:M}}return o}(f,j)),fe},this.destroy=function(){u.releaseStatesOfProgram(this),f.deleteProgram(j),this.program=void 0},this.name=o.shaderName,this.id=ay++,this.cacheKey=i,this.usedTimes=1,this.program=j,this.vertexShader=ee,this.fragmentShader=he,this}let dl=0;class hl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(i){const u=i.fragmentShader,f=this._getShaderStage(i.vertexShader),_=this._getShaderStage(u),x=this._getShaderCacheForMaterial(i);return!1===x.has(f)&&(x.add(f),f.usedTimes++),!1===x.has(_)&&(x.add(_),_.usedTimes++),this}remove(i){const o=this.materialCache.get(i);for(const u of o)u.usedTimes--,0===u.usedTimes&&this.shaderCache.delete(u.code);return this.materialCache.delete(i),this}getVertexShaderID(i){return this._getShaderStage(i.vertexShader).id}getFragmentShaderID(i){return this._getShaderStage(i.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(i){const o=this.materialCache;let u=o.get(i);return void 0===u&&(u=new Set,o.set(i,u)),u}_getShaderStage(i){const o=this.shaderCache;let u=o.get(i);return void 0===u&&(u=new _p(i),o.set(i,u)),u}}class _p{constructor(i){this.id=dl++,this.code=i,this.usedTimes=0}}function ef(p,i,o,u,f,_,x){const M=new qf,E=new hl,D=[],k=f.isWebGL2,O=f.logarithmicDepthBuffer,I=f.vertexTextures;let U=f.precision;const B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function j(ce){return 1===ce?"uv2":"uv"}return{getParameters:function $(ce,de,Ye,Qe,Ne){const $e=Qe.fog,et=Ne.geometry,Dt=(ce.isMeshStandardMaterial?o:i).get(ce.envMap||(ce.isMeshStandardMaterial?Qe.environment:null)),Ze=Dt&&Dt.mapping===Ud?Dt.image.height:null,at=B[ce.type];null!==ce.precision&&(U=f.getMaxPrecision(ce.precision),U!==ce.precision&&console.warn("THREE.WebGLProgram.getParameters:",ce.precision,"not supported, using",U,"instead."));const bt=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,tn=void 0!==bt?bt.length:0;let St,Ft,Et,an,Ve=0;if(void 0!==et.morphAttributes.position&&(Ve=1),void 0!==et.morphAttributes.normal&&(Ve=2),void 0!==et.morphAttributes.color&&(Ve=3),at){const Hn=Pc[at];St=Hn.vertexShader,Ft=Hn.fragmentShader}else St=ce.vertexShader,Ft=ce.fragmentShader,E.update(ce),Et=E.getVertexShaderID(ce),an=E.getFragmentShaderID(ce);const je=p.getRenderTarget(),Tt=!0===Ne.isInstancedMesh,Ut=!!ce.map,en=!!Dt,tt=!!ce.aoMap,wt=!!ce.lightMap,Bt=!!ce.bumpMap,En=!!ce.normalMap,cn=!!ce.displacementMap,Ae=!!ce.emissiveMap,ge=!!ce.metalnessMap,dt=!!ce.roughnessMap,Ot=ce.clearcoat>0,hn=ce.iridescence>0,we=ce.sheen>0,ve=ce.transmission>0,lt=Ot&&!!ce.clearcoatMap,nt=Ot&&!!ce.clearcoatNormalMap,zt=Ot&&!!ce.clearcoatRoughnessMap,sn=hn&&!!ce.iridescenceMap,Xe=hn&&!!ce.iridescenceThicknessMap,vt=we&&!!ce.sheenColorMap,pt=we&&!!ce.sheenRoughnessMap,yn=!!ce.specularMap,In=!!ce.specularColorMap,Wn=!!ce.specularIntensityMap,qe=ve&&!!ce.transmissionMap,_t=ve&&!!ce.thicknessMap,wn=!!ce.alphaMap,ot=!!ce.extensions,qt=!!et.attributes.uv2;return{isWebGL2:k,shaderID:at,shaderName:ce.type,vertexShader:St,fragmentShader:Ft,defines:ce.defines,customVertexShaderID:Et,customFragmentShaderID:an,isRawShaderMaterial:!0===ce.isRawShaderMaterial,glslVersion:ce.glslVersion,precision:U,instancing:Tt,instancingColor:Tt&&null!==Ne.instanceColor,supportsVertexTextures:I,outputEncoding:null===je?p.outputEncoding:!0===je.isXRRenderTarget?je.texture.encoding:Wi,map:Ut,matcap:!!ce.matcap,envMap:en,envMapMode:en&&Dt.mapping,envMapCubeUVHeight:Ze,aoMap:tt,lightMap:wt,bumpMap:Bt,normalMap:En,displacementMap:I&&cn,emissiveMap:Ae,normalMapObjectSpace:En&&ce.normalMapType===k1,normalMapTangentSpace:En&&ce.normalMapType===nc,decodeVideoTexture:Ut&&!0===ce.map.isVideoTexture&&ce.map.encoding===ws,metalnessMap:ge,roughnessMap:dt,clearcoat:Ot,clearcoatMap:lt,clearcoatNormalMap:nt,clearcoatRoughnessMap:zt,iridescence:hn,iridescenceMap:sn,iridescenceThicknessMap:Xe,sheen:we,sheenColorMap:vt,sheenRoughnessMap:pt,specularMap:yn,specularColorMap:In,specularIntensityMap:Wn,transmission:ve,transmissionMap:qe,thicknessMap:_t,gradientMap:!!ce.gradientMap,opaque:!1===ce.transparent&&ce.blending===$r,alphaMap:wn,alphaTest:ce.alphaTest>0,combine:ce.combine,mapUv:Ut&&j(ce.map.channel),aoMapUv:tt&&j(ce.aoMap.channel),lightMapUv:wt&&j(ce.lightMap.channel),bumpMapUv:Bt&&j(ce.bumpMap.channel),normalMapUv:En&&j(ce.normalMap.channel),displacementMapUv:cn&&j(ce.displacementMap.channel),emissiveMapUv:Ae&&j(ce.emissiveMap.channel),metalnessMapUv:ge&&j(ce.metalnessMap.channel),roughnessMapUv:dt&&j(ce.roughnessMap.channel),clearcoatMapUv:lt&&j(ce.clearcoatMap.channel),clearcoatNormalMapUv:nt&&j(ce.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:zt&&j(ce.clearcoatRoughnessMap.channel),iridescenceMapUv:sn&&j(ce.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&j(ce.iridescenceThicknessMap.channel),sheenColorMapUv:vt&&j(ce.sheenColorMap.channel),sheenRoughnessMapUv:pt&&j(ce.sheenRoughnessMap.channel),specularMapUv:yn&&j(ce.specularMap.channel),specularColorMapUv:In&&j(ce.specularColorMap.channel),specularIntensityMapUv:Wn&&j(ce.specularIntensityMap.channel),transmissionMapUv:qe&&j(ce.transmissionMap.channel),thicknessMapUv:_t&&j(ce.thicknessMap.channel),alphaMapUv:wn&&j(ce.alphaMap.channel),vertexTangents:En&&!!et.attributes.tangent,vertexColors:ce.vertexColors,vertexAlphas:!0===ce.vertexColors&&!!et.attributes.color&&4===et.attributes.color.itemSize,vertexUvs2:qt,pointsUvs:!0===Ne.isPoints&&!!et.attributes.uv&&(Ut||wn),fog:!!$e,useFog:!0===ce.fog,fogExp2:$e&&$e.isFogExp2,flatShading:!0===ce.flatShading,sizeAttenuation:!0===ce.sizeAttenuation,logarithmicDepthBuffer:O,skinning:!0===Ne.isSkinnedMesh,morphTargets:void 0!==et.morphAttributes.position,morphNormals:void 0!==et.morphAttributes.normal,morphColors:void 0!==et.morphAttributes.color,morphTargetsCount:tn,morphTextureStride:Ve,numDirLights:de.directional.length,numPointLights:de.point.length,numSpotLights:de.spot.length,numSpotLightMaps:de.spotLightMap.length,numRectAreaLights:de.rectArea.length,numHemiLights:de.hemi.length,numDirLightShadows:de.directionalShadowMap.length,numPointLightShadows:de.pointShadowMap.length,numSpotLightShadows:de.spotShadowMap.length,numSpotLightShadowsWithMaps:de.numSpotLightShadowsWithMaps,numClippingPlanes:x.numPlanes,numClipIntersection:x.numIntersection,dithering:ce.dithering,shadowMapEnabled:p.shadowMap.enabled&&Ye.length>0,shadowMapType:p.shadowMap.type,toneMapping:ce.toneMapped?p.toneMapping:wc,useLegacyLights:p.useLegacyLights,premultipliedAlpha:ce.premultipliedAlpha,doubleSided:ce.side===yt,flipSided:ce.side===At,useDepthPacking:ce.depthPacking>=0,depthPacking:ce.depthPacking||0,index0AttributeName:ce.index0AttributeName,extensionDerivatives:ot&&!0===ce.extensions.derivatives,extensionFragDepth:ot&&!0===ce.extensions.fragDepth,extensionDrawBuffers:ot&&!0===ce.extensions.drawBuffers,extensionShaderTextureLOD:ot&&!0===ce.extensions.shaderTextureLOD,rendererExtensionFragDepth:k||u.has("EXT_frag_depth"),rendererExtensionDrawBuffers:k||u.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:k||u.has("EXT_shader_texture_lod"),customProgramCacheKey:ce.customProgramCacheKey()}},getProgramCacheKey:function G(ce){const de=[];if(ce.shaderID?de.push(ce.shaderID):(de.push(ce.customVertexShaderID),de.push(ce.customFragmentShaderID)),void 0!==ce.defines)for(const Ye in ce.defines)de.push(Ye),de.push(ce.defines[Ye]);return!1===ce.isRawShaderMaterial&&(function Q(ce,de){ce.push(de.precision),ce.push(de.outputEncoding),ce.push(de.envMapMode),ce.push(de.envMapCubeUVHeight),ce.push(de.mapUv),ce.push(de.alphaMapUv),ce.push(de.lightMapUv),ce.push(de.aoMapUv),ce.push(de.bumpMapUv),ce.push(de.normalMapUv),ce.push(de.displacementMapUv),ce.push(de.emissiveMapUv),ce.push(de.metalnessMapUv),ce.push(de.roughnessMapUv),ce.push(de.clearcoatMapUv),ce.push(de.clearcoatNormalMapUv),ce.push(de.clearcoatRoughnessMapUv),ce.push(de.iridescenceMapUv),ce.push(de.iridescenceThicknessMapUv),ce.push(de.sheenColorMapUv),ce.push(de.sheenRoughnessMapUv),ce.push(de.specularMapUv),ce.push(de.specularColorMapUv),ce.push(de.specularIntensityMapUv),ce.push(de.transmissionMapUv),ce.push(de.thicknessMapUv),ce.push(de.combine),ce.push(de.fogExp2),ce.push(de.sizeAttenuation),ce.push(de.morphTargetsCount),ce.push(de.morphAttributeCount),ce.push(de.numDirLights),ce.push(de.numPointLights),ce.push(de.numSpotLights),ce.push(de.numSpotLightMaps),ce.push(de.numHemiLights),ce.push(de.numRectAreaLights),ce.push(de.numDirLightShadows),ce.push(de.numPointLightShadows),ce.push(de.numSpotLightShadows),ce.push(de.numSpotLightShadowsWithMaps),ce.push(de.shadowMapType),ce.push(de.toneMapping),ce.push(de.numClippingPlanes),ce.push(de.numClipIntersection),ce.push(de.depthPacking)}(de,ce),function J(ce,de){M.disableAll(),de.isWebGL2&&M.enable(0),de.supportsVertexTextures&&M.enable(1),de.instancing&&M.enable(2),de.instancingColor&&M.enable(3),de.matcap&&M.enable(4),de.envMap&&M.enable(5),de.normalMapObjectSpace&&M.enable(6),de.normalMapTangentSpace&&M.enable(7),de.clearcoat&&M.enable(8),de.iridescence&&M.enable(9),de.alphaTest&&M.enable(10),de.vertexColors&&M.enable(11),de.vertexAlphas&&M.enable(12),de.vertexUvs2&&M.enable(13),de.vertexTangents&&M.enable(14),ce.push(M.mask),M.disableAll(),de.fog&&M.enable(0),de.useFog&&M.enable(1),de.flatShading&&M.enable(2),de.logarithmicDepthBuffer&&M.enable(3),de.skinning&&M.enable(4),de.morphTargets&&M.enable(5),de.morphNormals&&M.enable(6),de.morphColors&&M.enable(7),de.premultipliedAlpha&&M.enable(8),de.shadowMapEnabled&&M.enable(9),de.useLegacyLights&&M.enable(10),de.doubleSided&&M.enable(11),de.flipSided&&M.enable(12),de.useDepthPacking&&M.enable(13),de.dithering&&M.enable(14),de.transmission&&M.enable(15),de.sheen&&M.enable(16),de.decodeVideoTexture&&M.enable(17),de.opaque&&M.enable(18),de.pointsUvs&&M.enable(19),ce.push(M.mask)}(de,ce),de.push(p.outputEncoding)),de.push(ce.customProgramCacheKey),de.join()},getUniforms:function Y(ce){const de=B[ce.type];let Ye;return Ye=de?Ug.clone(Pc[de].uniforms):ce.uniforms,Ye},acquireProgram:function ee(ce,de){let Ye;for(let Qe=0,Ne=D.length;Qe<Ne;Qe++){const $e=D[Qe];if($e.cacheKey===de){Ye=$e,++Ye.usedTimes;break}}return void 0===Ye&&(Ye=new ul(p,de,ce,_),D.push(Ye)),Ye},releaseProgram:function he(ce){if(0==--ce.usedTimes){const de=D.indexOf(ce);D[de]=D[D.length-1],D.pop(),ce.destroy()}},releaseShaderCache:function xe(ce){E.remove(ce)},programs:D,dispose:function fe(){E.dispose()}}}function Ga(){let p=new WeakMap;return{get:function i(_){let x=p.get(_);return void 0===x&&(x={},p.set(_,x)),x},remove:function o(_){p.delete(_)},update:function u(_,x,M){p.get(_)[x]=M},dispose:function f(){p=new WeakMap}}}function pc(p,i){return p.groupOrder!==i.groupOrder?p.groupOrder-i.groupOrder:p.renderOrder!==i.renderOrder?p.renderOrder-i.renderOrder:p.material.id!==i.material.id?p.material.id-i.material.id:p.z!==i.z?p.z-i.z:p.id-i.id}function xu(p,i){return p.groupOrder!==i.groupOrder?p.groupOrder-i.groupOrder:p.renderOrder!==i.renderOrder?p.renderOrder-i.renderOrder:p.z!==i.z?i.z-p.z:p.id-i.id}function Oc(){const p=[];let i=0;const o=[],u=[],f=[];function x(O,I,U,B,j,$){let G=p[i];return void 0===G?(G={id:O.id,object:O,geometry:I,material:U,groupOrder:B,renderOrder:O.renderOrder,z:j,group:$},p[i]=G):(G.id=O.id,G.object=O,G.geometry=I,G.material=U,G.groupOrder=B,G.renderOrder=O.renderOrder,G.z=j,G.group=$),i++,G}return{opaque:o,transmissive:u,transparent:f,init:function _(){i=0,o.length=0,u.length=0,f.length=0},push:function M(O,I,U,B,j,$){const G=x(O,I,U,B,j,$);U.transmission>0?u.push(G):!0===U.transparent?f.push(G):o.push(G)},unshift:function E(O,I,U,B,j,$){const G=x(O,I,U,B,j,$);U.transmission>0?u.unshift(G):!0===U.transparent?f.unshift(G):o.unshift(G)},finish:function k(){for(let O=i,I=p.length;O<I;O++){const U=p[O];if(null===U.id)break;U.id=null,U.object=null,U.geometry=null,U.material=null,U.group=null}},sort:function D(O,I){o.length>1&&o.sort(O||pc),u.length>1&&u.sort(I||xu),f.length>1&&f.sort(I||xu)}}}function yr(){let p=new WeakMap;return{get:function i(u,f){const _=p.get(u);let x;return void 0===_?(x=new Oc,p.set(u,[x])):f>=_.length?(x=new Oc,_.push(x)):x=_[f],x},dispose:function o(){p=new WeakMap}}}function ly(){const p={};return{get:function(i){if(void 0!==p[i.id])return p[i.id];let o;switch(i.type){case"DirectionalLight":o={direction:new Re,color:new Ln};break;case"SpotLight":o={position:new Re,direction:new Re,color:new Ln,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new Re,color:new Ln,distance:0,decay:0};break;case"HemisphereLight":o={direction:new Re,skyColor:new Ln,groundColor:new Ln};break;case"RectAreaLight":o={color:new Ln,position:new Re,halfWidth:new Re,halfHeight:new Re}}return p[i.id]=o,o}}}let S0=0;function E0(p,i){return(i.castShadow?2:0)-(p.castShadow?2:0)+(i.map?1:0)-(p.map?1:0)}function C0(p,i){const o=new ly,u=function uy(){const p={};return{get:function(i){if(void 0!==p[i.id])return p[i.id];let o;switch(i.type){case"DirectionalLight":case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wt,shadowCameraNear:1,shadowCameraFar:1e3}}return p[i.id]=o,o}}}(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let k=0;k<9;k++)f.probe.push(new Re);const _=new Re,x=new Hi,M=new Hi;return{setup:function E(k,O){let I=0,U=0,B=0;for(let Ye=0;Ye<9;Ye++)f.probe[Ye].set(0,0,0);let j=0,$=0,G=0,Q=0,J=0,Y=0,ee=0,he=0,xe=0,fe=0;k.sort(E0);const ce=!0===O?Math.PI:1;for(let Ye=0,Qe=k.length;Ye<Qe;Ye++){const Ne=k[Ye],$e=Ne.color,et=Ne.intensity,Pt=Ne.distance,Dt=Ne.shadow&&Ne.shadow.map?Ne.shadow.map.texture:null;if(Ne.isAmbientLight)I+=$e.r*et*ce,U+=$e.g*et*ce,B+=$e.b*et*ce;else if(Ne.isLightProbe)for(let Ze=0;Ze<9;Ze++)f.probe[Ze].addScaledVector(Ne.sh.coefficients[Ze],et);else if(Ne.isDirectionalLight){const Ze=o.get(Ne);if(Ze.color.copy(Ne.color).multiplyScalar(Ne.intensity*ce),Ne.castShadow){const at=Ne.shadow,bt=u.get(Ne);bt.shadowBias=at.bias,bt.shadowNormalBias=at.normalBias,bt.shadowRadius=at.radius,bt.shadowMapSize=at.mapSize,f.directionalShadow[j]=bt,f.directionalShadowMap[j]=Dt,f.directionalShadowMatrix[j]=Ne.shadow.matrix,Y++}f.directional[j]=Ze,j++}else if(Ne.isSpotLight){const Ze=o.get(Ne);Ze.position.setFromMatrixPosition(Ne.matrixWorld),Ze.color.copy($e).multiplyScalar(et*ce),Ze.distance=Pt,Ze.coneCos=Math.cos(Ne.angle),Ze.penumbraCos=Math.cos(Ne.angle*(1-Ne.penumbra)),Ze.decay=Ne.decay,f.spot[G]=Ze;const at=Ne.shadow;if(Ne.map&&(f.spotLightMap[xe]=Ne.map,xe++,at.updateMatrices(Ne),Ne.castShadow&&fe++),f.spotLightMatrix[G]=at.matrix,Ne.castShadow){const bt=u.get(Ne);bt.shadowBias=at.bias,bt.shadowNormalBias=at.normalBias,bt.shadowRadius=at.radius,bt.shadowMapSize=at.mapSize,f.spotShadow[G]=bt,f.spotShadowMap[G]=Dt,he++}G++}else if(Ne.isRectAreaLight){const Ze=o.get(Ne);Ze.color.copy($e).multiplyScalar(et),Ze.halfWidth.set(.5*Ne.width,0,0),Ze.halfHeight.set(0,.5*Ne.height,0),f.rectArea[Q]=Ze,Q++}else if(Ne.isPointLight){const Ze=o.get(Ne);if(Ze.color.copy(Ne.color).multiplyScalar(Ne.intensity*ce),Ze.distance=Ne.distance,Ze.decay=Ne.decay,Ne.castShadow){const at=Ne.shadow,bt=u.get(Ne);bt.shadowBias=at.bias,bt.shadowNormalBias=at.normalBias,bt.shadowRadius=at.radius,bt.shadowMapSize=at.mapSize,bt.shadowCameraNear=at.camera.near,bt.shadowCameraFar=at.camera.far,f.pointShadow[$]=bt,f.pointShadowMap[$]=Dt,f.pointShadowMatrix[$]=Ne.shadow.matrix,ee++}f.point[$]=Ze,$++}else if(Ne.isHemisphereLight){const Ze=o.get(Ne);Ze.skyColor.copy(Ne.color).multiplyScalar(et*ce),Ze.groundColor.copy(Ne.groundColor).multiplyScalar(et*ce),f.hemi[J]=Ze,J++}}Q>0&&(i.isWebGL2||!0===p.has("OES_texture_float_linear")?(f.rectAreaLTC1=On.LTC_FLOAT_1,f.rectAreaLTC2=On.LTC_FLOAT_2):!0===p.has("OES_texture_half_float_linear")?(f.rectAreaLTC1=On.LTC_HALF_1,f.rectAreaLTC2=On.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),f.ambient[0]=I,f.ambient[1]=U,f.ambient[2]=B;const de=f.hash;(de.directionalLength!==j||de.pointLength!==$||de.spotLength!==G||de.rectAreaLength!==Q||de.hemiLength!==J||de.numDirectionalShadows!==Y||de.numPointShadows!==ee||de.numSpotShadows!==he||de.numSpotMaps!==xe)&&(f.directional.length=j,f.spot.length=G,f.rectArea.length=Q,f.point.length=$,f.hemi.length=J,f.directionalShadow.length=Y,f.directionalShadowMap.length=Y,f.pointShadow.length=ee,f.pointShadowMap.length=ee,f.spotShadow.length=he,f.spotShadowMap.length=he,f.directionalShadowMatrix.length=Y,f.pointShadowMatrix.length=ee,f.spotLightMatrix.length=he+xe-fe,f.spotLightMap.length=xe,f.numSpotLightShadowsWithMaps=fe,de.directionalLength=j,de.pointLength=$,de.spotLength=G,de.rectAreaLength=Q,de.hemiLength=J,de.numDirectionalShadows=Y,de.numPointShadows=ee,de.numSpotShadows=he,de.numSpotMaps=xe,f.version=S0++)},setupView:function D(k,O){let I=0,U=0,B=0,j=0,$=0;const G=O.matrixWorldInverse;for(let Q=0,J=k.length;Q<J;Q++){const Y=k[Q];if(Y.isDirectionalLight){const ee=f.directional[I];ee.direction.setFromMatrixPosition(Y.matrixWorld),_.setFromMatrixPosition(Y.target.matrixWorld),ee.direction.sub(_),ee.direction.transformDirection(G),I++}else if(Y.isSpotLight){const ee=f.spot[B];ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(G),ee.direction.setFromMatrixPosition(Y.matrixWorld),_.setFromMatrixPosition(Y.target.matrixWorld),ee.direction.sub(_),ee.direction.transformDirection(G),B++}else if(Y.isRectAreaLight){const ee=f.rectArea[j];ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(G),M.identity(),x.copy(Y.matrixWorld),x.premultiply(G),M.extractRotation(x),ee.halfWidth.set(.5*Y.width,0,0),ee.halfHeight.set(0,.5*Y.height,0),ee.halfWidth.applyMatrix4(M),ee.halfHeight.applyMatrix4(M),j++}else if(Y.isPointLight){const ee=f.point[U];ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(G),U++}else if(Y.isHemisphereLight){const ee=f.hemi[$];ee.direction.setFromMatrixPosition(Y.matrixWorld),ee.direction.transformDirection(G),$++}}},state:f}}function T0(p,i){const o=new C0(p,i),u=[],f=[];return{init:function _(){u.length=0,f.length=0},state:{lightsArray:u,shadowsArray:f,lights:o},setupLights:function E(O){o.setup(u,O)},setupLightsView:function D(O){o.setupView(u,O)},pushLight:function x(O){u.push(O)},pushShadow:function M(O){f.push(O)}}}function n_(p,i){let o=new WeakMap;return{get:function u(_,x=0){const M=o.get(_);let E;return void 0===M?(E=new T0(p,i),o.set(_,[E])):x>=M.length?(E=new T0(p,i),M.push(E)):E=M[x],E},dispose:function f(){o=new WeakMap}}}class Vm extends jd{constructor(i){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(i)}copy(i){return super.copy(i),this.depthPacking=i.depthPacking,this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this}}class i_ extends jd{constructor(i){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(i)}copy(i){return super.copy(i),this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this}}const hx="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",A0="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function tf(p,i,o){let u=new K_;const f=new Wt,_=new Wt,x=new Vi,M=new Vm({depthPacking:zd}),E=new i_,D={},k=o.maxTextureSize,O={[Mt]:At,[At]:Mt,[yt]:yt},I=new _u({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wt},radius:{value:4}},vertexShader:hx,fragmentShader:A0}),U=I.clone();U.defines.HORIZONTAL_PASS=1;const B=new nr;B.setAttribute("position",new Hs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new ac(B,I),$=this;function G(Y,ee){const he=i.update(j);I.defines.VSM_SAMPLES!==Y.blurSamples&&(I.defines.VSM_SAMPLES=Y.blurSamples,U.defines.VSM_SAMPLES=Y.blurSamples,I.needsUpdate=!0,U.needsUpdate=!0),null===Y.mapPass&&(Y.mapPass=new Gn(f.x,f.y)),I.uniforms.shadow_pass.value=Y.map.texture,I.uniforms.resolution.value=Y.mapSize,I.uniforms.radius.value=Y.radius,p.setRenderTarget(Y.mapPass),p.clear(),p.renderBufferDirect(ee,null,he,I,j,null),U.uniforms.shadow_pass.value=Y.mapPass.texture,U.uniforms.resolution.value=Y.mapSize,U.uniforms.radius.value=Y.radius,p.setRenderTarget(Y.map),p.clear(),p.renderBufferDirect(ee,null,he,U,j,null)}function Q(Y,ee,he,xe){let fe=null;const ce=!0===he.isPointLight?Y.customDistanceMaterial:Y.customDepthMaterial;if(void 0!==ce)fe=ce;else if(fe=!0===he.isPointLight?E:M,p.localClippingEnabled&&!0===ee.clipShadows&&Array.isArray(ee.clippingPlanes)&&0!==ee.clippingPlanes.length||ee.displacementMap&&0!==ee.displacementScale||ee.alphaMap&&ee.alphaTest>0||ee.map&&ee.alphaTest>0){const de=fe.uuid,Ye=ee.uuid;let Qe=D[de];void 0===Qe&&(Qe={},D[de]=Qe);let Ne=Qe[Ye];void 0===Ne&&(Ne=fe.clone(),Qe[Ye]=Ne),fe=Ne}return fe.visible=ee.visible,fe.wireframe=ee.wireframe,fe.side=xe===ct?null!==ee.shadowSide?ee.shadowSide:ee.side:null!==ee.shadowSide?ee.shadowSide:O[ee.side],fe.alphaMap=ee.alphaMap,fe.alphaTest=ee.alphaTest,fe.map=ee.map,fe.clipShadows=ee.clipShadows,fe.clippingPlanes=ee.clippingPlanes,fe.clipIntersection=ee.clipIntersection,fe.displacementMap=ee.displacementMap,fe.displacementScale=ee.displacementScale,fe.displacementBias=ee.displacementBias,fe.wireframeLinewidth=ee.wireframeLinewidth,fe.linewidth=ee.linewidth,!0===he.isPointLight&&!0===fe.isMeshDistanceMaterial&&(p.properties.get(fe).light=he),fe}function J(Y,ee,he,xe,fe){if(!1===Y.visible)return;if(Y.layers.test(ee.layers)&&(Y.isMesh||Y.isLine||Y.isPoints)&&(Y.castShadow||Y.receiveShadow&&fe===ct)&&(!Y.frustumCulled||u.intersectsObject(Y))){Y.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,Y.matrixWorld);const Ye=i.update(Y),Qe=Y.material;if(Array.isArray(Qe)){const Ne=Ye.groups;for(let $e=0,et=Ne.length;$e<et;$e++){const Pt=Ne[$e],Dt=Qe[Pt.materialIndex];if(Dt&&Dt.visible){const Ze=Q(Y,Dt,xe,fe);p.renderBufferDirect(he,null,Ye,Ze,Y,Pt)}}}else if(Qe.visible){const Ne=Q(Y,Qe,xe,fe);p.renderBufferDirect(he,null,Ye,Ne,Y,null)}}const de=Y.children;for(let Ye=0,Qe=de.length;Ye<Qe;Ye++)J(de[Ye],ee,he,xe,fe)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=He,this.render=function(Y,ee,he){if(!1===$.enabled||!1===$.autoUpdate&&!1===$.needsUpdate||0===Y.length)return;const xe=p.getRenderTarget(),fe=p.getActiveCubeFace(),ce=p.getActiveMipmapLevel(),de=p.state;de.setBlending(Kn),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);for(let Ye=0,Qe=Y.length;Ye<Qe;Ye++){const Ne=Y[Ye],$e=Ne.shadow;if(void 0===$e){console.warn("THREE.WebGLShadowMap:",Ne,"has no shadow.");continue}if(!1===$e.autoUpdate&&!1===$e.needsUpdate)continue;f.copy($e.mapSize);const et=$e.getFrameExtents();f.multiply(et),_.copy($e.mapSize),(f.x>k||f.y>k)&&(f.x>k&&(_.x=Math.floor(k/et.x),f.x=_.x*et.x,$e.mapSize.x=_.x),f.y>k&&(_.y=Math.floor(k/et.y),f.y=_.y*et.y,$e.mapSize.y=_.y)),null===$e.map&&($e.map=new Gn(f.x,f.y,this.type!==ct?{minFilter:Xr,magFilter:Xr}:{}),$e.map.texture.name=Ne.name+".shadowMap",$e.camera.updateProjectionMatrix()),p.setRenderTarget($e.map),p.clear();const Pt=$e.getViewportCount();for(let Dt=0;Dt<Pt;Dt++){const Ze=$e.getViewport(Dt);x.set(_.x*Ze.x,_.y*Ze.y,_.x*Ze.z,_.y*Ze.w),de.viewport(x),$e.updateMatrices(Ne,Dt),u=$e.getFrustum(),J(ee,he,$e.camera,Ne,this.type)}!0!==$e.isPointLightShadow&&this.type===ct&&G($e,he),$e.needsUpdate=!1}$.needsUpdate=!1,p.setRenderTarget(xe,fe,ce)}}function md(p,i,o){const u=o.isWebGL2,M=new function f(){let ot=!1;const qt=new Vi;let vn=null;const Hn=new Vi(0,0,0,0);return{setMask:function(qn){vn!==qn&&!ot&&(p.colorMask(qn,qn,qn,qn),vn=qn)},setLocked:function(qn){ot=qn},setClear:function(qn,br,Nr,ko,Id){!0===Id&&(qn*=ko,br*=ko,Nr*=ko),qt.set(qn,br,Nr,ko),!1===Hn.equals(qt)&&(p.clearColor(qn,br,Nr,ko),Hn.copy(qt))},reset:function(){ot=!1,vn=null,Hn.set(-1,0,0,0)}}},E=new function _(){let ot=!1,qt=null,vn=null,Hn=null;return{setTest:function(qn){qn?je(2929):Tt(2929)},setMask:function(qn){qt!==qn&&!ot&&(p.depthMask(qn),qt=qn)},setFunc:function(qn){if(vn!==qn){switch(qn){case Nh:p.depthFunc(512);break;case qr:p.depthFunc(519);break;case mr:p.depthFunc(513);break;case lm:p.depthFunc(515);break;case ri:p.depthFunc(514);break;case O_:p.depthFunc(518);break;case Mv:p.depthFunc(516);break;case Uh:p.depthFunc(517);break;default:p.depthFunc(515)}vn=qn}},setLocked:function(qn){ot=qn},setClear:function(qn){Hn!==qn&&(p.clearDepth(qn),Hn=qn)},reset:function(){ot=!1,qt=null,vn=null,Hn=null}}},D=new function x(){let ot=!1,qt=null,vn=null,Hn=null,qn=null,br=null,Nr=null,ko=null,Id=null;return{setTest:function(ho){ot||(ho?je(2960):Tt(2960))},setMask:function(ho){qt!==ho&&!ot&&(p.stencilMask(ho),qt=ho)},setFunc:function(ho,$a,Sl){(vn!==ho||Hn!==$a||qn!==Sl)&&(p.stencilFunc(ho,$a,Sl),vn=ho,Hn=$a,qn=Sl)},setOp:function(ho,$a,Sl){(br!==ho||Nr!==$a||ko!==Sl)&&(p.stencilOp(ho,$a,Sl),br=ho,Nr=$a,ko=Sl)},setLocked:function(ho){ot=ho},setClear:function(ho){Id!==ho&&(p.clearStencil(ho),Id=ho)},reset:function(){ot=!1,qt=null,vn=null,Hn=null,qn=null,br=null,Nr=null,ko=null,Id=null}}},k=new WeakMap,O=new WeakMap;let I={},U={},B=new WeakMap,j=[],$=null,G=!1,Q=null,J=null,Y=null,ee=null,he=null,xe=null,fe=null,ce=!1,de=null,Ye=null,Qe=null,Ne=null,$e=null;const et=p.getParameter(35661);let Pt=!1,Dt=0;const Ze=p.getParameter(7938);-1!==Ze.indexOf("WebGL")?(Dt=parseFloat(/^WebGL (\d)/.exec(Ze)[1]),Pt=Dt>=1):-1!==Ze.indexOf("OpenGL ES")&&(Dt=parseFloat(/^OpenGL ES (\d)/.exec(Ze)[1]),Pt=Dt>=2);let at=null,bt={};const tn=p.getParameter(3088),Ve=p.getParameter(2978),St=(new Vi).fromArray(tn),Ft=(new Vi).fromArray(Ve);function Et(ot,qt,vn){const Hn=new Uint8Array(4),qn=p.createTexture();p.bindTexture(ot,qn),p.texParameteri(ot,10241,9728),p.texParameteri(ot,10240,9728);for(let br=0;br<vn;br++)p.texImage2D(qt+br,0,6408,1,1,0,6408,5121,Hn);return qn}const an={};function je(ot){!0!==I[ot]&&(p.enable(ot),I[ot]=!0)}function Tt(ot){!1!==I[ot]&&(p.disable(ot),I[ot]=!1)}an[3553]=Et(3553,3553,1),an[34067]=Et(34067,34069,6),M.setClear(0,0,0,1),E.setClear(1),D.setClear(0),je(2929),E.setFunc(lm),cn(!1),Ae(Zt),je(2884),Bt(Kn);const tt={[Bs]:32774,[ou]:32778,[cm]:32779};if(u)tt[au]=32775,tt[Gu]=32776;else{const ot=i.get("EXT_blend_minmax");null!==ot&&(tt[au]=ot.MIN_EXT,tt[Gu]=ot.MAX_EXT)}const wt={[Lh]:0,[Mo]:1,[wo]:768,[pr]:770,[L_]:776,[xv]:774,[Fh]:772,[P_]:769,[Oh]:771,[Ci]:775,[k_]:773};function Bt(ot,qt,vn,Hn,qn,br,Nr,ko){if(ot!==Kn){if(!1===G&&(je(3042),G=!0),ot===Jc)qn=qn||qt,br=br||vn,Nr=Nr||Hn,(qt!==J||qn!==he)&&(p.blendEquationSeparate(tt[qt],tt[qn]),J=qt,he=qn),(vn!==Y||Hn!==ee||br!==xe||Nr!==fe)&&(p.blendFuncSeparate(wt[vn],wt[Hn],wt[br],wt[Nr]),Y=vn,ee=Hn,xe=br,fe=Nr),Q=ot,ce=!1;else if(ot!==Q||ko!==ce){if((J!==Bs||he!==Bs)&&(p.blendEquation(32774),J=Bs,he=Bs),ko)switch(ot){case $r:p.blendFuncSeparate(1,771,1,771);break;case po:p.blendFunc(1,1);break;case xo:p.blendFuncSeparate(0,769,0,1);break;case Mc:p.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ot)}else switch(ot){case $r:p.blendFuncSeparate(770,771,1,771);break;case po:p.blendFunc(770,1);break;case xo:p.blendFuncSeparate(0,769,0,1);break;case Mc:p.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ot)}Y=null,ee=null,xe=null,fe=null,Q=ot,ce=ko}}else!0===G&&(Tt(3042),G=!1)}function cn(ot){de!==ot&&(p.frontFace(ot?2304:2305),de=ot)}function Ae(ot){ot!==Je?(je(2884),ot!==Ye&&p.cullFace(ot===Zt?1029:ot===Ue?1028:1032)):Tt(2884),Ye=ot}function dt(ot,qt,vn){ot?(je(32823),(Ne!==qt||$e!==vn)&&(p.polygonOffset(qt,vn),Ne=qt,$e=vn)):Tt(32823)}return{buffers:{color:M,depth:E,stencil:D},enable:je,disable:Tt,bindFramebuffer:function Ut(ot,qt){return U[ot]!==qt&&(p.bindFramebuffer(ot,qt),U[ot]=qt,u&&(36009===ot&&(U[36160]=qt),36160===ot&&(U[36009]=qt)),!0)},drawBuffers:function Nt(ot,qt){let vn=j,Hn=!1;if(ot)if(vn=B.get(qt),void 0===vn&&(vn=[],B.set(qt,vn)),ot.isWebGLMultipleRenderTargets){const qn=ot.texture;if(vn.length!==qn.length||36064!==vn[0]){for(let br=0,Nr=qn.length;br<Nr;br++)vn[br]=36064+br;vn.length=qn.length,Hn=!0}}else 36064!==vn[0]&&(vn[0]=36064,Hn=!0);else 1029!==vn[0]&&(vn[0]=1029,Hn=!0);Hn&&(o.isWebGL2?p.drawBuffers(vn):i.get("WEBGL_draw_buffers").drawBuffersWEBGL(vn))},useProgram:function en(ot){return $!==ot&&(p.useProgram(ot),$=ot,!0)},setBlending:Bt,setMaterial:function En(ot,qt){ot.side===yt?Tt(2884):je(2884);let vn=ot.side===At;qt&&(vn=!vn),cn(vn),ot.blending===$r&&!1===ot.transparent?Bt(Kn):Bt(ot.blending,ot.blendEquation,ot.blendSrc,ot.blendDst,ot.blendEquationAlpha,ot.blendSrcAlpha,ot.blendDstAlpha,ot.premultipliedAlpha),E.setFunc(ot.depthFunc),E.setTest(ot.depthTest),E.setMask(ot.depthWrite),M.setMask(ot.colorWrite);const Hn=ot.stencilWrite;D.setTest(Hn),Hn&&(D.setMask(ot.stencilWriteMask),D.setFunc(ot.stencilFunc,ot.stencilRef,ot.stencilFuncMask),D.setOp(ot.stencilFail,ot.stencilZFail,ot.stencilZPass)),dt(ot.polygonOffset,ot.polygonOffsetFactor,ot.polygonOffsetUnits),!0===ot.alphaToCoverage?je(32926):Tt(32926)},setFlipSided:cn,setCullFace:Ae,setLineWidth:function ge(ot){ot!==Qe&&(Pt&&p.lineWidth(ot),Qe=ot)},setPolygonOffset:dt,setScissorTest:function Ot(ot){ot?je(3089):Tt(3089)},activeTexture:function hn(ot){void 0===ot&&(ot=33984+et-1),at!==ot&&(p.activeTexture(ot),at=ot)},bindTexture:function we(ot,qt,vn){void 0===vn&&(vn=null===at?33984+et-1:at);let Hn=bt[vn];void 0===Hn&&(Hn={type:void 0,texture:void 0},bt[vn]=Hn),(Hn.type!==ot||Hn.texture!==qt)&&(at!==vn&&(p.activeTexture(vn),at=vn),p.bindTexture(ot,qt||an[ot]),Hn.type=ot,Hn.texture=qt)},unbindTexture:function ve(){const ot=bt[at];void 0!==ot&&void 0!==ot.type&&(p.bindTexture(ot.type,null),ot.type=void 0,ot.texture=void 0)},compressedTexImage2D:function lt(){try{p.compressedTexImage2D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},compressedTexImage3D:function nt(){try{p.compressedTexImage3D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texImage2D:function In(){try{p.texImage2D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texImage3D:function Wn(){try{p.texImage3D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},updateUBOMapping:function Yt(ot,qt){let vn=O.get(qt);void 0===vn&&(vn=new WeakMap,O.set(qt,vn));let Hn=vn.get(ot);void 0===Hn&&(Hn=p.getUniformBlockIndex(qt,ot.name),vn.set(ot,Hn))},uniformBlockBinding:function wn(ot,qt){const Hn=O.get(qt).get(ot);k.get(qt)!==Hn&&(p.uniformBlockBinding(qt,Hn,ot.__bindingPointIndex),k.set(qt,Hn))},texStorage2D:function pt(){try{p.texStorage2D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texStorage3D:function yn(){try{p.texStorage3D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texSubImage2D:function zt(){try{p.texSubImage2D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},texSubImage3D:function sn(){try{p.texSubImage3D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},compressedTexSubImage2D:function Xe(){try{p.compressedTexSubImage2D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},compressedTexSubImage3D:function vt(){try{p.compressedTexSubImage3D.apply(p,arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}},scissor:function qe(ot){!1===St.equals(ot)&&(p.scissor(ot.x,ot.y,ot.z,ot.w),St.copy(ot))},viewport:function _t(ot){!1===Ft.equals(ot)&&(p.viewport(ot.x,ot.y,ot.z,ot.w),Ft.copy(ot))},reset:function jn(){p.disable(3042),p.disable(2884),p.disable(2929),p.disable(32823),p.disable(3089),p.disable(2960),p.disable(32926),p.blendEquation(32774),p.blendFunc(1,0),p.blendFuncSeparate(1,0,1,0),p.colorMask(!0,!0,!0,!0),p.clearColor(0,0,0,0),p.depthMask(!0),p.depthFunc(513),p.clearDepth(1),p.stencilMask(4294967295),p.stencilFunc(519,0,4294967295),p.stencilOp(7680,7680,7680),p.clearStencil(0),p.cullFace(1029),p.frontFace(2305),p.polygonOffset(0,0),p.activeTexture(33984),p.bindFramebuffer(36160,null),!0===u&&(p.bindFramebuffer(36009,null),p.bindFramebuffer(36008,null)),p.useProgram(null),p.lineWidth(1),p.scissor(0,0,p.canvas.width,p.canvas.height),p.viewport(0,0,p.canvas.width,p.canvas.height),I={},at=null,bt={},U={},B=new WeakMap,j=[],$=null,G=!1,Q=null,J=null,Y=null,ee=null,he=null,xe=null,fe=null,ce=!1,de=null,Ye=null,Qe=null,Ne=null,$e=null,St.set(0,0,p.canvas.width,p.canvas.height),Ft.set(0,0,p.canvas.width,p.canvas.height),M.reset(),E.reset(),D.reset()}}}function zm(p,i,o,u,f,_,x){const M=f.isWebGL2,E=f.maxTextures,D=f.maxCubemapSize,k=f.maxTextureSize,O=f.maxSamples,I=i.has("WEBGL_multisampled_render_to_texture")?i.get("WEBGL_multisampled_render_to_texture"):null,U=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),B=new WeakMap;let j;const $=new WeakMap;let G=!1;try{G=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Q(we,ve){return G?new OffscreenCanvas(we,ve):Ju("canvas")}function J(we,ve,lt,nt){let zt=1;if((we.width>nt||we.height>nt)&&(zt=nt/Math.max(we.width,we.height)),zt<1||!0===ve){if(typeof HTMLImageElement<"u"&&we instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&we instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&we instanceof ImageBitmap){const sn=ve?tl:Math.floor,Xe=sn(zt*we.width),vt=sn(zt*we.height);void 0===j&&(j=Q(Xe,vt));const pt=lt?Q(Xe,vt):j;return pt.width=Xe,pt.height=vt,pt.getContext("2d").drawImage(we,0,0,Xe,vt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+Xe+"x"+vt+")."),pt}return"data"in we&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),we}return we}function Y(we){return Tc(we.width)&&Tc(we.height)}function he(we,ve){return we.generateMipmaps&&ve&&we.minFilter!==Xr&&we.minFilter!==bs}function xe(we){p.generateMipmap(we)}function fe(we,ve,lt,nt,zt=!1){if(!1===M)return ve;if(null!==we){if(void 0!==p[we])return p[we];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+we+"'")}let sn=ve;return 6403===ve&&(5126===lt&&(sn=33326),5131===lt&&(sn=33325),5121===lt&&(sn=33321)),33319===ve&&(5126===lt&&(sn=33328),5131===lt&&(sn=33327),5121===lt&&(sn=33323)),6408===ve&&(5126===lt&&(sn=34836),5131===lt&&(sn=34842),5121===lt&&(sn=nt===ws&&!1===zt?35907:32856),32819===lt&&(sn=32854),32820===lt&&(sn=32855)),(33325===sn||33326===sn||33327===sn||33328===sn||34842===sn||34836===sn)&&i.get("EXT_color_buffer_float"),sn}function ce(we,ve,lt){return!0===he(we,lt)||we.isFramebufferTexture&&we.minFilter!==Xr&&we.minFilter!==bs?Math.log2(Math.max(ve.width,ve.height))+1:void 0!==we.mipmaps&&we.mipmaps.length>0?we.mipmaps.length:we.isCompressedTexture&&Array.isArray(we.image)?ve.mipmaps.length:1}function de(we){return we===Xr||we===um||we===dm?9728:9729}function Ye(we){const ve=we.target;ve.removeEventListener("dispose",Ye),function Ne(we){const ve=u.get(we);if(void 0===ve.__webglInit)return;const lt=we.source,nt=$.get(lt);if(nt){const zt=nt[ve.__cacheKey];zt.usedTimes--,0===zt.usedTimes&&$e(we),0===Object.keys(nt).length&&$.delete(lt)}u.remove(we)}(ve),ve.isVideoTexture&&B.delete(ve)}function Qe(we){const ve=we.target;ve.removeEventListener("dispose",Qe),function et(we){const ve=we.texture,lt=u.get(we),nt=u.get(ve);if(void 0!==nt.__webglTexture&&(p.deleteTexture(nt.__webglTexture),x.memory.textures--),we.depthTexture&&we.depthTexture.dispose(),we.isWebGLCubeRenderTarget)for(let zt=0;zt<6;zt++)p.deleteFramebuffer(lt.__webglFramebuffer[zt]),lt.__webglDepthbuffer&&p.deleteRenderbuffer(lt.__webglDepthbuffer[zt]);else{if(p.deleteFramebuffer(lt.__webglFramebuffer),lt.__webglDepthbuffer&&p.deleteRenderbuffer(lt.__webglDepthbuffer),lt.__webglMultisampledFramebuffer&&p.deleteFramebuffer(lt.__webglMultisampledFramebuffer),lt.__webglColorRenderbuffer)for(let zt=0;zt<lt.__webglColorRenderbuffer.length;zt++)lt.__webglColorRenderbuffer[zt]&&p.deleteRenderbuffer(lt.__webglColorRenderbuffer[zt]);lt.__webglDepthRenderbuffer&&p.deleteRenderbuffer(lt.__webglDepthRenderbuffer)}if(we.isWebGLMultipleRenderTargets)for(let zt=0,sn=ve.length;zt<sn;zt++){const Xe=u.get(ve[zt]);Xe.__webglTexture&&(p.deleteTexture(Xe.__webglTexture),x.memory.textures--),u.remove(ve[zt])}u.remove(ve),u.remove(we)}(ve)}function $e(we){const ve=u.get(we);p.deleteTexture(ve.__webglTexture),delete $.get(we.source)[ve.__cacheKey],x.memory.textures--}let Pt=0;function bt(we,ve){const lt=u.get(we);if(we.isVideoTexture&&function Ot(we){const ve=x.render.frame;B.get(we)!==ve&&(B.set(we,ve),we.update())}(we),!1===we.isRenderTargetTexture&&we.version>0&&lt.__version!==we.version){const nt=we.image;if(null===nt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==nt.complete)return void Tt(lt,we,ve);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}o.bindTexture(3553,lt.__webglTexture,33984+ve)}const Ft={[Oo]:10497,[io]:33071,[gr]:33648},Et={[Xr]:9728,[um]:9984,[dm]:9986,[bs]:9729,[F_]:9985,[Bd]:9987};function an(we,ve,lt){if(lt?(p.texParameteri(we,10242,Ft[ve.wrapS]),p.texParameteri(we,10243,Ft[ve.wrapT]),(32879===we||35866===we)&&p.texParameteri(we,32882,Ft[ve.wrapR]),p.texParameteri(we,10240,Et[ve.magFilter]),p.texParameteri(we,10241,Et[ve.minFilter])):(p.texParameteri(we,10242,33071),p.texParameteri(we,10243,33071),(32879===we||35866===we)&&p.texParameteri(we,32882,33071),(ve.wrapS!==io||ve.wrapT!==io)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),p.texParameteri(we,10240,de(ve.magFilter)),p.texParameteri(we,10241,de(ve.minFilter)),ve.minFilter!==Xr&&ve.minFilter!==bs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===i.has("EXT_texture_filter_anisotropic")){const nt=i.get("EXT_texture_filter_anisotropic");if(ve.magFilter===Xr||ve.minFilter!==dm&&ve.minFilter!==Bd||ve.type===Sc&&!1===i.has("OES_texture_float_linear")||!1===M&&ve.type===Uf&&!1===i.has("OES_texture_half_float_linear"))return;(ve.anisotropy>1||u.get(ve).__currentAnisotropy)&&(p.texParameterf(we,nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ve.anisotropy,f.getMaxAnisotropy())),u.get(ve).__currentAnisotropy=ve.anisotropy)}}function je(we,ve){let lt=!1;void 0===we.__webglInit&&(we.__webglInit=!0,ve.addEventListener("dispose",Ye));const nt=ve.source;let zt=$.get(nt);void 0===zt&&(zt={},$.set(nt,zt));const sn=function at(we){const ve=[];return ve.push(we.wrapS),ve.push(we.wrapT),ve.push(we.wrapR||0),ve.push(we.magFilter),ve.push(we.minFilter),ve.push(we.anisotropy),ve.push(we.internalFormat),ve.push(we.format),ve.push(we.type),ve.push(we.generateMipmaps),ve.push(we.premultiplyAlpha),ve.push(we.flipY),ve.push(we.unpackAlignment),ve.push(we.encoding),ve.join()}(ve);if(sn!==we.__cacheKey){void 0===zt[sn]&&(zt[sn]={texture:p.createTexture(),usedTimes:0},x.memory.textures++,lt=!0),zt[sn].usedTimes++;const Xe=zt[we.__cacheKey];void 0!==Xe&&(zt[we.__cacheKey].usedTimes--,0===Xe.usedTimes&&$e(ve)),we.__cacheKey=sn,we.__webglTexture=zt[sn].texture}return lt}function Tt(we,ve,lt){let nt=3553;(ve.isDataArrayTexture||ve.isCompressedArrayTexture)&&(nt=35866),ve.isData3DTexture&&(nt=32879);const zt=je(we,ve),sn=ve.source;o.bindTexture(nt,we.__webglTexture,33984+lt);const Xe=u.get(sn);if(sn.version!==Xe.__version||!0===zt){o.activeTexture(33984+lt),p.pixelStorei(37440,ve.flipY),p.pixelStorei(37441,ve.premultiplyAlpha),p.pixelStorei(3317,ve.unpackAlignment),p.pixelStorei(37443,0);const vt=function ee(we){return!M&&(we.wrapS!==io||we.wrapT!==io||we.minFilter!==Xr&&we.minFilter!==bs)}(ve)&&!1===Y(ve.image);let pt=J(ve.image,vt,!1,k);pt=hn(ve,pt);const yn=Y(pt)||M,In=_.convert(ve.format,ve.encoding);let _t,Wn=_.convert(ve.type),qe=fe(ve.internalFormat,In,Wn,ve.encoding,ve.isVideoTexture);an(nt,ve,yn);const Yt=ve.mipmaps,wn=M&&!0!==ve.isVideoTexture,jn=void 0===Xe.__version||!0===zt,ot=ce(ve,pt,yn);if(ve.isDepthTexture)qe=6402,M?qe=ve.type===Sc?36012:ve.type===Ta?33190:ve.type===Bh?35056:33189:ve.type===Sc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ve.format===So&&6402===qe&&ve.type!==Cv&&ve.type!==Ta&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ve.type=Ta,Wn=_.convert(ve.type)),ve.format===Vf&&6402===qe&&(qe=34041,ve.type!==Bh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ve.type=Bh,Wn=_.convert(ve.type))),jn&&(wn?o.texStorage2D(3553,1,qe,pt.width,pt.height):o.texImage2D(3553,0,qe,pt.width,pt.height,0,In,Wn,null));else if(ve.isDataTexture)if(Yt.length>0&&yn){wn&&jn&&o.texStorage2D(3553,ot,qe,Yt[0].width,Yt[0].height);for(let qt=0,vn=Yt.length;qt<vn;qt++)_t=Yt[qt],wn?o.texSubImage2D(3553,qt,0,0,_t.width,_t.height,In,Wn,_t.data):o.texImage2D(3553,qt,qe,_t.width,_t.height,0,In,Wn,_t.data);ve.generateMipmaps=!1}else wn?(jn&&o.texStorage2D(3553,ot,qe,pt.width,pt.height),o.texSubImage2D(3553,0,0,0,pt.width,pt.height,In,Wn,pt.data)):o.texImage2D(3553,0,qe,pt.width,pt.height,0,In,Wn,pt.data);else if(ve.isCompressedTexture)if(ve.isCompressedArrayTexture){wn&&jn&&o.texStorage3D(35866,ot,qe,Yt[0].width,Yt[0].height,pt.depth);for(let qt=0,vn=Yt.length;qt<vn;qt++)_t=Yt[qt],ve.format!==Ec?null!==In?wn?o.compressedTexSubImage3D(35866,qt,0,0,0,_t.width,_t.height,pt.depth,In,_t.data,0,0):o.compressedTexImage3D(35866,qt,qe,_t.width,_t.height,pt.depth,0,_t.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wn?o.texSubImage3D(35866,qt,0,0,0,_t.width,_t.height,pt.depth,In,Wn,_t.data):o.texImage3D(35866,qt,qe,_t.width,_t.height,pt.depth,0,In,Wn,_t.data)}else{wn&&jn&&o.texStorage2D(3553,ot,qe,Yt[0].width,Yt[0].height);for(let qt=0,vn=Yt.length;qt<vn;qt++)_t=Yt[qt],ve.format!==Ec?null!==In?wn?o.compressedTexSubImage2D(3553,qt,0,0,_t.width,_t.height,In,_t.data):o.compressedTexImage2D(3553,qt,qe,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wn?o.texSubImage2D(3553,qt,0,0,_t.width,_t.height,In,Wn,_t.data):o.texImage2D(3553,qt,qe,_t.width,_t.height,0,In,Wn,_t.data)}else if(ve.isDataArrayTexture)wn?(jn&&o.texStorage3D(35866,ot,qe,pt.width,pt.height,pt.depth),o.texSubImage3D(35866,0,0,0,0,pt.width,pt.height,pt.depth,In,Wn,pt.data)):o.texImage3D(35866,0,qe,pt.width,pt.height,pt.depth,0,In,Wn,pt.data);else if(ve.isData3DTexture)wn?(jn&&o.texStorage3D(32879,ot,qe,pt.width,pt.height,pt.depth),o.texSubImage3D(32879,0,0,0,0,pt.width,pt.height,pt.depth,In,Wn,pt.data)):o.texImage3D(32879,0,qe,pt.width,pt.height,pt.depth,0,In,Wn,pt.data);else if(ve.isFramebufferTexture){if(jn)if(wn)o.texStorage2D(3553,ot,qe,pt.width,pt.height);else{let qt=pt.width,vn=pt.height;for(let Hn=0;Hn<ot;Hn++)o.texImage2D(3553,Hn,qe,qt,vn,0,In,Wn,null),qt>>=1,vn>>=1}}else if(Yt.length>0&&yn){wn&&jn&&o.texStorage2D(3553,ot,qe,Yt[0].width,Yt[0].height);for(let qt=0,vn=Yt.length;qt<vn;qt++)_t=Yt[qt],wn?o.texSubImage2D(3553,qt,0,0,In,Wn,_t):o.texImage2D(3553,qt,qe,In,Wn,_t);ve.generateMipmaps=!1}else wn?(jn&&o.texStorage2D(3553,ot,qe,pt.width,pt.height),o.texSubImage2D(3553,0,0,0,In,Wn,pt)):o.texImage2D(3553,0,qe,In,Wn,pt);he(ve,yn)&&xe(nt),Xe.__version=sn.version,ve.onUpdate&&ve.onUpdate(ve)}we.__version=ve.version}function Nt(we,ve,lt,nt,zt){const sn=_.convert(lt.format,lt.encoding),Xe=_.convert(lt.type),vt=fe(lt.internalFormat,sn,Xe,lt.encoding);u.get(ve).__hasExternalTextures||(32879===zt||35866===zt?o.texImage3D(zt,0,vt,ve.width,ve.height,ve.depth,0,sn,Xe,null):o.texImage2D(zt,0,vt,ve.width,ve.height,0,sn,Xe,null)),o.bindFramebuffer(36160,we),dt(ve)?I.framebufferTexture2DMultisampleEXT(36160,nt,zt,u.get(lt).__webglTexture,0,ge(ve)):(3553===zt||zt>=34069&&zt<=34074)&&p.framebufferTexture2D(36160,nt,zt,u.get(lt).__webglTexture,0),o.bindFramebuffer(36160,null)}function en(we,ve,lt){if(p.bindRenderbuffer(36161,we),ve.depthBuffer&&!ve.stencilBuffer){let nt=33189;if(lt||dt(ve)){const zt=ve.depthTexture;zt&&zt.isDepthTexture&&(zt.type===Sc?nt=36012:zt.type===Ta&&(nt=33190));const sn=ge(ve);dt(ve)?I.renderbufferStorageMultisampleEXT(36161,sn,nt,ve.width,ve.height):p.renderbufferStorageMultisample(36161,sn,nt,ve.width,ve.height)}else p.renderbufferStorage(36161,nt,ve.width,ve.height);p.framebufferRenderbuffer(36160,36096,36161,we)}else if(ve.depthBuffer&&ve.stencilBuffer){const nt=ge(ve);lt&&!1===dt(ve)?p.renderbufferStorageMultisample(36161,nt,35056,ve.width,ve.height):dt(ve)?I.renderbufferStorageMultisampleEXT(36161,nt,35056,ve.width,ve.height):p.renderbufferStorage(36161,34041,ve.width,ve.height),p.framebufferRenderbuffer(36160,33306,36161,we)}else{const nt=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let zt=0;zt<nt.length;zt++){const sn=nt[zt],Xe=_.convert(sn.format,sn.encoding),vt=_.convert(sn.type),pt=fe(sn.internalFormat,Xe,vt,sn.encoding),yn=ge(ve);lt&&!1===dt(ve)?p.renderbufferStorageMultisample(36161,yn,pt,ve.width,ve.height):dt(ve)?I.renderbufferStorageMultisampleEXT(36161,yn,pt,ve.width,ve.height):p.renderbufferStorage(36161,pt,ve.width,ve.height)}}p.bindRenderbuffer(36161,null)}function wt(we){const ve=u.get(we),lt=!0===we.isWebGLCubeRenderTarget;if(we.depthTexture&&!ve.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");!function tt(we,ve){if(ve&&ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,we),!ve.depthTexture||!ve.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!u.get(ve.depthTexture).__webglTexture||ve.depthTexture.image.width!==ve.width||ve.depthTexture.image.height!==ve.height)&&(ve.depthTexture.image.width=ve.width,ve.depthTexture.image.height=ve.height,ve.depthTexture.needsUpdate=!0),bt(ve.depthTexture,0);const nt=u.get(ve.depthTexture).__webglTexture,zt=ge(ve);if(ve.depthTexture.format===So)dt(ve)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,nt,0,zt):p.framebufferTexture2D(36160,36096,3553,nt,0);else{if(ve.depthTexture.format!==Vf)throw new Error("Unknown depthTexture format");dt(ve)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,nt,0,zt):p.framebufferTexture2D(36160,33306,3553,nt,0)}}(ve.__webglFramebuffer,we)}else if(lt){ve.__webglDepthbuffer=[];for(let nt=0;nt<6;nt++)o.bindFramebuffer(36160,ve.__webglFramebuffer[nt]),ve.__webglDepthbuffer[nt]=p.createRenderbuffer(),en(ve.__webglDepthbuffer[nt],we,!1)}else o.bindFramebuffer(36160,ve.__webglFramebuffer),ve.__webglDepthbuffer=p.createRenderbuffer(),en(ve.__webglDepthbuffer,we,!1);o.bindFramebuffer(36160,null)}function ge(we){return Math.min(O,we.samples)}function dt(we){const ve=u.get(we);return M&&we.samples>0&&!0===i.has("WEBGL_multisampled_render_to_texture")&&!1!==ve.__useRenderToTexture}function hn(we,ve){const lt=we.encoding,nt=we.format,zt=we.type;return!0===we.isCompressedTexture||!0===we.isVideoTexture||we.format===Zu||lt!==Wi&&(lt===ws?!1===M?!0===i.has("EXT_sRGB")&&nt===Ec?(we.format=Zu,we.minFilter=bs,we.generateMipmaps=!1):ve=nl.sRGBToLinear(ve):(nt!==Ec||zt!==Al)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",lt)),ve}this.allocateTextureUnit=function Ze(){const we=Pt;return we>=E&&console.warn("THREE.WebGLTextures: Trying to use "+we+" texture units while this GPU supports only "+E),Pt+=1,we},this.resetTextureUnits=function Dt(){Pt=0},this.setTexture2D=bt,this.setTexture2DArray=function tn(we,ve){const lt=u.get(we);we.version>0&&lt.__version!==we.version?Tt(lt,we,ve):o.bindTexture(35866,lt.__webglTexture,33984+ve)},this.setTexture3D=function Ve(we,ve){const lt=u.get(we);we.version>0&&lt.__version!==we.version?Tt(lt,we,ve):o.bindTexture(32879,lt.__webglTexture,33984+ve)},this.setTextureCube=function St(we,ve){const lt=u.get(we);we.version>0&&lt.__version!==we.version?function Ut(we,ve,lt){if(6!==ve.image.length)return;const nt=je(we,ve),zt=ve.source;o.bindTexture(34067,we.__webglTexture,33984+lt);const sn=u.get(zt);if(zt.version!==sn.__version||!0===nt){o.activeTexture(33984+lt),p.pixelStorei(37440,ve.flipY),p.pixelStorei(37441,ve.premultiplyAlpha),p.pixelStorei(3317,ve.unpackAlignment),p.pixelStorei(37443,0);const Xe=ve.isCompressedTexture||ve.image[0].isCompressedTexture,vt=ve.image[0]&&ve.image[0].isDataTexture,pt=[];for(let qt=0;qt<6;qt++)pt[qt]=Xe||vt?vt?ve.image[qt].image:ve.image[qt]:J(ve.image[qt],!1,!0,D),pt[qt]=hn(ve,pt[qt]);const yn=pt[0],In=Y(yn)||M,Wn=_.convert(ve.format,ve.encoding),qe=_.convert(ve.type),_t=fe(ve.internalFormat,Wn,qe,ve.encoding),Yt=M&&!0!==ve.isVideoTexture,wn=void 0===sn.__version||!0===nt;let ot,jn=ce(ve,yn,In);if(an(34067,ve,In),Xe){Yt&&wn&&o.texStorage2D(34067,jn,_t,yn.width,yn.height);for(let qt=0;qt<6;qt++){ot=pt[qt].mipmaps;for(let vn=0;vn<ot.length;vn++){const Hn=ot[vn];ve.format!==Ec?null!==Wn?Yt?o.compressedTexSubImage2D(34069+qt,vn,0,0,Hn.width,Hn.height,Wn,Hn.data):o.compressedTexImage2D(34069+qt,vn,_t,Hn.width,Hn.height,0,Hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yt?o.texSubImage2D(34069+qt,vn,0,0,Hn.width,Hn.height,Wn,qe,Hn.data):o.texImage2D(34069+qt,vn,_t,Hn.width,Hn.height,0,Wn,qe,Hn.data)}}}else{ot=ve.mipmaps,Yt&&wn&&(ot.length>0&&jn++,o.texStorage2D(34067,jn,_t,pt[0].width,pt[0].height));for(let qt=0;qt<6;qt++)if(vt){Yt?o.texSubImage2D(34069+qt,0,0,0,pt[qt].width,pt[qt].height,Wn,qe,pt[qt].data):o.texImage2D(34069+qt,0,_t,pt[qt].width,pt[qt].height,0,Wn,qe,pt[qt].data);for(let vn=0;vn<ot.length;vn++){const qn=ot[vn].image[qt].image;Yt?o.texSubImage2D(34069+qt,vn+1,0,0,qn.width,qn.height,Wn,qe,qn.data):o.texImage2D(34069+qt,vn+1,_t,qn.width,qn.height,0,Wn,qe,qn.data)}}else{Yt?o.texSubImage2D(34069+qt,0,0,0,Wn,qe,pt[qt]):o.texImage2D(34069+qt,0,_t,Wn,qe,pt[qt]);for(let vn=0;vn<ot.length;vn++){const Hn=ot[vn];Yt?o.texSubImage2D(34069+qt,vn+1,0,0,Wn,qe,Hn.image[qt]):o.texImage2D(34069+qt,vn+1,_t,Wn,qe,Hn.image[qt])}}}he(ve,In)&&xe(34067),sn.__version=zt.version,ve.onUpdate&&ve.onUpdate(ve)}we.__version=ve.version}(lt,we,ve):o.bindTexture(34067,lt.__webglTexture,33984+ve)},this.rebindTextures=function Bt(we,ve,lt){const nt=u.get(we);void 0!==ve&&Nt(nt.__webglFramebuffer,we,we.texture,36064,3553),void 0!==lt&&wt(we)},this.setupRenderTarget=function En(we){const ve=we.texture,lt=u.get(we),nt=u.get(ve);we.addEventListener("dispose",Qe),!0!==we.isWebGLMultipleRenderTargets&&(void 0===nt.__webglTexture&&(nt.__webglTexture=p.createTexture()),nt.__version=ve.version,x.memory.textures++);const zt=!0===we.isWebGLCubeRenderTarget,sn=!0===we.isWebGLMultipleRenderTargets,Xe=Y(we)||M;if(zt){lt.__webglFramebuffer=[];for(let vt=0;vt<6;vt++)lt.__webglFramebuffer[vt]=p.createFramebuffer()}else{if(lt.__webglFramebuffer=p.createFramebuffer(),sn)if(f.drawBuffers){const vt=we.texture;for(let pt=0,yn=vt.length;pt<yn;pt++){const In=u.get(vt[pt]);void 0===In.__webglTexture&&(In.__webglTexture=p.createTexture(),x.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(M&&we.samples>0&&!1===dt(we)){const vt=sn?ve:[ve];lt.__webglMultisampledFramebuffer=p.createFramebuffer(),lt.__webglColorRenderbuffer=[],o.bindFramebuffer(36160,lt.__webglMultisampledFramebuffer);for(let pt=0;pt<vt.length;pt++){const yn=vt[pt];lt.__webglColorRenderbuffer[pt]=p.createRenderbuffer(),p.bindRenderbuffer(36161,lt.__webglColorRenderbuffer[pt]);const In=_.convert(yn.format,yn.encoding),Wn=_.convert(yn.type),qe=fe(yn.internalFormat,In,Wn,yn.encoding,!0===we.isXRRenderTarget),_t=ge(we);p.renderbufferStorageMultisample(36161,_t,qe,we.width,we.height),p.framebufferRenderbuffer(36160,36064+pt,36161,lt.__webglColorRenderbuffer[pt])}p.bindRenderbuffer(36161,null),we.depthBuffer&&(lt.__webglDepthRenderbuffer=p.createRenderbuffer(),en(lt.__webglDepthRenderbuffer,we,!0)),o.bindFramebuffer(36160,null)}}if(zt){o.bindTexture(34067,nt.__webglTexture),an(34067,ve,Xe);for(let vt=0;vt<6;vt++)Nt(lt.__webglFramebuffer[vt],we,ve,36064,34069+vt);he(ve,Xe)&&xe(34067),o.unbindTexture()}else if(sn){const vt=we.texture;for(let pt=0,yn=vt.length;pt<yn;pt++){const In=vt[pt],Wn=u.get(In);o.bindTexture(3553,Wn.__webglTexture),an(3553,In,Xe),Nt(lt.__webglFramebuffer,we,In,36064+pt,3553),he(In,Xe)&&xe(3553)}o.unbindTexture()}else{let vt=3553;(we.isWebGL3DRenderTarget||we.isWebGLArrayRenderTarget)&&(M?vt=we.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(vt,nt.__webglTexture),an(vt,ve,Xe),Nt(lt.__webglFramebuffer,we,ve,36064,vt),he(ve,Xe)&&xe(vt),o.unbindTexture()}we.depthBuffer&&wt(we)},this.updateRenderTargetMipmap=function cn(we){const ve=Y(we)||M,lt=!0===we.isWebGLMultipleRenderTargets?we.texture:[we.texture];for(let nt=0,zt=lt.length;nt<zt;nt++){const sn=lt[nt];if(he(sn,ve)){const Xe=we.isWebGLCubeRenderTarget?34067:3553,vt=u.get(sn).__webglTexture;o.bindTexture(Xe,vt),xe(Xe),o.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ae(we){if(M&&we.samples>0&&!1===dt(we)){const ve=we.isWebGLMultipleRenderTargets?we.texture:[we.texture],lt=we.width,nt=we.height;let zt=16384;const sn=[],Xe=we.stencilBuffer?33306:36096,vt=u.get(we),pt=!0===we.isWebGLMultipleRenderTargets;if(pt)for(let yn=0;yn<ve.length;yn++)o.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(36160,36064+yn,36161,null),o.bindFramebuffer(36160,vt.__webglFramebuffer),p.framebufferTexture2D(36009,36064+yn,3553,null,0);o.bindFramebuffer(36008,vt.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,vt.__webglFramebuffer);for(let yn=0;yn<ve.length;yn++){sn.push(36064+yn),we.depthBuffer&&sn.push(Xe);const In=void 0!==vt.__ignoreDepthValues&&vt.__ignoreDepthValues;if(!1===In&&(we.depthBuffer&&(zt|=256),we.stencilBuffer&&(zt|=1024)),pt&&p.framebufferRenderbuffer(36008,36064,36161,vt.__webglColorRenderbuffer[yn]),!0===In&&(p.invalidateFramebuffer(36008,[Xe]),p.invalidateFramebuffer(36009,[Xe])),pt){const Wn=u.get(ve[yn]).__webglTexture;p.framebufferTexture2D(36009,36064,3553,Wn,0)}p.blitFramebuffer(0,0,lt,nt,0,0,lt,nt,zt,9728),U&&p.invalidateFramebuffer(36008,sn)}if(o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,null),pt)for(let yn=0;yn<ve.length;yn++){o.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(36160,36064+yn,36161,vt.__webglColorRenderbuffer[yn]);const In=u.get(ve[yn]).__webglTexture;o.bindFramebuffer(36160,vt.__webglFramebuffer),p.framebufferTexture2D(36009,36064+yn,3553,In,0)}o.bindFramebuffer(36009,vt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=wt,this.setupFrameBufferTexture=Nt,this.useMultisampledRTT=dt}function D0(p,i,o){const u=o.isWebGL2;return{convert:function f(_,x=null){let M;if(_===Al)return 5121;if(_===Tv)return 32819;if(_===Bf)return 32820;if(_===Ev)return 5120;if(_===Nf)return 5122;if(_===Cv)return 5123;if(_===uu)return 5124;if(_===Ta)return 5125;if(_===Sc)return 5126;if(_===Uf)return u?5131:(M=i.get("OES_texture_half_float"),null!==M?M.HALF_FLOAT_OES:null);if(_===Aa)return 6406;if(_===Ec)return 6408;if(_===Av)return 6409;if(_===xs)return 6410;if(_===So)return 6402;if(_===Vf)return 34041;if(_===Zu)return M=i.get("EXT_sRGB"),null!==M?M.SRGB_ALPHA_EXT:null;if(_===pb)return 6403;if(_===Dv)return 36244;if(_===Rv)return 33319;if(_===mb)return 33320;if(_===N_)return 36249;if(_===ec||_===hm||_===ns||_===Xu)if(x===ws){if(M=i.get("WEBGL_compressed_texture_s3tc_srgb"),null===M)return null;if(_===ec)return M.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(_===hm)return M.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(_===ns)return M.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(_===Xu)return M.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(M=i.get("WEBGL_compressed_texture_s3tc"),null===M)return null;if(_===ec)return M.COMPRESSED_RGB_S3TC_DXT1_EXT;if(_===hm)return M.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(_===ns)return M.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(_===Xu)return M.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(_===ua||_===Iv||_===U_||_===B_){if(M=i.get("WEBGL_compressed_texture_pvrtc"),null===M)return null;if(_===ua)return M.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(_===Iv)return M.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(_===U_)return M.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(_===B_)return M.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(_===Tg)return M=i.get("WEBGL_compressed_texture_etc1"),null!==M?M.COMPRESSED_RGB_ETC1_WEBGL:null;if(_===zf||_===Vh){if(M=i.get("WEBGL_compressed_texture_etc"),null===M)return null;if(_===zf)return x===ws?M.COMPRESSED_SRGB8_ETC2:M.COMPRESSED_RGB8_ETC2;if(_===Vh)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:M.COMPRESSED_RGBA8_ETC2_EAC}if(_===V_||_===fm||_===Ag||_===z_||_===Dg||_===Rg||_===H_||_===Ig||_===G_||_===Hf||_===Ms||_===tc||_===Vd||_===zh){if(M=i.get("WEBGL_compressed_texture_astc"),null===M)return null;if(_===V_)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:M.COMPRESSED_RGBA_ASTC_4x4_KHR;if(_===fm)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:M.COMPRESSED_RGBA_ASTC_5x4_KHR;if(_===Ag)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:M.COMPRESSED_RGBA_ASTC_5x5_KHR;if(_===z_)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:M.COMPRESSED_RGBA_ASTC_6x5_KHR;if(_===Dg)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:M.COMPRESSED_RGBA_ASTC_6x6_KHR;if(_===Rg)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:M.COMPRESSED_RGBA_ASTC_8x5_KHR;if(_===H_)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:M.COMPRESSED_RGBA_ASTC_8x6_KHR;if(_===Ig)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:M.COMPRESSED_RGBA_ASTC_8x8_KHR;if(_===G_)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:M.COMPRESSED_RGBA_ASTC_10x5_KHR;if(_===Hf)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:M.COMPRESSED_RGBA_ASTC_10x6_KHR;if(_===Ms)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:M.COMPRESSED_RGBA_ASTC_10x8_KHR;if(_===tc)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:M.COMPRESSED_RGBA_ASTC_10x10_KHR;if(_===Vd)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:M.COMPRESSED_RGBA_ASTC_12x10_KHR;if(_===zh)return x===ws?M.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:M.COMPRESSED_RGBA_ASTC_12x12_KHR}if(_===Yr){if(M=i.get("EXT_texture_compression_bptc"),null===M)return null;if(_===Yr)return x===ws?M.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:M.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(_===Pg||_===is||_===pm||_===Pv){if(M=i.get("EXT_texture_compression_rgtc"),null===M)return null;if(_===Yr)return M.COMPRESSED_RED_RGTC1_EXT;if(_===is)return M.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(_===pm)return M.COMPRESSED_RED_GREEN_RGTC2_EXT;if(_===Pv)return M.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return _===Bh?u?34042:(M=i.get("WEBGL_depth_texture"),null!==M?M.UNSIGNED_INT_24_8_WEBGL:null):void 0!==p[_]?p[_]:null}}}class rh extends Ds{constructor(i=[]){super(),this.isArrayCamera=!0,this.cameras=i}}class vp extends Qs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const R0={type:"move"};class Hm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(i){return null!==this._targetRay&&this._targetRay.dispatchEvent(i),null!==this._grip&&this._grip.dispatchEvent(i),null!==this._hand&&this._hand.dispatchEvent(i),this}connect(i){if(i&&i.hand){const o=this._hand;if(o)for(const u of i.hand.values())this._getHandJoint(o,u)}return this.dispatchEvent({type:"connected",data:i}),this}disconnect(i){return this.dispatchEvent({type:"disconnected",data:i}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(i,o,u){let f=null,_=null,x=null;const M=this._targetRay,E=this._grip,D=this._hand;if(i&&"visible-blurred"!==o.session.visibilityState){if(D&&i.hand){x=!0;for(const j of i.hand.values()){const $=o.getJointPose(j,u),G=this._getHandJoint(D,j);null!==$&&(G.matrix.fromArray($.transform.matrix),G.matrix.decompose(G.position,G.rotation,G.scale),G.jointRadius=$.radius),G.visible=null!==$}const I=D.joints["index-finger-tip"].position.distanceTo(D.joints["thumb-tip"].position),U=.02,B=.005;D.inputState.pinching&&I>U+B?(D.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:i.handedness,target:this})):!D.inputState.pinching&&I<=U-B&&(D.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:i.handedness,target:this}))}else null!==E&&i.gripSpace&&(_=o.getPose(i.gripSpace,u),null!==_&&(E.matrix.fromArray(_.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),_.linearVelocity?(E.hasLinearVelocity=!0,E.linearVelocity.copy(_.linearVelocity)):E.hasLinearVelocity=!1,_.angularVelocity?(E.hasAngularVelocity=!0,E.angularVelocity.copy(_.angularVelocity)):E.hasAngularVelocity=!1));null!==M&&(f=o.getPose(i.targetRaySpace,u),null===f&&null!==_&&(f=_),null!==f&&(M.matrix.fromArray(f.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),f.linearVelocity?(M.hasLinearVelocity=!0,M.linearVelocity.copy(f.linearVelocity)):M.hasLinearVelocity=!1,f.angularVelocity?(M.hasAngularVelocity=!0,M.angularVelocity.copy(f.angularVelocity)):M.hasAngularVelocity=!1,this.dispatchEvent(R0)))}return null!==M&&(M.visible=null!==f),null!==E&&(E.visible=null!==_),null!==D&&(D.visible=null!==x),this}_getHandJoint(i,o){if(void 0===i.joints[o.jointName]){const u=new vp;u.matrixAutoUpdate=!1,u.visible=!1,i.joints[o.jointName]=u,i.add(u)}return i.joints[o.jointName]}}class dy extends tr{constructor(i,o,u,f,_,x,M,E,D,k){if((k=void 0!==k?k:So)!==So&&k!==Vf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===u&&k===So&&(u=Ta),void 0===u&&k===Vf&&(u=Bh),super(null,f,_,x,M,E,k,u,D),this.isDepthTexture=!0,this.image={width:i,height:o},this.magFilter=void 0!==M?M:Xr,this.minFilter=void 0!==E?E:Xr,this.flipY=!1,this.generateMipmaps=!1}}class I0 extends Ys{constructor(i,o){super();const u=this;let f=null,_=1,x=null,M="local-floor",E=1,D=null,k=null,O=null,I=null,U=null,B=null;const j=o.getContextAttributes();let $=null,G=null;const Q=[],J=[],Y=new Set,ee=new Map,he=new Ds;he.layers.enable(1),he.viewport=new Vi;const xe=new Ds;xe.layers.enable(2),xe.viewport=new Vi;const fe=[he,xe],ce=new rh;ce.layers.enable(1),ce.layers.enable(2);let de=null,Ye=null;function Qe(St){const Ft=J.indexOf(St.inputSource);if(-1===Ft)return;const Et=Q[Ft];void 0!==Et&&Et.dispatchEvent({type:St.type,data:St.inputSource})}function Ne(){f.removeEventListener("select",Qe),f.removeEventListener("selectstart",Qe),f.removeEventListener("selectend",Qe),f.removeEventListener("squeeze",Qe),f.removeEventListener("squeezestart",Qe),f.removeEventListener("squeezeend",Qe),f.removeEventListener("end",Ne),f.removeEventListener("inputsourceschange",$e);for(let St=0;St<Q.length;St++){const Ft=J[St];null!==Ft&&(J[St]=null,Q[St].disconnect(Ft))}de=null,Ye=null,i.setRenderTarget($),U=null,I=null,O=null,f=null,G=null,Ve.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function $e(St){for(let Ft=0;Ft<St.removed.length;Ft++){const Et=St.removed[Ft],an=J.indexOf(Et);an>=0&&(J[an]=null,Q[an].disconnect(Et))}for(let Ft=0;Ft<St.added.length;Ft++){const Et=St.added[Ft];let an=J.indexOf(Et);if(-1===an){for(let Tt=0;Tt<Q.length;Tt++){if(Tt>=J.length){J.push(Et),an=Tt;break}if(null===J[Tt]){J[Tt]=Et,an=Tt;break}}if(-1===an)break}const je=Q[an];je&&je.connect(Et)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(St){let Ft=Q[St];return void 0===Ft&&(Ft=new Hm,Q[St]=Ft),Ft.getTargetRaySpace()},this.getControllerGrip=function(St){let Ft=Q[St];return void 0===Ft&&(Ft=new Hm,Q[St]=Ft),Ft.getGripSpace()},this.getHand=function(St){let Ft=Q[St];return void 0===Ft&&(Ft=new Hm,Q[St]=Ft),Ft.getHandSpace()},this.setFramebufferScaleFactor=function(St){_=St,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(St){M=St,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return D||x},this.setReferenceSpace=function(St){D=St},this.getBaseLayer=function(){return null!==I?I:U},this.getBinding=function(){return O},this.getFrame=function(){return B},this.getSession=function(){return f},this.setSession=function(){var St=function Un(p){return function(){var i=this,o=arguments;return new Promise(function(u,f){var _=p.apply(i,o);function x(E){rn(_,u,f,x,M,"next",E)}function M(E){rn(_,u,f,x,M,"throw",E)}x(void 0)})}}(function*(Ft){if(f=Ft,null!==f){if($=i.getRenderTarget(),f.addEventListener("select",Qe),f.addEventListener("selectstart",Qe),f.addEventListener("selectend",Qe),f.addEventListener("squeeze",Qe),f.addEventListener("squeezestart",Qe),f.addEventListener("squeezeend",Qe),f.addEventListener("end",Ne),f.addEventListener("inputsourceschange",$e),!0!==j.xrCompatible&&(yield o.makeXRCompatible()),void 0===f.renderState.layers||!1===i.capabilities.isWebGL2)U=new XRWebGLLayer(f,o,{antialias:void 0!==f.renderState.layers||j.antialias,alpha:j.alpha,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:_}),f.updateRenderState({baseLayer:U}),G=new Gn(U.framebufferWidth,U.framebufferHeight,{format:Ec,type:Al,encoding:i.outputEncoding,stencilBuffer:j.stencil});else{let Et=null,an=null,je=null;j.depth&&(je=j.stencil?35056:33190,Et=j.stencil?Vf:So,an=j.stencil?Bh:Ta);const Tt={colorFormat:32856,depthFormat:je,scaleFactor:_};O=new XRWebGLBinding(f,o),I=O.createProjectionLayer(Tt),f.updateRenderState({layers:[I]}),G=new Gn(I.textureWidth,I.textureHeight,{format:Ec,type:Al,depthTexture:new dy(I.textureWidth,I.textureHeight,an,void 0,void 0,void 0,void 0,void 0,void 0,Et),stencilBuffer:j.stencil,encoding:i.outputEncoding,samples:j.antialias?4:0}),i.properties.get(G).__ignoreDepthValues=I.ignoreDepthValues}G.isXRRenderTarget=!0,this.setFoveation(E),D=null,x=yield f.requestReferenceSpace(M),Ve.setContext(f),Ve.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}});return function(Ft){return St.apply(this,arguments)}}();const et=new Re,Pt=new Re;function Ze(St,Ft){null===Ft?St.matrixWorld.copy(St.matrix):St.matrixWorld.multiplyMatrices(Ft.matrixWorld,St.matrix),St.matrixWorldInverse.copy(St.matrixWorld).invert()}this.updateCamera=function(St){if(null===f)return;ce.near=xe.near=he.near=St.near,ce.far=xe.far=he.far=St.far,(de!==ce.near||Ye!==ce.far)&&(f.updateRenderState({depthNear:ce.near,depthFar:ce.far}),de=ce.near,Ye=ce.far);const Ft=St.parent,Et=ce.cameras;Ze(ce,Ft);for(let an=0;an<Et.length;an++)Ze(Et[an],Ft);2===Et.length?function Dt(St,Ft,Et){et.setFromMatrixPosition(Ft.matrixWorld),Pt.setFromMatrixPosition(Et.matrixWorld);const an=et.distanceTo(Pt),je=Ft.projectionMatrix.elements,Tt=Et.projectionMatrix.elements,Ut=je[14]/(je[10]-1),Nt=je[14]/(je[10]+1),en=(je[9]+1)/je[5],tt=(je[9]-1)/je[5],wt=(je[8]-1)/je[0],Bt=(Tt[8]+1)/Tt[0],En=Ut*wt,cn=Ut*Bt,Ae=an/(-wt+Bt),ge=Ae*-wt;Ft.matrixWorld.decompose(St.position,St.quaternion,St.scale),St.translateX(ge),St.translateZ(Ae),St.matrixWorld.compose(St.position,St.quaternion,St.scale),St.matrixWorldInverse.copy(St.matrixWorld).invert();const dt=Ut+Ae,Ot=Nt+Ae;St.projectionMatrix.makePerspective(En-ge,cn+(an-ge),en*Nt/Ot*dt,tt*Nt/Ot*dt,dt,Ot),St.projectionMatrixInverse.copy(St.projectionMatrix).invert()}(ce,he,xe):ce.projectionMatrix.copy(he.projectionMatrix),function at(St,Ft,Et){null===Et?St.matrix.copy(Ft.matrixWorld):(St.matrix.copy(Et.matrixWorld),St.matrix.invert(),St.matrix.multiply(Ft.matrixWorld)),St.matrix.decompose(St.position,St.quaternion,St.scale),St.updateMatrixWorld(!0);const an=St.children;for(let je=0,Tt=an.length;je<Tt;je++)an[je].updateMatrixWorld(!0);St.projectionMatrix.copy(Ft.projectionMatrix),St.projectionMatrixInverse.copy(Ft.projectionMatrixInverse),St.isPerspectiveCamera&&(St.fov=2*go*Math.atan(1/St.projectionMatrix.elements[5]),St.zoom=1)}(St,ce,Ft)},this.getCamera=function(){return ce},this.getFoveation=function(){if(null!==I||null!==U)return E},this.setFoveation=function(St){E=St,null!==I&&(I.fixedFoveation=St),null!==U&&void 0!==U.fixedFoveation&&(U.fixedFoveation=St)},this.getPlanes=function(){return Y};let bt=null;const Ve=new kM;Ve.setAnimationLoop(function tn(St,Ft){if(k=Ft.getViewerPose(D||x),B=Ft,null!==k){const Et=k.views;null!==U&&(i.setRenderTargetFramebuffer(G,U.framebuffer),i.setRenderTarget(G));let an=!1;Et.length!==ce.cameras.length&&(ce.cameras.length=0,an=!0);for(let je=0;je<Et.length;je++){const Tt=Et[je];let Ut=null;if(null!==U)Ut=U.getViewport(Tt);else{const en=O.getViewSubImage(I,Tt);Ut=en.viewport,0===je&&(i.setRenderTargetTextures(G,en.colorTexture,I.ignoreDepthValues?void 0:en.depthStencilTexture),i.setRenderTarget(G))}let Nt=fe[je];void 0===Nt&&(Nt=new Ds,Nt.layers.enable(je),Nt.viewport=new Vi,fe[je]=Nt),Nt.matrix.fromArray(Tt.transform.matrix),Nt.matrix.decompose(Nt.position,Nt.quaternion,Nt.scale),Nt.projectionMatrix.fromArray(Tt.projectionMatrix),Nt.projectionMatrixInverse.copy(Nt.projectionMatrix).invert(),Nt.viewport.set(Ut.x,Ut.y,Ut.width,Ut.height),0===je&&(ce.matrix.copy(Nt.matrix),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale)),!0===an&&ce.cameras.push(Nt)}}for(let Et=0;Et<Q.length;Et++){const an=J[Et],je=Q[Et];null!==an&&void 0!==je&&je.update(an,Ft,D||x)}if(bt&&bt(St,Ft),Ft.detectedPlanes){u.dispatchEvent({type:"planesdetected",data:Ft.detectedPlanes});let Et=null;for(const an of Y)Ft.detectedPlanes.has(an)||(null===Et&&(Et=[]),Et.push(an));if(null!==Et)for(const an of Et)Y.delete(an),ee.delete(an),u.dispatchEvent({type:"planeremoved",data:an});for(const an of Ft.detectedPlanes)if(Y.has(an)){const je=ee.get(an);an.lastChangedTime>je&&(ee.set(an,an.lastChangedTime),u.dispatchEvent({type:"planechanged",data:an}))}else Y.add(an),ee.set(an,Ft.lastChangedTime),u.dispatchEvent({type:"planeadded",data:an})}B=null}),this.setAnimationLoop=function(St){bt=St},this.dispose=function(){}}}function hw(p,i){function o($,G){!0===$.matrixAutoUpdate&&$.updateMatrix(),G.value.copy($.matrix)}function _($,G){$.opacity.value=G.opacity,G.color&&$.diffuse.value.copy(G.color),G.emissive&&$.emissive.value.copy(G.emissive).multiplyScalar(G.emissiveIntensity),G.map&&($.map.value=G.map,o(G.map,$.mapTransform)),G.alphaMap&&($.alphaMap.value=G.alphaMap,o(G.alphaMap,$.alphaMapTransform)),G.bumpMap&&($.bumpMap.value=G.bumpMap,o(G.bumpMap,$.bumpMapTransform),$.bumpScale.value=G.bumpScale,G.side===At&&($.bumpScale.value*=-1)),G.normalMap&&($.normalMap.value=G.normalMap,o(G.normalMap,$.normalMapTransform),$.normalScale.value.copy(G.normalScale),G.side===At&&$.normalScale.value.negate()),G.displacementMap&&($.displacementMap.value=G.displacementMap,o(G.displacementMap,$.displacementMapTransform),$.displacementScale.value=G.displacementScale,$.displacementBias.value=G.displacementBias),G.emissiveMap&&($.emissiveMap.value=G.emissiveMap,o(G.emissiveMap,$.emissiveMapTransform)),G.specularMap&&($.specularMap.value=G.specularMap,o(G.specularMap,$.specularMapTransform)),G.alphaTest>0&&($.alphaTest.value=G.alphaTest);const Q=i.get(G).envMap;if(Q&&($.envMap.value=Q,$.flipEnvMap.value=Q.isCubeTexture&&!1===Q.isRenderTargetTexture?-1:1,$.reflectivity.value=G.reflectivity,$.ior.value=G.ior,$.refractionRatio.value=G.refractionRatio),G.lightMap){$.lightMap.value=G.lightMap;const J=!0===p.useLegacyLights?Math.PI:1;$.lightMapIntensity.value=G.lightMapIntensity*J,o(G.lightMap,$.lightMapTransform)}G.aoMap&&($.aoMap.value=G.aoMap,$.aoMapIntensity.value=G.aoMapIntensity,o(G.aoMap,$.aoMapTransform))}return{refreshFogUniforms:function u($,G){G.color.getRGB($.fogColor.value,Z_(p)),G.isFog?($.fogNear.value=G.near,$.fogFar.value=G.far):G.isFogExp2&&($.fogDensity.value=G.density)},refreshMaterialUniforms:function f($,G,Q,J,Y){G.isMeshBasicMaterial||G.isMeshLambertMaterial?_($,G):G.isMeshToonMaterial?(_($,G),function O($,G){G.gradientMap&&($.gradientMap.value=G.gradientMap)}($,G)):G.isMeshPhongMaterial?(_($,G),function k($,G){$.specular.value.copy(G.specular),$.shininess.value=Math.max(G.shininess,1e-4)}($,G)):G.isMeshStandardMaterial?(_($,G),function I($,G){$.metalness.value=G.metalness,G.metalnessMap&&($.metalnessMap.value=G.metalnessMap,o(G.metalnessMap,$.metalnessMapTransform)),$.roughness.value=G.roughness,G.roughnessMap&&($.roughnessMap.value=G.roughnessMap,o(G.roughnessMap,$.roughnessMapTransform)),i.get(G).envMap&&($.envMapIntensity.value=G.envMapIntensity)}($,G),G.isMeshPhysicalMaterial&&function U($,G,Q){$.ior.value=G.ior,G.sheen>0&&($.sheenColor.value.copy(G.sheenColor).multiplyScalar(G.sheen),$.sheenRoughness.value=G.sheenRoughness,G.sheenColorMap&&($.sheenColorMap.value=G.sheenColorMap,o(G.sheenColorMap,$.sheenColorMapTransform)),G.sheenRoughnessMap&&($.sheenRoughnessMap.value=G.sheenRoughnessMap,o(G.sheenRoughnessMap,$.sheenRoughnessMapTransform))),G.clearcoat>0&&($.clearcoat.value=G.clearcoat,$.clearcoatRoughness.value=G.clearcoatRoughness,G.clearcoatMap&&($.clearcoatMap.value=G.clearcoatMap,o(G.clearcoatMap,$.clearcoatMapTransform)),G.clearcoatRoughnessMap&&($.clearcoatRoughnessMap.value=G.clearcoatRoughnessMap,o(G.clearcoatRoughnessMap,$.clearcoatRoughnessMapTransform)),G.clearcoatNormalMap&&($.clearcoatNormalMap.value=G.clearcoatNormalMap,o(G.clearcoatNormalMap,$.clearcoatNormalMapTransform),$.clearcoatNormalScale.value.copy(G.clearcoatNormalScale),G.side===At&&$.clearcoatNormalScale.value.negate())),G.iridescence>0&&($.iridescence.value=G.iridescence,$.iridescenceIOR.value=G.iridescenceIOR,$.iridescenceThicknessMinimum.value=G.iridescenceThicknessRange[0],$.iridescenceThicknessMaximum.value=G.iridescenceThicknessRange[1],G.iridescenceMap&&($.iridescenceMap.value=G.iridescenceMap,o(G.iridescenceMap,$.iridescenceMapTransform)),G.iridescenceThicknessMap&&($.iridescenceThicknessMap.value=G.iridescenceThicknessMap,o(G.iridescenceThicknessMap,$.iridescenceThicknessMapTransform))),G.transmission>0&&($.transmission.value=G.transmission,$.transmissionSamplerMap.value=Q.texture,$.transmissionSamplerSize.value.set(Q.width,Q.height),G.transmissionMap&&($.transmissionMap.value=G.transmissionMap,o(G.transmissionMap,$.transmissionMapTransform)),$.thickness.value=G.thickness,G.thicknessMap&&($.thicknessMap.value=G.thicknessMap,o(G.thicknessMap,$.thicknessMapTransform)),$.attenuationDistance.value=G.attenuationDistance,$.attenuationColor.value.copy(G.attenuationColor)),$.specularIntensity.value=G.specularIntensity,$.specularColor.value.copy(G.specularColor),G.specularColorMap&&($.specularColorMap.value=G.specularColorMap,o(G.specularColorMap,$.specularColorMapTransform)),G.specularIntensityMap&&($.specularIntensityMap.value=G.specularIntensityMap,o(G.specularIntensityMap,$.specularIntensityMapTransform))}($,G,Y)):G.isMeshMatcapMaterial?(_($,G),function B($,G){G.matcap&&($.matcap.value=G.matcap)}($,G)):G.isMeshDepthMaterial?_($,G):G.isMeshDistanceMaterial?(_($,G),function j($,G){const Q=i.get(G).light;$.referencePosition.value.setFromMatrixPosition(Q.matrixWorld),$.nearDistance.value=Q.shadow.camera.near,$.farDistance.value=Q.shadow.camera.far}($,G)):G.isMeshNormalMaterial?_($,G):G.isLineBasicMaterial?(function x($,G){$.diffuse.value.copy(G.color),$.opacity.value=G.opacity,G.map&&($.map.value=G.map,o(G.map,$.mapTransform))}($,G),G.isLineDashedMaterial&&function M($,G){$.dashSize.value=G.dashSize,$.totalSize.value=G.dashSize+G.gapSize,$.scale.value=G.scale}($,G)):G.isPointsMaterial?function E($,G,Q,J){$.diffuse.value.copy(G.color),$.opacity.value=G.opacity,$.size.value=G.size*Q,$.scale.value=.5*J,G.map&&($.map.value=G.map,o(G.map,$.uvTransform)),G.alphaMap&&($.alphaMap.value=G.alphaMap),G.alphaTest>0&&($.alphaTest.value=G.alphaTest)}($,G,Q,J):G.isSpriteMaterial?function D($,G){$.diffuse.value.copy(G.color),$.opacity.value=G.opacity,$.rotation.value=G.rotation,G.map&&($.map.value=G.map,o(G.map,$.mapTransform)),G.alphaMap&&($.alphaMap.value=G.alphaMap),G.alphaTest>0&&($.alphaTest.value=G.alphaTest)}($,G):G.isShadowMaterial?($.color.value.copy(G.color),$.opacity.value=G.opacity):G.isShaderMaterial&&(G.uniformsNeedUpdate=!1)}}}function hy(p,i,o,u){let f={},_={},x=[];const M=o.isWebGL2?p.getParameter(35375):0;function U(Q,J,Y){const ee=Q.value;if(void 0===Y[J]){if("number"==typeof ee)Y[J]=ee;else{const he=Array.isArray(ee)?ee:[ee],xe=[];for(let fe=0;fe<he.length;fe++)xe.push(he[fe].clone());Y[J]=xe}return!0}if("number"==typeof ee){if(Y[J]!==ee)return Y[J]=ee,!0}else{const he=Array.isArray(Y[J])?Y[J]:[Y[J]],xe=Array.isArray(ee)?ee:[ee];for(let fe=0;fe<he.length;fe++){const ce=he[fe];if(!1===ce.equals(xe[fe]))return ce.copy(xe[fe]),!0}}return!1}function j(Q){const J={boundary:0,storage:0};return"number"==typeof Q?(J.boundary=4,J.storage=4):Q.isVector2?(J.boundary=8,J.storage=8):Q.isVector3||Q.isColor?(J.boundary=16,J.storage=12):Q.isVector4?(J.boundary=16,J.storage=16):Q.isMatrix3?(J.boundary=48,J.storage=48):Q.isMatrix4?(J.boundary=64,J.storage=64):Q.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Q),J}function $(Q){const J=Q.target;J.removeEventListener("dispose",$);const Y=x.indexOf(J.__bindingPointIndex);x.splice(Y,1),p.deleteBuffer(f[J.id]),delete f[J.id],delete _[J.id]}return{bind:function E(Q,J){u.uniformBlockBinding(Q,J.program)},update:function D(Q,J){let Y=f[Q.id];void 0===Y&&(function B(Q){const J=Q.uniforms;let Y=0;let he=0;for(let xe=0,fe=J.length;xe<fe;xe++){const ce=J[xe],de={boundary:0,storage:0},Ye=Array.isArray(ce.value)?ce.value:[ce.value];for(let Qe=0,Ne=Ye.length;Qe<Ne;Qe++){const et=j(Ye[Qe]);de.boundary+=et.boundary,de.storage+=et.storage}ce.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),ce.__offset=Y,xe>0&&(he=Y%16,0!==he&&16-he-de.boundary<0&&(Y+=16-he,ce.__offset=Y)),Y+=de.storage}he=Y%16,he>0&&(Y+=16-he),Q.__size=Y,Q.__cache={}}(Q),Y=function k(Q){const J=function O(){for(let Q=0;Q<M;Q++)if(-1===x.indexOf(Q))return x.push(Q),Q;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Q.__bindingPointIndex=J;const Y=p.createBuffer(),ee=Q.__size,he=Q.usage;return p.bindBuffer(35345,Y),p.bufferData(35345,ee,he),p.bindBuffer(35345,null),p.bindBufferBase(35345,J,Y),Y}(Q),f[Q.id]=Y,Q.addEventListener("dispose",$)),u.updateUBOMapping(Q,J.program);const he=i.render.frame;_[Q.id]!==he&&(function I(Q){const Y=Q.uniforms,ee=Q.__cache;p.bindBuffer(35345,f[Q.id]);for(let he=0,xe=Y.length;he<xe;he++){const fe=Y[he];if(!0===U(fe,he,ee)){const ce=fe.__offset,de=Array.isArray(fe.value)?fe.value:[fe.value];let Ye=0;for(let Qe=0;Qe<de.length;Qe++){const Ne=de[Qe],$e=j(Ne);"number"==typeof Ne?(fe.__data[0]=Ne,p.bufferSubData(35345,ce+Ye,fe.__data)):Ne.isMatrix3?(fe.__data[0]=Ne.elements[0],fe.__data[1]=Ne.elements[1],fe.__data[2]=Ne.elements[2],fe.__data[3]=Ne.elements[0],fe.__data[4]=Ne.elements[3],fe.__data[5]=Ne.elements[4],fe.__data[6]=Ne.elements[5],fe.__data[7]=Ne.elements[0],fe.__data[8]=Ne.elements[6],fe.__data[9]=Ne.elements[7],fe.__data[10]=Ne.elements[8],fe.__data[11]=Ne.elements[0]):(Ne.toArray(fe.__data,Ye),Ye+=$e.storage/Float32Array.BYTES_PER_ELEMENT)}p.bufferSubData(35345,ce,fe.__data)}}p.bindBuffer(35345,null)}(Q),_[Q.id]=he)},dispose:function G(){for(const Q in f)p.deleteBuffer(f[Q]);x=[],f={},_={}}}}function r_(){const p=Ju("canvas");return p.style.display="block",p}class Mu{constructor(i={}){const{canvas:o=r_(),context:u=null,depth:f=!0,stencil:_=!0,alpha:x=!1,antialias:M=!1,premultipliedAlpha:E=!0,preserveDrawingBuffer:D=!1,powerPreference:k="default",failIfMajorPerformanceCaveat:O=!1}=i;let I;this.isWebGLRenderer=!0,I=null!==u?u.getContextAttributes().alpha:x;let U=null,B=null;const j=[],$=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Wi,this.useLegacyLights=!0,this.toneMapping=wc,this.toneMappingExposure=1;const G=this;let Q=!1,J=0,Y=0,ee=null,he=-1,xe=null;const fe=new Vi,ce=new Vi;let de=null,Ye=o.width,Qe=o.height,Ne=1,$e=null,et=null;const Pt=new Vi(0,0,Ye,Qe),Dt=new Vi(0,0,Ye,Qe);let Ze=!1;const at=new K_;let bt=!1,tn=!1,Ve=null;const St=new Hi,Ft=new Re,Et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function an(){return null===ee?Ne:1}let Ut,Nt,en,tt,wt,Bt,En,cn,Ae,ge,dt,Ot,hn,we,ve,lt,nt,zt,sn,Xe,vt,pt,yn,In,je=u;function Tt(Ee,mt){for(let Ct=0;Ct<Ee.length;Ct++){const Gt=o.getContext(Ee[Ct],mt);if(null!==Gt)return Gt}return null}try{const Ee={alpha:!0,depth:f,stencil:_,antialias:M,premultipliedAlpha:E,preserveDrawingBuffer:D,powerPreference:k,failIfMajorPerformanceCaveat:O};if("setAttribute"in o&&o.setAttribute("data-engine","three.js r151"),o.addEventListener("webglcontextlost",_t,!1),o.addEventListener("webglcontextrestored",Yt,!1),o.addEventListener("webglcontextcreationerror",wn,!1),null===je){const mt=["webgl2","webgl","experimental-webgl"];if(!0===G.isWebGL1Renderer&&mt.shift(),je=Tt(mt,Ee),null===je)throw Tt(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===je.getShaderPrecisionFormat&&(je.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}function Wn(){Ut=new cp(je),Nt=new u0(je,Ut,i),Ut.init(Nt),pt=new D0(je,Ut,Nt),en=new md(je,Ut,Nt),tt=new aw,wt=new Ga,Bt=new zm(je,Ut,en,wt,Nt,pt,tt),En=new Jd(G),cn=new p0(G),Ae=new Vg(je,Nt),yn=new Lm(je,Ut,Ae,Nt),ge=new Jv(je,Ae,tt,yn),dt=new tx(je,ge,Ae,tt),sn=new zo(je,Nt,Bt),lt=new pa(wt),Ot=new ef(G,En,cn,Ut,Nt,yn,lt),hn=new hw(G,wt),we=new yr,ve=new n_(Ut,Nt),zt=new Ua(G,En,cn,en,dt,I,E),nt=new tf(G,dt,Nt),In=new hy(je,tt,Nt,en),Xe=new Om(je,Ut,tt,Nt),vt=new ex(je,Ut,tt,Nt),tt.programs=Ot.programs,G.capabilities=Nt,G.extensions=Ut,G.properties=wt,G.renderLists=we,G.shadowMap=nt,G.state=en,G.info=tt}Wn();const qe=new I0(G,je);function _t(Ee){Ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Q=!0}function Yt(){console.log("THREE.WebGLRenderer: Context Restored."),Q=!1;const Ee=tt.autoReset,mt=nt.enabled,Ct=nt.autoUpdate,ht=nt.needsUpdate,Gt=nt.type;Wn(),tt.autoReset=Ee,nt.enabled=mt,nt.autoUpdate=Ct,nt.needsUpdate=ht,nt.type=Gt}function wn(Ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ee.statusMessage)}function jn(Ee){const mt=Ee.target;mt.removeEventListener("dispose",jn),function ot(Ee){(function qt(Ee){const mt=wt.get(Ee).programs;void 0!==mt&&(mt.forEach(function(Ct){Ot.releaseProgram(Ct)}),Ee.isShaderMaterial&&Ot.releaseShaderCache(Ee))})(Ee),wt.remove(Ee)}(mt)}this.xr=qe,this.getContext=function(){return je},this.getContextAttributes=function(){return je.getContextAttributes()},this.forceContextLoss=function(){const Ee=Ut.get("WEBGL_lose_context");Ee&&Ee.loseContext()},this.forceContextRestore=function(){const Ee=Ut.get("WEBGL_lose_context");Ee&&Ee.restoreContext()},this.getPixelRatio=function(){return Ne},this.setPixelRatio=function(Ee){void 0!==Ee&&(Ne=Ee,this.setSize(Ye,Qe,!1))},this.getSize=function(Ee){return Ee.set(Ye,Qe)},this.setSize=function(Ee,mt,Ct=!0){qe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ye=Ee,Qe=mt,o.width=Math.floor(Ee*Ne),o.height=Math.floor(mt*Ne),!0===Ct&&(o.style.width=Ee+"px",o.style.height=mt+"px"),this.setViewport(0,0,Ee,mt))},this.getDrawingBufferSize=function(Ee){return Ee.set(Ye*Ne,Qe*Ne).floor()},this.setDrawingBufferSize=function(Ee,mt,Ct){Ye=Ee,Qe=mt,Ne=Ct,o.width=Math.floor(Ee*Ct),o.height=Math.floor(mt*Ct),this.setViewport(0,0,Ee,mt)},this.getCurrentViewport=function(Ee){return Ee.copy(fe)},this.getViewport=function(Ee){return Ee.copy(Pt)},this.setViewport=function(Ee,mt,Ct,ht){Ee.isVector4?Pt.set(Ee.x,Ee.y,Ee.z,Ee.w):Pt.set(Ee,mt,Ct,ht),en.viewport(fe.copy(Pt).multiplyScalar(Ne).floor())},this.getScissor=function(Ee){return Ee.copy(Dt)},this.setScissor=function(Ee,mt,Ct,ht){Ee.isVector4?Dt.set(Ee.x,Ee.y,Ee.z,Ee.w):Dt.set(Ee,mt,Ct,ht),en.scissor(ce.copy(Dt).multiplyScalar(Ne).floor())},this.getScissorTest=function(){return Ze},this.setScissorTest=function(Ee){en.setScissorTest(Ze=Ee)},this.setOpaqueSort=function(Ee){$e=Ee},this.setTransparentSort=function(Ee){et=Ee},this.getClearColor=function(Ee){return Ee.copy(zt.getClearColor())},this.setClearColor=function(){zt.setClearColor.apply(zt,arguments)},this.getClearAlpha=function(){return zt.getClearAlpha()},this.setClearAlpha=function(){zt.setClearAlpha.apply(zt,arguments)},this.clear=function(Ee=!0,mt=!0,Ct=!0){let ht=0;Ee&&(ht|=16384),mt&&(ht|=256),Ct&&(ht|=1024),je.clear(ht)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",_t,!1),o.removeEventListener("webglcontextrestored",Yt,!1),o.removeEventListener("webglcontextcreationerror",wn,!1),we.dispose(),ve.dispose(),wt.dispose(),En.dispose(),cn.dispose(),dt.dispose(),yn.dispose(),In.dispose(),Ot.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",qn),qe.removeEventListener("sessionend",br),Ve&&(Ve.dispose(),Ve=null),Nr.stop()},this.renderBufferDirect=function(Ee,mt,Ct,ht,Gt,Fn){null===mt&&(mt=Et);const Nn=Gt.isMesh&&Gt.matrixWorld.determinant()<0,Zn=function fn(Ee,mt,Ct,ht,Gt){!0!==mt.isScene&&(mt=Et),Bt.resetTextureUnits();const Fn=mt.fog,Zn=null===ee?G.outputEncoding:!0===ee.isXRRenderTarget?ee.texture.encoding:Wi,Mi=(ht.isMeshStandardMaterial?cn:En).get(ht.envMap||(ht.isMeshStandardMaterial?mt.environment:null)),_i=!0===ht.vertexColors&&!!Ct.attributes.color&&4===Ct.attributes.color.itemSize,Gi=!!ht.normalMap&&!!Ct.attributes.tangent,vi=!!Ct.morphAttributes.position,li=!!Ct.morphAttributes.normal,Zo=!!Ct.morphAttributes.color,jr=ht.toneMapped?G.toneMapping:wc,$c=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,Ns=void 0!==$c?$c.length:0,hr=wt.get(ht),Xp=B.state.lights;!0!==bt||!0!==tn&&Ee===xe||lt.setState(ht,Ee,Ee===xe&&ht.id===he);let Er=!1;ht.version===hr.__version?(hr.needsLights&&hr.lightsStateVersion!==Xp.state.version||hr.outputEncoding!==Zn||Gt.isInstancedMesh&&!1===hr.instancing||!Gt.isInstancedMesh&&!0===hr.instancing||Gt.isSkinnedMesh&&!1===hr.skinning||!Gt.isSkinnedMesh&&!0===hr.skinning||hr.envMap!==Mi||!0===ht.fog&&hr.fog!==Fn||void 0!==hr.numClippingPlanes&&(hr.numClippingPlanes!==lt.numPlanes||hr.numIntersection!==lt.numIntersection)||hr.vertexAlphas!==_i||hr.vertexTangents!==Gi||hr.morphTargets!==vi||hr.morphNormals!==li||hr.morphColors!==Zo||hr.toneMapping!==jr||!0===Nt.isWebGL2&&hr.morphTargetsCount!==Ns)&&(Er=!0):(Er=!0,hr.__version=ht.version);let qa=hr.currentProgram;!0===Er&&(qa=Fe(ht,mt,Gt));let J0=!1,Lo=!1,S_=!1;const bo=qa.getUniforms(),Ef=hr.uniforms;if(en.useProgram(qa.program)&&(J0=!0,Lo=!0,S_=!0),ht.id!==he&&(he=ht.id,Lo=!0),J0||xe!==Ee){if(bo.setValue(je,"projectionMatrix",Ee.projectionMatrix),Nt.logarithmicDepthBuffer&&bo.setValue(je,"logDepthBufFC",2/(Math.log(Ee.far+1)/Math.LN2)),xe!==Ee&&(xe=Ee,Lo=!0,S_=!0),ht.isShaderMaterial||ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshStandardMaterial||ht.envMap){const yc=bo.map.cameraPosition;void 0!==yc&&yc.setValue(je,Ft.setFromMatrixPosition(Ee.matrixWorld))}(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial)&&bo.setValue(je,"isOrthographic",!0===Ee.isOrthographicCamera),(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial||ht.isShadowMaterial||Gt.isSkinnedMesh)&&bo.setValue(je,"viewMatrix",Ee.matrixWorldInverse)}if(Gt.isSkinnedMesh){bo.setOptional(je,Gt,"bindMatrix"),bo.setOptional(je,Gt,"bindMatrixInverse");const yc=Gt.skeleton;yc&&(Nt.floatVertexTextures?(null===yc.boneTexture&&yc.computeBoneTexture(),bo.setValue(je,"boneTexture",yc.boneTexture,Bt),bo.setValue(je,"boneTextureSize",yc.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Fy=Ct.morphAttributes;if((void 0!==Fy.position||void 0!==Fy.normal||void 0!==Fy.color&&!0===Nt.isWebGL2)&&sn.update(Gt,Ct,qa),(Lo||hr.receiveShadow!==Gt.receiveShadow)&&(hr.receiveShadow=Gt.receiveShadow,bo.setValue(je,"receiveShadow",Gt.receiveShadow)),ht.isMeshGouraudMaterial&&null!==ht.envMap&&(Ef.envMap.value=Mi,Ef.flipEnvMap.value=Mi.isCubeTexture&&!1===Mi.isRenderTargetTexture?-1:1),Lo&&(bo.setValue(je,"toneMappingExposure",G.toneMappingExposure),hr.needsLights&&function Lt(Ee,mt){Ee.ambientLightColor.needsUpdate=mt,Ee.lightProbe.needsUpdate=mt,Ee.directionalLights.needsUpdate=mt,Ee.directionalLightShadows.needsUpdate=mt,Ee.pointLights.needsUpdate=mt,Ee.pointLightShadows.needsUpdate=mt,Ee.spotLights.needsUpdate=mt,Ee.spotLightShadows.needsUpdate=mt,Ee.rectAreaLights.needsUpdate=mt,Ee.hemisphereLights.needsUpdate=mt}(Ef,S_),Fn&&!0===ht.fog&&hn.refreshFogUniforms(Ef,Fn),hn.refreshMaterialUniforms(Ef,ht,Ne,Qe,Ve),Ha.upload(je,hr.uniformsList,Ef,Bt)),ht.isShaderMaterial&&!0===ht.uniformsNeedUpdate&&(Ha.upload(je,hr.uniformsList,Ef,Bt),ht.uniformsNeedUpdate=!1),ht.isSpriteMaterial&&bo.setValue(je,"center",Gt.center),bo.setValue(je,"modelViewMatrix",Gt.modelViewMatrix),bo.setValue(je,"normalMatrix",Gt.normalMatrix),bo.setValue(je,"modelMatrix",Gt.matrixWorld),ht.isShaderMaterial||ht.isRawShaderMaterial){const yc=ht.uniformsGroups;for(let Gx=0,UE=yc.length;Gx<UE;Gx++)if(Nt.isWebGL2){const Q0=yc[Gx];In.update(Q0,qa),In.bind(Q0,qa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qa}(Ee,mt,Ct,ht,Gt);en.setMaterial(ht,Nn);let Mi=Ct.index,_i=1;!0===ht.wireframe&&(Mi=ge.getWireframeAttribute(Ct),_i=2);const Gi=Ct.drawRange,vi=Ct.attributes.position;let li=Gi.start*_i,Zo=(Gi.start+Gi.count)*_i;null!==Fn&&(li=Math.max(li,Fn.start*_i),Zo=Math.min(Zo,(Fn.start+Fn.count)*_i)),null!==Mi?(li=Math.max(li,0),Zo=Math.min(Zo,Mi.count)):null!=vi&&(li=Math.max(li,0),Zo=Math.min(Zo,vi.count));const jr=Zo-li;if(jr<0||jr===1/0)return;yn.setup(Gt,ht,Zn,Ct,Mi);let $c,Ns=Xe;if(null!==Mi&&($c=Ae.get(Mi),Ns=vt,Ns.setIndex($c)),Gt.isMesh)!0===ht.wireframe?(en.setLineWidth(ht.wireframeLinewidth*an()),Ns.setMode(1)):Ns.setMode(4);else if(Gt.isLine){let hr=ht.linewidth;void 0===hr&&(hr=1),en.setLineWidth(hr*an()),Ns.setMode(Gt.isLineSegments?1:Gt.isLineLoop?2:3)}else Gt.isPoints?Ns.setMode(0):Gt.isSprite&&Ns.setMode(4);if(Gt.isInstancedMesh)Ns.renderInstances(li,jr,Gt.count);else if(Ct.isInstancedBufferGeometry){const Xp=Math.min(Ct.instanceCount,void 0!==Ct._maxInstanceCount?Ct._maxInstanceCount:1/0);Ns.renderInstances(li,jr,Xp)}else Ns.render(li,jr)},this.compile=function(Ee,mt){function Ct(ht,Gt,Fn){!0===ht.transparent&&ht.side===yt&&!1===ht.forceSinglePass?(ht.side=At,ht.needsUpdate=!0,Fe(ht,Gt,Fn),ht.side=Mt,ht.needsUpdate=!0,Fe(ht,Gt,Fn),ht.side=yt):Fe(ht,Gt,Fn)}B=ve.get(Ee),B.init(),$.push(B),Ee.traverseVisible(function(ht){ht.isLight&&ht.layers.test(mt.layers)&&(B.pushLight(ht),ht.castShadow&&B.pushShadow(ht))}),B.setupLights(G.useLegacyLights),Ee.traverse(function(ht){const Gt=ht.material;if(Gt)if(Array.isArray(Gt))for(let Fn=0;Fn<Gt.length;Fn++)Ct(Gt[Fn],Ee,ht);else Ct(Gt,Ee,ht)}),$.pop(),B=null};let vn=null;function qn(){Nr.stop()}function br(){Nr.start()}const Nr=new kM;function ko(Ee,mt,Ct,ht){if(!1===Ee.visible)return;if(Ee.layers.test(mt.layers))if(Ee.isGroup)Ct=Ee.renderOrder;else if(Ee.isLOD)!0===Ee.autoUpdate&&Ee.update(mt);else if(Ee.isLight)B.pushLight(Ee),Ee.castShadow&&B.pushShadow(Ee);else if(Ee.isSprite){if(!Ee.frustumCulled||at.intersectsSprite(Ee)){ht&&Ft.setFromMatrixPosition(Ee.matrixWorld).applyMatrix4(St);const Nn=dt.update(Ee),Zn=Ee.material;Zn.visible&&U.push(Ee,Nn,Zn,Ct,Ft.z,null)}}else if((Ee.isMesh||Ee.isLine||Ee.isPoints)&&(Ee.isSkinnedMesh&&Ee.skeleton.frame!==tt.render.frame&&(Ee.skeleton.update(),Ee.skeleton.frame=tt.render.frame),!Ee.frustumCulled||at.intersectsObject(Ee))){ht&&Ft.setFromMatrixPosition(Ee.matrixWorld).applyMatrix4(St);const Nn=dt.update(Ee),Zn=Ee.material;if(Array.isArray(Zn)){const Mi=Nn.groups;for(let _i=0,Gi=Mi.length;_i<Gi;_i++){const vi=Mi[_i],li=Zn[vi.materialIndex];li&&li.visible&&U.push(Ee,Nn,li,Ct,Ft.z,vi)}}else Zn.visible&&U.push(Ee,Nn,Zn,Ct,Ft.z,null)}const Fn=Ee.children;for(let Nn=0,Zn=Fn.length;Nn<Zn;Nn++)ko(Fn[Nn],mt,Ct,ht)}function Id(Ee,mt,Ct,ht){const Gt=Ee.opaque,Fn=Ee.transmissive,Nn=Ee.transparent;B.setupLightsView(Ct),!0===bt&&lt.setGlobalState(G.clippingPlanes,Ct),Fn.length>0&&function ho(Ee,mt,Ct,ht){if(null===Ve){const Zn=Nt.isWebGL2;Ve=new Gn(1024,1024,{generateMipmaps:!0,type:Ut.has("EXT_color_buffer_half_float")?Uf:Al,minFilter:Bd,samples:Zn&&!0===M?4:0})}const Gt=G.getRenderTarget();G.setRenderTarget(Ve),G.clear();const Fn=G.toneMapping;G.toneMapping=wc,$a(Ee,Ct,ht),Bt.updateMultisampleRenderTarget(Ve),Bt.updateRenderTargetMipmap(Ve);let Nn=!1;for(let Zn=0,Mi=mt.length;Zn<Mi;Zn++){const _i=mt[Zn],Gi=_i.object,vi=_i.geometry,li=_i.material,Zo=_i.group;if(li.side===yt&&Gi.layers.test(ht.layers)){const jr=li.side;li.side=At,li.needsUpdate=!0,Sl(Gi,Ct,ht,vi,li,Zo),li.side=jr,li.needsUpdate=!0,Nn=!0}}!0===Nn&&(Bt.updateMultisampleRenderTarget(Ve),Bt.updateRenderTargetMipmap(Ve)),G.setRenderTarget(Gt),G.toneMapping=Fn}(Gt,Fn,mt,Ct),ht&&en.viewport(fe.copy(ht)),Gt.length>0&&$a(Gt,mt,Ct),Fn.length>0&&$a(Fn,mt,Ct),Nn.length>0&&$a(Nn,mt,Ct),en.buffers.depth.setTest(!0),en.buffers.depth.setMask(!0),en.buffers.color.setMask(!0),en.setPolygonOffset(!1)}function $a(Ee,mt,Ct){const ht=!0===mt.isScene?mt.overrideMaterial:null;for(let Gt=0,Fn=Ee.length;Gt<Fn;Gt++){const Nn=Ee[Gt],Zn=Nn.object,Mi=Nn.geometry,_i=null===ht?Nn.material:ht,Gi=Nn.group;Zn.layers.test(Ct.layers)&&Sl(Zn,mt,Ct,Mi,_i,Gi)}}function Sl(Ee,mt,Ct,ht,Gt,Fn){Ee.onBeforeRender(G,mt,Ct,ht,Gt,Fn),Ee.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,Ee.matrixWorld),Ee.normalMatrix.getNormalMatrix(Ee.modelViewMatrix),Gt.onBeforeRender(G,mt,Ct,ht,Ee,Fn),!0===Gt.transparent&&Gt.side===yt&&!1===Gt.forceSinglePass?(Gt.side=At,Gt.needsUpdate=!0,G.renderBufferDirect(Ct,mt,ht,Gt,Ee,Fn),Gt.side=Mt,Gt.needsUpdate=!0,G.renderBufferDirect(Ct,mt,ht,Gt,Ee,Fn),Gt.side=yt):G.renderBufferDirect(Ct,mt,ht,Gt,Ee,Fn),Ee.onAfterRender(G,mt,Ct,ht,Gt,Fn)}function Fe(Ee,mt,Ct){!0!==mt.isScene&&(mt=Et);const ht=wt.get(Ee),Gt=B.state.lights,Nn=Gt.state.version,Zn=Ot.getParameters(Ee,Gt.state,B.state.shadowsArray,mt,Ct),Mi=Ot.getProgramCacheKey(Zn);let _i=ht.programs;ht.environment=Ee.isMeshStandardMaterial?mt.environment:null,ht.fog=mt.fog,ht.envMap=(Ee.isMeshStandardMaterial?cn:En).get(Ee.envMap||ht.environment),void 0===_i&&(Ee.addEventListener("dispose",jn),_i=new Map,ht.programs=_i);let Gi=_i.get(Mi);if(void 0!==Gi){if(ht.currentProgram===Gi&&ht.lightsStateVersion===Nn)return Ht(Ee,Zn),Gi}else Zn.uniforms=Ot.getUniforms(Ee),Ee.onBuild(Ct,Zn,G),Ee.onBeforeCompile(Zn,G),Gi=Ot.acquireProgram(Zn,Mi),_i.set(Mi,Gi),ht.uniforms=Zn.uniforms;const vi=ht.uniforms;(!Ee.isShaderMaterial&&!Ee.isRawShaderMaterial||!0===Ee.clipping)&&(vi.clippingPlanes=lt.uniform),Ht(Ee,Zn),ht.needsLights=function _n(Ee){return Ee.isMeshLambertMaterial||Ee.isMeshToonMaterial||Ee.isMeshPhongMaterial||Ee.isMeshStandardMaterial||Ee.isShadowMaterial||Ee.isShaderMaterial&&!0===Ee.lights}(Ee),ht.lightsStateVersion=Nn,ht.needsLights&&(vi.ambientLightColor.value=Gt.state.ambient,vi.lightProbe.value=Gt.state.probe,vi.directionalLights.value=Gt.state.directional,vi.directionalLightShadows.value=Gt.state.directionalShadow,vi.spotLights.value=Gt.state.spot,vi.spotLightShadows.value=Gt.state.spotShadow,vi.rectAreaLights.value=Gt.state.rectArea,vi.ltc_1.value=Gt.state.rectAreaLTC1,vi.ltc_2.value=Gt.state.rectAreaLTC2,vi.pointLights.value=Gt.state.point,vi.pointLightShadows.value=Gt.state.pointShadow,vi.hemisphereLights.value=Gt.state.hemi,vi.directionalShadowMap.value=Gt.state.directionalShadowMap,vi.directionalShadowMatrix.value=Gt.state.directionalShadowMatrix,vi.spotShadowMap.value=Gt.state.spotShadowMap,vi.spotLightMatrix.value=Gt.state.spotLightMatrix,vi.spotLightMap.value=Gt.state.spotLightMap,vi.pointShadowMap.value=Gt.state.pointShadowMap,vi.pointShadowMatrix.value=Gt.state.pointShadowMatrix);const li=Gi.getUniforms(),Zo=Ha.seqWithValue(li.seq,vi);return ht.currentProgram=Gi,ht.uniformsList=Zo,Gi}function Ht(Ee,mt){const Ct=wt.get(Ee);Ct.outputEncoding=mt.outputEncoding,Ct.instancing=mt.instancing,Ct.skinning=mt.skinning,Ct.morphTargets=mt.morphTargets,Ct.morphNormals=mt.morphNormals,Ct.morphColors=mt.morphColors,Ct.morphTargetsCount=mt.morphTargetsCount,Ct.numClippingPlanes=mt.numClippingPlanes,Ct.numIntersection=mt.numClipIntersection,Ct.vertexAlphas=mt.vertexAlphas,Ct.vertexTangents=mt.vertexTangents,Ct.toneMapping=mt.toneMapping}Nr.setAnimationLoop(function Hn(Ee){vn&&vn(Ee)}),typeof self<"u"&&Nr.setContext(self),this.setAnimationLoop=function(Ee){vn=Ee,qe.setAnimationLoop(Ee),null===Ee?Nr.stop():Nr.start()},qe.addEventListener("sessionstart",qn),qe.addEventListener("sessionend",br),this.render=function(Ee,mt){if(void 0===mt||!0===mt.isCamera){if(!0!==Q){if(!0===Ee.matrixWorldAutoUpdate&&Ee.updateMatrixWorld(),null===mt.parent&&!0===mt.matrixWorldAutoUpdate&&mt.updateMatrixWorld(),!0===qe.enabled&&!0===qe.isPresenting&&(!0===qe.cameraAutoUpdate&&qe.updateCamera(mt),mt=qe.getCamera()),!0===Ee.isScene&&Ee.onBeforeRender(G,Ee,mt,ee),B=ve.get(Ee,$.length),B.init(),$.push(B),St.multiplyMatrices(mt.projectionMatrix,mt.matrixWorldInverse),at.setFromProjectionMatrix(St),tn=this.localClippingEnabled,bt=lt.init(this.clippingPlanes,tn),U=we.get(Ee,j.length),U.init(),j.push(U),ko(Ee,mt,0,G.sortObjects),U.finish(),!0===G.sortObjects&&U.sort($e,et),!0===bt&&lt.beginShadows(),nt.render(B.state.shadowsArray,Ee,mt),!0===bt&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),zt.render(U,Ee),B.setupLights(G.useLegacyLights),mt.isArrayCamera){const ht=mt.cameras;for(let Gt=0,Fn=ht.length;Gt<Fn;Gt++){const Nn=ht[Gt];Id(U,Ee,Nn,Nn.viewport)}}else Id(U,Ee,mt);null!==ee&&(Bt.updateMultisampleRenderTarget(ee),Bt.updateRenderTargetMipmap(ee)),!0===Ee.isScene&&Ee.onAfterRender(G,Ee,mt),yn.resetDefaultState(),he=-1,xe=null,$.pop(),B=$.length>0?$[$.length-1]:null,j.pop(),U=j.length>0?j[j.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return J},this.getActiveMipmapLevel=function(){return Y},this.getRenderTarget=function(){return ee},this.setRenderTargetTextures=function(Ee,mt,Ct){wt.get(Ee.texture).__webglTexture=mt,wt.get(Ee.depthTexture).__webglTexture=Ct;const ht=wt.get(Ee);ht.__hasExternalTextures=!0,ht.__hasExternalTextures&&(ht.__autoAllocateDepthBuffer=void 0===Ct,ht.__autoAllocateDepthBuffer||!0===Ut.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ht.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ee,mt){const Ct=wt.get(Ee);Ct.__webglFramebuffer=mt,Ct.__useDefaultFramebuffer=void 0===mt},this.setRenderTarget=function(Ee,mt=0,Ct=0){ee=Ee,J=mt,Y=Ct;let ht=!0,Gt=null,Fn=!1,Nn=!1;if(Ee){const Mi=wt.get(Ee);void 0!==Mi.__useDefaultFramebuffer?(en.bindFramebuffer(36160,null),ht=!1):void 0===Mi.__webglFramebuffer?Bt.setupRenderTarget(Ee):Mi.__hasExternalTextures&&Bt.rebindTextures(Ee,wt.get(Ee.texture).__webglTexture,wt.get(Ee.depthTexture).__webglTexture);const _i=Ee.texture;(_i.isData3DTexture||_i.isDataArrayTexture||_i.isCompressedArrayTexture)&&(Nn=!0);const Gi=wt.get(Ee).__webglFramebuffer;Ee.isWebGLCubeRenderTarget?(Gt=Gi[mt],Fn=!0):Gt=Nt.isWebGL2&&Ee.samples>0&&!1===Bt.useMultisampledRTT(Ee)?wt.get(Ee).__webglMultisampledFramebuffer:Gi,fe.copy(Ee.viewport),ce.copy(Ee.scissor),de=Ee.scissorTest}else fe.copy(Pt).multiplyScalar(Ne).floor(),ce.copy(Dt).multiplyScalar(Ne).floor(),de=Ze;if(en.bindFramebuffer(36160,Gt)&&Nt.drawBuffers&&ht&&en.drawBuffers(Ee,Gt),en.viewport(fe),en.scissor(ce),en.setScissorTest(de),Fn){const Mi=wt.get(Ee.texture);je.framebufferTexture2D(36160,36064,34069+mt,Mi.__webglTexture,Ct)}else if(Nn){const Mi=wt.get(Ee.texture);je.framebufferTextureLayer(36160,36064,Mi.__webglTexture,Ct||0,mt||0)}he=-1},this.readRenderTargetPixels=function(Ee,mt,Ct,ht,Gt,Fn,Nn){if(!Ee||!Ee.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Zn=wt.get(Ee).__webglFramebuffer;if(Ee.isWebGLCubeRenderTarget&&void 0!==Nn&&(Zn=Zn[Nn]),Zn){en.bindFramebuffer(36160,Zn);try{const Mi=Ee.texture,_i=Mi.format,Gi=Mi.type;if(_i!==Ec&&pt.convert(_i)!==je.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const vi=Gi===Uf&&(Ut.has("EXT_color_buffer_half_float")||Nt.isWebGL2&&Ut.has("EXT_color_buffer_float"));if(!(Gi===Al||pt.convert(Gi)===je.getParameter(35738)||Gi===Sc&&(Nt.isWebGL2||Ut.has("OES_texture_float")||Ut.has("WEBGL_color_buffer_float"))||vi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");mt>=0&&mt<=Ee.width-ht&&Ct>=0&&Ct<=Ee.height-Gt&&je.readPixels(mt,Ct,ht,Gt,pt.convert(_i),pt.convert(Gi),Fn)}finally{const Mi=null!==ee?wt.get(ee).__webglFramebuffer:null;en.bindFramebuffer(36160,Mi)}}},this.copyFramebufferToTexture=function(Ee,mt,Ct=0){const ht=Math.pow(2,-Ct),Gt=Math.floor(mt.image.width*ht),Fn=Math.floor(mt.image.height*ht);Bt.setTexture2D(mt,0),je.copyTexSubImage2D(3553,Ct,0,0,Ee.x,Ee.y,Gt,Fn),en.unbindTexture()},this.copyTextureToTexture=function(Ee,mt,Ct,ht=0){const Gt=mt.image.width,Fn=mt.image.height,Nn=pt.convert(Ct.format),Zn=pt.convert(Ct.type);Bt.setTexture2D(Ct,0),je.pixelStorei(37440,Ct.flipY),je.pixelStorei(37441,Ct.premultiplyAlpha),je.pixelStorei(3317,Ct.unpackAlignment),mt.isDataTexture?je.texSubImage2D(3553,ht,Ee.x,Ee.y,Gt,Fn,Nn,Zn,mt.image.data):mt.isCompressedTexture?je.compressedTexSubImage2D(3553,ht,Ee.x,Ee.y,mt.mipmaps[0].width,mt.mipmaps[0].height,Nn,mt.mipmaps[0].data):je.texSubImage2D(3553,ht,Ee.x,Ee.y,Nn,Zn,mt.image),0===ht&&Ct.generateMipmaps&&je.generateMipmap(3553),en.unbindTexture()},this.copyTextureToTexture3D=function(Ee,mt,Ct,ht,Gt=0){if(G.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Fn=Ee.max.x-Ee.min.x+1,Nn=Ee.max.y-Ee.min.y+1,Zn=Ee.max.z-Ee.min.z+1,Mi=pt.convert(ht.format),_i=pt.convert(ht.type);let Gi;if(ht.isData3DTexture)Bt.setTexture3D(ht,0),Gi=32879;else{if(!ht.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Bt.setTexture2DArray(ht,0),Gi=35866}je.pixelStorei(37440,ht.flipY),je.pixelStorei(37441,ht.premultiplyAlpha),je.pixelStorei(3317,ht.unpackAlignment);const vi=je.getParameter(3314),li=je.getParameter(32878),Zo=je.getParameter(3316),jr=je.getParameter(3315),$c=je.getParameter(32877),Ns=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;je.pixelStorei(3314,Ns.width),je.pixelStorei(32878,Ns.height),je.pixelStorei(3316,Ee.min.x),je.pixelStorei(3315,Ee.min.y),je.pixelStorei(32877,Ee.min.z),Ct.isDataTexture||Ct.isData3DTexture?je.texSubImage3D(Gi,Gt,mt.x,mt.y,mt.z,Fn,Nn,Zn,Mi,_i,Ns.data):Ct.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),je.compressedTexSubImage3D(Gi,Gt,mt.x,mt.y,mt.z,Fn,Nn,Zn,Mi,Ns.data)):je.texSubImage3D(Gi,Gt,mt.x,mt.y,mt.z,Fn,Nn,Zn,Mi,_i,Ns),je.pixelStorei(3314,vi),je.pixelStorei(32878,li),je.pixelStorei(3316,Zo),je.pixelStorei(3315,jr),je.pixelStorei(32877,$c),0===Gt&&ht.generateMipmaps&&je.generateMipmap(Gi),en.unbindTexture()},this.initTexture=function(Ee){Ee.isCubeTexture?Bt.setTextureCube(Ee,0):Ee.isData3DTexture?Bt.setTexture3D(Ee,0):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?Bt.setTexture2DArray(Ee,0):Bt.setTexture2D(Ee,0),en.unbindTexture()},this.resetState=function(){J=0,Y=0,ee=null,en.reset(),yn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(i){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!i}}function $o(p,i,o){return Vp(p)?new p.constructor(p.subarray(i,void 0!==o?o:p.length)):p.slice(i,o)}function mh(p,i,o){return!p||!o&&p.constructor===i?p:"number"==typeof i.BYTES_PER_ELEMENT?new i(p):Array.prototype.slice.call(p)}function Vp(p){return ArrayBuffer.isView(p)&&!(p instanceof DataView)}(class yp extends Mu{}).prototype.isWebGL1Renderer=!0;class og{constructor(i,o,u,f){this.parameterPositions=i,this._cachedIndex=0,this.resultBuffer=void 0!==f?f:new o.constructor(u),this.sampleValues=o,this.valueSize=u,this.settings=null,this.DefaultSettings_={}}evaluate(i){const o=this.parameterPositions;let u=this._cachedIndex,f=o[u],_=o[u-1];e:{t:{let x;n:{i:if(!(i<f)){for(let M=u+2;;){if(void 0===f){if(i<_)break i;return u=o.length,this._cachedIndex=u,this.copySampleValue_(u-1)}if(u===M)break;if(_=f,f=o[++u],i<f)break t}x=o.length;break n}if(i>=_)break e;{const M=o[1];i<M&&(u=2,_=M);for(let E=u-2;;){if(void 0===_)return this._cachedIndex=0,this.copySampleValue_(0);if(u===E)break;if(f=_,_=o[--u-1],i>=_)break t}x=u,u=0}}for(;u<x;){const M=u+x>>>1;i<o[M]?x=M:u=M+1}if(f=o[u],_=o[u-1],void 0===_)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===f)return u=o.length,this._cachedIndex=u,this.copySampleValue_(u-1)}this._cachedIndex=u,this.intervalChanged_(u,_,f)}return this.interpolate_(u,_,i,f)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(i){const o=this.resultBuffer,u=this.sampleValues,f=this.valueSize,_=i*f;for(let x=0;x!==f;++x)o[x]=u[_+x];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class H0 extends og{constructor(i,o,u,f){super(i,o,u,f),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(i,o,u){const f=this.parameterPositions;let _=i-2,x=i+1,M=f[_],E=f[x];if(void 0===M)switch(this.getSettings_().endingStart){case 2401:_=i,M=2*o-u;break;case 2402:_=f.length-2,M=o+f[_]-f[_+1];break;default:_=i,M=u}if(void 0===E)switch(this.getSettings_().endingEnd){case 2401:x=i,E=2*u-o;break;case 2402:x=1,E=u+f[1]-f[0];break;default:x=i-1,E=o}const D=.5*(u-o),k=this.valueSize;this._weightPrev=D/(o-M),this._weightNext=D/(E-u),this._offsetPrev=_*k,this._offsetNext=x*k}interpolate_(i,o,u,f){const _=this.resultBuffer,x=this.sampleValues,M=this.valueSize,E=i*M,D=E-M,k=this._offsetPrev,O=this._offsetNext,I=this._weightPrev,U=this._weightNext,B=(u-o)/(f-o),j=B*B,$=j*B,G=-I*$+2*I*j-I*B,Q=(1+I)*$+(-1.5-2*I)*j+(-.5+I)*B+1,J=(-1-U)*$+(1.5+U)*j+.5*B,Y=U*$-U*j;for(let ee=0;ee!==M;++ee)_[ee]=G*x[k+ee]+Q*x[D+ee]+J*x[E+ee]+Y*x[O+ee];return _}}class G0 extends og{constructor(i,o,u,f){super(i,o,u,f)}interpolate_(i,o,u,f){const _=this.resultBuffer,x=this.sampleValues,M=this.valueSize,E=i*M,D=E-M,k=(u-o)/(f-o),O=1-k;for(let I=0;I!==M;++I)_[I]=x[D+I]*O+x[E+I]*k;return _}}class ja extends og{constructor(i,o,u,f){super(i,o,u,f)}interpolate_(i){return this.copySampleValue_(i-1)}}class us{constructor(i,o,u,f){if(void 0===i)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+i);this.name=i,this.times=mh(o,this.TimeBufferType),this.values=mh(u,this.ValueBufferType),this.setInterpolation(f||this.DefaultInterpolation)}static toJSON(i){const o=i.constructor;let u;if(o.toJSON!==this.toJSON)u=o.toJSON(i);else{u={name:i.name,times:mh(i.times,Array),values:mh(i.values,Array)};const f=i.getInterpolation();f!==i.DefaultInterpolation&&(u.interpolation=f)}return u.type=i.ValueTypeName,u}InterpolantFactoryMethodDiscrete(i){return new ja(this.times,this.values,this.getValueSize(),i)}InterpolantFactoryMethodLinear(i){return new G0(this.times,this.values,this.getValueSize(),i)}InterpolantFactoryMethodSmooth(i){return new H0(this.times,this.values,this.getValueSize(),i)}setInterpolation(i){let o;switch(i){case 2300:o=this.InterpolantFactoryMethodDiscrete;break;case 2301:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){const u="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(i===this.DefaultInterpolation)throw new Error(u);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",u),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(i){if(0!==i){const o=this.times;for(let u=0,f=o.length;u!==f;++u)o[u]+=i}return this}scale(i){if(1!==i){const o=this.times;for(let u=0,f=o.length;u!==f;++u)o[u]*=i}return this}trim(i,o){const u=this.times,f=u.length;let _=0,x=f-1;for(;_!==f&&u[_]<i;)++_;for(;-1!==x&&u[x]>o;)--x;if(++x,0!==_||x!==f){_>=x&&(x=Math.max(x,1),_=x-1);const M=this.getValueSize();this.times=$o(u,_,x),this.values=$o(this.values,_*M,x*M)}return this}validate(){let i=!0;const o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),i=!1);const u=this.times,f=this.values,_=u.length;0===_&&(console.error("THREE.KeyframeTrack: Track is empty.",this),i=!1);let x=null;for(let M=0;M!==_;M++){const E=u[M];if("number"==typeof E&&isNaN(E)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,M,E),i=!1;break}if(null!==x&&x>E){console.error("THREE.KeyframeTrack: Out of order keys.",this,M,E,x),i=!1;break}x=E}if(void 0!==f&&Vp(f))for(let M=0,E=f.length;M!==E;++M){const D=f[M];if(isNaN(D)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,M,D),i=!1;break}}return i}optimize(){const i=$o(this.times),o=$o(this.values),u=this.getValueSize(),f=2302===this.getInterpolation(),_=i.length-1;let x=1;for(let M=1;M<_;++M){let E=!1;const D=i[M];if(D!==i[M+1]&&(1!==M||D!==i[0]))if(f)E=!0;else{const O=M*u,I=O-u,U=O+u;for(let B=0;B!==u;++B){const j=o[O+B];if(j!==o[I+B]||j!==o[U+B]){E=!0;break}}}if(E){if(M!==x){i[x]=i[M];const O=M*u,I=x*u;for(let U=0;U!==u;++U)o[I+U]=o[O+U]}++x}}if(_>0){i[x]=i[_];for(let M=_*u,E=x*u,D=0;D!==u;++D)o[E+D]=o[M+D];++x}return x!==i.length?(this.times=$o(i,0,x),this.values=$o(o,0,x*u)):(this.times=i,this.values=o),this}clone(){const i=$o(this.times,0),o=$o(this.values,0),f=new(0,this.constructor)(this.name,i,o);return f.createInterpolant=this.createInterpolant,f}}us.prototype.TimeBufferType=Float32Array,us.prototype.ValueBufferType=Float32Array,us.prototype.DefaultInterpolation=2301;class Pu extends us{}Pu.prototype.ValueTypeName="bool",Pu.prototype.ValueBufferType=Array,Pu.prototype.DefaultInterpolation=2300,Pu.prototype.InterpolantFactoryMethodLinear=void 0,Pu.prototype.InterpolantFactoryMethodSmooth=void 0;(class gh extends us{}).prototype.ValueTypeName="color";(class _h extends us{}).prototype.ValueTypeName="number";class ku extends og{constructor(i,o,u,f){super(i,o,u,f)}interpolate_(i,o,u,f){const _=this.resultBuffer,x=this.sampleValues,M=this.valueSize,E=(u-o)/(f-o);let D=i*M;for(let k=D+M;D!==k;D+=4)Pe.slerpFlat(_,0,x,D-M,x,D,E);return _}}class gc extends us{InterpolantFactoryMethodLinear(i){return new ku(this.times,this.values,this.getValueSize(),i)}}gc.prototype.ValueTypeName="quaternion",gc.prototype.DefaultInterpolation=2301,gc.prototype.InterpolantFactoryMethodSmooth=void 0;class Lu extends us{}Lu.prototype.ValueTypeName="string",Lu.prototype.ValueBufferType=Array,Lu.prototype.DefaultInterpolation=2300,Lu.prototype.InterpolantFactoryMethodLinear=void 0,Lu.prototype.InterpolantFactoryMethodSmooth=void 0;(class vh extends us{}).prototype.ValueTypeName="vector";class Xl extends Error{constructor(i,o){super(i),this.response=o}}const $n="\\[\\]\\.:\\/",_c=new RegExp("["+$n+"]","g"),Jl="[^"+$n+"]",g_="[^"+$n.replace("\\.","")+"]",Uu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Jl)+/(WCOD+)?/.source.replace("WCOD",g_)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Jl)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Jl)+"$"),Ei=["material","materials","bones","map"];class ds{constructor(i,o,u){const f=u||Rs.parseTrackName(o);this._targetGroup=i,this._bindings=i.subscribe_(o,f)}getValue(i,o){this.bind();const f=this._bindings[this._targetGroup.nCachedObjects_];void 0!==f&&f.getValue(i,o)}setValue(i,o){const u=this._bindings;for(let f=this._targetGroup.nCachedObjects_,_=u.length;f!==_;++f)u[f].setValue(i,o)}bind(){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,u=i.length;o!==u;++o)i[o].bind()}unbind(){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,u=i.length;o!==u;++o)i[o].unbind()}}let Rs=(()=>{class p{constructor(o,u,f){this.path=u,this.parsedPath=f||p.parseTrackName(u),this.node=p.findNode(o,this.parsedPath.nodeName),this.rootNode=o,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(o,u,f){return o&&o.isAnimationObjectGroup?new p.Composite(o,u,f):new p(o,u,f)}static sanitizeNodeName(o){return o.replace(/\s/g,"_").replace(_c,"")}static parseTrackName(o){const u=Uu.exec(o);if(null===u)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const f={nodeName:u[2],objectName:u[3],objectIndex:u[4],propertyName:u[5],propertyIndex:u[6]},_=f.nodeName&&f.nodeName.lastIndexOf(".");if(void 0!==_&&-1!==_){const x=f.nodeName.substring(_+1);-1!==Ei.indexOf(x)&&(f.nodeName=f.nodeName.substring(0,_),f.objectName=x)}if(null===f.propertyName||0===f.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return f}static findNode(o,u){if(void 0===u||""===u||"."===u||-1===u||u===o.name||u===o.uuid)return o;if(o.skeleton){const f=o.skeleton.getBoneByName(u);if(void 0!==f)return f}if(o.children){const f=function(x){for(let M=0;M<x.length;M++){const E=x[M];if(E.name===u||E.uuid===u)return E;const D=f(E.children);if(D)return D}return null},_=f(o.children);if(_)return _}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(o,u){o[u]=this.targetObject[this.propertyName]}_getValue_array(o,u){const f=this.resolvedProperty;for(let _=0,x=f.length;_!==x;++_)o[u++]=f[_]}_getValue_arrayElement(o,u){o[u]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(o,u){this.resolvedProperty.toArray(o,u)}_setValue_direct(o,u){this.targetObject[this.propertyName]=o[u]}_setValue_direct_setNeedsUpdate(o,u){this.targetObject[this.propertyName]=o[u],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(o,u){this.targetObject[this.propertyName]=o[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(o,u){const f=this.resolvedProperty;for(let _=0,x=f.length;_!==x;++_)f[_]=o[u++]}_setValue_array_setNeedsUpdate(o,u){const f=this.resolvedProperty;for(let _=0,x=f.length;_!==x;++_)f[_]=o[u++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(o,u){const f=this.resolvedProperty;for(let _=0,x=f.length;_!==x;++_)f[_]=o[u++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(o,u){this.resolvedProperty[this.propertyIndex]=o[u]}_setValue_arrayElement_setNeedsUpdate(o,u){this.resolvedProperty[this.propertyIndex]=o[u],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(o,u){this.resolvedProperty[this.propertyIndex]=o[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(o,u){this.resolvedProperty.fromArray(o,u)}_setValue_fromArray_setNeedsUpdate(o,u){this.resolvedProperty.fromArray(o,u),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(o,u){this.resolvedProperty.fromArray(o,u),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(o,u){this.bind(),this.getValue(o,u)}_setValue_unbound(o,u){this.bind(),this.setValue(o,u)}bind(){let o=this.node;const u=this.parsedPath,f=u.objectName,_=u.propertyName;let x=u.propertyIndex;if(o||(o=p.findNode(this.rootNode,u.nodeName),this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(f){let k=u.objectIndex;switch(f){case"materials":if(!o.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!o.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);o=o.material.materials;break;case"bones":if(!o.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);o=o.skeleton.bones;for(let O=0;O<o.length;O++)if(o[O].name===k){k=O;break}break;case"map":if("map"in o){o=o.map;break}if(!o.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!o.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);o=o.material.map;break;default:if(void 0===o[f])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);o=o[f]}if(void 0!==k){if(void 0===o[k])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);o=o[k]}}const M=o[_];if(void 0===M)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u.nodeName+"."+_+" but it wasn't found.",o);let E=this.Versioning.None;this.targetObject=o,void 0!==o.needsUpdate?E=this.Versioning.NeedsUpdate:void 0!==o.matrixWorldNeedsUpdate&&(E=this.Versioning.MatrixWorldNeedsUpdate);let D=this.BindingType.Direct;if(void 0!==x){if("morphTargetInfluences"===_){if(!o.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!o.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==o.morphTargetDictionary[x]&&(x=o.morphTargetDictionary[x])}D=this.BindingType.ArrayElement,this.resolvedProperty=M,this.propertyIndex=x}else void 0!==M.fromArray&&void 0!==M.toArray?(D=this.BindingType.HasFromToArray,this.resolvedProperty=M):Array.isArray(M)?(D=this.BindingType.EntireArray,this.resolvedProperty=M):this.propertyName=_;this.getValue=this.GetterByBindingType[D],this.setValue=this.SetterByBindingTypeAndVersioning[D][E]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return p.Composite=ds,p})();Rs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Rs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Rs.prototype.GetterByBindingType=[Rs.prototype._getValue_direct,Rs.prototype._getValue_array,Rs.prototype._getValue_arrayElement,Rs.prototype._getValue_toArray],Rs.prototype.SetterByBindingTypeAndVersioning=[[Rs.prototype._setValue_direct,Rs.prototype._setValue_direct_setNeedsUpdate,Rs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rs.prototype._setValue_array,Rs.prototype._setValue_array_setNeedsUpdate,Rs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rs.prototype._setValue_arrayElement,Rs.prototype._setValue_arrayElement_setNeedsUpdate,Rs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rs.prototype._setValue_fromArray,Rs.prototype._setValue_fromArray_setNeedsUpdate,Rs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class hg{constructor(i=1,o=0,u=0){return this.radius=i,this.phi=o,this.theta=u,this}set(i,o,u){return this.radius=i,this.phi=o,this.theta=u,this}copy(i){return this.radius=i.radius,this.phi=i.phi,this.theta=i.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(i){return this.setFromCartesianCoords(i.x,i.y,i.z)}setFromCartesianCoords(i,o,u){return this.radius=Math.sqrt(i*i+o*o+u*u),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(i,u),this.phi=Math.acos(Vs(o/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"151"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="151");const s={type:"change"},l={type:"start"},m={type:"end"};class b extends Ys{constructor(i,o){super(),this.object=i,this.domElement=o,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Re,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qt.ROTATE,MIDDLE:Qt.DOLLY,RIGHT:Qt.PAN},this.touches={ONE:nn.ROTATE,TWO:nn.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return M.phi},this.getAzimuthalAngle=function(){return M.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Xe){Xe.addEventListener("keydown",Ot),this._domElementKeyEvents=Xe},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Ot),this._domElementKeyEvents=null},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(s),u.update(),_=f.NONE},this.update=function(){const Xe=new Re,vt=(new Pe).setFromUnitVectors(i.up,new Re(0,1,0)),pt=vt.clone().invert(),yn=new Re,In=new Pe,Wn=2*Math.PI;return function(){const _t=u.object.position;Xe.copy(_t).sub(u.target),Xe.applyQuaternion(vt),M.setFromVector3(Xe),u.autoRotate&&_===f.NONE&&ce(function xe(){return 2*Math.PI/60/60*u.autoRotateSpeed}()),u.enableDamping?(M.theta+=E.theta*u.dampingFactor,M.phi+=E.phi*u.dampingFactor):(M.theta+=E.theta,M.phi+=E.phi);let Yt=u.minAzimuthAngle,wn=u.maxAzimuthAngle;return isFinite(Yt)&&isFinite(wn)&&(Yt<-Math.PI?Yt+=Wn:Yt>Math.PI&&(Yt-=Wn),wn<-Math.PI?wn+=Wn:wn>Math.PI&&(wn-=Wn),M.theta=Yt<=wn?Math.max(Yt,Math.min(wn,M.theta)):M.theta>(Yt+wn)/2?Math.max(Yt,M.theta):Math.min(wn,M.theta)),M.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,M.phi)),M.makeSafe(),M.radius*=D,M.radius=Math.max(u.minDistance,Math.min(u.maxDistance,M.radius)),!0===u.enableDamping?u.target.addScaledVector(k,u.dampingFactor):u.target.add(k),Xe.setFromSpherical(M),Xe.applyQuaternion(pt),_t.copy(u.target).add(Xe),u.object.lookAt(u.target),!0===u.enableDamping?(E.theta*=1-u.dampingFactor,E.phi*=1-u.dampingFactor,k.multiplyScalar(1-u.dampingFactor)):(E.set(0,0,0),k.set(0,0,0)),D=1,!!(O||yn.distanceToSquared(u.object.position)>x||8*(1-In.dot(u.object.quaternion))>x)&&(u.dispatchEvent(s),yn.copy(u.object.position),In.copy(u.object.quaternion),O=!1,!0)}}(),this.dispose=function(){u.domElement.removeEventListener("contextmenu",ve),u.domElement.removeEventListener("pointerdown",Bt),u.domElement.removeEventListener("pointercancel",cn),u.domElement.removeEventListener("wheel",dt),u.domElement.removeEventListener("pointermove",En),u.domElement.removeEventListener("pointerup",cn),null!==u._domElementKeyEvents&&(u._domElementKeyEvents.removeEventListener("keydown",Ot),u._domElementKeyEvents=null)};const u=this,f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let _=f.NONE;const x=1e-6,M=new hg,E=new hg;let D=1;const k=new Re;let O=!1;const I=new Wt,U=new Wt,B=new Wt,j=new Wt,$=new Wt,G=new Wt,Q=new Wt,J=new Wt,Y=new Wt,ee=[],he={};function fe(){return Math.pow(.95,u.zoomSpeed)}function ce(Xe){E.theta-=Xe}function de(Xe){E.phi-=Xe}const Ye=function(){const Xe=new Re;return function(pt,yn){Xe.setFromMatrixColumn(yn,0),Xe.multiplyScalar(-pt),k.add(Xe)}}(),Qe=function(){const Xe=new Re;return function(pt,yn){!0===u.screenSpacePanning?Xe.setFromMatrixColumn(yn,1):(Xe.setFromMatrixColumn(yn,0),Xe.crossVectors(u.object.up,Xe)),Xe.multiplyScalar(pt),k.add(Xe)}}(),Ne=function(){const Xe=new Re;return function(pt,yn){const In=u.domElement;if(u.object.isPerspectiveCamera){Xe.copy(u.object.position).sub(u.target);let qe=Xe.length();qe*=Math.tan(u.object.fov/2*Math.PI/180),Ye(2*pt*qe/In.clientHeight,u.object.matrix),Qe(2*yn*qe/In.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(Ye(pt*(u.object.right-u.object.left)/u.object.zoom/In.clientWidth,u.object.matrix),Qe(yn*(u.object.top-u.object.bottom)/u.object.zoom/In.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function $e(Xe){u.object.isPerspectiveCamera?D/=Xe:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*Xe)),u.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function et(Xe){u.object.isPerspectiveCamera?D*=Xe:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/Xe)),u.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function Pt(Xe){I.set(Xe.clientX,Xe.clientY)}function Ze(Xe){j.set(Xe.clientX,Xe.clientY)}function Ft(){1===ee.length?I.set(ee[0].pageX,ee[0].pageY):I.set(.5*(ee[0].pageX+ee[1].pageX),.5*(ee[0].pageY+ee[1].pageY))}function Et(){1===ee.length?j.set(ee[0].pageX,ee[0].pageY):j.set(.5*(ee[0].pageX+ee[1].pageX),.5*(ee[0].pageY+ee[1].pageY))}function an(){const Xe=ee[0].pageX-ee[1].pageX,vt=ee[0].pageY-ee[1].pageY,pt=Math.sqrt(Xe*Xe+vt*vt);Q.set(0,pt)}function Ut(Xe){if(1==ee.length)U.set(Xe.pageX,Xe.pageY);else{const pt=sn(Xe);U.set(.5*(Xe.pageX+pt.x),.5*(Xe.pageY+pt.y))}B.subVectors(U,I).multiplyScalar(u.rotateSpeed);const vt=u.domElement;ce(2*Math.PI*B.x/vt.clientHeight),de(2*Math.PI*B.y/vt.clientHeight),I.copy(U)}function Nt(Xe){if(1===ee.length)$.set(Xe.pageX,Xe.pageY);else{const vt=sn(Xe);$.set(.5*(Xe.pageX+vt.x),.5*(Xe.pageY+vt.y))}G.subVectors($,j).multiplyScalar(u.panSpeed),Ne(G.x,G.y),j.copy($)}function en(Xe){const vt=sn(Xe),pt=Xe.pageX-vt.x,yn=Xe.pageY-vt.y,In=Math.sqrt(pt*pt+yn*yn);J.set(0,In),Y.set(0,Math.pow(J.y/Q.y,u.zoomSpeed)),$e(Y.y),Q.copy(J)}function Bt(Xe){!1!==u.enabled&&(0===ee.length&&(u.domElement.setPointerCapture(Xe.pointerId),u.domElement.addEventListener("pointermove",En),u.domElement.addEventListener("pointerup",cn)),function lt(Xe){ee.push(Xe)}(Xe),"touch"===Xe.pointerType?function hn(Xe){switch(zt(Xe),ee.length){case 1:switch(u.touches.ONE){case nn.ROTATE:if(!1===u.enableRotate)return;Ft(),_=f.TOUCH_ROTATE;break;case nn.PAN:if(!1===u.enablePan)return;Et(),_=f.TOUCH_PAN;break;default:_=f.NONE}break;case 2:switch(u.touches.TWO){case nn.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;(function je(){u.enableZoom&&an(),u.enablePan&&Et()})(),_=f.TOUCH_DOLLY_PAN;break;case nn.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;(function Tt(){u.enableZoom&&an(),u.enableRotate&&Ft()})(),_=f.TOUCH_DOLLY_ROTATE;break;default:_=f.NONE}break;default:_=f.NONE}_!==f.NONE&&u.dispatchEvent(l)}(Xe):function Ae(Xe){let vt;switch(Xe.button){case 0:vt=u.mouseButtons.LEFT;break;case 1:vt=u.mouseButtons.MIDDLE;break;case 2:vt=u.mouseButtons.RIGHT;break;default:vt=-1}switch(vt){case Qt.DOLLY:if(!1===u.enableZoom)return;(function Dt(Xe){Q.set(Xe.clientX,Xe.clientY)})(Xe),_=f.DOLLY;break;case Qt.ROTATE:if(Xe.ctrlKey||Xe.metaKey||Xe.shiftKey){if(!1===u.enablePan)return;Ze(Xe),_=f.PAN}else{if(!1===u.enableRotate)return;Pt(Xe),_=f.ROTATE}break;case Qt.PAN:if(Xe.ctrlKey||Xe.metaKey||Xe.shiftKey){if(!1===u.enableRotate)return;Pt(Xe),_=f.ROTATE}else{if(!1===u.enablePan)return;Ze(Xe),_=f.PAN}break;default:_=f.NONE}_!==f.NONE&&u.dispatchEvent(l)}(Xe))}function En(Xe){!1!==u.enabled&&("touch"===Xe.pointerType?function we(Xe){switch(zt(Xe),_){case f.TOUCH_ROTATE:if(!1===u.enableRotate)return;Ut(Xe),u.update();break;case f.TOUCH_PAN:if(!1===u.enablePan)return;Nt(Xe),u.update();break;case f.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;(function tt(Xe){u.enableZoom&&en(Xe),u.enablePan&&Nt(Xe)})(Xe),u.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;(function wt(Xe){u.enableZoom&&en(Xe),u.enableRotate&&Ut(Xe)})(Xe),u.update();break;default:_=f.NONE}}(Xe):function ge(Xe){switch(_){case f.ROTATE:if(!1===u.enableRotate)return;!function at(Xe){U.set(Xe.clientX,Xe.clientY),B.subVectors(U,I).multiplyScalar(u.rotateSpeed);const vt=u.domElement;ce(2*Math.PI*B.x/vt.clientHeight),de(2*Math.PI*B.y/vt.clientHeight),I.copy(U),u.update()}(Xe);break;case f.DOLLY:if(!1===u.enableZoom)return;!function bt(Xe){J.set(Xe.clientX,Xe.clientY),Y.subVectors(J,Q),Y.y>0?$e(fe()):Y.y<0&&et(fe()),Q.copy(J),u.update()}(Xe);break;case f.PAN:if(!1===u.enablePan)return;!function tn(Xe){$.set(Xe.clientX,Xe.clientY),G.subVectors($,j).multiplyScalar(u.panSpeed),Ne(G.x,G.y),j.copy($),u.update()}(Xe)}}(Xe))}function cn(Xe){(function nt(Xe){delete he[Xe.pointerId];for(let vt=0;vt<ee.length;vt++)if(ee[vt].pointerId==Xe.pointerId)return void ee.splice(vt,1)})(Xe),0===ee.length&&(u.domElement.releasePointerCapture(Xe.pointerId),u.domElement.removeEventListener("pointermove",En),u.domElement.removeEventListener("pointerup",cn)),u.dispatchEvent(m),_=f.NONE}function dt(Xe){!1===u.enabled||!1===u.enableZoom||_!==f.NONE||(Xe.preventDefault(),u.dispatchEvent(l),function Ve(Xe){Xe.deltaY<0?et(fe()):Xe.deltaY>0&&$e(fe()),u.update()}(Xe),u.dispatchEvent(m))}function Ot(Xe){!1===u.enabled||!1===u.enablePan||function St(Xe){let vt=!1;switch(Xe.code){case u.keys.UP:Xe.ctrlKey||Xe.metaKey||Xe.shiftKey?de(2*Math.PI*u.rotateSpeed/u.domElement.clientHeight):Ne(0,u.keyPanSpeed),vt=!0;break;case u.keys.BOTTOM:Xe.ctrlKey||Xe.metaKey||Xe.shiftKey?de(-2*Math.PI*u.rotateSpeed/u.domElement.clientHeight):Ne(0,-u.keyPanSpeed),vt=!0;break;case u.keys.LEFT:Xe.ctrlKey||Xe.metaKey||Xe.shiftKey?ce(2*Math.PI*u.rotateSpeed/u.domElement.clientHeight):Ne(u.keyPanSpeed,0),vt=!0;break;case u.keys.RIGHT:Xe.ctrlKey||Xe.metaKey||Xe.shiftKey?ce(-2*Math.PI*u.rotateSpeed/u.domElement.clientHeight):Ne(-u.keyPanSpeed,0),vt=!0}vt&&(Xe.preventDefault(),u.update())}(Xe)}function ve(Xe){!1!==u.enabled&&Xe.preventDefault()}function zt(Xe){let vt=he[Xe.pointerId];void 0===vt&&(vt=new Wt,he[Xe.pointerId]=vt),vt.set(Xe.pageX,Xe.pageY)}function sn(Xe){return he[(Xe.pointerId===ee[0].pointerId?ee[1]:ee[0]).pointerId]}u.domElement.addEventListener("contextmenu",ve),u.domElement.addEventListener("pointerdown",Bt),u.domElement.addEventListener("pointercancel",cn),u.domElement.addEventListener("wheel",dt,{passive:!1}),this.update()}}}},Fr=>{Fr(Fr.s=508)}]);